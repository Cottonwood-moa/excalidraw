import{$ as c1,$a as ec,$b as U1,$c as ab,$d as yc,$e as Kb,$f as u0,A as tn,Aa as v1,Ab as Ht,Ac as Vn,Ad as hb,Ae as kc,Af as ji,B as Hn,Ba as y1,Bb as Pi,Bc as dc,Bd as gb,Be as Lb,Bf as n0,C as rl,Ca as E1,Cb as Di,Cc as xl,Cd as Ui,Ce as ep,Cf as Dc,D as Su,Da as Lu,Db as le,Dc as vl,Dd as ut,De as Fr,Df as i0,E as Ws,Ea as rn,Eb as Fu,Ec as Gu,Ed as bb,Ee as Pb,Ef as Rc,F as nl,Fa as w1,Fb as pl,Fc as X1,Fd as xb,Fe as Ic,Ff as Nc,G as qe,Ga as C1,Gb as Te,Gc as yl,Gd as vb,Ge as Db,Gf as a0,H as Go,Ha as T1,Hb as Re,Hc as El,Hd as Kn,He as Il,Hf as Oc,I as Ir,Ia as wo,Ib as _r,Ic as Vu,Id as Or,Ie as tp,If as dr,J as _i,Ja as Pu,Jb as N1,Jc as q1,Jd as xc,Je as Rb,Jf as sp,K as Qg,Ka as Ko,Kb as Ar,Kc as mc,Kd as yb,Ke as Nb,Kf as l0,L as ku,La as ll,Lb as O1,Lc as zi,Ld as Eb,Le as Ob,Lf as Fc,M as Iu,Ma as Js,Mb as Ri,Mc as he,Md as $,Me as op,Mf as s0,N as il,Na as Un,Nb as F1,Nc as J1,Nd as ko,Ne as Mc,Nf as c0,O as e1,Oa as S1,Ob as cr,Oc as wl,Od as Ne,Oe as rp,Of as d6,P as t1,Pa as k1,Pb as gt,Pc as Q1,Pd as wb,Pe as np,Pf as mr,Q as Mr,Qa as Wn,Qb as Ni,Qc as eb,Qd as Yo,Qe as Fb,Qf as te,R as o1,Ra as tt,Rb as B1,Rc as Cl,Rd as dn,Re as Bb,Rf as ue,S as Pt,Sa as N,Sb as z1,Sc as $t,Sd as Zu,Se as zb,Sf as Xi,T as Gs,Ta as Ve,Tb as H1,Tc as uc,Td as Cb,Te as Hb,Tf as jn,U as r1,Ua as qt,Ub as ln,Uc as pc,Ud as vc,Ue as $b,Uf as Al,V as n1,Va as sl,Vb as ao,Vc as fc,Vd as Tl,Ve as Ub,Vf as cp,W as i1,Wa as cl,Wb as $1,Wc as tb,Wd as mn,We as Wb,Wf as d0,X as a1,Xa as Qs,Xb as Lr,Xc as ob,Xd as Tb,Xe as _c,Xf as dp,Y as l1,Ya as Du,Yb as sn,Yc as rb,Yd as Sb,Ye as Ml,Yf as mp,Z as s1,Za as Ru,Zb as fl,Zc as nb,Zd as kb,Ze as Gb,Zf as up,_ as $n,_a as Gn,_b as Jt,_c as ib,_d as Sl,_e as Vb,_f as m0,a as It,aa as d1,ab as I1,ac as hl,ad as at,ae as Wi,af as Yb,ag as p0,b as Wg,ba as m1,bb as M1,bc as gl,bd as Pr,be as Ec,bf as Zb,bg as f0,c as Bn,ca as Vs,cb as _1,cc as cn,cd as hc,ce as wc,cf as Ac,cg as h0,d as Gg,da as Ks,db as Ie,dc as bl,dd as lb,de as ju,df as jb,dg as g0,e as Vg,ea as Mu,eb as A1,ec as Bu,ed as sb,ee as Yn,ef as Xb,eg as pp,f as Sr,fa as u1,fb as tc,fc as zu,fd as cb,fe as Ib,ff as ip,fg as qi,g as Bs,ga as p1,gb as oc,gc as Hu,gd as Ku,ge as Gi,gf as Yi,gg as m6,h as zs,ha as f1,hb as Ai,hc as Oi,hd as db,he as Vi,hf as qb,hg as fp,i as Hs,ia as h1,ib as L1,ic as W1,id as Hi,ie as Ki,if as Jb,ig as hp,j as Kg,ja as g1,jb as Li,jc as G1,jd as Yu,je as Mb,jf as Qb,jg as be,k as Yg,ka as Ys,kb as dl,kc as V1,kd as mb,ke as Cc,kf as Lc,kg as gp,l as Zg,la as on,lb as Dt,lc as K1,ld as ub,le as Xu,lf as e0,lg as Ji,m as Wo,ma as b1,mb as nn,mc as Y1,md as Dr,me as qu,mf as Zi,mg as b0,n as $s,na as _u,nb as rc,nc as ac,nd as Co,ne as i6,nf as Zn,ng as bp,o as kr,oa as x1,ob as P1,oc as $u,od as Ke,oe as Ju,of as ap,og as Oe,p as jg,pa as Zs,pb as Nu,pc as lc,pd as gc,pe as kl,pf as _l,pg as x0,q as Xg,qa as Au,qb as sr,qc as Uu,qd as To,qf as a6,qg as xe,r as tl,ra as vo,rb as Ou,rc as Z1,rd as n6,rf as l6,rg as Qi,s as ol,sa as al,sb as nc,sc as Wu,sd as $i,sf as s6,sg as Fe,t as zn,ta as yo,tb as ot,tc as fe,td as So,tf as c6,tg as v0,u as Us,ua as js,ub as D1,uc as T,ud as Rr,uf as Pc,ug as Xn,v as qg,va as Xs,vb as R1,vc as Fi,vd as pb,ve as _b,vf as t0,vg as Br,w as Cu,wa as Vo,wb as ic,wc as sc,wd as Rt,we as Ab,wf as lp,wg as zr,x as Jg,xa as qs,xb as ml,xc as Bi,xd as bc,xe as Tc,xf as o0,y as Tu,ya as mt,yb as ul,yc as cc,yd as fb,ye as Sc,yf as un,z as De,za as Eo,zb as an,zc as j1,zd as Nr,ze as Qu,zf as r0}from"./excalidraw-assets/chunk-LL4GORAM.js";import{a as h,b as E}from"./excalidraw-assets/chunk-M2JW2GFW.js";import{E as wu}from"./excalidraw-assets/chunk-DIHRGRYX.js";import{aa as Ug}from"./excalidraw-assets/chunk-V55EI3XA.js";import{b as Hg,d as lr,e as $g,f as v}from"./excalidraw-assets/chunk-SXMPUQ6M.js";var H=lr((hI,y0)=>{h();y0.exports=React});var _0=lr(Yc=>{"use strict";h();var w6=H(),C6=Symbol.for("react.element"),T6=Symbol.for("react.fragment"),S6=Object.prototype.hasOwnProperty,k6=w6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I6={key:!0,ref:!0,__self:!0,__source:!0};function M0(t,e,o){var r,n={},i=null,a=null;o!==void 0&&(i=""+o),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)S6.call(e,r)&&!I6.hasOwnProperty(r)&&(n[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)n[r]===void 0&&(n[r]=e[r]);return{$$typeof:C6,type:t,key:i,ref:a,props:n,_owner:k6.current}}Yc.Fragment=T6;Yc.jsx=M0;Yc.jsxs=M0});var S=lr((zI,A0)=>{"use strict";h();A0.exports=_0()});var pr=lr((n8,N0)=>{h();N0.exports=ReactDOM});var Eh=lr((cW,KE)=>{h();var VE="Expected a function",WE=NaN,yT="[object Symbol]",ET=/^\s+|\s+$/g,wT=/^[-+]0x[0-9a-f]+$/i,CT=/^0b[01]+$/i,TT=/^0o[0-7]+$/i,ST=parseInt,kT=typeof global=="object"&&global&&global.Object===Object&&global,IT=typeof self=="object"&&self&&self.Object===Object&&self,MT=kT||IT||Function("return this")(),_T=Object.prototype,AT=_T.toString,LT=Math.max,PT=Math.min,yh=function(){return MT.Date.now()};function DT(t,e,o){var r,n,i,a,l,s,c=0,m=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(VE);e=GE(e)||0,vm(o)&&(m=!!o.leading,d="maxWait"in o,i=d?LT(GE(o.maxWait)||0,e):i,f="trailing"in o?!!o.trailing:f);function p(I){var A=r,P=n;return r=n=void 0,c=I,a=t.apply(P,A),a}function b(I){return c=I,l=setTimeout(w,e),m?p(I):a}function x(I){var A=I-s,P=I-c,F=e-A;return d?PT(F,i-P):F}function y(I){var A=I-s,P=I-c;return s===void 0||A>=e||A<0||d&&P>=i}function w(){var I=yh();if(y(I))return k(I);l=setTimeout(w,x(I))}function k(I){return l=void 0,f&&r?p(I):(r=n=void 0,a)}function C(){l!==void 0&&clearTimeout(l),c=0,r=s=n=l=void 0}function M(){return l===void 0?a:k(yh())}function _(){var I=yh(),A=y(I);if(r=arguments,n=this,s=I,A){if(l===void 0)return b(s);if(d)return l=setTimeout(w,e),p(s)}return l===void 0&&(l=setTimeout(w,e)),a}return _.cancel=C,_.flush=M,_}function RT(t,e,o){var r=!0,n=!0;if(typeof t!="function")throw new TypeError(VE);return vm(o)&&(r="leading"in o?!!o.leading:r,n="trailing"in o?!!o.trailing:n),DT(t,e,{leading:r,maxWait:e,trailing:n})}function vm(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function NT(t){return!!t&&typeof t=="object"}function OT(t){return typeof t=="symbol"||NT(t)&&AT.call(t)==yT}function GE(t){if(typeof t=="number")return t;if(OT(t))return WE;if(vm(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=vm(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(ET,"");var o=CT.test(t);return o||TT.test(t)?ST(t.slice(2),o?2:8):wT.test(t)?WE:+t}KE.exports=RT});var tw=lr((QE,ew)=>{h();(function(){var t=this,e={};typeof QE<"u"?ew.exports=e:t.fuzzy=e,e.simpleFilter=function(o,r){return r.filter(function(n){return e.test(o,n)})},e.test=function(o,r){return e.match(o,r)!==null},e.match=function(o,r,n){n=n||{};var i=0,a=[],l=r.length,s=0,c=0,m=n.pre||"",d=n.post||"",f=n.caseSensitive&&r||r.toLowerCase(),p;o=n.caseSensitive&&o||o.toLowerCase();for(var b=0;b<l;b++)p=r[b],f[b]===o[i]?(p=m+p+d,i+=1,c+=1+c):c=0,s+=c,a[a.length]=p;return i===o.length?(s=f===o?1/0:s,{rendered:a.join(""),score:s}):null},e.filter=function(o,r,n){return!r||r.length===0?[]:typeof o!="string"?r:(n=n||{},r.reduce(function(i,a,l,s){var c=a;n.extract&&(c=n.extract(a));var m=e.match(o,c,n);return m!=null&&(i[i.length]={string:m.rendered,score:m.score,index:l,original:a}),i},[]).sort(function(i,a){var l=a.score-i.score;return l||i.index-a.index}))}})()});var lw=lr(aw=>{"use strict";h();var Ua=H();function JT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var QT=typeof Object.is=="function"?Object.is:JT,eS=Ua.useState,tS=Ua.useEffect,oS=Ua.useLayoutEffect,rS=Ua.useDebugValue;function nS(t,e){var o=e(),r=eS({inst:{value:o,getSnapshot:e}}),n=r[0].inst,i=r[1];return oS(function(){n.value=o,n.getSnapshot=e,Th(n)&&i({inst:n})},[t,o,e]),tS(function(){return Th(n)&&i({inst:n}),t(function(){Th(n)&&i({inst:n})})},[t]),rS(o),o}function Th(t){var e=t.getSnapshot;t=t.value;try{var o=e();return!QT(t,o)}catch{return!0}}function iS(t,e){return e()}var aS=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?iS:nS;aw.useSyncExternalStore=Ua.useSyncExternalStore!==void 0?Ua.useSyncExternalStore:aS});var cw=lr((qG,sw)=>{"use strict";h();sw.exports=lw()});var mw=lr(dw=>{"use strict";h();var wm=H(),lS=cw();function sS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cS=typeof Object.is=="function"?Object.is:sS,dS=lS.useSyncExternalStore,mS=wm.useRef,uS=wm.useEffect,pS=wm.useMemo,fS=wm.useDebugValue;dw.useSyncExternalStoreWithSelector=function(t,e,o,r,n){var i=mS(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=pS(function(){function s(p){if(!c){if(c=!0,m=p,p=r(p),n!==void 0&&a.hasValue){var b=a.value;if(n(b,p))return d=b}return d=p}if(b=d,cS(m,p))return b;var x=r(p);return n!==void 0&&n(b,x)?b:(m=p,d=x)}var c=!1,m,d,f=o===void 0?null:o;return[function(){return s(e())},f===null?void 0:function(){return s(f())}]},[e,o,r,n]);var l=dS(t,i[0],i[1]);return uS(function(){a.hasValue=!0,a.value=l},[l]),fS(l),l}});var pw=lr((tV,uw)=>{"use strict";h();uw.exports=mw()});h();var Eu=v(H(),1);h();var qc=v(H(),1);h();h();h();h();var pt=v(H(),1);h();var u6=0;function E0(t,e){let o=`atom${++u6}`,r={toString:()=>o};return typeof t=="function"?r.read=t:(r.init=t,r.read=n=>n(r),r.write=(n,i,a)=>i(r,typeof a=="function"?a(n(r)):a)),e&&(r.write=e),r}var pn=Symbol(),vp=t=>!!t[pn],Bc=t=>!t[pn].c,Ll=t=>{var e;let{b:o,c:r}=t[pn];r&&(r(),(e=f6.get(o))==null||e())},Hc=(t,e)=>{let o=t[pn].o,r=e[pn].o;return o===r||t===r||vp(o)&&Hc(o,e)},yp=(t,e)=>{let o={b:t,o:e,c:null},r=new Promise(n=>{o.c=()=>{o.c=null,n()},e.finally(o.c)});return r[pn]=o,r},p6=t=>yp(t[pn].b,t[pn].o),f6=new WeakMap;var zc=t=>"init"in t,Pl="r",$c="w",Dl="c",Uc="s",w0="h",h6="n",g6="l",b6="a",x6="m",C0=t=>{let e=new WeakMap,o=new WeakMap,r=new Map,n,i;if((E&&E.MODE)!=="production"&&(n=new Set,i=new Set),t)for(let[R,B]of t){let V={v:B,r:0,y:!0,d:new Map};(E&&E.MODE)!=="production"&&(Object.freeze(V),zc(R)||console.warn("Found initial value for derived atom which can cause unexpected behavior",R)),e.set(R,V)}let a=new WeakMap,l=(R,B,V)=>{let Z=a.get(B);Z||(Z=new Map,a.set(B,Z)),V.then(()=>{Z.get(R)===V&&(Z.delete(R),Z.size||a.delete(B))}),Z.set(R,V)},s=R=>{let B=new Set,V=a.get(R);return V&&(a.delete(R),V.forEach((Z,Y)=>{Ll(Z),B.add(Y)})),B},c=new WeakMap,m=R=>{let B=c.get(R);return B||(B=new Map,c.set(R,B)),B},d=(R,B)=>{if(R){let V=m(R),Z=V.get(B);return Z||(Z=d(R.p,B),Z&&"p"in Z&&Bc(Z.p)&&(Z=void 0),Z&&V.set(B,Z)),Z}return e.get(B)},f=(R,B,V)=>{if((E&&E.MODE)!=="production"&&Object.freeze(V),R)m(R).set(B,V);else{let Z=e.get(B);e.set(B,V),r.has(B)||r.set(B,Z)}},p=(R,B=new Map,V)=>{if(!V)return B;let Z=new Map,Y=!1;return V.forEach(j=>{var J;let ne=((J=d(R,j))==null?void 0:J.r)||0;Z.set(j,ne),B.get(j)!==ne&&(Y=!0)}),B.size===Z.size&&!Y?B:Z},b=(R,B,V,Z,Y)=>{let j=d(R,B);if(j){if(Y&&(!("p"in j)||!Hc(j.p,Y)))return j;"p"in j&&Ll(j.p)}let J={v:V,r:j?.r||0,y:!0,d:p(R,j?.d,Z)},ne=!j?.y;return!j||!("v"in j)||!Object.is(j.v,V)?(ne=!0,++J.r,J.d.has(B)&&(J.d=new Map(J.d).set(B,J.r))):J.d!==j.d&&(J.d.size!==j.d.size||!Array.from(J.d.keys()).every(dt=>j.d.has(dt)))&&(ne=!0,Promise.resolve().then(()=>{K(R)})),j&&!ne?j:(f(R,B,J),J)},x=(R,B,V,Z,Y)=>{let j=d(R,B);if(j){if(Y&&(!("p"in j)||!Hc(j.p,Y)))return j;"p"in j&&Ll(j.p)}let J={e:V,r:(j?.r||0)+1,y:!0,d:p(R,j?.d,Z)};return f(R,B,J),J},y=(R,B,V,Z)=>{let Y=d(R,B);if(Y&&"p"in Y){if(Hc(Y.p,V)&&!Bc(Y.p))return Y.y?Y:{...Y,y:!0};Ll(Y.p)}l(R,B,V);let j={p:V,r:(Y?.r||0)+1,y:!0,d:p(R,Y?.d,Z)};return f(R,B,j),j},w=(R,B,V,Z)=>{if(V instanceof Promise){let Y=yp(V,V.then(j=>{b(R,B,j,Z,Y)}).catch(j=>{if(j instanceof Promise)return vp(j)?j.then(()=>{C(R,B,!0)}):j;x(R,B,j,Z,Y)}));return y(R,B,Y,Z)}return b(R,B,V,Z)},k=(R,B)=>{let V=d(R,B);if(V){let Z={...V,y:!1};f(R,B,Z)}else(E&&E.MODE)!=="production"&&console.warn("[Bug] could not invalidate non existing atom",B)},C=(R,B,V)=>{if(!V){let Y=d(R,B);if(Y){if(Y.y&&"p"in Y&&!Bc(Y.p))return Y;if(Y.d.forEach((j,J)=>{if(J!==B)if(!o.has(J))C(R,J);else{let ne=d(R,J);ne&&!ne.y&&C(R,J)}}),Array.from(Y.d).every(([j,J])=>{let ne=d(R,j);return ne&&!("p"in ne)&&ne.r===J}))return Y.y?Y:{...Y,y:!0}}}let Z=new Set;try{let Y=B.read(j=>{Z.add(j);let J=j===B?d(R,j):C(R,j);if(J){if("e"in J)throw J.e;if("p"in J)throw J.p;return J.v}if(zc(j))return j.init;throw new Error("no atom init")});return w(R,B,Y,Z)}catch(Y){if(Y instanceof Promise){let j=vp(Y)&&Bc(Y)?p6(Y):yp(Y,Y);return y(R,B,j,Z)}return x(R,B,Y,Z)}},M=(R,B)=>C(B,R),_=(R,B)=>{let V=o.get(B);return V||(V=O(R,B)),V},I=(R,B)=>!B.l.size&&(!B.t.size||B.t.size===1&&B.t.has(R)),A=(R,B)=>{let V=o.get(B);V&&I(B,V)&&U(R,B)},P=(R,B)=>{let V=o.get(B);V?.t.forEach(Z=>{Z!==B&&(k(R,Z),P(R,Z))})},F=(R,B,V)=>{let Z=!0,Y=(ne,dt)=>{let et=C(R,ne);if("e"in et)throw et.e;if("p"in et){if(dt?.unstable_promise)return et.p.then(()=>{let it=d(R,ne);return it&&"p"in it&&it.p===et.p?new Promise(He=>setTimeout(He)).then(()=>Y(ne,dt)):Y(ne,dt)});throw(E&&E.MODE)!=="production"&&console.info("Reading pending atom state in write operation. We throw a promise for now.",ne),et.p}if("v"in et)return et.v;throw(E&&E.MODE)!=="production"&&console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.",ne),new Error("no value found")},j=(ne,dt)=>{let et;if(ne===B){if(!zc(ne))throw new Error("atom not writable");s(ne).forEach(Fs=>{Fs!==R&&w(Fs,ne,dt)});let He=d(R,ne),Xt=w(R,ne,dt);He!==Xt&&P(R,ne)}else et=F(R,ne,dt);return Z||K(R),et},J=B.write(Y,j,V);return Z=!1,J},D=(R,B,V)=>{let Z=F(V,R,B);return K(V),Z},W=R=>!!R.write,O=(R,B,V)=>{let Z={t:new Set(V&&[V]),l:new Set};if(o.set(B,Z),(E&&E.MODE)!=="production"&&i.add(B),C(void 0,B).d.forEach((j,J)=>{let ne=o.get(J);ne?ne.t.add(B):J!==B&&O(R,J,B)}),W(B)&&B.onMount){let j=ne=>D(B,ne,R),J=B.onMount(j);R=void 0,J&&(Z.u=J)}return Z},U=(R,B)=>{var V;let Z=(V=o.get(B))==null?void 0:V.u;Z&&Z(),o.delete(B),(E&&E.MODE)!=="production"&&i.delete(B);let Y=d(R,B);Y?("p"in Y&&Ll(Y.p),Y.d.forEach((j,J)=>{if(J!==B){let ne=o.get(J);ne&&(ne.t.delete(B),I(J,ne)&&U(R,J))}})):(E&&E.MODE)!=="production"&&console.warn("[Bug] could not find atom state to unmount",B)},ee=(R,B,V,Z)=>{let Y=new Set(V.d.keys());Z?.forEach((j,J)=>{if(Y.has(J)){Y.delete(J);return}let ne=o.get(J);ne&&(ne.t.delete(B),I(J,ne)&&U(R,J))}),Y.forEach(j=>{let J=o.get(j);J?J.t.add(B):o.has(B)&&O(R,j,B)})},K=R=>{if(R){m(R).forEach((V,Z)=>{let Y=e.get(Z);if(V!==Y){let j=o.get(Z);j?.l.forEach(J=>J(R))}});return}for(;r.size;){let B=Array.from(r);r.clear(),B.forEach(([V,Z])=>{let Y=d(void 0,V);if(Y&&Y.d!==Z?.d&&ee(void 0,V,Y,Z?.d),Z&&!Z.y&&Y?.y)return;let j=o.get(V);j?.l.forEach(J=>J())})}(E&&E.MODE)!=="production"&&n.forEach(B=>B())},pe=R=>{m(R).forEach((V,Z)=>{let Y=e.get(Z);(!Y||V.r>Y.r||V.y!==Y.y||V.r===Y.r&&V.d!==Y.d)&&(e.set(Z,V),V.d!==Y?.d&&ee(R,Z,V,Y?.d))})},me=(R,B)=>{B&&pe(B),K(void 0)},ce=(R,B,V)=>{let Y=_(V,R).l;return Y.add(B),()=>{Y.delete(B),A(V,R)}},oe=(R,B)=>{for(let[V,Z]of R)zc(V)&&(w(B,V,Z),P(B,V));K(B)};return(E&&E.MODE)!=="production"?{[Pl]:M,[$c]:D,[Dl]:me,[Uc]:ce,[w0]:oe,[h6]:R=>(n.add(R),()=>{n.delete(R)}),[g6]:()=>i.values(),[b6]:R=>e.get(R),[x6]:R=>o.get(R)}:{[Pl]:M,[$c]:D,[Dl]:me,[Uc]:ce,[w0]:oe}},T0=t=>{let e=C0(t),o=a=>{let l=e[Pl](a);if("e"in l)throw l.e;if(!("p"in l))return l.v},r=a=>new Promise((l,s)=>{let c=e[Pl](a);"e"in c?s(c.e):"p"in c?l(c.p.then(()=>r(a))):l(c.v)});return{get:o,asyncGet:r,set:(a,l)=>e[$c](a,l),sub:(a,l)=>e[Uc](a,l),SECRET_INTERNAL_store:e}},S0=(t,e)=>({s:e?e(t).SECRET_INTERNAL_store:C0(t)}),xp=new Map,Ep=t=>(xp.has(t)||xp.set(t,(0,pt.createContext)(S0())),xp.get(t)),Wc=({children:t,initialValues:e,scope:o,unstable_createStore:r,unstable_enableVersionedWrite:n})=>{let[i,a]=(0,pt.useState)({});(0,pt.useEffect)(()=>{let c=l.current;c.w&&(c.s[Dl](null,i),delete i.p,c.v=i)},[i]);let l=(0,pt.useRef)();if(!l.current){let c=S0(e,r);if(n){let m=0;c.w=d=>{a(f=>{let p=m?f:{p:f};return d(p),p})},c.v=i,c.r=d=>{++m,d(),--m}}l.current=c}let s=Ep(o);return(0,pt.createElement)(s.Provider,{value:l.current},t)};function $e(t,e){return E0(t,e)}function Rl(t,e){let o=Ep(e),r=(0,pt.useContext)(o),{s:n,v:i}=r,a=f=>{let p=n[Pl](t,f);if((E&&E.MODE)!=="production"&&!p.y)throw new Error("should not be invalidated");if("e"in p)throw p.e;if("p"in p)throw p.p;if("v"in p)return p.v;throw new Error("no atom value")},[[l,s,c],m]=(0,pt.useReducer)((f,p)=>{let b=a(p);return Object.is(f[1],b)&&f[2]===t?f:[p,b,t]},i,f=>{let p=a(f);return[f,p,t]}),d=s;return c!==t&&(m(l),d=a(l)),(0,pt.useEffect)(()=>{let{v:f}=r;f&&n[Dl](t,f);let p=n[Uc](t,m,f);return m(f),p},[n,t,r]),(0,pt.useEffect)(()=>{n[Dl](t,l)}),(0,pt.useDebugValue)(d),d}function Hr(t,e){let o=Ep(e),{s:r,w:n}=(0,pt.useContext)(o);return(0,pt.useCallback)(a=>{if((E&&E.MODE)!=="production"&&!("write"in t))throw new Error("not writable atom");let l=s=>r[$c](t,a,s);return n?n(l):l()},[r,n,t])}function Ee(t,e){return"scope"in t&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),e=t.scope),[Rl(t,e),Hr(t,e)]}var v6=v(H(),1),Pe=Symbol(),Ut=T0();var y6=Hg({"./locales/ar-SA.json":()=>import("./excalidraw-assets/ar-SA-MV5ZQ2W5.js"),"./locales/az-AZ.json":()=>import("./excalidraw-assets/az-AZ-BK6PNAXT.js"),"./locales/bg-BG.json":()=>import("./excalidraw-assets/bg-BG-GCTBXIHZ.js"),"./locales/bn-BD.json":()=>import("./excalidraw-assets/bn-BD-QTMQMM2A.js"),"./locales/ca-ES.json":()=>import("./excalidraw-assets/ca-ES-CJKR7U4D.js"),"./locales/cs-CZ.json":()=>import("./excalidraw-assets/cs-CZ-E6RD7VRF.js"),"./locales/da-DK.json":()=>import("./excalidraw-assets/da-DK-GA7WAOB4.js"),"./locales/de-DE.json":()=>import("./excalidraw-assets/de-DE-WQGVYODE.js"),"./locales/el-GR.json":()=>import("./excalidraw-assets/el-GR-JRKZ7DCA.js"),"./locales/en.json":()=>import("./excalidraw-assets/en-H6IY7PV6.js"),"./locales/es-ES.json":()=>import("./excalidraw-assets/es-ES-NNAEPTPN.js"),"./locales/eu-ES.json":()=>import("./excalidraw-assets/eu-ES-UXVZRSMJ.js"),"./locales/fa-IR.json":()=>import("./excalidraw-assets/fa-IR-FFXQODN6.js"),"./locales/fi-FI.json":()=>import("./excalidraw-assets/fi-FI-FVRWY4PK.js"),"./locales/fr-FR.json":()=>import("./excalidraw-assets/fr-FR-YRAHLNH4.js"),"./locales/gl-ES.json":()=>import("./excalidraw-assets/gl-ES-O3MFXO2J.js"),"./locales/he-IL.json":()=>import("./excalidraw-assets/he-IL-UQHONTOV.js"),"./locales/hi-IN.json":()=>import("./excalidraw-assets/hi-IN-QGM3FMHS.js"),"./locales/hu-HU.json":()=>import("./excalidraw-assets/hu-HU-FW4UHMDU.js"),"./locales/id-ID.json":()=>import("./excalidraw-assets/id-ID-QOMISFYK.js"),"./locales/it-IT.json":()=>import("./excalidraw-assets/it-IT-NXPSTWVC.js"),"./locales/ja-JP.json":()=>import("./excalidraw-assets/ja-JP-Z7I24KT4.js"),"./locales/kaa.json":()=>import("./excalidraw-assets/kaa-TXMSCJDQ.js"),"./locales/kab-KAB.json":()=>import("./excalidraw-assets/kab-KAB-RJXRUTDO.js"),"./locales/kk-KZ.json":()=>import("./excalidraw-assets/kk-KZ-JXPULSST.js"),"./locales/km-KH.json":()=>import("./excalidraw-assets/km-KH-WRGO6AYW.js"),"./locales/ko-KR.json":()=>import("./excalidraw-assets/ko-KR-GAYOVASS.js"),"./locales/ku-TR.json":()=>import("./excalidraw-assets/ku-TR-DJF4NWRZ.js"),"./locales/lt-LT.json":()=>import("./excalidraw-assets/lt-LT-QQGY3S4X.js"),"./locales/lv-LV.json":()=>import("./excalidraw-assets/lv-LV-H55DY45V.js"),"./locales/mr-IN.json":()=>import("./excalidraw-assets/mr-IN-QYT2ELER.js"),"./locales/my-MM.json":()=>import("./excalidraw-assets/my-MM-RRPBSH5R.js"),"./locales/nb-NO.json":()=>import("./excalidraw-assets/nb-NO-AMX3MAHH.js"),"./locales/nl-NL.json":()=>import("./excalidraw-assets/nl-NL-LZSLKN37.js"),"./locales/nn-NO.json":()=>import("./excalidraw-assets/nn-NO-WWXPMJY7.js"),"./locales/oc-FR.json":()=>import("./excalidraw-assets/oc-FR-GPZCMCGX.js"),"./locales/pa-IN.json":()=>import("./excalidraw-assets/pa-IN-L5H3H4OA.js"),"./locales/percentages.json":()=>import("./excalidraw-assets/percentages-L6Y3A3ZS.js"),"./locales/pl-PL.json":()=>import("./excalidraw-assets/pl-PL-SYTLCLU7.js"),"./locales/pt-BR.json":()=>import("./excalidraw-assets/pt-BR-BJOSVXBP.js"),"./locales/pt-PT.json":()=>import("./excalidraw-assets/pt-PT-QHWDKICL.js"),"./locales/ro-RO.json":()=>import("./excalidraw-assets/ro-RO-AVSXCJHH.js"),"./locales/ru-RU.json":()=>import("./excalidraw-assets/ru-RU-5Z6AY4FG.js"),"./locales/si-LK.json":()=>import("./excalidraw-assets/si-LK-OMROCHR3.js"),"./locales/sk-SK.json":()=>import("./excalidraw-assets/sk-SK-TLXIBWPH.js"),"./locales/sl-SI.json":()=>import("./excalidraw-assets/sl-SI-JELDMWCI.js"),"./locales/sv-SE.json":()=>import("./excalidraw-assets/sv-SE-2FAONS47.js"),"./locales/ta-IN.json":()=>import("./excalidraw-assets/ta-IN-XN7DVSDK.js"),"./locales/th-TH.json":()=>import("./excalidraw-assets/th-TH-VCIYWJPR.js"),"./locales/tr-TR.json":()=>import("./excalidraw-assets/tr-TR-6QL6T7SM.js"),"./locales/uk-UA.json":()=>import("./excalidraw-assets/uk-UA-Y6YRBHAO.js"),"./locales/vi-VN.json":()=>import("./excalidraw-assets/vi-VN-34I6LTAE.js"),"./locales/zh-CN.json":()=>import("./excalidraw-assets/zh-CN-IGKEMUHO.js"),"./locales/zh-HK.json":()=>import("./excalidraw-assets/zh-HK-MDAU5TWB.js"),"./locales/zh-TW.json":()=>import("./excalidraw-assets/zh-TW-DOGEFI3C.js")});var E6=85,ur={code:"en",label:"English"},ta=[ur,...[{code:"ar-SA",label:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629",rtl:!0},{code:"bg-BG",label:"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438"},{code:"ca-ES",label:"Catal\xE0"},{code:"cs-CZ",label:"\u010Cesky"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC"},{code:"es-ES",label:"Espa\xF1ol"},{code:"eu-ES",label:"Euskara"},{code:"fa-IR",label:"\u0641\u0627\u0631\u0633\u06CC",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Fran\xE7ais"},{code:"gl-ES",label:"Galego"},{code:"he-IL",label:"\u05E2\u05D1\u05E8\u05D9\u05EA",rtl:!0},{code:"hi-IN",label:"\u0939\u093F\u0928\u094D\u0926\u0940"},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:"\u65E5\u672C\u8A9E"},{code:"kab-KAB",label:"Taqbaylit"},{code:"kk-KZ",label:"\u049A\u0430\u0437\u0430\u049B \u0442\u0456\u043B\u0456"},{code:"ko-KR",label:"\uD55C\uAD6D\uC5B4"},{code:"ku-TR",label:"Kurd\xEE"},{code:"lt-LT",label:"Lietuvi\u0173"},{code:"lv-LV",label:"Latvie\u0161u"},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokm\xE5l"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"oc-FR",label:"Occitan"},{code:"pa-IN",label:"\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40"},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugu\xEAs Brasileiro"},{code:"pt-PT",label:"Portugu\xEAs"},{code:"ro-RO",label:"Rom\xE2n\u0103"},{code:"ru-RU",label:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},{code:"sk-SK",label:"Sloven\u010Dina"},{code:"sv-SE",label:"Svenska"},{code:"sl-SI",label:"Sloven\u0161\u010Dina"},{code:"tr-TR",label:"T\xFCrk\xE7e"},{code:"uk-UA",label:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430"},{code:"zh-CN",label:"\u7B80\u4F53\u4E2D\u6587"},{code:"zh-TW",label:"\u7E41\u9AD4\u4E2D\u6587"},{code:"vi-VN",label:"Ti\u1EBFng Vi\u1EC7t"},{code:"mr-IN",label:"\u092E\u0930\u093E\u0920\u0940"}].filter(t=>Ug[t.code]>=E6).sort((t,e)=>t.label>e.label?1:-1)],Vc="__test__";E.DEV&&ta.unshift({code:Vc,label:"test language"},{code:`${Vc}.rtl`,label:"\u202Atest language (rtl)\u202C",rtl:!0});var ea=ur,Gc={},Kc=async t=>{if(ea=t,document.documentElement.dir=ea.rtl?"rtl":"ltr",document.documentElement.lang=ea.code,t.code.startsWith(Vc))Gc={};else try{Gc=await y6(`./locales/${ea.code}.json`)}catch(e){console.error(`Failed to load language ${t.code}:`,e.message),Gc=wu}Ut.set(I0,t.code)},$r=()=>ea,k0=(t,e)=>{for(let o=0;o<e.length;++o){let r=e[o];if(t[r]===void 0)return;t=t[r]}if(typeof t=="string")return t},g=(t,e,o)=>{if(ea.code.startsWith(Vc))return`\u202A[[${e?`${t}(${JSON.stringify(e).slice(1,-1)})`:t}]]\u202C`;let r=t.split("."),n=k0(Gc,r)||k0(wu,r)||o;if(n===void 0){let i=`Can't find translation for ${t}`;if(E.PROD)return console.warn(i),"";throw new Error(i)}if(e)for(let i in e)n=n.replace(`{{${i}}}`,String(e[i]));return n},I0=$e(ur.code),bt=()=>{let t=Rl(I0,Pe);return{t:g,langCode:t}};var jc=v(H(),1);h();var L0=v(H(),1);var Zc=v(S(),1),M6=({size:t="1em",circleWidth:e=8,synchronized:o=!1})=>{let n=-(L0.default.useRef(Date.now()).current%1600);return(0,Zc.jsx)("div",{className:"Spinner",children:(0,Zc.jsx)("svg",{viewBox:"0 0 100 100",style:{width:t,height:t,"--spinner-delay":o?`${n}ms`:0},children:(0,Zc.jsx)("circle",{cx:"50",cy:"50",r:50-e/2,strokeWidth:e,fill:"none",strokeMiterlimit:"10"})})})},Nt=M6;h();function P0(t){var e,o,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(o=P0(t[e]))&&(r&&(r+=" "),r+=o);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function z(){for(var t=0,e,o,r="";t<arguments.length;)(e=arguments[t++])&&(o=P0(e))&&(r&&(r+=" "),r+=o);return r}var oa=v(S(),1),Xc=({delay:t,theme:e})=>{let[o,r]=(0,jc.useState)(!!t);return(0,jc.useEffect)(()=>{if(!t)return;let n=setTimeout(()=>{r(!1)},t);return()=>clearTimeout(n)},[t]),o?null:(0,oa.jsxs)("div",{className:z("LoadingMessage",{"LoadingMessage--dark":e===qe.DARK}),children:[(0,oa.jsx)("div",{children:(0,oa.jsx)(Nt,{})}),(0,oa.jsx)("div",{className:"LoadingMessage-text",children:g("labels.loadingScene")})]})};var R0=v(S(),1),D0=t=>{let[e,o]=(0,qc.useState)(!0);return(0,qc.useEffect)(()=>{let r=async()=>{await Kc(n),o(!1)},n=ta.find(i=>i.code===t.langCode)||ur;r()},[t.langCode]),e?(0,R0.jsx)(Xc,{theme:t.theme}):t.children};h();var Ct=v(H(),1),fu=v(pr(),1);h();h();h();var Zo=v(H(),1);var Io=v(S(),1),se=Zo.default.forwardRef((t,e)=>{let{id:o}=Mt(),r=Zo.default.useRef(null);Zo.default.useImperativeHandle(e,()=>r.current);let n=`ToolIcon_size_${t.size}`,[i,a]=(0,Zo.useState)(!1),l=(0,Zo.useRef)(!0),s=async m=>{let d="onClick"in t&&t.onClick?.(m);if(Li(d))try{a(!0),await d}catch(f){if(f instanceof Ki)console.warn(f);else throw f}finally{l.current&&a(!1)}};(0,Zo.useEffect)(()=>(l.current=!0,()=>{l.current=!1}),[]);let c=(0,Zo.useRef)(null);if(t.type==="button"||t.type==="icon"||t.type==="submit"){let m=t.type==="icon"?"button":t.type;return(0,Io.jsxs)("button",{className:z("ToolIcon_type_button",n,t.className,t.visible&&!t.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!t.hidden,"ToolIcon--selected":t.selected,"ToolIcon--plain":t.type==="icon"}),style:t.style,"data-testid":t["data-testid"],hidden:t.hidden,title:t.title,"aria-label":t["aria-label"],type:m,onClick:s,ref:r,disabled:i||t.isLoading,children:[(t.icon||t.label)&&(0,Io.jsxs)("div",{className:"ToolIcon__icon","aria-hidden":"true",children:[t.icon||t.label,t.keyBindingLabel&&(0,Io.jsx)("span",{className:"ToolIcon__keybinding",children:t.keyBindingLabel}),t.isLoading&&(0,Io.jsx)(Nt,{})]}),t.showAriaLabel&&(0,Io.jsxs)("div",{className:"ToolIcon__label",children:[t["aria-label"]," ",i&&(0,Io.jsx)(Nt,{})]}),t.children]})}return(0,Io.jsxs)("label",{className:z("ToolIcon",t.className),title:t.title,onPointerDown:m=>{c.current=m.pointerType||null,t.onPointerDown?.({pointerType:m.pointerType||null})},onPointerUp:()=>{requestAnimationFrame(()=>{c.current=null})},children:[(0,Io.jsx)("input",{className:`ToolIcon_type_radio ${n}`,type:"radio",name:t.name,"aria-label":t["aria-label"],"aria-keyshortcuts":t["aria-keyshortcuts"],"data-testid":t["data-testid"],id:`${o}-${t.id}`,onChange:()=>{t.onChange?.({pointerType:c.current})},checked:t.checked,ref:r}),(0,Io.jsxs)("div",{className:"ToolIcon__icon",children:[t.icon,t.keyBindingLabel&&(0,Io.jsx)("span",{className:"ToolIcon__keybinding",children:t.keyBindingLabel})]})]})});se.defaultProps={visible:!0,className:"",size:"medium"};se.displayName="ToolButton";h();var Qt=v(H(),1);var u=v(S(),1),jo=t=>"var(--icon-fill-color)",O0=t=>t===qe.LIGHT?It.white:"#1e1e1e",L=(t,e=512)=>{let{width:o=512,height:r=o,mirror:n,style:i,...a}=typeof e=="number"?{width:e}:e;return(0,u.jsx)("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:`0 0 ${o} ${r}`,className:z({"rtl-mirror":n}),style:i,...a,children:typeof t=="string"?(0,u.jsx)("path",{fill:"currentColor",d:t}):t})},Q={width:24,height:24,fill:"none",strokeWidth:2,stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},de={width:20,height:20,fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},y8=L((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("rect",{x:3,y:8,width:18,height:4,rx:1}),(0,u.jsx)("line",{x1:12,y1:8,x2:12,y2:21}),(0,u.jsx)("path",{d:"M19 12v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-7"}),(0,u.jsx)("path",{d:"M7.5 8a2.5 2.5 0 0 1 0 -5a4.8 8 0 0 1 4.5 5a4.8 8 0 0 1 4.5 -5a2.5 2.5 0 0 1 0 5"})]}),Q),Jc=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),(0,u.jsx)("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),(0,u.jsx)("line",{x1:"3",y1:"6",x2:"3",y2:"19"}),(0,u.jsx)("line",{x1:"12",y1:"6",x2:"12",y2:"19"}),(0,u.jsx)("line",{x1:"21",y1:"6",x2:"21",y2:"19"})]}),Q),F0=L((0,u.jsxs)("svg",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,u.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Q),B0=L((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,u.jsx)("circle",{cx:"12",cy:"19",r:"1"}),(0,u.jsx)("circle",{cx:"12",cy:"5",r:"1"})]}),Q),z0=L((0,u.jsxs)("svg",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6"}),(0,u.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"21"}),(0,u.jsx)("line",{x1:"8",y1:"4",x2:"16",y2:"4"})]}),Q),qn=L((0,u.jsxs)("g",{children:[(0,u.jsx)("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("mask",{id:"UnlockedIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:6,y:1,width:9,height:9,children:(0,u.jsx)("path",{stroke:"none",d:"M6.399 9.561V5.175c0-.93.401-1.823 1.116-2.48a3.981 3.981 0 0 1 2.693-1.028c1.01 0 1.98.37 2.694 1.027.715.658 1.116 1.55 1.116 2.481",fill:"#fff"})}),(0,u.jsx)("g",{mask:"url(#UnlockedIcon)",children:(0,u.jsx)("path",{stroke:"none",d:"M5.149 9.561v1.25h2.5v-1.25h-2.5Zm5.06-7.894V.417v1.25Zm2.559 3.508v1.25h2.5v-1.25h-2.5ZM7.648 8.51V5.175h-2.5V8.51h2.5Zm0-3.334c0-.564.243-1.128.713-1.561L6.668 1.775c-.959.883-1.52 2.104-1.52 3.4h2.5Zm.713-1.561a2.732 2.732 0 0 1 1.847-.697v-2.5c-1.31 0-2.585.478-3.54 1.358L8.36 3.614Zm1.847-.697c.71 0 1.374.26 1.847.697l1.694-1.839a5.231 5.231 0 0 0-3.54-1.358v2.5Zm1.847.697c.47.433.713.997.713 1.561h2.5c0-1.296-.56-2.517-1.52-3.4l-1.693 1.839Z",fill:"currentColor"})})]}),de),ra=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M13.542 8.542H6.458a2.5 2.5 0 0 0-2.5 2.5v3.75a2.5 2.5 0 0 0 2.5 2.5h7.084a2.5 2.5 0 0 0 2.5-2.5v-3.75a2.5 2.5 0 0 0-2.5-2.5Z"}),(0,u.jsx)("path",{d:"M10 13.958a1.042 1.042 0 1 0 0-2.083 1.042 1.042 0 0 0 0 2.083Z"}),(0,u.jsx)("path",{d:"M6.667 8.333V5.417C6.667 3.806 8.159 2.5 10 2.5c1.841 0 3.333 1.306 3.333 2.917v2.916"})]}),de),H0=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M38.5 83.5c-14-2-17.833-10.473-21-22.5C14.333 48.984 12 22 12 12.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m12.005 10.478 7.905 14.423L6 25.75l6.005-15.273Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M12.005 10.478c1.92 3.495 3.838 7 7.905 14.423m-7.905-14.423c3.11 5.683 6.23 11.368 7.905 14.423m0 0c-3.68.226-7.35.455-13.91.85m13.91-.85c-5.279.33-10.566.647-13.91.85m0 0c1.936-4.931 3.882-9.86 6.005-15.273M6 25.75c2.069-5.257 4.135-10.505 6.005-15.272",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:41,height:94,fill:"none"}),$0=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M18.026 1.232c-5.268 13.125-5.548 33.555 3.285 42.311 8.823 8.75 33.31 12.304 42.422 13.523",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m72.181 59.247-13.058-10-2.948 13.62 16.006-3.62Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M72.181 59.247c-3.163-2.429-6.337-4.856-13.058-10m13.058 10c-5.145-3.936-10.292-7.882-13.058-10m0 0c-.78 3.603-1.563 7.196-2.948 13.62m2.948-13.62c-1.126 5.168-2.24 10.346-2.948 13.62m0 0c5.168-1.166 10.334-2.343 16.006-3.62m-16.006 3.62c5.51-1.248 11.01-2.495 16.006-3.62",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:85,height:71,fill:"none"}),U0=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M1 77c14-2 31.833-11.973 35-24 3.167-12.016-6-35-9.5-43.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m24.165 1.093-2.132 16.309 13.27-4.258-11.138-12.05Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M24.165 1.093c-.522 3.953-1.037 7.916-2.132 16.309m2.131-16.309c-.835 6.424-1.68 12.854-2.13 16.308m0 0c3.51-1.125 7.013-2.243 13.27-4.257m-13.27 4.257c5.038-1.608 10.08-3.232 13.27-4.257m0 0c-3.595-3.892-7.197-7.777-11.14-12.05m11.14 12.05c-3.837-4.148-7.667-8.287-11.14-12.05",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})]}),{width:38,height:78,fill:"none"}),E8=L((0,u.jsx)("g",{fill:"currentColor",children:(0,u.jsx)("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),{width:40,height:40,fill:"none"}),W0=L((0,u.jsxs)("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M6 6l4.153 11.793a0.365 .365 0 0 0 .331 .207a0.366 .366 0 0 0 .332 -.207l2.184 -4.793l4.787 -1.994a0.355 .355 0 0 0 .213 -.323a0.355 .355 0 0 0 -.213 -.323l-11.787 -4.36z"}),(0,u.jsx)("path",{d:"M13.5 13.5l4.5 4.5"})]}),{fill:"none",width:22,height:22,strokeWidth:1.25}),G0=L((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})]}),Q),V0=L((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M10.5 20.4l-6.9 -6.9c-.781 -.781 -.781 -2.219 0 -3l6.9 -6.9c.781 -.781 2.219 -.781 3 0l6.9 6.9c.781 .781 .781 2.219 0 3l-6.9 6.9c-.781 .781 -2.219 .781 -3 0z"})]}),Q),K0=L((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("circle",{cx:"12",cy:"12",r:"9"})]}),Q),Y0=L((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),(0,u.jsx)("line",{x1:"15",y1:"16",x2:"19",y2:"12"}),(0,u.jsx)("line",{x1:"15",y1:"8",x2:"19",y2:"12"})]}),Q),Z0=L((0,u.jsx)("path",{d:"M4.167 10h11.666",strokeWidth:"1.5"}),de),j0=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),(0,u.jsx)("path",{d:"M16 7h4"}),(0,u.jsx)("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"})]}),Q),na=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{clipRule:"evenodd",d:"m7.643 15.69 7.774-7.773a2.357 2.357 0 1 0-3.334-3.334L4.31 12.357a3.333 3.333 0 0 0-.977 2.357v1.953h1.953c.884 0 1.732-.352 2.357-.977Z"}),(0,u.jsx)("path",{d:"m11.25 5.417 3.333 3.333"})]}),de),X0=L((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"20",x2:"7",y2:"20"}),(0,u.jsx)("line",{x1:"14",y1:"20",x2:"21",y2:"20"}),(0,u.jsx)("line",{x1:"6.9",y1:"15",x2:"13.8",y2:"15"}),(0,u.jsx)("line",{x1:"10.2",y1:"6.3",x2:"16",y2:"20"}),(0,u.jsx)("polyline",{points:"5 20 11 4 13 4 20 20"})]}),Q),q0=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M12.5 6.667h.01"}),(0,u.jsx)("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z"}),(0,u.jsx)("path",{d:"m3.333 12.5 3.334-3.333c.773-.745 1.726-.745 2.5 0l4.166 4.166"}),(0,u.jsx)("path",{d:"m11.667 11.667.833-.834c.774-.744 1.726-.744 2.5 0l1.667 1.667"})]}),de),J0=L((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),(0,u.jsx)("path",{d:"M18 13.3l-6.3 -6.3"})]}),Q),wp=L((0,u.jsx)("path",{strokeWidth:"1.25",d:"M10 4.167v11.666M4.167 10h11.666"}),de),Cp=L((0,u.jsx)("path",{d:"M5 10h10",strokeWidth:"1.25"}),de),Q0=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M21 21l-6 -6"}),(0,u.jsx)("path",{d:"M3.268 12.043a7.017 7.017 0 0 0 6.634 4.957a7.012 7.012 0 0 0 7.043 -6.131a7 7 0 0 0 -5.314 -7.672a7.021 7.021 0 0 0 -8.241 4.403"}),(0,u.jsx)("path",{d:"M3 4v4h4"})]}),Q),Xo=L((0,u.jsx)("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"}),de),ex=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("polyline",{points:"12 16 18 10 12 4"}),(0,u.jsx)("polyline",{points:"8 4 2 10 8 16"})]}),de),Nl=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),(0,u.jsx)("path",{clipRule:"evenodd",d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]}),de),Qc=L((0,u.jsx)("path",{clipRule:"evenodd",d:"M10 2.5h.328a6.25 6.25 0 0 0 6.6 10.372A7.5 7.5 0 1 1 10 2.493V2.5Z",stroke:"currentColor"}),de),ed=L((0,u.jsx)("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,u.jsx)("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM10 4.167V2.5M14.167 5.833l1.166-1.166M15.833 10H17.5M14.167 14.167l1.166 1.166M10 15.833V17.5M5.833 14.167l-1.166 1.166M5 10H3.333M5.833 5.833 4.667 4.667"})}),de),td=L((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),(0,u.jsx)("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),(0,u.jsx)("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),Q),Jn=L((0,u.jsx)("path",{strokeWidth:"1.25",d:"M3.333 14.167v1.666c0 .92.747 1.667 1.667 1.667h10c.92 0 1.667-.746 1.667-1.667v-1.666M5.833 9.167 10 13.333l4.167-4.166M10 3.333v10"}),de),ia=L((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("circle",{cx:"12",cy:"12",r:"9"}),(0,u.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),(0,u.jsx)("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Q),tx=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("circle",{cx:"12",cy:"12",r:"9"}),(0,u.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"17.01"}),(0,u.jsx)("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Q),od=L((0,u.jsx)("path",{strokeWidth:"1.25",d:"M9.167 5.833H5.833c-1.254 0-2.5 1.282-2.5 2.5v5.834c0 1.283 1.252 2.5 2.5 2.5h5.834c1.251 0 2.5-1.25 2.5-2.5v-3.334M8.333 11.667l8.334-8.334M12.5 3.333h4.167V7.5"}),de),ox=L((0,u.jsx)("path",{d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"}),de),rx=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M7.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM12.5 10.833a.833.833 0 1 0 0-1.666.833.833 0 0 0 0 1.666ZM6.25 6.25c2.917-.833 4.583-.833 7.5 0M5.833 13.75c2.917.833 5.417.833 8.334 0"}),(0,u.jsx)("path",{d:"M12.917 14.167c0 .833 1.25 2.5 1.666 2.5 1.25 0 2.361-1.39 2.917-2.5.556-1.39.417-4.861-1.25-9.584-1.214-.846-2.5-1.116-3.75-1.25l-.833 2.084M7.083 14.167c0 .833-1.13 2.5-1.526 2.5-1.191 0-2.249-1.39-2.778-2.5-.529-1.39-.397-4.861 1.19-9.584 1.157-.846 2.318-1.116 3.531-1.25l.833 2.084"})]}),de),nx=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 4l11.733 16h4.267l-11.733 -16z"}),(0,u.jsx)("path",{d:"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"})]}),Q),ix=L((0,u.jsx)("polyline",{fill:"none",stroke:"currentColor",points:"20 6 9 17 4 12"}),{width:24,height:24}),Ol=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M8.333 11.667a2.917 2.917 0 0 0 4.167 0l3.333-3.334a2.946 2.946 0 1 0-4.166-4.166l-.417.416"}),(0,u.jsx)("path",{d:"M11.667 8.333a2.917 2.917 0 0 0-4.167 0l-3.333 3.334a2.946 2.946 0 0 0 4.166 4.166l.417-.416"})]}),de),ax=L("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512}),lx=L("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),aa=L((0,u.jsx)("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"}),de),w8=L("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512}),sx=L("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),rd=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M5 16l1.465 1.638a2 2 0 1 1 -3.015 .099l1.55 -1.737z"}),(0,u.jsx)("path",{d:"M13.737 9.737c2.299 -2.3 3.23 -5.095 2.081 -6.245c-1.15 -1.15 -3.945 -.217 -6.244 2.082c-2.3 2.299 -3.231 5.095 -2.082 6.244c1.15 1.15 3.946 .218 6.245 -2.081z"}),(0,u.jsx)("path",{d:"M7.492 11.818c.362 .362 .768 .676 1.208 .934l6.895 4.047c1.078 .557 2.255 -.075 3.692 -1.512c1.437 -1.437 2.07 -2.614 1.512 -3.692c-.372 -.718 -1.72 -3.017 -4.047 -6.895a6.015 6.015 0 0 0 -.934 -1.208"})]}),Q),nd=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M15 8h.01"}),(0,u.jsx)("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),(0,u.jsx)("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),(0,u.jsx)("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),(0,u.jsx)("path",{d:"M19 16v6"}),(0,u.jsx)("path",{d:"M22 19l-3 3l-3 -3"})]}),Q),cx=L("M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",{width:512,height:512}),C8=L("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),T8=L("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),dx=L("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"),S8=L("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"),Tp=L((0,u.jsx)("path",{d:"M7.5 10.833 4.167 7.5 7.5 4.167M4.167 7.5h9.166a3.333 3.333 0 0 1 0 6.667H12.5",strokeWidth:"1.25"}),de),Sp=L((0,u.jsx)("path",{d:"M12.5 10.833 15.833 7.5 12.5 4.167M15.833 7.5H6.667a3.333 3.333 0 1 0 0 6.667H7.5",strokeWidth:"1.25"}),de),mx=L("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),ux=L((0,u.jsx)("path",{d:"M5 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 7.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM15 17.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM7.25 8.917l5.5-2.834M7.25 11.083l5.5 2.834",strokeWidth:"1.5"}),de),k8=L("M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"),I8=L("M16 5l-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z",{width:24,height:24}),M8=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1"}),(0,u.jsx)("path",{d:"M12 14v-11"}),(0,u.jsx)("path",{d:"M9 6l3 -3l3 3"})]}),Q),_8=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{fill:"currentColor",d:"M40 5.6v6.1l-4.1.7c-8.9 1.4-16.5 6.9-20.6 15C13 32 10.9 43 12.4 43c.4 0 2.4-1.3 4.4-3 5-3.9 12.1-7 18.2-7.7l5-.6v12.8l11.2-11.3L62.5 22 51.2 10.8 40-.5v6.1zm10.2 22.6L44 34.5v-6.8l-6.9.6c-3.9.3-9.8 1.7-13.2 3.1-3.5 1.4-6.5 2.4-6.7 2.2-.9-1 3-7.5 6.4-10.8C28 18.6 34.4 16 40.1 16c3.7 0 3.9-.1 3.9-3.2V9.5l6.2 6.3 6.3 6.2-6.3 6.2z"}),(0,u.jsx)("path",{stroke:"currentColor",fill:"currentColor",d:"M0 36v20h48v-6.2c0-6 0-6.1-2-4.3-1.1 1-2 2.9-2 4.2V52H4V34c0-17.3-.1-18-2-18s-2 .7-2 20z"})]}),{width:64,height:64}),A8=L((0,u.jsx)("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024}),kp=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{d:"M13.889 4.167H8.333c-.767 0-1.389.622-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.767-.622-1.39-1.39-1.39Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M12.5 12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),Ip=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.944 12.5H12.5v1.389a1.389 1.389 0 0 1-1.389 1.389H5.556a1.389 1.389 0 0 1-1.39-1.39V8.334a1.389 1.389 0 0 1 1.39-1.389h1.388",fill:"currentColor"}),(0,u.jsx)("path",{d:"M13.889 4.167H8.333c-.767 0-1.389.621-1.389 1.389v5.555c0 .767.622 1.389 1.39 1.389h5.555c.767 0 1.389-.622 1.389-1.389V5.556c0-.768-.622-1.39-1.39-1.39Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),Mp=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M8.775 6.458h2.45a2.316 2.316 0 0 1 2.317 2.316v2.452a2.316 2.316 0 0 1-2.316 2.316H8.774a2.316 2.316 0 0 1-2.317-2.316V8.774a2.316 2.316 0 0 1 2.317-2.316Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316ZM12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),_p=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",children:[(0,u.jsx)("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("path",{d:"M5.441 9.792h2.451a2.316 2.316 0 0 1 2.316 2.316v2.45a2.316 2.316 0 0 1-2.316 2.317h-2.45a2.316 2.316 0 0 1-2.317-2.316v-2.451a2.316 2.316 0 0 1 2.316-2.316Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("mask",{id:"SendToBackIcon",fill:"#fff",children:(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z"})}),(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.167 5.833v2.06a2.941 2.941 0 0 0 2.94 2.94h2.06v.393a2.941 2.941 0 0 1-2.941 2.94h-.393v-2.058a2.941 2.941 0 0 0-2.94-2.941h-2.06v-.393a2.941 2.941 0 0 1 2.942-2.94h.392Z",fill:"currentColor"}),(0,u.jsx)("path",{d:"M9.167 5.833h1.25v-1.25h-1.25v1.25Zm5 5h1.25v-1.25h-1.25v1.25Zm-3.334 3.334h-1.25v1.25h1.25v-1.25Zm-5-5h-1.25v1.25h1.25v-1.25Zm2.084-3.334v2.06h2.5v-2.06h-2.5Zm0 2.06a4.191 4.191 0 0 0 4.19 4.19v-2.5a1.691 1.691 0 0 1-1.69-1.69h-2.5Zm4.19 4.19h2.06v-2.5h-2.06v2.5Zm.81-1.25v.393h2.5v-.393h-2.5Zm0 .393c0 .933-.758 1.69-1.691 1.69v2.5a4.191 4.191 0 0 0 4.19-4.19h-2.5Zm-1.691 1.69h-.393v2.5h.393v-2.5Zm.857 1.25v-2.058h-2.5v2.059h2.5Zm0-2.058a4.191 4.191 0 0 0-4.19-4.191v2.5c.933 0 1.69.757 1.69 1.69h2.5Zm-4.19-4.191h-2.06v2.5h2.06v-2.5Zm-.81 1.25v-.393h-2.5v.393h2.5Zm0-.393c0-.934.758-1.69 1.692-1.69v-2.5a4.191 4.191 0 0 0-4.192 4.19h2.5Zm1.692-1.69h.392v-2.5h-.392v2.5Z",fill:"currentColor",mask:"url(#SendToBackIcon)"}),(0,u.jsx)("path",{d:"M12.108 3.125h2.45a2.316 2.316 0 0 1 2.317 2.316v2.451a2.316 2.316 0 0 1-2.316 2.316h-2.451a2.316 2.316 0 0 1-2.316-2.316v-2.45a2.316 2.316 0 0 1 2.316-2.317Z",stroke:"currentColor",strokeWidth:"1.25"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),Ap=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M3.333 3.333h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v7.083c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V8.125c0-.92-.746-1.667-1.666-1.667ZM6.875 6.458h-.417c-.92 0-1.666.747-1.666 1.667v3.75c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667v-3.75c0-.92-.747-1.667-1.667-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),Lp=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M6.875 3.125h-.417c-.92 0-1.666.746-1.666 1.667v7.083c0 .92.746 1.667 1.666 1.667h.417c.92 0 1.667-.746 1.667-1.667V4.792c0-.92-.747-1.667-1.667-1.667ZM13.542 5.817h-.417c-.92 0-1.667.747-1.667 1.667v4.391c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667V7.484c0-.92-.746-1.667-1.666-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),Pp=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M15.208 4.792H8.125c-.92 0-1.667.746-1.667 1.666v.417c0 .92.747 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM12.516 11.458H8.125c-.92 0-1.667.746-1.667 1.667v.417c0 .92.747 1.666 1.667 1.666h4.391c.92 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.667-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),Dp=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M16.667 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M11.875 4.792H4.792c-.92 0-1.667.746-1.667 1.666v.417c0 .92.746 1.667 1.667 1.667h7.083c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666ZM11.683 11.458H7.292c-.92 0-1.667.746-1.667 1.667v.417c0 .92.746 1.666 1.667 1.666h4.39c.921 0 1.667-.746 1.667-1.666v-.417c0-.92-.746-1.667-1.666-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),px=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M16.667 3.333v13.334M3.333 3.333v13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M14.375 10.208v-.416c0-.92-.746-1.667-1.667-1.667H7.292c-.92 0-1.667.746-1.667 1.667v.416c0 .92.746 1.667 1.667 1.667h5.416c.92 0 1.667-.746 1.667-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),fx=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M3.333 3.333h13.334M3.333 16.667h13.334",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M10.208 5.625h-.416c-.92 0-1.667.746-1.667 1.667v5.416c0 .92.746 1.667 1.667 1.667h.416c.92 0 1.667-.746 1.667-1.667V7.292c0-.92-.746-1.667-1.667-1.667Z"})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),Rp=L((0,u.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M1.667 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M8.333 10h3.334",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M15.417 10h2.916",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M6.875 4.792h-.417c-.92 0-1.666.746-1.666 1.666v7.084c0 .92.746 1.666 1.666 1.666h.417c.92 0 1.667-.746 1.667-1.666V6.458c0-.92-.747-1.666-1.667-1.666ZM13.542 6.458h-.417c-.92 0-1.667.747-1.667 1.667v3.75c0 .92.746 1.667 1.667 1.667h.417c.92 0 1.666-.746 1.666-1.667v-3.75c0-.92-.746-1.667-1.666-1.667Z"})]}),de),Np=L((0,u.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M10 18.333v-2.916",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M10 11.667V8.333",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M10 4.583V1.667",strokeLinecap:"round",strokeLinejoin:"round"}),(0,u.jsx)("path",{d:"M4.792 13.125v.417c0 .92.746 1.666 1.666 1.666h7.084c.92 0 1.666-.746 1.666-1.666v-.417c0-.92-.746-1.667-1.666-1.667H6.458c-.92 0-1.666.746-1.666 1.667ZM6.458 6.458v.417c0 .92.747 1.667 1.667 1.667h3.75c.92 0 1.667-.747 1.667-1.667v-.417c0-.92-.746-1.666-1.667-1.666h-3.75c-.92 0-1.667.746-1.667 1.666Z"})]}),de),id=L((0,u.jsxs)("g",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,u.jsx)("path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"}),(0,u.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}),(0,u.jsx)("path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85"})]}),Q),L8=L("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"),P8=L("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"),Mo=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,u.jsx)("path",{d:"M15 5 5 15M5 5l10 10"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),D8=L("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0}),R8=L("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24}),N8=L("M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z",{width:384,height:512}),Op=Qt.default.memo(({theme:t})=>L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M25 26H111V111H25",fill:jo(t)}),(0,u.jsx)("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:jo(t),strokeWidth:"2"}),(0,u.jsx)("path",{d:"M100 100H160V160H100",fill:jo(t)}),(0,u.jsx)("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:jo(t),strokeWidth:"2"}),(0,u.jsxs)("g",{fill:O0(t),stroke:jo(t),strokeWidth:"6",children:[(0,u.jsx)("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"2.5",y:"149.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"147.5",y:"2.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),Fp=Qt.default.memo(({theme:t})=>L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M25 26H111V111H25",fill:jo(t)}),(0,u.jsx)("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:jo(t),strokeWidth:"2"}),(0,u.jsx)("path",{d:"M100 100H160V160H100",fill:jo(t)}),(0,u.jsx)("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:jo(t),strokeWidth:"2"}),(0,u.jsxs)("g",{fill:O0(t),stroke:jo(t),strokeWidth:"6",children:[(0,u.jsx)("rect",{x:"2.5",y:"2.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"78.5",y:"149.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"147.5",y:"149.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"147.5",y:"78.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"105.5",y:"2.5",width:"30",height:"30"}),(0,u.jsx)("rect",{x:"2.5",y:"102.5",width:"30",height:"30"})]})]}),{width:182,height:182,mirror:!0})),hx=L((0,u.jsx)("g",{strokeWidth:1.25,children:(0,u.jsx)("path",{d:"M5.879 2.625h8.242a3.27 3.27 0 0 1 3.254 3.254v8.242a3.27 3.27 0 0 1-3.254 3.254H5.88a3.27 3.27 0 0 1-3.254-3.254V5.88A3.27 3.27 0 0 1 5.88 2.626l-.001-.001ZM4.518 16.118l7.608-12.83m.198 13.934 5.051-9.897M2.778 9.675l9.348-6.387m-7.608 12.83 12.857-8.793"})}),de),gx=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("mask",{id:"FillHachureIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:2,y:2,width:16,height:16,children:(0,u.jsx)("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.25"})}),(0,u.jsx)("g",{mask:"url(#FillHachureIcon)",children:(0,u.jsx)("path",{d:"M2.258 15.156 15.156 2.258M7.324 20.222 20.222 7.325m-20.444 5.35L12.675-.222m-8.157 18.34L17.416 5.22",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})})]}),de),bx=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("g",{clipPath:"url(#a)",children:[(0,u.jsx)("path",{d:"M5.879 2.625h8.242a3.254 3.254 0 0 1 3.254 3.254v8.242a3.254 3.254 0 0 1-3.254 3.254H5.88a3.254 3.254 0 0 1-3.254-3.254V5.88a3.254 3.254 0 0 1 3.254-3.254Z",stroke:"currentColor",strokeWidth:"1.25"}),(0,u.jsx)("mask",{id:"FillCrossHatchIcon",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-1,y:-1,width:22,height:22,children:(0,u.jsx)("path",{d:"M2.426 15.044 15.044 2.426M7.383 20 20 7.383M0 12.617 12.617 0m-7.98 17.941L17.256 5.324m-2.211 12.25L2.426 4.956M20 12.617 7.383 0m5.234 20L0 7.383m17.941 7.98L5.324 2.745",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,u.jsx)("g",{mask:"url(#FillCrossHatchIcon)",children:(0,u.jsx)("path",{d:"M14.121 2H5.88A3.879 3.879 0 0 0 2 5.879v8.242A3.879 3.879 0 0 0 5.879 18h8.242A3.879 3.879 0 0 0 18 14.121V5.88A3.879 3.879 0 0 0 14.121 2Z",fill:"currentColor"})})]}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),xx=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",children:(0,u.jsx)("path",{d:"M4.91 2.625h10.18a2.284 2.284 0 0 1 2.285 2.284v10.182a2.284 2.284 0 0 1-2.284 2.284H4.909a2.284 2.284 0 0 1-2.284-2.284V4.909a2.284 2.284 0 0 1 2.284-2.284Z",stroke:"currentColor",strokeWidth:"1.25"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),{...de,fill:"currentColor"}),Bp=L((0,u.jsx)(u.Fragment,{children:(0,u.jsx)("path",{d:"M4.167 10h11.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),de),vx=L((0,u.jsx)("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),de),yx=L((0,u.jsx)("path",{d:"M5 10h10",stroke:"currentColor",strokeWidth:"3.75",strokeLinecap:"round",strokeLinejoin:"round"}),de),O8=Qt.default.memo(({theme:t})=>L((0,u.jsx)("path",{d:"M6 10H34",stroke:jo(t),strokeWidth:2,fill:"none",strokeLinecap:"round"}),{width:40,height:20})),Ex=L((0,u.jsxs)("g",{strokeWidth:"2",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M5 12h2"}),(0,u.jsx)("path",{d:"M17 12h2"}),(0,u.jsx)("path",{d:"M11 12h2"})]}),Q),wx=L((0,u.jsxs)("g",{strokeWidth:"2",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 12v.01"}),(0,u.jsx)("path",{d:"M8 12v.01"}),(0,u.jsx)("path",{d:"M12 12v.01"}),(0,u.jsx)("path",{d:"M16 12v.01"}),(0,u.jsx)("path",{d:"M20 12v.01"})]}),Q),Cx=L((0,u.jsx)("path",{d:"M2.5 12.038c1.655-.885 5.9-3.292 8.568-4.354 2.668-1.063.101 2.821 1.32 3.104 1.218.283 5.112-1.814 5.112-1.814",strokeWidth:"1.25"}),de),Tx=L((0,u.jsx)("path",{d:"M2.5 12.563c1.655-.886 5.9-3.293 8.568-4.355 2.668-1.062.101 2.822 1.32 3.105 1.218.283 5.112-1.814 5.112-1.814m-13.469 2.23c2.963-1.586 6.13-5.62 7.468-4.998 1.338.623-1.153 4.11-.132 5.595 1.02 1.487 6.133-1.43 6.133-1.43",strokeWidth:"1.25"}),de),Sx=L((0,u.jsx)("path",{d:"M2.5 11.936c1.737-.879 8.627-5.346 10.42-5.268 1.795.078-.418 5.138.345 5.736.763.598 3.53-1.789 4.235-2.147M2.929 9.788c1.164-.519 5.47-3.28 6.987-3.114 1.519.165 1 3.827 2.121 4.109 1.122.281 3.839-2.016 4.606-2.42",strokeWidth:"1.25"}),de),kx=L((0,u.jsxs)("svg",{strokeWidth:"1.5",children:[(0,u.jsx)("path",{d:"M3.33334 9.99998V6.66665C3.33334 6.04326 3.33403 4.9332 3.33539 3.33646C4.95233 3.33436 6.06276 3.33331 6.66668 3.33331H10"}),(0,u.jsx)("path",{d:"M13.3333 3.33331V3.34331"}),(0,u.jsx)("path",{d:"M16.6667 3.33331V3.34331"}),(0,u.jsx)("path",{d:"M16.6667 6.66669V6.67669"}),(0,u.jsx)("path",{d:"M16.6667 10V10.01"}),(0,u.jsx)("path",{d:"M3.33334 13.3333V13.3433"}),(0,u.jsx)("path",{d:"M16.6667 13.3333V13.3433"}),(0,u.jsx)("path",{d:"M3.33334 16.6667V16.6767"}),(0,u.jsx)("path",{d:"M6.66666 16.6667V16.6767"}),(0,u.jsx)("path",{d:"M10 16.6667V16.6767"}),(0,u.jsx)("path",{d:"M13.3333 16.6667V16.6767"}),(0,u.jsx)("path",{d:"M16.6667 16.6667V16.6767"})]}),de),Ix=L((0,u.jsxs)("g",{strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 12v-4a4 4 0 0 1 4 -4h4"}),(0,u.jsx)("line",{x1:"16",y1:"4",x2:"16",y2:"4.01"}),(0,u.jsx)("line",{x1:"20",y1:"4",x2:"20",y2:"4.01"}),(0,u.jsx)("line",{x1:"20",y1:"8",x2:"20",y2:"8.01"}),(0,u.jsx)("line",{x1:"20",y1:"12",x2:"20",y2:"12.01"}),(0,u.jsx)("line",{x1:"4",y1:"16",x2:"4",y2:"16.01"}),(0,u.jsx)("line",{x1:"20",y1:"16",x2:"20",y2:"16.01"}),(0,u.jsx)("line",{x1:"4",y1:"20",x2:"4",y2:"20.01"}),(0,u.jsx)("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),(0,u.jsx)("line",{x1:"12",y1:"20",x2:"12",y2:"20.01"}),(0,u.jsx)("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"}),(0,u.jsx)("line",{x1:"20",y1:"20",x2:"20",y2:"20.01"})]}),Q),Mx=L((0,u.jsx)("path",{d:"M6 10H34",stroke:"currentColor",strokeWidth:2,fill:"none"}),{width:40,height:20}),_x=Qt.default.memo(({flip:t=!1})=>L((0,u.jsxs)("g",{transform:t?"translate(40, 0) scale(-1, 1)":"",stroke:"currentColor",strokeWidth:2,fill:"none",children:[(0,u.jsx)("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),(0,u.jsx)("path",{d:"M27.5 5L34.5 10L27.5 15"})]}),{width:40,height:20})),zp=Qt.default.memo(({flip:t=!1})=>L((0,u.jsxs)("g",{stroke:"currentColor",fill:"currentColor",transform:t?"translate(40, 0) scale(-1, 1)":"",children:[(0,u.jsx)("path",{d:"M32 10L6 10",strokeWidth:2}),(0,u.jsx)("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Ax=Qt.default.memo(({flip:t=!1})=>L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",transform:t?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,children:[(0,u.jsx)("path",{d:"M26 10L6 10"}),(0,u.jsx)("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})]}),{width:40,height:20})),Lx=Qt.default.memo(({flip:t=!1})=>L((0,u.jsx)("g",{transform:t?"translate(40, 0) scale(-1, 1)":"",children:(0,u.jsx)("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:"currentColor",strokeWidth:2,fill:"none"})}),{width:40,height:20})),Px=Qt.default.memo(({flip:t=!1})=>L((0,u.jsxs)("g",{stroke:"currentColor",fill:"currentColor",transform:t?"translate(40, 0) scale(-1, 1)":"",children:[(0,u.jsx)("path",{d:"M32 10L6 10",strokeWidth:2}),(0,u.jsx)("path",{d:"M27.5 5.5L34.5 10L27.5 14.5L27.5 5.5"})]}),{width:40,height:20})),Dx=Qt.default.memo(({flip:t=!1})=>L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",transform:t?"translate(40, 0) scale(-1, 1)":"",strokeWidth:2,strokeLinejoin:"round",children:[(0,u.jsx)("path",{d:"M6,9.5H27"}),(0,u.jsx)("path",{d:"M27,5L34,10L27,14Z",fill:"none"})]}),{width:40,height:20})),Rx=Qt.default.memo(({flip:t=!1})=>L((0,u.jsxs)("g",{stroke:"currentColor",fill:"currentColor",transform:t?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[(0,u.jsx)("path",{d:"M6,9.5H20"}),(0,u.jsx)("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),Nx=Qt.default.memo(({flip:t=!1})=>L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",transform:t?"translate(40, 0) scale(-1, 1)":"",strokeLinejoin:"round",strokeWidth:2,children:[(0,u.jsx)("path",{d:"M6,9.5H20"}),(0,u.jsx)("path",{d:"M27,5L34,10L27,14L20,9.5Z"})]}),{width:40,height:20})),Ox=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",children:(0,u.jsx)("path",{d:"M14.167 6.667a3.333 3.333 0 0 0-3.334-3.334H9.167a3.333 3.333 0 0 0 0 6.667h1.666a3.333 3.333 0 0 1 0 6.667H9.167a3.333 3.333 0 0 1-3.334-3.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),Fx=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",children:(0,u.jsx)("path",{d:"M5 16.667V3.333L10 15l5-11.667v13.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),Bx=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",children:(0,u.jsx)("path",{d:"M5.833 3.333v13.334h8.334",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),zx=L((0,u.jsx)(u.Fragment,{children:(0,u.jsx)("path",{d:"m1.667 3.333 6.666 13.334M8.333 3.333 1.667 16.667M11.667 3.333v13.334h6.666",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round"})}),de),Hp=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M3 7v-2h13v2"}),(0,u.jsx)("path",{d:"M10 5v14"}),(0,u.jsx)("path",{d:"M12 19h-4"}),(0,u.jsx)("path",{d:"M15 13v-1h6v1"}),(0,u.jsx)("path",{d:"M18 12v7"}),(0,u.jsx)("path",{d:"M17 19h2"})]}),Q),Hx=L((0,u.jsx)(u.Fragment,{children:(0,u.jsx)("g",{stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,u.jsx)("path",{d:"M5.833 16.667v-10a3.333 3.333 0 0 1 3.334-3.334h1.666a3.333 3.333 0 0 1 3.334 3.334v10M5.833 10.833h8.334"})})}),de),$x=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("g",{clipPath:"url(#a)",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",children:(0,u.jsx)("path",{d:"M5.833 6.667 2.5 10l3.333 3.333M14.167 6.667 17.5 10l-3.333 3.333M11.667 3.333 8.333 16.667"})}),(0,u.jsx)("defs",{children:(0,u.jsx)("clipPath",{id:"a",children:(0,u.jsx)("path",{fill:"#fff",d:"M0 0h20v20H0z"})})})]}),de),Ux=L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),(0,u.jsx)("line",{x1:"4",y1:"12",x2:"12",y2:"12"}),(0,u.jsx)("line",{x1:"4",y1:"16",x2:"16",y2:"16"})]}),Q),Wx=L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),(0,u.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),(0,u.jsx)("line",{x1:"6",y1:"16",x2:"18",y2:"16"})]}),Q),Gx=L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),(0,u.jsx)("line",{x1:"10",y1:"12",x2:"20",y2:"12"}),(0,u.jsx)("line",{x1:"8",y1:"16",x2:"20",y2:"16"})]}),Q),Vx=Qt.default.memo(({theme:t})=>L((0,u.jsxs)("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"4",x2:"20",y2:"4"}),(0,u.jsx)("rect",{x:"9",y:"8",width:"6",height:"12",rx:"2"})]}),Q)),Kx=Qt.default.memo(({theme:t})=>L((0,u.jsxs)("g",{strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"20",x2:"20",y2:"20"}),(0,u.jsx)("rect",{x:"9",y:"4",width:"6",height:"12",rx:"2"})]}),Q)),Yx=Qt.default.memo(({theme:t})=>L((0,u.jsxs)("g",{strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("line",{x1:"4",y1:"12",x2:"9",y2:"12"}),(0,u.jsx)("line",{x1:"15",y1:"12",x2:"20",y2:"12"}),(0,u.jsx)("rect",{x:"9",y:"6",width:"6",height:"12",rx:"2"})]}),Q)),Zx=L((0,u.jsx)("path",{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z",fill:"currentColor"}),{width:640,height:512}),F8=L((0,u.jsx)("path",{d:"M480 416C497.7 416 512 430.3 512 448C512 465.7 497.7 480 480 480H150.6C133.7 480 117.4 473.3 105.4 461.3L25.37 381.3C.3786 356.3 .3786 315.7 25.37 290.7L258.7 57.37C283.7 32.38 324.3 32.38 349.3 57.37L486.6 194.7C511.6 219.7 511.6 260.3 486.6 285.3L355.9 416H480zM265.4 416L332.7 348.7L195.3 211.3L70.63 336L150.6 416L265.4 416z"})),ad=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),(0,u.jsx)("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),(0,u.jsx)("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),(0,u.jsx)("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"})]}),Q),$p=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),(0,u.jsx)("path",{d:"M7 11l5 5l5 -5"}),(0,u.jsx)("path",{d:"M12 4l0 12"})]}),Q),ld=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M8 8m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z"}),(0,u.jsx)("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"})]}),Q),jx=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M7 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),(0,u.jsx)("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),(0,u.jsx)("path",{d:"M9.15 14.85l8.85 -10.85"}),(0,u.jsx)("path",{d:"M6 4l8.85 10.85"})]}),Q),Xx=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),(0,u.jsx)("path",{d:"M12 17l0 .01"}),(0,u.jsx)("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"})]}),Q),B8=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M7 4v16l13 -8z"})]}),Q),z8=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M17 4h-10a3 3 0 0 0 -3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3 -3v-10a3 3 0 0 0 -3 -3z",strokeWidth:"0",fill:"currentColor"})]}),Q),H8=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M5 12l5 5l10 -10"})]}),Q),qx=L((0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z"}),(0,u.jsx)("path",{d:"M12 9v4"}),(0,u.jsx)("path",{d:"M12 17h.01"})]}),Q),Jx=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M11 7l6 6"}),(0,u.jsx)("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]}),Q),Qx=L((0,u.jsxs)("g",{strokeWidth:1.5,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M12 3l-4 7h8z"}),(0,u.jsx)("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),(0,u.jsx)("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]}),Q),sd=L((0,u.jsxs)("g",{strokeWidth:1.5,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 7l16 0"}),(0,u.jsx)("path",{d:"M4 17l16 0"}),(0,u.jsx)("path",{d:"M7 4l0 16"}),(0,u.jsx)("path",{d:"M17 4l0 16"})]}),Q),cd=L((0,u.jsx)("path",{fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})),la=L((0,u.jsxs)("g",{strokeWidth:"1.25",children:[(0,u.jsx)("path",{d:"M4.16602 10H15.8327"}),(0,u.jsx)("path",{d:"M12.5 13.3333L15.8333 10"}),(0,u.jsx)("path",{d:"M12.5 6.66666L15.8333 9.99999"})]}),de),dd=L((0,u.jsxs)("g",{fill:"none",stroke:"currentColor",strokeWidth:"1.25",strokeLinecap:"round",strokeLinejoin:"round",transform:"rotate(90 10 10)",children:[(0,u.jsx)("path",{clipRule:"evenodd",d:"m9.644 13.69 7.774-7.773a2.357 2.357 0 0 0-3.334-3.334l-7.773 7.774L8 12l1.643 1.69Z"}),(0,u.jsx)("path",{d:"m13.25 3.417 3.333 3.333M10 10l2-2M5 15l3-3M2.156 17.894l1-1M5.453 19.029l-.144-1.407M2.377 11.887l.866 1.118M8.354 17.273l-1.194-.758M.953 14.652l1.408.13"})]}),20),sa=L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z"}),(0,u.jsx)("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),(0,u.jsx)("path",{d:"M15 6l3 3"}),(0,u.jsx)("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),(0,u.jsx)("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),Q),$8=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z"}),(0,u.jsx)("path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3"}),(0,u.jsx)("path",{d:"M15 6l3 3"}),(0,u.jsx)("path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"}),(0,u.jsx)("path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2"})]}),Q),Fl=L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M11.217 19.384a3.501 3.501 0 0 0 6.783 -1.217v-5.167l-6 -3.35"}),(0,u.jsx)("path",{d:"M5.214 15.014a3.501 3.501 0 0 0 4.446 5.266l4.34 -2.534v-6.946"}),(0,u.jsx)("path",{d:"M6 7.63c-1.391 -.236 -2.787 .395 -3.534 1.689a3.474 3.474 0 0 0 1.271 4.745l4.263 2.514l6 -3.348"}),(0,u.jsx)("path",{d:"M12.783 4.616a3.501 3.501 0 0 0 -6.783 1.217v5.067l6 3.45"}),(0,u.jsx)("path",{d:"M18.786 8.986a3.501 3.501 0 0 0 -4.446 -5.266l-4.34 2.534v6.946"}),(0,u.jsx)("path",{d:"M18 16.302c1.391 .236 2.787 -.395 3.534 -1.689a3.474 3.474 0 0 0 -1.271 -4.745l-4.308 -2.514l-5.955 3.42"})]}),Q),e2=L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),(0,u.jsx)("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),(0,u.jsx)("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),(0,u.jsx)("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"})]}),Q),ca=L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",strokeWidth:1.5,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"}),(0,u.jsx)("path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"})]}),Q),t2=L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828"}),(0,u.jsx)("path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87"}),(0,u.jsx)("path",{d:"M3 3l18 18"})]}),Q),o2=L((0,u.jsxs)("g",{stroke:"currentColor",fill:"none",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),(0,u.jsx)("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),(0,u.jsx)("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),(0,u.jsx)("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),(0,u.jsx)("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),(0,u.jsx)("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),Q),r2=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8"}),(0,u.jsx)("path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8"}),(0,u.jsx)("path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5"}),(0,u.jsx)("path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0"}),(0,u.jsx)("path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5"}),(0,u.jsx)("path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10"})]}),Q),md=L((0,u.jsxs)("g",{strokeWidth:1.5,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),(0,u.jsx)("path",{d:"M21 21l-6 -6"})]}),Q),n2=L((0,u.jsxs)("g",{strokeWidth:1.5,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M20.984 12.53a9 9 0 1 0 -7.552 8.355"}),(0,u.jsx)("path",{d:"M12 7v5l3 3"}),(0,u.jsx)("path",{d:"M19 16l-2 3h4l-2 3"})]}),Q),i2=L((0,u.jsxs)("g",{strokeWidth:1.5,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z"}),(0,u.jsx)("path",{d:"M5 10a7 7 0 0 0 14 0"}),(0,u.jsx)("path",{d:"M8 21l8 0"}),(0,u.jsx)("path",{d:"M12 17l0 4"})]}),Q),a2=L((0,u.jsxs)("g",{strokeWidth:1.5,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M3 3l18 18"}),(0,u.jsx)("path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1"}),(0,u.jsx)("path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85"}),(0,u.jsx)("path",{d:"M8 21l8 0"}),(0,u.jsx)("path",{d:"M12 17l0 4"})]}),Q),ud=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11"})]}),Q),l2=L((0,u.jsxs)("g",{children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M8 8m0 1a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-6a1 1 0 0 1 -1 -1z"}),(0,u.jsx)("path",{d:"M12 20v.01"}),(0,u.jsx)("path",{d:"M16 20v.01"}),(0,u.jsx)("path",{d:"M8 20v.01"}),(0,u.jsx)("path",{d:"M4 20v.01"}),(0,u.jsx)("path",{d:"M4 16v.01"}),(0,u.jsx)("path",{d:"M4 12v.01"}),(0,u.jsx)("path",{d:"M4 8v.01"}),(0,u.jsx)("path",{d:"M4 4v.01"}),(0,u.jsx)("path",{d:"M8 4v.01"}),(0,u.jsx)("path",{d:"M12 4v.01"}),(0,u.jsx)("path",{d:"M16 4v.01"}),(0,u.jsx)("path",{d:"M20 4v.01"}),(0,u.jsx)("path",{d:"M20 8v.01"}),(0,u.jsx)("path",{d:"M20 12v.01"}),(0,u.jsx)("path",{d:"M20 16v.01"}),(0,u.jsx)("path",{d:"M20 20v.01"})]}),Q),s2=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M5 3v18"}),(0,u.jsx)("path",{d:"M19 21v-18"}),(0,u.jsx)("path",{d:"M5 7h14"}),(0,u.jsx)("path",{d:"M5 15h14"}),(0,u.jsx)("path",{d:"M8 13v4"}),(0,u.jsx)("path",{d:"M11 13v4"}),(0,u.jsx)("path",{d:"M16 13v4"}),(0,u.jsx)("path",{d:"M14 5v4"}),(0,u.jsx)("path",{d:"M11 5v4"}),(0,u.jsx)("path",{d:"M8 5v4"}),(0,u.jsx)("path",{d:"M3 21h18"})]}),Q),c2=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M3 12l18 0"}),(0,u.jsx)("path",{d:"M7 16l10 0l-10 5l0 -5"}),(0,u.jsx)("path",{d:"M7 8l10 0l-10 -5l0 5"})]}),Q),d2=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M12 3l0 18"}),(0,u.jsx)("path",{d:"M16 7l0 10l5 0l-5 -10"}),(0,u.jsx)("path",{d:"M8 7l0 10l-5 0l5 -10"})]}),Q),Up=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"}),(0,u.jsx)("path",{d:"M19 6h1a2 2 0 0 1 2 2a5 5 0 0 1 -5 5l-5 0v2"}),(0,u.jsx)("path",{d:"M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"})]}),Q),pd=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),(0,u.jsx)("path",{d:"M22 22l-3 -3"}),(0,u.jsx)("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),(0,u.jsx)("path",{d:"M3 11v-1"}),(0,u.jsx)("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),(0,u.jsx)("path",{d:"M10 3h1"}),(0,u.jsx)("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"})]}),Q),m2=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),(0,u.jsx)("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),(0,u.jsx)("path",{d:"M4 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75"}),(0,u.jsx)("path",{d:"M10 15l2 6l2 -6"}),(0,u.jsx)("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"})]}),Q),u2=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),(0,u.jsx)("path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4"}),(0,u.jsx)("path",{d:"M20 15h-1a2 2 0 0 0 -2 2v2a2 2 0 0 0 2 2h1v-3"}),(0,u.jsx)("path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6"}),(0,u.jsx)("path",{d:"M11 21v-6l3 6v-6"})]}),Q),p2=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 13v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a2 2 0 0 0 6 0v-8a2 2 0 0 1 2 -2h1a2 2 0 0 1 2 2v8a8 8 0 0 1 -16 0"}),(0,u.jsx)("path",{d:"M4 8l5 0"}),(0,u.jsx)("path",{d:"M15 8l4 0"})]}),Q),f2=L((0,u.jsxs)("g",{strokeWidth:1.25,children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M3 14c.83 .642 2.077 1.017 3.5 1c1.423 .017 2.67 -.358 3.5 -1c.83 -.642 2.077 -1.017 3.5 -1c1.423 -.017 2.67 .358 3.5 1"}),(0,u.jsx)("path",{d:"M8 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),(0,u.jsx)("path",{d:"M12 3a2.4 2.4 0 0 0 -1 2a2.4 2.4 0 0 0 1 2"}),(0,u.jsx)("path",{d:"M3 10h14v5a6 6 0 0 1 -6 6h-2a6 6 0 0 1 -6 -6v-5z"}),(0,u.jsx)("path",{d:"M16.746 16.726a3 3 0 1 0 .252 -5.555"})]}),Q);var g2=v(S(),1),_6=(t,e)=>{let o=new Set(xe(t.filter(r=>Te(r)),e).map(r=>r.id));return{elements:t.map(r=>e.selectedElementIds[r.id]?ue(r,{isDeleted:!0}):r.frameId&&o.has(r.frameId)?ue(r,{isDeleted:!0}):gt(r)&&e.selectedElementIds[r.containerId]?ue(r,{isDeleted:!0}):r),appState:{...e,selectedElementIds:{},selectedGroupIds:{}}}},h2=(t,e)=>{if(t.editingGroupId){let o=ut(be(e),t.editingGroupId);if(o.length)return{...t,selectedElementIds:{[o[0].id]:!0}}}return t},Bl=$({name:"deleteSelectedElements",label:"labels.delete",icon:Xo,trackEvent:{category:"element",action:"delete"},perform:(t,e,o,r)=>{if(e.editingLinearElement){let{elementId:a,selectedPointsIndices:l,startBindingElement:s,endBindingElement:c}=e.editingLinearElement,m=r.scene.getNonDeletedElementsMap(),d=he.getElement(a,m);if(!d||l==null)return!1;if(d.points.length<2){let p=t.map(x=>x.id===d.id?ue(x,{isDeleted:!0}):x),b=h2(e,p);return{elements:p,appState:{...b,editingLinearElement:null},commitToHistory:!1}}let f={startBindingElement:l?.includes(0)?null:s,endBindingElement:l?.includes(d.points.length-1)?null:c};return he.deletePoints(d,l),{elements:t,appState:{...e,editingLinearElement:{...e.editingLinearElement,...f,selectedPointsIndices:l?.[0]>0?[l[0]-1]:[0]}},commitToHistory:!0}}let{elements:n,appState:i}=_6(t,e);return zi(n,t.filter(({id:a})=>e.selectedElementIds[a])),i=h2(i,n),{elements:n,appState:{...i,activeTool:tt(e,{type:"selection"}),multiElement:null,activeEmbeddable:null},commitToHistory:Oe(be(t),e)}},keyTest:(t,e,o)=>(t.key===T.BACKSPACE||t.key===T.DELETE)&&!t[T.CTRL_OR_CMD],PanelComponent:({elements:t,appState:e,updateData:o})=>(0,g2.jsx)(se,{type:"button",icon:Xo,title:g("labels.delete"),"aria-label":g("labels.delete"),onClick:()=>o(null),visible:Oe(be(t),e)})});h();h();var Wp=(t,e)=>t.frameId===e||t.id===e,x2=(t,e,o)=>{let r=[],n=[],i=null,a=-1,l=Ie(o||xe(t,e,{includeBoundTextElement:!0,includeElementsInFrames:!0}));for(;++a<t.length;){let s=t[a];l.get(s.id)?(n.length&&(r=r.concat(n),n=[]),r.push(a),i=a+1):s.isDeleted&&i===a?(i=a+1,n.push(a)):n=[]}return r},A6=t=>{let e=0;return t.reduce((o,r,n)=>(n>0&&t[n-1]!==r-1&&(e=++e),(o[e]||(o[e]=[])).push(r),o),[])},b2=(t,e,o)=>{if("containerId"in t&&t.containerId)if(o==="left"){let r=ao.getScene(t).getElement(t.containerId);if(r)return e.indexOf(r)}else return e.indexOf(t);else{let r=t.boundElements?.find(n=>n.type!=="arrow")?.id;if(r){if(o==="left")return e.indexOf(t);let n=ao.getScene(t).getElement(r);if(n)return e.indexOf(n)}}},L6=(t,e)=>{let o=-1,r=-1;return t.forEach((n,i)=>{Wp(n,e)&&(o===-1&&(o=i),r=i)}),o===-1?[]:t.slice(o,r+1)},P6=(t,e,o,r,n)=>{let i=e[o],a=d=>d.isDeleted?!1:n?d.frameId===n:t.editingGroupId?d.groupIds.includes(t.editingGroupId):!0,l=r==="left"?Ru(e,d=>a(d),Math.max(0,o-1)):Du(e,d=>a(d),o+1),s=e[l];if(!s)return-1;if(t.editingGroupId){if(i?.groupIds.join("")===s?.groupIds.join(""))return b2(s,e,r)??l;if(!s?.groupIds.includes(t.editingGroupId))return-1}if(!n&&(s.frameId||Te(s))){let d=L6(e,s.frameId||s.id);return r==="left"?e.indexOf(d[0]):e.indexOf(d[d.length-1])}if(!s.groupIds.length)return b2(s,e,r)??l;let c=t.editingGroupId?s.groupIds[s.groupIds.indexOf(t.editingGroupId)-1]:s.groupIds[s.groupIds.length-1],m=ut(e,c);return m.length?r==="left"?e.indexOf(m[0]):e.indexOf(m[m.length-1]):l},v2=(t,e)=>e.reduce((o,r)=>{let n=t[r];return o[n.id]=n,o},{}),y2=(t,e,o)=>{let r=x2(t,e),n=v2(t,r),i=A6(r);o==="right"&&(i=i.reverse());let a=new Set(r.filter(l=>Te(t[l])).map(l=>t[l].id));return i.forEach((l,s)=>{let c=l[0],m=l[l.length-1],d=o==="left"?c:m,f=l.some(k=>{let C=t[k];return C.frameId&&a.has(C.frameId)})?null:t[d]?.frameId,p=P6(e,t,d,o,f);if(p===-1||d===p)return;let b=o==="left"?t.slice(0,p):t.slice(0,c),x=t.slice(c,m+1),y=o==="left"?t.slice(p,c):t.slice(m+1,p+1),w=o==="left"?t.slice(m+1):t.slice(p+1);t=o==="left"?[...b,...x,...y,...w]:[...b,...y,...x,...w]}),t.map(l=>n[l.id]?Xi(l):l)},E2=(t,e,o,r,n)=>{let i=x2(t,e,n),a=v2(t,i),l=[],s,c;if(o==="left"){if(r)s=Du(t,p=>Wp(p,r));else if(e.editingGroupId){let p=ut(t,e.editingGroupId);if(!p.length)return t;s=t.indexOf(p[0])}else s=0;c=i[i.length-1]}else{if(r)c=Ru(t,p=>Wp(p,r));else if(e.editingGroupId){let p=ut(t,e.editingGroupId);if(!p.length)return t;c=t.indexOf(p[p.length-1])}else c=t.length-1;s=i[0]}s===-1&&(s=0);for(let p=s;p<c+1;p++)i.includes(p)||l.push(t[p]);let m=Object.values(a).map(p=>Xi(p)),d=t.slice(0,s),f=t.slice(c+1);return o==="left"?[...d,...m,...l,...f]:[...d,...l,...m,...f]};function w2(t,e,o,r){let n=Ie(xe(t,e,{includeBoundTextElement:!0,includeElementsInFrames:!0})),i={regularElements:[],frameChildren:new Map},a=new Set;for(let c of t)n.has(c.id)&&Te(c)&&a.add(c.id);for(let c of t)if(n.has(c.id))if(Te(c)||c.frameId&&a.has(c.frameId))i.regularElements.push(c);else if(!c.frameId)i.regularElements.push(c);else{let m=i.frameChildren.get(c.frameId)||[];m.push(c),i.frameChildren.set(c.frameId,m)}let l=t,s=Array.from(i.frameChildren.entries());for(let[c,m]of s)l=r(t,e,o,c,m);return r(l,e,o,null,i.regularElements)}var C2=(t,e)=>y2(t,e,"left"),T2=(t,e)=>y2(t,e,"right"),S2=(t,e)=>w2(t,e,"left",E2),k2=(t,e)=>w2(t,e,"right",E2);var zl=v(S(),1),Gp=$({name:"sendBackward",label:"labels.sendBackward",icon:Ip,trackEvent:{category:"element"},perform:(t,e)=>({elements:C2(t,e),appState:e,commitToHistory:!0}),keyPriority:40,keyTest:t=>t[T.CTRL_OR_CMD]&&!t.shiftKey&&t.code===fe.BRACKET_LEFT,PanelComponent:({updateData:t,appState:e})=>(0,zl.jsx)("button",{type:"button",className:"zIndexButton",onClick:()=>t(null),title:`${g("labels.sendBackward")} \u2014 ${N("CtrlOrCmd+[")}`,children:Ip})}),Vp=$({name:"bringForward",label:"labels.bringForward",icon:kp,trackEvent:{category:"element"},perform:(t,e)=>({elements:T2(t,e),appState:e,commitToHistory:!0}),keyPriority:40,keyTest:t=>t[T.CTRL_OR_CMD]&&!t.shiftKey&&t.code===fe.BRACKET_RIGHT,PanelComponent:({updateData:t,appState:e})=>(0,zl.jsx)("button",{type:"button",className:"zIndexButton",onClick:()=>t(null),title:`${g("labels.bringForward")} \u2014 ${N("CtrlOrCmd+]")}`,children:kp})}),Kp=$({name:"sendToBack",label:"labels.sendToBack",icon:_p,trackEvent:{category:"element"},perform:(t,e)=>({elements:S2(t,e),appState:e,commitToHistory:!0}),keyTest:t=>Wo?t[T.CTRL_OR_CMD]&&t.altKey&&t.code===fe.BRACKET_LEFT:t[T.CTRL_OR_CMD]&&t.shiftKey&&t.code===fe.BRACKET_LEFT,PanelComponent:({updateData:t,appState:e})=>(0,zl.jsx)("button",{type:"button",className:"zIndexButton",onClick:()=>t(null),title:`${g("labels.sendToBack")} \u2014 ${Wo?N("CtrlOrCmd+Alt+["):N("CtrlOrCmd+Shift+[")}`,children:_p})}),Yp=$({name:"bringToFront",label:"labels.bringToFront",icon:Mp,trackEvent:{category:"element"},perform:(t,e)=>({elements:k2(t,e),appState:e,commitToHistory:!0}),keyTest:t=>Wo?t[T.CTRL_OR_CMD]&&t.altKey&&t.code===fe.BRACKET_RIGHT:t[T.CTRL_OR_CMD]&&t.shiftKey&&t.code===fe.BRACKET_RIGHT,PanelComponent:({updateData:t,appState:e})=>(0,zl.jsx)("button",{type:"button",className:"zIndexButton",onClick:o=>t(null),title:`${g("labels.bringToFront")} \u2014 ${Wo?N("CtrlOrCmd+Alt+]"):N("CtrlOrCmd+Shift+]")}`,children:Mp})});h();var Zp=$({name:"selectAll",label:"labels.selectAll",icon:l2,trackEvent:{category:"canvas"},viewMode:!1,perform:(t,e,o,r)=>{if(e.editingLinearElement)return!1;let n=Ji(t.filter(i=>!i.isDeleted&&!(le(i)&&i.containerId)&&!i.locked)).reduce((i,a)=>(i[a.id]=!0,i),{});return{appState:{...e,...Rt({editingGroupId:null,selectedElementIds:n},be(t),e,r),selectedLinearElement:Object.keys(n).length===1&&Re(t[0])?new he(t[0]):null},commitToHistory:!0}},keyTest:t=>t[T.CTRL_OR_CMD]&&t.key===T.A});h();h();var D6=t=>{let e=t.slice(),o=new Set,r=i=>{let a=i[0]?.groupIds?.join(""),l=[i[0]],s=[];for(let c of i.slice(1))c.groupIds?.join("")===a?l.push(c):s.push(c);return s.length?[...l,...r(s)]:l},n=new Map;return e.forEach((i,a)=>{if(!n.has(i.id))if(i.groupIds?.length){let l=i.groupIds[i.groupIds.length-1],s=e.slice(a).filter(c=>{let m=c?.groupIds?.some(d=>d===l);return m&&n.set(c.id,!0),m});for(let c of r(s))o.add(c)}else o.add(i)}),o.size!==t.length?(console.error("normalizeGroupElementOrder: lost some elements... bailing!"),t):[...o]},R6=t=>{let e=A1(t),o=t.slice(),r=new Set;return o.forEach((n,i)=>{n&&(n.boundElements?.length?(r.add(n),o[i]=null,n.boundElements.forEach(a=>{let l=e.get(a.id);l&&a.type==="text"&&(r.add(l[0]),o[l[1]]=null)})):n.type==="text"&&n.containerId&&e.get(n.containerId)?.[0].boundElements?.find(l=>l.id===n.id)||(r.add(n),o[i]=null))}),r.size!==t.length?(console.error("normalizeBoundElementsOrder: lost some elements... bailing!"),t):[...r]},I2=t=>R6(D6(t));var M2=v(S(),1),jp=$({name:"duplicateSelection",label:"labels.duplicateSelection",icon:Nl,trackEvent:{category:"element"},perform:(t,e,o,r)=>{let n=r.scene.getNonDeletedElementsMap();if(e.editingLinearElement){let i=he.duplicateSelectedPoints(e,n);return i?{elements:t,appState:i.appState,commitToHistory:!0}:!1}return{...N6(t,e),commitToHistory:!0}},keyTest:t=>t[T.CTRL_OR_CMD]&&t.key===T.D,PanelComponent:({elements:t,appState:e,updateData:o})=>(0,M2.jsx)(se,{type:"button",icon:Nl,title:`${g("labels.duplicateSelection")} \u2014 ${N("CtrlOrCmd+D")}`,"aria-label":g("labels.duplicateSelection"),onClick:()=>o(null),visible:Oe(be(t),e)})}),N6=(t,e)=>{let o=I2(t),r=new Map,n=[],i=[],a=new Map,l=w=>{let k=Ec(e.editingGroupId,r,w,{x:w.x+Mr/2,y:w.y+Mr/2});return a.set(w.id,k.id),i.push(w),n.push(k),k},s=Ie(xe(o,e,{includeBoundTextElement:!0,includeElementsInFrames:!0})),c=new Map,m=w=>{for(let k of w)c.set(k.id,!0);return w},d=[],f=-1;for(;++f<o.length;){let w=o[f];if(c.get(w.id))continue;let k=at(w,Ie(t)),C=Te(w);if(s.get(w.id)){if(w.groupIds.length||k||C){let M=fb(e,w);if(M){let _=ut(o,M).flatMap(I=>Te(I)?[...un(t,I.id),I]:[I]);d.push(...m([..._,..._.map(I=>l(I))]));continue}if(k){d.push(...m([w,k,l(w),l(k)]));continue}if(C){let _=un(o,w.id);d.push(...m([..._,w,..._.map(I=>l(I)),l(w)]));continue}}(!w.frameId||!s.has(w.frameId))&&d.push(...m([w,l(w)]))}else d.push(...m([w]))}let p=[],b=new Map;for(f=d.length;--f>=0;){let w=d[f];b.get(w.id)||(b.set(w.id,!0),p.push(w))}let x=p.reverse();uc(d,i,a),mc(d,i,a),Pc(x,i,a);let y=Ji(n);return{elements:x,appState:{...e,...Rt({editingGroupId:e.editingGroupId,selectedElementIds:y.reduce((w,k)=>(gt(k)||(w[k.id]=!0),w),{})},be(x),e,null)}}};h();h();var O6=["ai"],ve=(t,e,o,r)=>{try{if(typeof window>"u"||E.VITE_WORKER_ID||E.PROD||!O6.includes(t))return;E.PROD||console.info("trackEvent",{category:t,action:e,label:o,value:r}),window.sa_event&&window.sa_event(e,{category:t,label:o,value:r})}catch(n){console.error("error during analytics",n)}};h();var da=v(S(),1),fr=t=>(0,da.jsx)("div",{className:"buttonList buttonListIcon",children:t.options.map(e=>t.type==="button"?(0,da.jsx)("button",{onClick:o=>t.onClick(e.value,o),className:z({active:e.active??t.value===e.value}),"data-testid":e.testId,title:e.text,children:e.icon},e.text):(0,da.jsxs)("label",{className:z({active:t.value===e.value}),title:e.text,children:[(0,da.jsx)("input",{type:"radio",name:t.group,onChange:()=>t.onChange(e.value),checked:t.value===e.value,"data-testid":e.testId}),e.icon]},e.text))});h();h();var fd=v(S(),1),_2=({onChange:t,type:e,activeColor:o,topPicks:r})=>{let n;return e==="elementStroke"&&(n=Bs),e==="elementBackground"&&(n=zs),e==="canvasBackground"&&(n=Hs),r&&(n=r),n?(0,fd.jsx)("div",{className:"color-picker__top-picks",children:n.map(i=>(0,fd.jsx)("button",{className:z("color-picker__button",{active:i===o,"is-transparent":i==="transparent"||!i}),style:{"--swatch-color":i},type:"button",title:i,onClick:()=>t(i),"data-testid":`color-top-pick-${i}`,children:(0,fd.jsx)("div",{className:"color-picker__button-outline"})},i))}):(console.error("Invalid type for TopPicks"),null)};h();var hn=v(H(),1);h();var hd=v(H(),1);h();var fn=({palette:t,color:e})=>{for(let[o,r]of Object.entries(t))if(Array.isArray(r)){let n=r.indexOf(e);if(n>-1)return{colorName:o,shade:n}}else if(r===e)return{colorName:o,shade:null};return null},Hl=[["q","w","e","r","t"],["a","s","d","f","g"],["z","x","c","v","b"]].flat(),Xp=({color:t,palette:e})=>!Object.values(e).flat().includes(t),L2=(t,e,o)=>{let r={elementBackground:"backgroundColor",elementStroke:"strokeColor"},n=t.filter(a=>{if(a.isDeleted)return!1;let l=a[r[e]];return Xp({color:l,palette:o})}),i=new Map;return n.forEach(a=>{let l=a[r[e]];i.has(l)?i.set(l,i.get(l)+1):i.set(l,1)}),[...i.entries()].sort((a,l)=>l[1]-a[1]).map(a=>a[0]).slice(0,Wg)},_o=$e(null),A2=(t,e,o)=>(t*299+e*587+o*114)/1e3>=160?"black":"white",P2=(t,e)=>{if(e){let i=new Option().style;if(i.color=t,i.color){let a=i.color.replace(/^(rgb|rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(","),l=parseInt(a[0]),s=parseInt(a[1]),c=parseInt(a[2]);return A2(l,s,c)}}if(t==="transparent")return"black";let o=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);return A2(o,r,n)};h();var D2=v(S(),1),F6=({color:t,keyLabel:e,isCustomColor:o=!1,isShade:r=!1})=>(0,D2.jsxs)("div",{className:"color-picker__button__hotkey-label",style:{color:P2(t,o)},children:[r&&"\u21E7",e]}),ma=F6;var Ur=v(S(),1),R2=({hex:t,onChange:e,palette:o})=>{let r=fn({color:t||"transparent",palette:o}),[n,i]=Ee(_o),a=(0,hd.useRef)(null);if((0,hd.useEffect)(()=>{a.current&&n==="shades"&&a.current.focus()},[r,n]),r){let{colorName:l,shade:s}=r,c=o[l];if(Array.isArray(c))return(0,Ur.jsx)("div",{className:"color-picker-content--default shades",children:c.map((m,d)=>(0,Ur.jsxs)("button",{ref:d===s&&n==="shades"?a:void 0,tabIndex:-1,type:"button",className:z("color-picker__button color-picker__button--large",{active:d===s}),"aria-label":"Shade",title:`${l} - ${d+1}`,style:m?{"--swatch-color":m}:void 0,onClick:()=>{e(m),i("shades")},children:[(0,Ur.jsx)("div",{className:"color-picker__button-outline"}),(0,Ur.jsx)(ma,{color:m,keyLabel:d+1,isShade:!0})]},d))})}return(0,Ur.jsxs)("div",{className:"color-picker-content--default",style:{position:"relative"},tabIndex:-1,children:[(0,Ur.jsx)("button",{type:"button",tabIndex:-1,className:"color-picker__button color-picker__button--large color-picker__button--no-focus-visible"}),(0,Ur.jsx)("div",{tabIndex:-1,style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",fontSize:"0.75rem"},children:g("colorPicker.noShades")})]})};h();var gd=v(H(),1);var ua=v(S(),1),B6=({palette:t,color:e,onChange:o,label:r,activeShade:n})=>{let i=fn({color:e||"transparent",palette:t}),[a,l]=Ee(_o),s=(0,gd.useRef)(null);return(0,gd.useEffect)(()=>{s.current&&a==="baseColors"&&s.current.focus()},[i?.colorName,a]),(0,ua.jsx)("div",{className:"color-picker-content--default",children:Object.entries(t).map(([c,m],d)=>{let f=(Array.isArray(m)?m[n]:m)||"transparent",p=Hl[d],b=g(`colors.${c.replace(/\d+/,"")}`,null,"");return(0,ua.jsxs)("button",{ref:i?.colorName===c?s:void 0,tabIndex:-1,type:"button",className:z("color-picker__button color-picker__button--large",{active:i?.colorName===c,"is-transparent":f==="transparent"||!f}),onClick:()=>{o(f),l("baseColors")},title:`${b}${f.startsWith("#")?` ${f}`:""} \u2014 ${p}`,"aria-label":`${b} \u2014 ${p}`,style:f?{"--swatch-color":f}:void 0,"data-testid":`color-${c}`,children:[(0,ua.jsx)("div",{className:"color-picker__button-outline"}),(0,ua.jsx)(ma,{color:f,keyLabel:p})]},c)})})},N2=B6;h();var bd=v(H(),1);var pa=v(S(),1),O2=({colors:t,color:e,onChange:o,label:r})=>{let[n,i]=Ee(_o),a=(0,bd.useRef)(null);return(0,bd.useEffect)(()=>{a.current&&a.current.focus()},[e,n]),(0,pa.jsx)("div",{className:"color-picker-content--default",children:t.map((l,s)=>(0,pa.jsxs)("button",{ref:e===l?a:void 0,tabIndex:-1,type:"button",className:z("color-picker__button color-picker__button--large",{active:e===l,"is-transparent":l==="transparent"||!l}),onClick:()=>{o(l),i("custom")},title:l,"aria-label":r,style:{"--swatch-color":l},children:[(0,pa.jsx)("div",{className:"color-picker__button-outline"}),(0,pa.jsx)(ma,{color:l,keyLabel:s+1,isCustomColor:!0})]},s))})};h();var qp=(t,e,o)=>{let r=Math.ceil(o/Bn);switch(e=e??-1,t){case"ArrowLeft":{let n=e-1;return n<0?o-1:n}case"ArrowRight":return(e+1)%o;case"ArrowDown":{let n=e+Bn;return n>=o?e%Bn:n}case"ArrowUp":{let n=e-Bn,i=n<0?Bn*r+n:n;return i>=o?void 0:i}}},z6=({e:t,colorObj:e,onChange:o,palette:r,customColors:n,setActiveColorPickerSection:i,activeShade:a})=>{if(e?.shade!=null&&["Digit1","Digit2","Digit3","Digit4","Digit5"].includes(t.code)&&t.shiftKey){let l=Number(t.code.slice(-1))-1;return o(r[e.colorName][l]),i("shades"),!0}if(["1","2","3","4","5"].includes(t.key)&&n[Number(t.key)-1])return o(n[Number(t.key)-1]),i("custom"),!0;if(Hl.includes(t.key)){let l=Hl.indexOf(t.key),s=Object.keys(r)[l],c=r[s],m=Array.isArray(c)?c[a]:c;return o(m),i("baseColors"),!0}return!1},F2=({event:t,activeColorPickerSection:e,palette:o,color:r,onChange:n,customColors:i,setActiveColorPickerSection:a,updateData:l,activeShade:s,onEyeDropperToggle:c,onEscape:m})=>{if(t[T.CTRL_OR_CMD])return!1;if(t.key===T.ESCAPE)return m(t),!0;if(t.key===T.ALT)return c(!0),!0;if(t.key===T.I)return c(),!0;let d=fn({color:r,palette:o});if(t.key===T.TAB){let f={custom:!!i.length,baseColors:!0,shades:d?.shade!=null,hex:!0},p=Object.entries(f).reduce((k,[C,M])=>(M&&k.push(C),k),[]),b=p.indexOf(e),x=t.shiftKey?-1:1,y=b+x>p.length-1?0:b+x<0?p.length-1:b+x,w=p[y];return w&&a(w),w==="custom"?n(i[0]):w==="baseColors"&&(Object.entries(o).find(([C,M])=>Array.isArray(M)?M.includes(r):M===r?C:null)||n(Sr.black)),t.preventDefault(),t.stopPropagation(),!0}if(z6({e:t,colorObj:d,onChange:n,palette:o,customColors:i,setActiveColorPickerSection:a,activeShade:s}))return!0;if(e==="shades"&&d){let{shade:f}=d,p=qp(t.key,f,Bn);if(p!==void 0)return n(o[d.colorName][p]),!0}if(e==="baseColors"&&d){let{colorName:f}=d,p=Object.keys(o),b=p.indexOf(f),x=qp(t.key,b,p.length);if(x!==void 0){let y=p[x],w=o[y];return n(Array.isArray(w)?w[s]:w),!0}}if(e==="custom"){let f=i.indexOf(r),p=qp(t.key,f,i.length);if(p!==void 0){let b=i[p];return n(b),!0}}return!1};h();var B2=v(S(),1),H6=({children:t})=>(0,B2.jsx)("div",{className:"color-picker__heading",children:t}),fa=H6;var po=v(S(),1),z2=({color:t,onChange:e,label:o,type:r,elements:n,palette:i,updateData:a,children:l,onEyeDropperToggle:s,onEscape:c})=>{let[m]=hn.default.useState(()=>r==="canvasBackground"?[]:L2(n,r,i)),[d,f]=Ee(_o),p=fn({color:t,palette:i});(0,hn.useEffect)(()=>{if(!d){let w=Xp({color:t,palette:i}),k=w&&!m.includes(t);f(k?"hex":w?"custom":p?.shade!=null?"shades":"baseColors")}},[d,t,i,f,p,m]);let[b,x]=(0,hn.useState)(p?.shade??(r==="elementBackground"?Vg:Gg));(0,hn.useEffect)(()=>{p?.shade!=null&&x(p.shade);let w=k=>{k.key===T.ALT&&s(!1)};return document.addEventListener("keyup",w,{capture:!0}),()=>{document.removeEventListener("keyup",w,{capture:!0})}},[p,s]);let y=hn.default.useRef(null);return(0,po.jsx)("div",{role:"dialog","aria-modal":"true","aria-label":g("labels.colorPicker"),children:(0,po.jsxs)("div",{ref:y,onKeyDown:w=>{F2({event:w,activeColorPickerSection:d,palette:i,color:t,onChange:e,onEyeDropperToggle:s,customColors:m,setActiveColorPickerSection:f,updateData:a,activeShade:b,onEscape:c})&&(w.preventDefault(),w.stopPropagation())},className:"color-picker-content",tabIndex:-1,children:[!!m.length&&(0,po.jsxs)("div",{children:[(0,po.jsx)(fa,{children:g("colorPicker.mostUsedCustomColors")}),(0,po.jsx)(O2,{colors:m,color:t,label:g("colorPicker.mostUsedCustomColors"),onChange:e})]}),(0,po.jsxs)("div",{children:[(0,po.jsx)(fa,{children:g("colorPicker.colors")}),(0,po.jsx)(N2,{color:t,label:o,palette:i,onChange:e,activeShade:b})]}),(0,po.jsxs)("div",{children:[(0,po.jsx)(fa,{children:g("colorPicker.shades")}),(0,po.jsx)(R2,{hex:t,onChange:e,palette:i})]}),l]})})};h();h();function ye(){return ye=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},ye.apply(this,arguments)}var we=v(H());h();function xt(t,e,{checkForDefaultPrevented:o=!0}={}){return function(n){if(t?.(n),o===!1||!n.defaultPrevented)return e?.(n)}}h();var H2=v(H());function $6(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Jp(...t){return e=>t.forEach(o=>$6(o,e))}function Ot(...t){return(0,H2.useCallback)(Jp(...t),t)}h();var qo=v(H());function gr(t,e=[]){let o=[];function r(i,a){let l=(0,qo.createContext)(a),s=o.length;o=[...o,a];function c(d){let{scope:f,children:p,...b}=d,x=f?.[t][s]||l,y=(0,qo.useMemo)(()=>b,Object.values(b));return(0,qo.createElement)(x.Provider,{value:y},p)}function m(d,f){let p=f?.[t][s]||l,b=(0,qo.useContext)(p);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,m]}let n=()=>{let i=o.map(a=>(0,qo.createContext)(a));return function(l){let s=l?.[t]||i;return(0,qo.useMemo)(()=>({[`__scope${t}`]:{...l,[t]:s}}),[l,s])}};return n.scopeName=t,[r,U6(n,...e)]}function U6(...t){let e=t[0];if(t.length===1)return e;let o=()=>{let r=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){let a=r.reduce((l,{useScope:s,scopeName:c})=>{let d=s(i)[`__scope${c}`];return{...l,...d}},{});return(0,qo.useMemo)(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return o.scopeName=e.scopeName,o}h();var ft=v(H());h();var ha=v(H()),$2=v(pr());h();var rt=v(H());var gn=(0,rt.forwardRef)((t,e)=>{let{children:o,...r}=t,n=rt.Children.toArray(o),i=n.find(G6);if(i){let a=i.props.children,l=n.map(s=>s===i?rt.Children.count(a)>1?rt.Children.only(null):(0,rt.isValidElement)(a)?a.props.children:null:s);return(0,rt.createElement)(Qp,ye({},r,{ref:e}),(0,rt.isValidElement)(a)?(0,rt.cloneElement)(a,void 0,l):null)}return(0,rt.createElement)(Qp,ye({},r,{ref:e}),o)});gn.displayName="Slot";var Qp=(0,rt.forwardRef)((t,e)=>{let{children:o,...r}=t;return(0,rt.isValidElement)(o)?(0,rt.cloneElement)(o,{...V6(r,o.props),ref:Jp(e,o.ref)}):rt.Children.count(o)>1?rt.Children.only(null):null});Qp.displayName="SlotClone";var W6=({children:t})=>(0,rt.createElement)(rt.Fragment,null,t);function G6(t){return(0,rt.isValidElement)(t)&&t.type===W6}function V6(t,e){let o={...e};for(let r in e){let n=t[r],i=e[r];/^on[A-Z]/.test(r)?n&&i?o[r]=(...l)=>{i(...l),n(...l)}:n&&(o[r]=n):r==="style"?o[r]={...n,...i}:r==="className"&&(o[r]=[n,i].filter(Boolean).join(" "))}return{...t,...o}}var K6=["a","button","div","h2","h3","img","label","li","nav","ol","p","span","svg","ul"],lt=K6.reduce((t,e)=>{let o=(0,ha.forwardRef)((r,n)=>{let{asChild:i,...a}=r,l=i?gn:e;return(0,ha.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,ha.createElement)(l,ye({},a,{ref:n}))});return o.displayName=`Primitive.${e}`,{...t,[e]:o}},{});function U2(t,e){t&&(0,$2.flushSync)(()=>t.dispatchEvent(e))}h();var ga=v(H());function eo(t){let e=(0,ga.useRef)(t);return(0,ga.useEffect)(()=>{e.current=t}),(0,ga.useMemo)(()=>(...o)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...o)},[])}h();var W2=v(H());function G2(t,e=globalThis?.document){let o=eo(t);(0,W2.useEffect)(()=>{let r=n=>{n.key==="Escape"&&o(n)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[o,e])}var ef="dismissableLayer.update",Y6="dismissableLayer.pointerDownOutside",Z6="dismissableLayer.focusOutside",V2,j6=(0,ft.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Y2=(0,ft.forwardRef)((t,e)=>{var o;let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:s,...c}=t,m=(0,ft.useContext)(j6),[d,f]=(0,ft.useState)(null),p=(o=d?.ownerDocument)!==null&&o!==void 0?o:globalThis?.document,[,b]=(0,ft.useState)({}),x=Ot(e,P=>f(P)),y=Array.from(m.layers),[w]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),k=y.indexOf(w),C=d?y.indexOf(d):-1,M=m.layersWithOutsidePointerEventsDisabled.size>0,_=C>=k,I=X6(P=>{let F=P.target,D=[...m.branches].some(W=>W.contains(F));!_||D||(i?.(P),l?.(P),P.defaultPrevented||s?.())},p),A=q6(P=>{let F=P.target;[...m.branches].some(W=>W.contains(F))||(a?.(P),l?.(P),P.defaultPrevented||s?.())},p);return G2(P=>{C===m.layers.size-1&&(n?.(P),!P.defaultPrevented&&s&&(P.preventDefault(),s()))},p),(0,ft.useEffect)(()=>{if(d)return r&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(V2=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(d)),m.layers.add(d),K2(),()=>{r&&m.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=V2)}},[d,p,r,m]),(0,ft.useEffect)(()=>()=>{d&&(m.layers.delete(d),m.layersWithOutsidePointerEventsDisabled.delete(d),K2())},[d,m]),(0,ft.useEffect)(()=>{let P=()=>b({});return document.addEventListener(ef,P),()=>document.removeEventListener(ef,P)},[]),(0,ft.createElement)(lt.div,ye({},c,{ref:x,style:{pointerEvents:M?_?"auto":"none":void 0,...t.style},onFocusCapture:xt(t.onFocusCapture,A.onFocusCapture),onBlurCapture:xt(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:xt(t.onPointerDownCapture,I.onPointerDownCapture)}))});function X6(t,e=globalThis?.document){let o=eo(t),r=(0,ft.useRef)(!1),n=(0,ft.useRef)(()=>{});return(0,ft.useEffect)(()=>{let i=l=>{if(l.target&&!r.current){let c=function(){Z2(Y6,o,s,{discrete:!0})},s={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",n.current),n.current=c,e.addEventListener("click",n.current,{once:!0})):c()}r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",n.current)}},[e,o]),{onPointerDownCapture:()=>r.current=!0}}function q6(t,e=globalThis?.document){let o=eo(t),r=(0,ft.useRef)(!1);return(0,ft.useEffect)(()=>{let n=i=>{i.target&&!r.current&&Z2(Z6,o,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",n),()=>e.removeEventListener("focusin",n)},[e,o]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function K2(){let t=new CustomEvent(ef);document.dispatchEvent(t)}function Z2(t,e,o,{discrete:r}){let n=o.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:o});e&&n.addEventListener(t,e,{once:!0}),r?U2(n,i):n.dispatchEvent(i)}h();var X2=v(H()),tf=0;function q2(){(0,X2.useEffect)(()=>{var t,e;let o=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=o[0])!==null&&t!==void 0?t:j2()),document.body.insertAdjacentElement("beforeend",(e=o[1])!==null&&e!==void 0?e:j2()),tf++,()=>{tf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),tf--}},[])}function j2(){let t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}h();var lo=v(H());var of="focusScope.autoFocusOnMount",rf="focusScope.autoFocusOnUnmount",J2={bubbles:!1,cancelable:!0};var ov=(0,lo.forwardRef)((t,e)=>{let{loop:o=!1,trapped:r=!1,onMountAutoFocus:n,onUnmountAutoFocus:i,...a}=t,[l,s]=(0,lo.useState)(null),c=eo(n),m=eo(i),d=(0,lo.useRef)(null),f=Ot(e,x=>s(x)),p=(0,lo.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,lo.useEffect)(()=>{if(r){let x=function(w){if(p.paused||!l)return;let k=w.target;l.contains(k)?d.current=k:Qn(d.current,{select:!0})},y=function(w){p.paused||!l||l.contains(w.relatedTarget)||Qn(d.current,{select:!0})};return document.addEventListener("focusin",x),document.addEventListener("focusout",y),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",y)}}},[r,l,p.paused]),(0,lo.useEffect)(()=>{if(l){ev.add(p);let x=document.activeElement;if(!l.contains(x)){let w=new CustomEvent(of,J2);l.addEventListener(of,c),l.dispatchEvent(w),w.defaultPrevented||(J6(r4(rv(l)),{select:!0}),document.activeElement===x&&Qn(l))}return()=>{l.removeEventListener(of,c),setTimeout(()=>{let w=new CustomEvent(rf,J2);l.addEventListener(rf,m),l.dispatchEvent(w),w.defaultPrevented||Qn(x??document.body,{select:!0}),l.removeEventListener(rf,m),ev.remove(p)},0)}}},[l,c,m,p]);let b=(0,lo.useCallback)(x=>{if(!o&&!r||p.paused)return;let y=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(y&&w){let k=x.currentTarget,[C,M]=Q6(k);C&&M?!x.shiftKey&&w===M?(x.preventDefault(),o&&Qn(C,{select:!0})):x.shiftKey&&w===C&&(x.preventDefault(),o&&Qn(M,{select:!0})):w===k&&x.preventDefault()}},[o,r,p.paused]);return(0,lo.createElement)(lt.div,ye({tabIndex:-1},a,{ref:f,onKeyDown:b}))});function J6(t,{select:e=!1}={}){let o=document.activeElement;for(let r of t)if(Qn(r,{select:e}),document.activeElement!==o)return}function Q6(t){let e=rv(t),o=Q2(e,t),r=Q2(e.reverse(),t);return[o,r]}function rv(t){let e=[],o=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{let n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)e.push(o.currentNode);return e}function Q2(t,e){for(let o of t)if(!e4(o,{upTo:e}))return o}function e4(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function t4(t){return t instanceof HTMLInputElement&&"select"in t}function Qn(t,{select:e=!1}={}){if(t&&t.focus){let o=document.activeElement;t.focus({preventScroll:!0}),t!==o&&t4(t)&&e&&t.select()}}var ev=o4();function o4(){let t=[];return{add(e){let o=t[0];e!==o&&o?.pause(),t=tv(t,e),t.unshift(e)},remove(e){var o;t=tv(t,e),(o=t[0])===null||o===void 0||o.resume()}}}function tv(t,e){let o=[...t],r=o.indexOf(e);return r!==-1&&o.splice(r,1),o}function r4(t){return t.filter(e=>e.tagName!=="A")}h();var xd=v(H());h();var nv=v(H()),Ao=globalThis?.document?nv.useLayoutEffect:()=>{};var n4=xd.useId||(()=>{}),i4=0;function ba(t){let[e,o]=xd.useState(n4());return Ao(()=>{t||o(r=>r??String(i4++))},[t]),t||(e?`radix-${e}`:"")}h();var Ye=v(H());h();h();h();function ti(t){return t.split("-")[0]}function Ul(t){return t.split("-")[1]}function va(t){return["top","bottom"].includes(ti(t))?"x":"y"}function af(t){return t==="y"?"height":"width"}function iv(t,e,o){let{reference:r,floating:n}=t,i=r.x+r.width/2-n.width/2,a=r.y+r.height/2-n.height/2,l=va(e),s=af(l),c=r[s]/2-n[s]/2,m=l==="x",d;switch(ti(e)){case"top":d={x:i,y:r.y-n.height};break;case"bottom":d={x:i,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:a};break;case"left":d={x:r.x-n.width,y:a};break;default:d={x:r.x,y:r.y}}switch(Ul(e)){case"start":d[l]-=c*(o&&m?-1:1);break;case"end":d[l]+=c*(o&&m?-1:1)}return d}var cv=async(t,e,o)=>{let{placement:r="bottom",strategy:n="absolute",middleware:i=[],platform:a}=o,l=await(a.isRTL==null?void 0:a.isRTL(e)),s=await a.getElementRects({reference:t,floating:e,strategy:n}),{x:c,y:m}=iv(s,r,l),d=r,f={},p=0;for(let b=0;b<i.length;b++){let{name:x,fn:y}=i[b],{x:w,y:k,data:C,reset:M}=await y({x:c,y:m,initialPlacement:r,placement:d,strategy:n,middlewareData:f,rects:s,platform:a,elements:{reference:t,floating:e}});c=w??c,m=k??m,f={...f,[x]:{...f[x],...C}},M&&p<=50&&(p++,typeof M=="object"&&(M.placement&&(d=M.placement),M.rects&&(s=M.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:n}):M.rects),{x:c,y:m}=iv(s,d,l)),b=-1)}return{x:c,y:m,placement:d,strategy:n,middlewareData:f}};function dv(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function $l(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function xa(t,e){var o;e===void 0&&(e={});let{x:r,y:n,platform:i,rects:a,elements:l,strategy:s}=t,{boundary:c="clippingAncestors",rootBoundary:m="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=e,b=dv(p),x=l[f?d==="floating"?"reference":"floating":d],y=$l(await i.getClippingRect({element:(o=await(i.isElement==null?void 0:i.isElement(x)))==null||o?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:c,rootBoundary:m,strategy:s})),w=$l(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:d==="floating"?{...a.floating,x:r,y:n}:a.reference,offsetParent:await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),strategy:s}):a[d]);return{top:y.top-w.top+b.top,bottom:w.bottom-y.bottom+b.bottom,left:y.left-w.left+b.left,right:w.right-y.right+b.right}}var a4=Math.min,ei=Math.max;function nf(t,e,o){return ei(t,a4(e,o))}var yd=t=>({name:"arrow",options:t,async fn(e){let{element:o,padding:r=0}=t??{},{x:n,y:i,placement:a,rects:l,platform:s}=e;if(o==null)return{};let c=dv(r),m={x:n,y:i},d=va(a),f=Ul(a),p=af(d),b=await s.getDimensions(o),x=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=l.reference[p]+l.reference[d]-m[d]-l.floating[p],k=m[d]-l.reference[d],C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o)),M=C?d==="y"?C.clientHeight||0:C.clientWidth||0:0;M===0&&(M=l.floating[p]);let _=w/2-k/2,I=c[x],A=M-b[p]-c[y],P=M/2-b[p]/2+_,F=nf(I,P,A),D=(f==="start"?c[x]:c[y])>0&&P!==F&&l.reference[p]<=l.floating[p];return{[d]:m[d]-(D?P<I?I-P:A-P:0),data:{[d]:F,centerOffset:P-F}}}}),l4={left:"right",right:"left",bottom:"top",top:"bottom"};function vd(t){return t.replace(/left|right|bottom|top/g,e=>l4[e])}function s4(t,e,o){o===void 0&&(o=!1);let r=Ul(t),n=va(t),i=af(n),a=n==="x"?r===(o?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=vd(a)),{main:a,cross:vd(a)}}var c4={start:"end",end:"start"};function av(t){return t.replace(/start|end/g,e=>c4[e])}var mv=["top","right","bottom","left"],Q_=mv.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);var lf=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var o;let{placement:r,middlewareData:n,rects:i,initialPlacement:a,platform:l,elements:s}=e,{mainAxis:c=!0,crossAxis:m=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",flipAlignment:p=!0,...b}=t,x=ti(r),y=d||(x===a||!p?[vd(a)]:function(P){let F=vd(P);return[av(P),F,av(F)]}(a)),w=[a,...y],k=await xa(e,b),C=[],M=((o=n.flip)==null?void 0:o.overflows)||[];if(c&&C.push(k[x]),m){let{main:P,cross:F}=s4(r,i,await(l.isRTL==null?void 0:l.isRTL(s.floating)));C.push(k[P],k[F])}if(M=[...M,{placement:r,overflows:C}],!C.every(P=>P<=0)){var _,I;let P=((_=(I=n.flip)==null?void 0:I.index)!=null?_:0)+1,F=w[P];if(F)return{data:{index:P,overflows:M},reset:{placement:F}};let D="bottom";switch(f){case"bestFit":{var A;let W=(A=M.map(O=>[O,O.overflows.filter(U=>U>0).reduce((U,ee)=>U+ee,0)]).sort((O,U)=>O[1]-U[1])[0])==null?void 0:A[0].placement;W&&(D=W);break}case"initialPlacement":D=a}if(r!==D)return{reset:{placement:D}}}return{}}}};function lv(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function sv(t){return mv.some(e=>t[e]>=0)}var sf=function(t){let{strategy:e="referenceHidden",...o}=t===void 0?{}:t;return{name:"hide",async fn(r){let{rects:n}=r;switch(e){case"referenceHidden":{let i=lv(await xa(r,{...o,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:sv(i)}}}case"escaped":{let i=lv(await xa(r,{...o,altBoundary:!0}),n.floating);return{data:{escapedOffsets:i,escaped:sv(i)}}}default:return{}}}}},cf=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){let{x:o,y:r}=e,n=await async function(i,a){let{placement:l,platform:s,elements:c}=i,m=await(s.isRTL==null?void 0:s.isRTL(c.floating)),d=ti(l),f=Ul(l),p=va(l)==="x",b=["left","top"].includes(d)?-1:1,x=m&&p?-1:1,y=typeof a=="function"?a(i):a,{mainAxis:w,crossAxis:k,alignmentAxis:C}=typeof y=="number"?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...y};return f&&typeof C=="number"&&(k=f==="end"?-1*C:C),p?{x:k*x,y:w*b}:{x:w*b,y:k*x}}(e,t);return{x:o+n.x,y:r+n.y,data:n}}}};function uv(t){return t==="x"?"y":"x"}var df=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){let{x:o,y:r,placement:n}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:y=>{let{x:w,y:k}=y;return{x:w,y:k}}},...s}=t,c={x:o,y:r},m=await xa(e,s),d=va(ti(n)),f=uv(d),p=c[d],b=c[f];if(i){let y=d==="y"?"bottom":"right";p=nf(p+m[d==="y"?"top":"left"],p,p-m[y])}if(a){let y=f==="y"?"bottom":"right";b=nf(b+m[f==="y"?"top":"left"],b,b-m[y])}let x=l.fn({...e,[d]:p,[f]:b});return{...x,data:{x:x.x-o,y:x.y-r}}}}},mf=function(t){return t===void 0&&(t={}),{options:t,fn(e){let{x:o,y:r,placement:n,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:s=!0,crossAxis:c=!0}=t,m={x:o,y:r},d=va(n),f=uv(d),p=m[d],b=m[f],x=typeof l=="function"?l({...i,placement:n}):l,y=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(s){let _=d==="y"?"height":"width",I=i.reference[d]-i.floating[_]+y.mainAxis,A=i.reference[d]+i.reference[_]-y.mainAxis;p<I?p=I:p>A&&(p=A)}if(c){var w,k,C,M;let _=d==="y"?"width":"height",I=["top","left"].includes(ti(n)),A=i.reference[f]-i.floating[_]+(I&&(w=(k=a.offset)==null?void 0:k[f])!=null?w:0)+(I?0:y.crossAxis),P=i.reference[f]+i.reference[_]+(I?0:(C=(M=a.offset)==null?void 0:M[f])!=null?C:0)-(I?y.crossAxis:0);b<A?b=A:b>P&&(b=P)}return{[d]:p,[f]:b}}}},uf=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){let{placement:o,rects:r,platform:n,elements:i}=e,{apply:a,...l}=t,s=await xa(e,l),c=ti(o),m=Ul(o),d,f;c==="top"||c==="bottom"?(d=c,f=m===(await(n.isRTL==null?void 0:n.isRTL(i.floating))?"start":"end")?"left":"right"):(f=c,d=m==="end"?"top":"bottom");let p=ei(s.left,0),b=ei(s.right,0),x=ei(s.top,0),y=ei(s.bottom,0),w={availableHeight:r.floating.height-(["left","right"].includes(o)?2*(x!==0||y!==0?x+y:ei(s.top,s.bottom)):s[d]),availableWidth:r.floating.width-(["top","bottom"].includes(o)?2*(p!==0||b!==0?p+b:ei(s.left,s.right)):s[f])},k=await n.getDimensions(i.floating);a?.({...e,...w});let C=await n.getDimensions(i.floating);return k.width!==C.width||k.height!==C.height?{reset:{rects:!0}}:{}}}};function xv(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function Vr(t){if(t==null)return window;if(!xv(t)){let e=t.ownerDocument;return e&&e.defaultView||window}return t}function Gl(t){return Vr(t).getComputedStyle(t)}function Wr(t){return xv(t)?"":t?(t.nodeName||"").toLowerCase():""}function vv(){let t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function br(t){return t instanceof Vr(t).HTMLElement}function xn(t){return t instanceof Vr(t).Element}function ff(t){return typeof ShadowRoot>"u"?!1:t instanceof Vr(t).ShadowRoot||t instanceof ShadowRoot}function Cd(t){let{overflow:e,overflowX:o,overflowY:r}=Gl(t);return/auto|scroll|overlay|hidden/.test(e+r+o)}function d4(t){return["table","td","th"].includes(Wr(t))}function pv(t){let e=/firefox/i.test(vv()),o=Gl(t);return o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].includes(o.willChange)||e&&o.willChange==="filter"||e&&!!o.filter&&o.filter!=="none"}function yv(){return!/^((?!chrome|android).)*safari/i.test(vv())}var fv=Math.min,Wl=Math.max,Ed=Math.round;function Gr(t,e,o){var r,n,i,a;e===void 0&&(e=!1),o===void 0&&(o=!1);let l=t.getBoundingClientRect(),s=1,c=1;e&&br(t)&&(s=t.offsetWidth>0&&Ed(l.width)/t.offsetWidth||1,c=t.offsetHeight>0&&Ed(l.height)/t.offsetHeight||1);let m=xn(t)?Vr(t):window,d=!yv()&&o,f=(l.left+(d&&(r=(n=m.visualViewport)==null?void 0:n.offsetLeft)!=null?r:0))/s,p=(l.top+(d&&(i=(a=m.visualViewport)==null?void 0:a.offsetTop)!=null?i:0))/c,b=l.width/s,x=l.height/c;return{width:b,height:x,top:p,right:f+b,bottom:p+x,left:f,x:f,y:p}}function bn(t){return(e=t,(e instanceof Vr(e).Node?t.ownerDocument:t.document)||window.document).documentElement;var e}function Td(t){return xn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ev(t){return Gr(bn(t)).left+Td(t).scrollLeft}function m4(t,e,o){let r=br(e),n=bn(e),i=Gr(t,r&&function(s){let c=Gr(s);return Ed(c.width)!==s.offsetWidth||Ed(c.height)!==s.offsetHeight}(e),o==="fixed"),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};if(r||!r&&o!=="fixed")if((Wr(e)!=="body"||Cd(n))&&(a=Td(e)),br(e)){let s=Gr(e,!0);l.x=s.x+e.clientLeft,l.y=s.y+e.clientTop}else n&&(l.x=Ev(n));return{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function wv(t){return Wr(t)==="html"?t:t.assignedSlot||t.parentNode||(ff(t)?t.host:null)||bn(t)}function hv(t){return br(t)&&getComputedStyle(t).position!=="fixed"?t.offsetParent:null}function pf(t){let e=Vr(t),o=hv(t);for(;o&&d4(o)&&getComputedStyle(o).position==="static";)o=hv(o);return o&&(Wr(o)==="html"||Wr(o)==="body"&&getComputedStyle(o).position==="static"&&!pv(o))?e:o||function(r){let n=wv(r);for(ff(n)&&(n=n.host);br(n)&&!["html","body"].includes(Wr(n));){if(pv(n))return n;n=n.parentNode}return null}(t)||e}function gv(t){if(br(t))return{width:t.offsetWidth,height:t.offsetHeight};let e=Gr(t);return{width:e.width,height:e.height}}function Cv(t){let e=wv(t);return["html","body","#document"].includes(Wr(e))?t.ownerDocument.body:br(e)&&Cd(e)?e:Cv(e)}function wd(t,e){var o;e===void 0&&(e=[]);let r=Cv(t),n=r===((o=t.ownerDocument)==null?void 0:o.body),i=Vr(r),a=n?[i].concat(i.visualViewport||[],Cd(r)?r:[]):r,l=e.concat(a);return n?l:l.concat(wd(a))}function bv(t,e,o){return e==="viewport"?$l(function(r,n){let i=Vr(r),a=bn(r),l=i.visualViewport,s=a.clientWidth,c=a.clientHeight,m=0,d=0;if(l){s=l.width,c=l.height;let f=yv();(f||!f&&n==="fixed")&&(m=l.offsetLeft,d=l.offsetTop)}return{width:s,height:c,x:m,y:d}}(t,o)):xn(e)?function(r,n){let i=Gr(r,!1,n==="fixed"),a=i.top+r.clientTop,l=i.left+r.clientLeft;return{top:a,left:l,x:l,y:a,right:l+r.clientWidth,bottom:a+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(e,o):$l(function(r){var n;let i=bn(r),a=Td(r),l=(n=r.ownerDocument)==null?void 0:n.body,s=Wl(i.scrollWidth,i.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),c=Wl(i.scrollHeight,i.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),m=-a.scrollLeft+Ev(r),d=-a.scrollTop;return Gl(l||i).direction==="rtl"&&(m+=Wl(i.clientWidth,l?l.clientWidth:0)-s),{width:s,height:c,x:m,y:d}}(bn(t)))}function u4(t){let e=wd(t),o=["absolute","fixed"].includes(Gl(t).position)&&br(t)?pf(t):t;return xn(o)?e.filter(r=>xn(r)&&function(n,i){let a=i.getRootNode==null?void 0:i.getRootNode();if(n.contains(i))return!0;if(a&&ff(a)){let l=i;do{if(l&&n===l)return!0;l=l.parentNode||l.host}while(l)}return!1}(r,o)&&Wr(r)!=="body"):[]}var p4={getClippingRect:function(t){let{element:e,boundary:o,rootBoundary:r,strategy:n}=t,i=[...o==="clippingAncestors"?u4(e):[].concat(o),r],a=i[0],l=i.reduce((s,c)=>{let m=bv(e,c,n);return s.top=Wl(m.top,s.top),s.right=fv(m.right,s.right),s.bottom=fv(m.bottom,s.bottom),s.left=Wl(m.left,s.left),s},bv(e,a,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:o,strategy:r}=t,n=br(o),i=bn(o);if(o===i)return e;let a={scrollLeft:0,scrollTop:0},l={x:0,y:0};if((n||!n&&r!=="fixed")&&((Wr(o)!=="body"||Cd(i))&&(a=Td(o)),br(o))){let s=Gr(o,!0);l.x=s.x+o.clientLeft,l.y=s.y+o.clientTop}return{...e,x:e.x-a.scrollLeft+l.x,y:e.y-a.scrollTop+l.y}},isElement:xn,getDimensions:gv,getOffsetParent:pf,getDocumentElement:bn,getElementRects:t=>{let{reference:e,floating:o,strategy:r}=t;return{reference:m4(e,pf(o),r),floating:{...gv(o),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>Gl(t).direction==="rtl"};function Tv(t,e,o,r){r===void 0&&(r={});let{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:a=!0,animationFrame:l=!1}=r,s=n&&!l,c=i&&!l,m=s||c?[...xn(t)?wd(t):[],...wd(e)]:[];m.forEach(b=>{s&&b.addEventListener("scroll",o,{passive:!0}),c&&b.addEventListener("resize",o)});let d,f=null;if(a){let b=!0;f=new ResizeObserver(()=>{b||o(),b=!1}),xn(t)&&!l&&f.observe(t),f.observe(e)}let p=l?Gr(t):null;return l&&function b(){let x=Gr(t);!p||x.x===p.x&&x.y===p.y&&x.width===p.width&&x.height===p.height||o(),p=x,d=requestAnimationFrame(b)}(),o(),()=>{var b;m.forEach(x=>{s&&x.removeEventListener("scroll",o),c&&x.removeEventListener("resize",o)}),(b=f)==null||b.disconnect(),f=null,l&&cancelAnimationFrame(d)}}var Sv=(t,e,o)=>cv(t,e,{platform:p4,...o});var Ft=v(H()),Sd=v(H()),kv=v(pr()),hf=typeof document<"u"?Sd.useLayoutEffect:Sd.useEffect;function gf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let o,r,n;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(o=t.length,o!=e.length)return!1;for(r=o;r--!==0;)if(!gf(t[r],e[r]))return!1;return!0}if(n=Object.keys(t),o=n.length,o!==Object.keys(e).length)return!1;for(r=o;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,n[r]))return!1;for(r=o;r--!==0;){let i=n[r];if(!(i==="_owner"&&t.$$typeof)&&!gf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function f4(t){let e=Ft.useRef(t);return hf(()=>{e.current=t}),e}function Iv(t){let{middleware:e,placement:o="bottom",strategy:r="absolute",whileElementsMounted:n}=t===void 0?{}:t,i=Ft.useRef(null),a=Ft.useRef(null),l=f4(n),s=Ft.useRef(null),[c,m]=Ft.useState({x:null,y:null,strategy:r,placement:o,middlewareData:{}}),[d,f]=Ft.useState(e);gf(d?.map(C=>{let{options:M}=C;return M}),e?.map(C=>{let{options:M}=C;return M}))||f(e);let p=Ft.useCallback(()=>{!i.current||!a.current||Sv(i.current,a.current,{middleware:d,placement:o,strategy:r}).then(C=>{b.current&&kv.flushSync(()=>{m(C)})})},[d,o,r]);hf(()=>{b.current&&p()},[p]);let b=Ft.useRef(!1);hf(()=>(b.current=!0,()=>{b.current=!1}),[]);let x=Ft.useCallback(()=>{if(typeof s.current=="function"&&(s.current(),s.current=null),i.current&&a.current)if(l.current){let C=l.current(i.current,a.current,p);s.current=C}else p()},[p,l]),y=Ft.useCallback(C=>{i.current=C,x()},[x]),w=Ft.useCallback(C=>{a.current=C,x()},[x]),k=Ft.useMemo(()=>({reference:i,floating:a}),[]);return Ft.useMemo(()=>({...c,update:p,refs:k,reference:y,floating:w}),[c,p,k,y,w])}var Mv=t=>{let{element:e,padding:o}=t;function r(n){return Object.prototype.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){return r(e)?e.current!=null?yd({element:e.current,padding:o}).fn(n):{}:e?yd({element:e,padding:o}).fn(n):{}}}};h();var Vl=v(H());var h4=(0,Vl.forwardRef)((t,e)=>{let{children:o,width:r=10,height:n=5,...i}=t;return(0,Vl.createElement)(lt.svg,ye({},i,{ref:e,width:r,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),t.asChild?o:(0,Vl.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),_v=h4;h();var Av=v(H());function Lv(t){let[e,o]=(0,Av.useState)(void 0);return Ao(()=>{if(t){o({width:t.offsetWidth,height:t.offsetHeight});let r=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;let i=n[0],a,l;if("borderBoxSize"in i){let s=i.borderBoxSize,c=Array.isArray(s)?s[0]:s;a=c.inlineSize,l=c.blockSize}else a=t.offsetWidth,l=t.offsetHeight;o({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else o(void 0)},[t]),e}var Pv="Popper",[bf,xf]=gr(Pv),[g4,Dv]=bf(Pv),b4=t=>{let{__scopePopper:e,children:o}=t,[r,n]=(0,Ye.useState)(null);return(0,Ye.createElement)(g4,{scope:e,anchor:r,onAnchorChange:n},o)},x4="PopperAnchor",v4=(0,Ye.forwardRef)((t,e)=>{let{__scopePopper:o,virtualRef:r,...n}=t,i=Dv(x4,o),a=(0,Ye.useRef)(null),l=Ot(e,a);return(0,Ye.useEffect)(()=>{i.onAnchorChange(r?.current||a.current)}),r?null:(0,Ye.createElement)(lt.div,ye({},n,{ref:l}))}),kd="PopperContent",[y4,E4]=bf(kd),[w4,C4]=bf(kd,{hasParent:!1,positionUpdateFns:new Set}),T4=(0,Ye.forwardRef)((t,e)=>{var o,r,n,i,a,l,s,c;let{__scopePopper:m,side:d="bottom",sideOffset:f=0,align:p="center",alignOffset:b=0,arrowPadding:x=0,collisionBoundary:y=[],collisionPadding:w=0,sticky:k="partial",hideWhenDetached:C=!1,avoidCollisions:M=!0,onPlaced:_,...I}=t,A=Dv(kd,m),[P,F]=(0,Ye.useState)(null),D=Ot(e,Mi=>F(Mi)),[W,O]=(0,Ye.useState)(null),U=Lv(W),ee=(o=U?.width)!==null&&o!==void 0?o:0,K=(r=U?.height)!==null&&r!==void 0?r:0,pe=d+(p!=="center"?"-"+p:""),me=typeof w=="number"?w:{top:0,right:0,bottom:0,left:0,...w},ce=Array.isArray(y)?y:[y],oe=ce.length>0,R={padding:me,boundary:ce.filter(_4),altBoundary:oe},{reference:B,floating:V,strategy:Z,x:Y,y:j,placement:J,middlewareData:ne,update:dt}=Iv({strategy:"fixed",placement:pe,whileElementsMounted:Tv,middleware:[A4(),cf({mainAxis:f+K,alignmentAxis:b}),M?df({mainAxis:!0,crossAxis:!1,limiter:k==="partial"?mf():void 0,...R}):void 0,W?Mv({element:W,padding:x}):void 0,M?lf({...R}):void 0,uf({...R,apply:({elements:Mi,availableWidth:o6,availableHeight:r6})=>{Mi.floating.style.setProperty("--radix-popper-available-width",`${o6}px`),Mi.floating.style.setProperty("--radix-popper-available-height",`${r6}px`)}}),L4({arrowWidth:ee,arrowHeight:K}),C?sf({strategy:"referenceHidden"}):void 0].filter(M4)});Ao(()=>{B(A.anchor)},[B,A.anchor]);let et=Y!==null&&j!==null,[it,He]=Rv(J),Xt=eo(_);Ao(()=>{et&&Xt?.()},[et,Xt]);let Fs=(n=ne.arrow)===null||n===void 0?void 0:n.x,q5=(i=ne.arrow)===null||i===void 0?void 0:i.y,J5=((a=ne.arrow)===null||a===void 0?void 0:a.centerOffset)!==0,[Q5,e6]=(0,Ye.useState)();Ao(()=>{P&&e6(window.getComputedStyle(P).zIndex)},[P]);let{hasParent:t6,positionUpdateFns:Ii}=C4(kd,m),el=!t6;(0,Ye.useLayoutEffect)(()=>{if(!el)return Ii.add(dt),()=>{Ii.delete(dt)}},[el,Ii,dt]),Ao(()=>{el&&et&&Array.from(Ii).reverse().forEach(Mi=>requestAnimationFrame(Mi))},[el,et,Ii]);let zg={"data-side":it,"data-align":He,...I,ref:D,style:{...I.style,animation:et?void 0:"none",opacity:(l=ne.hide)!==null&&l!==void 0&&l.referenceHidden?0:void 0}};return(0,Ye.createElement)("div",{ref:V,"data-radix-popper-content-wrapper":"",style:{position:Z,left:0,top:0,transform:et?`translate3d(${Math.round(Y)}px, ${Math.round(j)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Q5,"--radix-popper-transform-origin":[(s=ne.transformOrigin)===null||s===void 0?void 0:s.x,(c=ne.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:t.dir},(0,Ye.createElement)(y4,{scope:m,placedSide:it,onArrowChange:O,arrowX:Fs,arrowY:q5,shouldHideArrow:J5},el?(0,Ye.createElement)(w4,{scope:m,hasParent:!0,positionUpdateFns:Ii},(0,Ye.createElement)(lt.div,zg)):(0,Ye.createElement)(lt.div,zg)))}),S4="PopperArrow",k4={top:"bottom",right:"left",bottom:"top",left:"right"},I4=(0,Ye.forwardRef)(function(e,o){let{__scopePopper:r,...n}=e,i=E4(S4,r),a=k4[i.placedSide];return(0,Ye.createElement)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0}},(0,Ye.createElement)(_v,ye({},n,{ref:o,style:{...n.style,display:"block"}})))});function M4(t){return t!==void 0}function _4(t){return t!==null}var A4=()=>({name:"anchorCssProperties",fn(t){let{rects:e,elements:o}=t,{width:r,height:n}=e.reference;return o.floating.style.setProperty("--radix-popper-anchor-width",`${r}px`),o.floating.style.setProperty("--radix-popper-anchor-height",`${n}px`),{}}}),L4=t=>({name:"transformOrigin",options:t,fn(e){var o,r,n,i,a;let{placement:l,rects:s,middlewareData:c}=e,d=((o=c.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,f=d?0:t.arrowWidth,p=d?0:t.arrowHeight,[b,x]=Rv(l),y={start:"0%",center:"50%",end:"100%"}[x],w=((r=(n=c.arrow)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0)+f/2,k=((i=(a=c.arrow)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0)+p/2,C="",M="";return b==="bottom"?(C=d?y:`${w}px`,M=`${-p}px`):b==="top"?(C=d?y:`${w}px`,M=`${s.floating.height+p}px`):b==="right"?(C=`${-p}px`,M=d?y:`${k}px`):b==="left"&&(C=`${s.floating.width+p}px`,M=d?y:`${k}px`),{data:{x:C,y:M}}}});function Rv(t){let[e,o="center"]=t.split("-");return[e,o]}var Nv=b4,Ov=v4,Fv=T4,Bv=I4;h();var Id=v(H()),zv=v(pr());var Hv=(0,Id.forwardRef)((t,e)=>{var o;let{container:r=globalThis==null||(o=globalThis.document)===null||o===void 0?void 0:o.body,...n}=t;return r?zv.default.createPortal((0,Id.createElement)(lt.div,ye({},n,{ref:e})),r):null});h();var Wt=v(H()),$v=v(pr());function P4(t,e){return(0,Wt.useReducer)((o,r)=>{let n=e[o][r];return n??o},t)}var ya=t=>{let{present:e,children:o}=t,r=D4(e),n=typeof o=="function"?o({present:r.isPresent}):Wt.Children.only(o),i=Ot(r.ref,n.ref);return typeof o=="function"||r.isPresent?(0,Wt.cloneElement)(n,{ref:i}):null};ya.displayName="Presence";function D4(t){let[e,o]=(0,Wt.useState)(),r=(0,Wt.useRef)({}),n=(0,Wt.useRef)(t),i=(0,Wt.useRef)("none"),a=t?"mounted":"unmounted",[l,s]=P4(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,Wt.useEffect)(()=>{let c=Md(r.current);i.current=l==="mounted"?c:"none"},[l]),Ao(()=>{let c=r.current,m=n.current;if(m!==t){let f=i.current,p=Md(c);t?s("MOUNT"):p==="none"||c?.display==="none"?s("UNMOUNT"):s(m&&f!==p?"ANIMATION_OUT":"UNMOUNT"),n.current=t}},[t,s]),Ao(()=>{if(e){let c=d=>{let p=Md(r.current).includes(d.animationName);d.target===e&&p&&(0,$v.flushSync)(()=>s("ANIMATION_END"))},m=d=>{d.target===e&&(i.current=Md(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else s("ANIMATION_END")},[e,s]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:(0,Wt.useCallback)(c=>{c&&(r.current=getComputedStyle(c)),o(c)},[])}}function Md(t){return t?.animationName||"none"}h();var vn=v(H());function Ea({prop:t,defaultProp:e,onChange:o=()=>{}}){let[r,n]=R4({defaultProp:e,onChange:o}),i=t!==void 0,a=i?t:r,l=eo(o),s=(0,vn.useCallback)(c=>{if(i){let d=typeof c=="function"?c(t):c;d!==t&&l(d)}else n(c)},[i,t,n,l]);return[a,s]}function R4({defaultProp:t,onChange:e}){let o=(0,vn.useState)(t),[r]=o,n=(0,vn.useRef)(r),i=eo(e);return(0,vn.useEffect)(()=>{n.current!==r&&(i(r),n.current=r)},[r,n,i]),o}h();var N4=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},wa=new WeakMap,_d=new WeakMap,Ad={},vf=0,Uv=function(t){return t&&(t.host||Uv(t.parentNode))},O4=function(t,e){return e.map(function(o){if(t.contains(o))return o;var r=Uv(o);return r&&t.contains(r)?r:(console.error("aria-hidden",o,"in not contained inside",t,". Doing nothing"),null)}).filter(function(o){return!!o})},F4=function(t,e,o,r){var n=O4(e,Array.isArray(t)?t:[t]);Ad[o]||(Ad[o]=new WeakMap);var i=Ad[o],a=[],l=new Set,s=new Set(n),c=function(d){!d||l.has(d)||(l.add(d),c(d.parentNode))};n.forEach(c);var m=function(d){!d||s.has(d)||Array.prototype.forEach.call(d.children,function(f){if(l.has(f))m(f);else{var p=f.getAttribute(r),b=p!==null&&p!=="false",x=(wa.get(f)||0)+1,y=(i.get(f)||0)+1;wa.set(f,x),i.set(f,y),a.push(f),x===1&&b&&_d.set(f,!0),y===1&&f.setAttribute(o,"true"),b||f.setAttribute(r,"true")}})};return m(e),l.clear(),vf++,function(){a.forEach(function(d){var f=wa.get(d)-1,p=i.get(d)-1;wa.set(d,f),i.set(d,p),f||(_d.has(d)||d.removeAttribute(r),_d.delete(d)),p||d.removeAttribute(o)}),vf--,vf||(wa=new WeakMap,wa=new WeakMap,_d=new WeakMap,Ad={})}},Wv=function(t,e,o){o===void 0&&(o="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),n=e||N4(t);return n?(r.push.apply(r,Array.from(n.querySelectorAll("[aria-live]"))),F4(r,n,o,"aria-hidden")):function(){return null}};h();h();h();var xr=function(){return xr=Object.assign||function(e){for(var o,r=1,n=arguments.length;r<n;r++){o=arguments[r];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},xr.apply(this,arguments)};function Gv(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]]);return o}function Vv(t,e,o){if(o||arguments.length===2)for(var r=0,n=e.length,i;r<n;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Rd=v(H());h();var Gt=v(H());h();var oi="right-scroll-bar-position",ri="width-before-scroll-bar",yf="with-scroll-bars-hidden",Ef="--removed-body-scroll-bar-size";h();h();function Kv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}h();var Yv=v(H());function Zv(t,e){var o=(0,Yv.useState)(function(){return{value:t,callback:e,facade:{get current(){return o.value},set current(r){var n=o.value;n!==r&&(o.value=r,o.callback(r,n))}}}})[0];return o.callback=e,o.facade}h();function wf(t,e){return Zv(e||null,function(o){return t.forEach(function(r){return Kv(r,o)})})}h();h();h();var Ca=function(){return Ca=Object.assign||function(e){for(var o,r=1,n=arguments.length;r<n;r++){o=arguments[r];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},Ca.apply(this,arguments)};function jv(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(o[r[n]]=t[r[n]]);return o}h();function B4(t){return t}function z4(t,e){e===void 0&&(e=B4);var o=[],r=!1,n={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return o.length?o[o.length-1]:t},useMedium:function(i){var a=e(i,r);return o.push(a),function(){o=o.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;o.length;){var a=o;o=[],a.forEach(i)}o={push:function(l){return i(l)},filter:function(){return o}}},assignMedium:function(i){r=!0;var a=[];if(o.length){var l=o;o=[],l.forEach(i),a=o}var s=function(){var m=a;a=[],m.forEach(i)},c=function(){return Promise.resolve().then(s)};c(),o={push:function(m){a.push(m),c()},filter:function(m){return a=a.filter(m),o}}}};return n}function Cf(t){t===void 0&&(t={});var e=z4(null);return e.options=Ca({async:!0,ssr:!1},t),e}h();var Xv=v(H()),qv=function(t){var e=t.sideCar,o=jv(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return Xv.createElement(r,Ca({},o))};qv.isSideCarExport=!0;function Tf(t,e){return t.useMedium(e),qv}var Ld=Cf();var Sf=function(){},Kl=Gt.forwardRef(function(t,e){var o=Gt.useRef(null),r=Gt.useState({onScrollCapture:Sf,onWheelCapture:Sf,onTouchMoveCapture:Sf}),n=r[0],i=r[1],a=t.forwardProps,l=t.children,s=t.className,c=t.removeScrollBar,m=t.enabled,d=t.shards,f=t.sideCar,p=t.noIsolation,b=t.inert,x=t.allowPinchZoom,y=t.as,w=y===void 0?"div":y,k=Gv(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),C=f,M=wf([o,e]),_=xr(xr({},k),n);return Gt.createElement(Gt.Fragment,null,m&&Gt.createElement(C,{sideCar:Ld,removeScrollBar:c,shards:d,noIsolation:p,inert:b,setCallbacks:i,allowPinchZoom:!!x,lockRef:o}),a?Gt.cloneElement(Gt.Children.only(l),xr(xr({},_),{ref:M})):Gt.createElement(w,xr({},_,{className:s,ref:M}),l))});Kl.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kl.classNames={fullWidth:ri,zeroRight:oi};h();h();var Ze=v(H());h();h();var Pd=v(H());h();h();h();var ey=v(H());h();h();var Jv;var Qv=function(){if(Jv)return Jv;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function H4(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Qv();return e&&t.setAttribute("nonce",e),t}function $4(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function U4(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var kf=function(){var t=0,e=null;return{add:function(o){t==0&&(e=H4())&&($4(e,o),U4(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}};var If=function(){var t=kf();return function(e,o){ey.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&o])}};var Yl=function(){var t=If(),e=function(o){var r=o.styles,n=o.dynamic;return t(r,n),null};return e};h();var W4={left:0,top:0,right:0,gap:0},Mf=function(t){return parseInt(t||"",10)||0},G4=function(t){var e=window.getComputedStyle(document.body),o=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],n=e[t==="padding"?"paddingRight":"marginRight"];return[Mf(o),Mf(r),Mf(n)]},_f=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return W4;var e=G4(t),o=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-o+e[2]-e[0])}};var V4=Yl(),K4=function(t,e,o,r){var n=t.left,i=t.top,a=t.right,l=t.gap;return o===void 0&&(o="margin"),`
  .`.concat(yf,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),o==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),o==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(oi,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ri,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(oi," .").concat(oi,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ri," .").concat(ri,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body {
    `).concat(Ef,": ").concat(l,`px;
  }
`)},Af=function(t){var e=t.noRelative,o=t.noImportant,r=t.gapMode,n=r===void 0?"margin":r,i=Pd.useMemo(function(){return _f(n)},[n]);return Pd.createElement(V4,{styles:K4(i,!e,n,o?"":"!important")})};h();var Lf=!1;if(typeof window<"u")try{Zl=Object.defineProperty({},"passive",{get:function(){return Lf=!0,!0}}),window.addEventListener("test",Zl,Zl),window.removeEventListener("test",Zl,Zl)}catch{Lf=!1}var Zl,ni=Lf?{passive:!1}:!1;h();var Y4=function(t){return t.tagName==="TEXTAREA"},ty=function(t,e){var o=window.getComputedStyle(t);return o[e]!=="hidden"&&!(o.overflowY===o.overflowX&&!Y4(t)&&o[e]==="visible")},Z4=function(t){return ty(t,"overflowY")},j4=function(t){return ty(t,"overflowX")},Pf=function(t,e){var o=e;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var r=oy(t,o);if(r){var n=ry(t,o),i=n[1],a=n[2];if(i>a)return!0}o=o.parentNode}while(o&&o!==document.body);return!1},X4=function(t){var e=t.scrollTop,o=t.scrollHeight,r=t.clientHeight;return[e,o,r]},q4=function(t){var e=t.scrollLeft,o=t.scrollWidth,r=t.clientWidth;return[e,o,r]},oy=function(t,e){return t==="v"?Z4(e):j4(e)},ry=function(t,e){return t==="v"?X4(e):q4(e)},J4=function(t,e){return t==="h"&&e==="rtl"?-1:1},ny=function(t,e,o,r,n){var i=J4(t,window.getComputedStyle(e).direction),a=i*r,l=o.target,s=e.contains(l),c=!1,m=a>0,d=0,f=0;do{var p=ry(t,l),b=p[0],x=p[1],y=p[2],w=x-y-i*b;(b||w)&&oy(t,l)&&(d+=w,f+=b),l=l.parentNode}while(!s&&l!==document.body||s&&(e.contains(l)||e===l));return(m&&(n&&d===0||!n&&a>d)||!m&&(n&&f===0||!n&&-a>f))&&(c=!0),c};var Dd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},iy=function(t){return[t.deltaX,t.deltaY]},ay=function(t){return t&&"current"in t?t.current:t},Q4=function(t,e){return t[0]===e[0]&&t[1]===e[1]},eC=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},tC=0,Ta=[];function ly(t){var e=Ze.useRef([]),o=Ze.useRef([0,0]),r=Ze.useRef(),n=Ze.useState(tC++)[0],i=Ze.useState(function(){return Yl()})[0],a=Ze.useRef(t);Ze.useEffect(function(){a.current=t},[t]),Ze.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(n));var x=Vv([t.lockRef.current],(t.shards||[]).map(ay),!0).filter(Boolean);return x.forEach(function(y){return y.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),x.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(n))})}}},[t.inert,t.lockRef.current,t.shards]);var l=Ze.useCallback(function(x,y){if("touches"in x&&x.touches.length===2)return!a.current.allowPinchZoom;var w=Dd(x),k=o.current,C="deltaX"in x?x.deltaX:k[0]-w[0],M="deltaY"in x?x.deltaY:k[1]-w[1],_,I=x.target,A=Math.abs(C)>Math.abs(M)?"h":"v";if("touches"in x&&A==="h"&&I.type==="range")return!1;var P=Pf(A,I);if(!P)return!0;if(P?_=A:(_=A==="v"?"h":"v",P=Pf(A,I)),!P)return!1;if(!r.current&&"changedTouches"in x&&(C||M)&&(r.current=_),!_)return!0;var F=r.current||_;return ny(F,y,x,F==="h"?C:M,!0)},[]),s=Ze.useCallback(function(x){var y=x;if(!(!Ta.length||Ta[Ta.length-1]!==i)){var w="deltaY"in y?iy(y):Dd(y),k=e.current.filter(function(_){return _.name===y.type&&_.target===y.target&&Q4(_.delta,w)})[0];if(k&&k.should){y.cancelable&&y.preventDefault();return}if(!k){var C=(a.current.shards||[]).map(ay).filter(Boolean).filter(function(_){return _.contains(y.target)}),M=C.length>0?l(y,C[0]):!a.current.noIsolation;M&&y.cancelable&&y.preventDefault()}}},[]),c=Ze.useCallback(function(x,y,w,k){var C={name:x,delta:y,target:w,should:k};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(M){return M!==C})},1)},[]),m=Ze.useCallback(function(x){o.current=Dd(x),r.current=void 0},[]),d=Ze.useCallback(function(x){c(x.type,iy(x),x.target,l(x,t.lockRef.current))},[]),f=Ze.useCallback(function(x){c(x.type,Dd(x),x.target,l(x,t.lockRef.current))},[]);Ze.useEffect(function(){return Ta.push(i),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",s,ni),document.addEventListener("touchmove",s,ni),document.addEventListener("touchstart",m,ni),function(){Ta=Ta.filter(function(x){return x!==i}),document.removeEventListener("wheel",s,ni),document.removeEventListener("touchmove",s,ni),document.removeEventListener("touchstart",m,ni)}},[]);var p=t.removeScrollBar,b=t.inert;return Ze.createElement(Ze.Fragment,null,b?Ze.createElement(i,{styles:eC(n)}):null,p?Ze.createElement(Af,{gapMode:"margin"}):null)}var sy=Tf(Ld,ly);var cy=Rd.forwardRef(function(t,e){return Rd.createElement(Kl,xr({},t,{ref:e,sideCar:sy}))});cy.classNames=Kl.classNames;var Df=cy;var dy="Popover",[my,HL]=gr(dy,[xf]),Nd=xf(),[oC,Sa]=my(dy),rC=t=>{let{__scopePopover:e,children:o,open:r,defaultOpen:n,onOpenChange:i,modal:a=!1}=t,l=Nd(e),s=(0,we.useRef)(null),[c,m]=(0,we.useState)(!1),[d=!1,f]=Ea({prop:r,defaultProp:n,onChange:i});return(0,we.createElement)(Nv,l,(0,we.createElement)(oC,{scope:e,contentId:ba(),triggerRef:s,open:d,onOpenChange:f,onOpenToggle:(0,we.useCallback)(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:(0,we.useCallback)(()=>m(!0),[]),onCustomAnchorRemove:(0,we.useCallback)(()=>m(!1),[]),modal:a},o))};var nC="PopoverTrigger",iC=(0,we.forwardRef)((t,e)=>{let{__scopePopover:o,...r}=t,n=Sa(nC,o),i=Nd(o),a=Ot(e,n.triggerRef),l=(0,we.createElement)(lt.button,ye({type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":fy(n.open)},r,{ref:a,onClick:xt(t.onClick,n.onOpenToggle)}));return n.hasCustomAnchor?l:(0,we.createElement)(Ov,ye({asChild:!0},i),l)}),uy="PopoverPortal",[aC,lC]=my(uy,{forceMount:void 0}),sC=t=>{let{__scopePopover:e,forceMount:o,children:r,container:n}=t,i=Sa(uy,e);return(0,we.createElement)(aC,{scope:e,forceMount:o},(0,we.createElement)(ya,{present:o||i.open},(0,we.createElement)(Hv,{asChild:!0,container:n},r)))},jl="PopoverContent",cC=(0,we.forwardRef)((t,e)=>{let o=lC(jl,t.__scopePopover),{forceMount:r=o.forceMount,...n}=t,i=Sa(jl,t.__scopePopover);return(0,we.createElement)(ya,{present:r||i.open},i.modal?(0,we.createElement)(dC,ye({},n,{ref:e})):(0,we.createElement)(mC,ye({},n,{ref:e})))}),dC=(0,we.forwardRef)((t,e)=>{let o=Sa(jl,t.__scopePopover),r=(0,we.useRef)(null),n=Ot(e,r),i=(0,we.useRef)(!1);return(0,we.useEffect)(()=>{let a=r.current;if(a)return Wv(a)},[]),(0,we.createElement)(Df,{as:gn,allowPinchZoom:!0},(0,we.createElement)(py,ye({},t,{ref:n,trapFocus:o.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xt(t.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=o.triggerRef.current)===null||l===void 0||l.focus()}),onPointerDownOutside:xt(t.onPointerDownOutside,a=>{let l=a.detail.originalEvent,s=l.button===0&&l.ctrlKey===!0,c=l.button===2||s;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:xt(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})))}),mC=(0,we.forwardRef)((t,e)=>{let o=Sa(jl,t.__scopePopover),r=(0,we.useRef)(!1);return(0,we.createElement)(py,ye({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var i;if((i=t.onCloseAutoFocus)===null||i===void 0||i.call(t,n),!n.defaultPrevented){var a;r.current||(a=o.triggerRef.current)===null||a===void 0||a.focus(),n.preventDefault()}r.current=!1},onInteractOutside:n=>{var i,a;(i=t.onInteractOutside)===null||i===void 0||i.call(t,n),n.defaultPrevented||(r.current=!0);let l=n.target;((a=o.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&n.preventDefault()}}))}),py=(0,we.forwardRef)((t,e)=>{let{__scopePopover:o,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:s,onFocusOutside:c,onInteractOutside:m,...d}=t,f=Sa(jl,o),p=Nd(o);return q2(),(0,we.createElement)(ov,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:i},(0,we.createElement)(Y2,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:s,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1)},(0,we.createElement)(Fv,ye({"data-state":fy(f.open),role:"dialog",id:f.contentId},p,d,{ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)"}}))))});var uC=(0,we.forwardRef)((t,e)=>{let{__scopePopover:o,...r}=t,n=Nd(o);return(0,we.createElement)(Bv,ye({},n,r,{ref:e}))});function fy(t){return t?"open":"closed"}var Od=rC;var Fd=iC,hy=sC,Bd=cC;var gy=uC;h();var Jo=v(H(),1);h();var $d=v(H(),1),yy=v(pr(),1);h();var Rf=v(H(),1),Nf=Rf.default.createContext(null),ke=()=>Rf.default.useContext(Nf);h();var Xl=v(H(),1);var zd=t=>{let[e,o]=(0,Xl.useState)(null),r=Me(),{theme:n}=ke(),{container:i}=Mt();return(0,Xl.useLayoutEffect)(()=>{e&&(e.className="",e.classList.add("excalidraw",...t?.className?.split(/\s+/)||[]),e.classList.toggle("excalidraw--mobile",r.editor.isMobile),e.classList.toggle("theme--dark",n==="dark"))},[e,n,r.editor.isMobile,t?.className]),(0,Xl.useLayoutEffect)(()=>{let a=t?.parentSelector?i?.querySelector(t.parentSelector):document.body;if(!a)return;let l=document.createElement("div");return a.appendChild(l),o(l),()=>{a.removeChild(l)}},[i,t?.parentSelector]),e};h();var xy=v(H(),1);function ka(t,e,o){(0,xy.useEffect)(()=>{function r(n){let i=n;if(!t.current)return;let a=o?.(i,t.current);if(a===!0)return;if(a===!1)return e(i);t.current.contains(i.target)||!document.documentElement.contains(i.target)||i.target.closest("[data-radix-portal]")||i.target===document.documentElement&&document.body.style.pointerEvents==="none"||i.target.closest("[data-prevent-outside-click]")||e(i)}return document.addEventListener("pointerdown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("pointerdown",r),document.removeEventListener("touchstart",r)}},[t,e,o])}h();var vy=v(H(),1),Hd=t=>{let e=(0,vy.useRef)(t);return Object.assign(e.current,t),e.current};var wy=v(S(),1),yn=$e(null),Ey=({onCancel:t,onChange:e,onSelect:o,colorPickerType:r})=>{let n=zd({className:"excalidraw-eye-dropper-backdrop",parentSelector:".excalidraw-eye-dropper-container"}),i=ke(),a=En(),l=so(),s=xe(a,i),c=Hd({app:l,onCancel:t,onChange:e,onSelect:o,selectedElements:s}),{container:m}=Mt();(0,$d.useEffect)(()=>{let f=d.current;if(!f||!l.canvas||!n)return;let p=!1,b=l.canvas.getContext("2d"),x=({clientX:I,clientY:A})=>{let P=b.getImageData((I-i.offsetLeft)*window.devicePixelRatio,(A-i.offsetTop)*window.devicePixelRatio,1,1).data;return Zg(P[0],P[1],P[2])},y=({clientX:I,clientY:A,altKey:P})=>{f.style.top=`${A+20}px`,f.style.left=`${I+20}px`;let F=x({clientX:I,clientY:A});p&&c.onChange(r,F,c.selectedElements,{altKey:P}),f.style.background=F},w=()=>{c.onCancel()},k=(I,A)=>{c.onSelect(I,A)},C=I=>{p=!0,I.stopImmediatePropagation()},M=I=>{p=!1,m?.focus(),I.stopImmediatePropagation(),I.preventDefault(),k(x(I),I)},_=I=>{I.key===T.ESCAPE&&(I.preventDefault(),I.stopImmediatePropagation(),w())};return n.tabIndex=-1,n.focus(),y({clientX:c.app.lastViewportPosition.x,clientY:c.app.lastViewportPosition.y,altKey:!1}),n.addEventListener("keydown",_),n.addEventListener("pointerdown",C),n.addEventListener("pointerup",M),window.addEventListener("pointermove",y,{passive:!0}),window.addEventListener("blur",w),()=>{p=!1,n.removeEventListener("keydown",_),n.removeEventListener("pointerdown",C),n.removeEventListener("pointerup",M),window.removeEventListener("pointermove",y),window.removeEventListener("blur",w)}},[c,l.canvas,n,r,m,i.offsetLeft,i.offsetTop]);let d=(0,$d.useRef)(null);return ka(d,()=>{t()},f=>!!f.target.closest(".excalidraw-eye-dropper-trigger, .excalidraw-eye-dropper-backdrop")),n?(0,yy.createPortal)((0,wy.jsx)("div",{ref:d,className:"excalidraw-eye-dropper-preview"}),n):null};var vr=v(S(),1),Cy=({color:t,onChange:e,label:o,colorPickerType:r})=>{let n=Me(),[i,a]=(0,Jo.useState)(t),[l,s]=Ee(_o);(0,Jo.useEffect)(()=>{a(t)},[t]);let c=(0,Jo.useCallback)(b=>{let x=b.toLowerCase(),y=Ty(x);y&&e(y),a(x)},[e]),m=(0,Jo.useRef)(null),d=(0,Jo.useRef)(null);(0,Jo.useEffect)(()=>{m.current&&m.current.focus()},[l]);let[f,p]=Ee(yn,Pe);return(0,Jo.useEffect)(()=>()=>{p(null)},[p]),(0,vr.jsxs)("div",{className:"color-picker__input-label",children:[(0,vr.jsx)("div",{className:"color-picker__input-hash",children:"#"}),(0,vr.jsx)("input",{ref:l==="hex"?m:void 0,style:{border:0,padding:0},spellCheck:!1,className:"color-picker-input","aria-label":o,onChange:b=>{c(b.target.value)},value:(i||"").replace(/^#/,""),onBlur:()=>{a(t)},tabIndex:-1,onFocus:()=>s("hex"),onKeyDown:b=>{b.key!==T.TAB&&(b.key===T.ESCAPE&&d.current?.focus(),b.stopPropagation())}}),!n.editor.isMobile&&(0,vr.jsxs)(vr.Fragment,{children:[(0,vr.jsx)("div",{style:{width:"1px",height:"1.25rem",backgroundColor:"var(--default-border-color)"}}),(0,vr.jsx)("div",{ref:d,className:z("excalidraw-eye-dropper-trigger",{selected:f}),onClick:()=>p(b=>b?null:{keepOpenOnAlt:!1,onSelect:x=>e(x),colorPickerType:r}),title:`${g("labels.eyeDropper")} \u2014 ${T.I.toLocaleUpperCase()} or ${N("Alt")} `,children:Jx})]})]})};var ky=v(H(),1);var _t=v(S(),1),Sy=t=>{let e=new Option().style;return e.color=t,!!e.color},Ty=t=>Gn(t)?t:Sy(`#${t}`)?`#${t}`:Sy(t)?t:null,pC=({type:t,color:e,onChange:o,label:r,elements:n,palette:i=Sr,updateData:a})=>{let[,l]=Ee(_o),[s,c]=Ee(yn,Pe),{container:m}=Mt(),d=Me(),f=(0,_t.jsxs)("div",{children:[(0,_t.jsx)(fa,{children:g("colorPicker.hexCode")}),(0,_t.jsx)(Cy,{color:e,label:r,onChange:x=>{o(x)},colorPickerType:t})]}),p=(0,ky.useRef)(null),b=()=>{p.current?.querySelector(".color-picker-content")?.focus()};return(0,_t.jsx)(hy,{container:m,children:(0,_t.jsxs)(Bd,{ref:p,className:"focus-visible-none","data-prevent-outside-click":!0,onFocusOutside:x=>{b(),x.preventDefault()},onPointerDownOutside:x=>{s&&x.preventDefault()},onCloseAutoFocus:x=>{x.stopPropagation(),x.preventDefault(),m&&!T1(document.activeElement)&&m.focus(),a({openPopup:null}),l(null)},side:d.editor.isMobile&&!d.viewport.isLandscape?"bottom":"right",align:d.editor.isMobile&&!d.viewport.isLandscape?"center":"start",alignOffset:-16,sideOffset:20,style:{zIndex:"var(--zIndex-layerUI)",backgroundColor:"var(--popup-bg-color)",maxWidth:"208px",maxHeight:window.innerHeight,padding:"12px",borderRadius:"8px",boxSizing:"border-box",overflowY:"auto",boxShadow:"0px 7px 14px rgba(0, 0, 0, 0.05), 0px 0px 3.12708px rgba(0, 0, 0, 0.0798), 0px 0px 0.931014px rgba(0, 0, 0, 0.1702)"},children:[i?(0,_t.jsx)(z2,{palette:i,color:e,onChange:x=>{o(x)},onEyeDropperToggle:x=>{c(y=>x?(y=y||{keepOpenOnAlt:!0,onSelect:o,colorPickerType:t},y.keepOpenOnAlt=!0,y):x===!1||y?null:{keepOpenOnAlt:!1,onSelect:o,colorPickerType:t})},onEscape:x=>{s?c(null):wo(x.target)?b():a({openPopup:null})},label:r,type:t,elements:n,updateData:a,children:f}):f,(0,_t.jsx)(gy,{width:20,height:10,style:{fill:"var(--popup-bg-color)",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 3px 2px)"}})]})})},fC=({label:t,color:e,type:o})=>(0,_t.jsx)(Fd,{type:"button",className:z("color-picker__button active-color",{"is-transparent":e==="transparent"||!e}),"aria-label":t,style:e?{"--swatch-color":e}:void 0,title:o==="elementStroke"?g("labels.showStroke"):g("labels.showBackground"),children:(0,_t.jsx)("div",{className:"color-picker__button-outline"})}),ql=({type:t,color:e,onChange:o,label:r,elements:n,palette:i=Sr,topPicks:a,updateData:l,appState:s})=>(0,_t.jsx)("div",{children:(0,_t.jsxs)("div",{role:"dialog","aria-modal":"true",className:"color-picker-container",children:[(0,_t.jsx)(_2,{activeColor:e,onChange:o,type:t,topPicks:a}),(0,_t.jsx)("div",{style:{width:1,height:"100%",backgroundColor:"var(--default-border-color)",margin:"0 auto"}}),(0,_t.jsxs)(Od,{open:s.openPopup===t,onOpenChange:c=>{l({openPopup:c?t:null})},children:[(0,_t.jsx)(fC,{color:e,label:r,type:t}),s.openPopup===t&&(0,_t.jsx)(pC,{type:t,color:e,onChange:o,label:r,elements:n,palette:i,updateData:l})]})]})});h();var Cn=v(H(),1);h();var wn=v(H(),1);var Iy=v(pr(),1);var My=v(S(),1),Ud=({children:t,left:e,top:o,onCloseRequest:r,fitInViewport:n=!1,offsetLeft:i=0,offsetTop:a=0,viewportWidth:l=window.innerWidth,viewportHeight:s=window.innerHeight})=>{let c=(0,wn.useRef)(null);(0,wn.useEffect)(()=>{let d=c.current;if(!d)return;d.contains(document.activeElement)||d.focus();let f=p=>{if(p.key===T.TAB){let b=dl(d),{activeElement:x}=document,y=b.findIndex(w=>w===x);x===d?(p.shiftKey?b[b.length-1]?.focus():b[0].focus(),p.preventDefault(),p.stopImmediatePropagation()):y===0&&p.shiftKey?(b[b.length-1]?.focus(),p.preventDefault(),p.stopImmediatePropagation()):y===b.length-1&&!p.shiftKey&&(b[0]?.focus(),p.preventDefault(),p.stopImmediatePropagation())}};return d.addEventListener("keydown",f),()=>d.removeEventListener("keydown",f)},[]);let m=(0,wn.useRef)(null);return(0,wn.useLayoutEffect)(()=>{if(n&&c.current&&o!=null&&e!=null){let d=c.current,{width:f,height:p}=d.getBoundingClientRect();if(m.current?.top===o&&m.current?.left===e)return;m.current={top:o,left:e},f>=l?(d.style.width=`${l}px`,d.style.left="0px",d.style.overflowX="scroll"):e+f-i>l?d.style.left=`${l-f-10}px`:d.style.left=`${e}px`,p>=s?(d.style.height=`${s-20}px`,d.style.top="10px",d.style.overflowY="scroll"):o+p-a>s?d.style.top=`${s-p}px`:d.style.top=`${o}px`}},[o,e,n,l,s,i,a]),(0,wn.useEffect)(()=>{if(r){let d=f=>{c.current?.contains(f.target)||(0,Iy.unstable_batchedUpdates)(()=>r(f))};return document.addEventListener("pointerdown",d,!1),()=>document.removeEventListener("pointerdown",d,!1)}},[r]),(0,My.jsx)("div",{className:"popover",ref:c,tabIndex:-1,children:t})};var to=v(S(),1);function hC({options:t,value:e,label:o,onChange:r,onClose:n}){let i=Cn.default.useRef(),a=Cn.default.useRef(),l=Cn.default.useRef(null);return Cn.default.useEffect(()=>{a.current?a.current.focus():l.current&&l.current.focus()},[]),(0,to.jsx)("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":o,onKeyDown:c=>{let m=t.find(d=>d.keyBinding===c.key.toLowerCase());if(!(c.metaKey||c.altKey||c.ctrlKey)&&m){let d=t.indexOf(m);l.current.children[d].focus(),c.preventDefault()}else if(c.key===T.TAB)setTimeout(()=>{let d=a.current,f=document.activeElement;d!==f&&n()},0);else if(Fi(c.key)){let{activeElement:d}=document,f=$r().rtl,p=Array.prototype.indexOf.call(l.current.children,d);if(p!==-1){let b=t.length,x=p;switch(c.key){case(f?T.ARROW_LEFT:T.ARROW_RIGHT):case T.ARROW_DOWN:{x=(p+1)%b;break}case(f?T.ARROW_RIGHT:T.ARROW_LEFT):case T.ARROW_UP:{x=(b+p-1)%b;break}}l.current.children[x].focus()}c.preventDefault()}else(c.key===T.ESCAPE||c.key===T.ENTER)&&(c.preventDefault(),n());c.nativeEvent.stopImmediatePropagation(),c.stopPropagation()},children:(0,to.jsx)("div",{className:"picker-content",ref:l,children:t.map((c,m)=>(0,to.jsxs)("button",{className:z("picker-option",{active:e===c.value}),onClick:d=>{d.currentTarget.focus(),r(c.value)},title:`${c.text} ${c.keyBinding&&`\u2014 ${c.keyBinding.toUpperCase()}`}`,"aria-label":c.text||"none","aria-keyshortcuts":c.keyBinding||void 0,ref:d=>{d&&m===0&&(i.current=d),d&&c.value===e&&(a.current=d)},onFocus:()=>{r(c.value)},children:[c.icon,c.keyBinding&&(0,to.jsx)("span",{className:"picker-keybinding",children:c.keyBinding})]},c.text))})})}function Of({value:t,label:e,options:o,onChange:r,group:n=""}){let[i,a]=Cn.default.useState(!1),l=Cn.default.useRef(null),s=$r().rtl;return(0,to.jsxs)("div",{children:[(0,to.jsx)("button",{name:n,className:i?"active":"","aria-label":e,onClick:()=>a(!i),ref:l,children:o.find(c=>c.value===t)?.icon}),(0,to.jsx)(Cn.default.Suspense,{fallback:"",children:i?(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(Ud,{onCloseRequest:c=>c.target!==l.current&&a(!1),...s?{right:5.5}:{left:-5.5},children:(0,to.jsx)(hC,{options:o.filter(c=>c.showInPicker!==!1),value:t,label:e,onChange:r,onClose:()=>{a(!1),l.current?.focus()}})}),(0,to.jsx)("div",{className:"picker-triangle"})]}):null})]})}var ae=v(S(),1),Ay=.1,fo=(t,e,o,r=!1)=>{let n=Ie(xe(t,e,{includeBoundTextElement:r}));return t.map(i=>n.get(i.id)||i.id===e.editingElement?.id?o(i):i)},co=function(t,e,o,r,n){let i=e.editingElement,a=be(t),l=null;return i&&(l=o(i)),l||(Oe(a,e)?l=x0(r===!0?a:a.filter(c=>r(c)),e,o)??(typeof n=="function"?n(!0):n):l=typeof n=="function"?n(!1):n),l},gC=(t,e)=>gt(e)?e:te(e,{x:t.textAlign==="left"?t.x:t.x+(t.width-e.width)/(t.textAlign==="center"?2:1),y:t.y+(t.height-e.height)/2},!1),Ff=(t,e,o,r,n)=>{let i=new Set;return{elements:fo(t,e,a=>{if(le(a)){let l=r(a);i.add(l);let s=ue(a,{fontSize:l});return $t(s,o.scene.getContainerElement(a),o.scene.getNonDeletedElementsMap()),s=gC(a,s),s}return a},!0),appState:{...e,currentItemFontSize:i.size===1?[...i][0]:n??e.currentItemFontSize},commitToHistory:!0}},bC=$({name:"changeStrokeColor",label:"labels.stroke",trackEvent:!1,perform:(t,e,o)=>({...o.currentItemStrokeColor&&{elements:fo(t,e,r=>bl(r.type)?ue(r,{strokeColor:o.currentItemStrokeColor}):r,!0)},appState:{...e,...o},commitToHistory:!!o.currentItemStrokeColor}),PanelComponent:({elements:t,appState:e,updateData:o,appProps:r})=>(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("h3",{"aria-hidden":"true",children:g("labels.stroke")}),(0,ae.jsx)(ql,{topPicks:Bs,palette:Kg,type:"elementStroke",label:g("labels.stroke"),color:co(t,e,n=>n.strokeColor,!0,e.currentItemStrokeColor),onChange:n=>o({currentItemStrokeColor:n}),elements:t,appState:e,updateData:o})]})}),xC=$({name:"changeBackgroundColor",label:"labels.changeBackground",trackEvent:!1,perform:(t,e,o)=>({...o.currentItemBackgroundColor&&{elements:fo(t,e,r=>ue(r,{backgroundColor:o.currentItemBackgroundColor}))},appState:{...e,...o},commitToHistory:!!o.currentItemBackgroundColor}),PanelComponent:({elements:t,appState:e,updateData:o,appProps:r})=>(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsx)("h3",{"aria-hidden":"true",children:g("labels.background")}),(0,ae.jsx)(ql,{topPicks:zs,palette:Yg,type:"elementBackground",label:g("labels.background"),color:co(t,e,n=>n.backgroundColor,!0,e.currentItemBackgroundColor),onChange:n=>o({currentItemBackgroundColor:n}),elements:t,appState:e,updateData:o})]})}),vC=$({name:"changeFillStyle",label:"labels.fill",trackEvent:!1,perform:(t,e,o,r)=>(ve("element","changeFillStyle",`${o} (${r.device.editor.isMobile?"mobile":"desktop"})`),{elements:fo(t,e,n=>ue(n,{fillStyle:o})),appState:{...e,currentItemFillStyle:o},commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o})=>{let r=xe(t,e),n=r.length>0&&r.every(i=>i.fillStyle==="zigzag");return(0,ae.jsxs)("fieldset",{children:[(0,ae.jsx)("legend",{children:g("labels.fill")}),(0,ae.jsx)(fr,{type:"button",options:[{value:"hachure",text:`${n?g("labels.zigzag"):g("labels.hachure")} (${N("Alt-Click")})`,icon:n?hx:gx,active:n?!0:void 0,testId:"fill-hachure"},{value:"cross-hatch",text:g("labels.crossHatch"),icon:bx,testId:"fill-cross-hatch"},{value:"solid",text:g("labels.solid"),icon:xx,testId:"fill-solid"}],value:co(t,e,i=>i.fillStyle,i=>i.hasOwnProperty("fillStyle"),i=>i?null:e.currentItemFillStyle),onClick:(i,a)=>{let l=a.altKey&&i==="hachure"&&r.every(s=>s.fillStyle==="hachure")?"zigzag":i;o(l)}})]})}}),yC=$({name:"changeStrokeWidth",label:"labels.strokeWidth",trackEvent:!1,perform:(t,e,o)=>({elements:fo(t,e,r=>ue(r,{strokeWidth:o})),appState:{...e,currentItemStrokeWidth:o},commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o})=>(0,ae.jsxs)("fieldset",{children:[(0,ae.jsx)("legend",{children:g("labels.strokeWidth")}),(0,ae.jsx)(fr,{group:"stroke-width",options:[{value:js.thin,text:g("labels.thin"),icon:Bp,testId:"strokeWidth-thin"},{value:js.bold,text:g("labels.bold"),icon:vx,testId:"strokeWidth-bold"},{value:js.extraBold,text:g("labels.extraBold"),icon:yx,testId:"strokeWidth-extraBold"}],value:co(t,e,r=>r.strokeWidth,r=>r.hasOwnProperty("strokeWidth"),r=>r?null:e.currentItemStrokeWidth),onChange:r=>o(r)})]})}),EC=$({name:"changeSloppiness",label:"labels.sloppiness",trackEvent:!1,perform:(t,e,o)=>({elements:fo(t,e,r=>ue(r,{seed:H1(),roughness:o})),appState:{...e,currentItemRoughness:o},commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o})=>(0,ae.jsxs)("fieldset",{children:[(0,ae.jsx)("legend",{children:g("labels.sloppiness")}),(0,ae.jsx)(fr,{group:"sloppiness",options:[{value:0,text:g("labels.architect"),icon:Cx},{value:1,text:g("labels.artist"),icon:Tx},{value:2,text:g("labels.cartoonist"),icon:Sx}],value:co(t,e,r=>r.roughness,r=>r.hasOwnProperty("roughness"),r=>r?null:e.currentItemRoughness),onChange:r=>o(r)})]})}),AD=$({name:"changeStrokeStyle",label:"labels.strokeStyle",trackEvent:!1,perform:(t,e,o)=>({elements:fo(t,e,r=>ue(r,{strokeStyle:o})),appState:{...e,currentItemStrokeStyle:o},commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o})=>(0,ae.jsxs)("fieldset",{children:[(0,ae.jsx)("legend",{children:g("labels.strokeStyle")}),(0,ae.jsx)(fr,{group:"strokeStyle",options:[{value:"solid",text:g("labels.strokeStyle_solid"),icon:Bp},{value:"dashed",text:g("labels.strokeStyle_dashed"),icon:Ex},{value:"dotted",text:g("labels.strokeStyle_dotted"),icon:wx}],value:co(t,e,r=>r.strokeStyle,r=>r.hasOwnProperty("strokeStyle"),r=>r?null:e.currentItemStrokeStyle),onChange:r=>o(r)})]})}),wC=$({name:"changeOpacity",label:"labels.opacity",trackEvent:!1,perform:(t,e,o)=>({elements:fo(t,e,r=>ue(r,{opacity:o}),!0),appState:{...e,currentItemOpacity:o},commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o})=>(0,ae.jsxs)("label",{className:"control-label",children:[g("labels.opacity"),(0,ae.jsx)("input",{type:"range",min:"0",max:"100",step:"10",onChange:r=>o(+r.target.value),value:co(t,e,r=>r.opacity,!0,e.currentItemOpacity)??void 0})]})}),CC=$({name:"changeFontSize",label:"labels.fontSize",trackEvent:!1,perform:(t,e,o,r)=>Ff(t,e,r,()=>o,o),PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>(0,ae.jsxs)("fieldset",{children:[(0,ae.jsx)("legend",{children:g("labels.fontSize")}),(0,ae.jsx)(fr,{group:"font-size",options:[{value:16,text:g("labels.small"),icon:Ox,testId:"fontSize-small"},{value:20,text:g("labels.medium"),icon:Fx,testId:"fontSize-medium"},{value:28,text:g("labels.large"),icon:Bx,testId:"fontSize-large"},{value:36,text:g("labels.veryLarge"),icon:zx,testId:"fontSize-veryLarge"}],value:co(t,e,n=>{if(le(n))return n.fontSize;let i=at(n,r.scene.getNonDeletedElementsMap());return i?i.fontSize:null},n=>le(n)||at(n,r.scene.getNonDeletedElementsMap())!==null,n=>n?null:e.currentItemFontSize||Ir),onChange:n=>o(n)})]})}),Bf=$({name:"decreaseFontSize",label:"labels.decreaseFontSize",icon:Hp,trackEvent:!1,perform:(t,e,o,r)=>Ff(t,e,r,n=>Math.round(1/(1+Ay)*n.fontSize)),keyTest:t=>t[T.CTRL_OR_CMD]&&t.shiftKey&&(t.key===T.CHEVRON_LEFT||t.key===T.COMMA)}),zf=$({name:"increaseFontSize",label:"labels.increaseFontSize",icon:Hp,trackEvent:!1,perform:(t,e,o,r)=>Ff(t,e,r,n=>Math.round(n.fontSize*(1+Ay))),keyTest:t=>t[T.CTRL_OR_CMD]&&t.shiftKey&&(t.key===T.CHEVRON_RIGHT||t.key===T.PERIOD)}),TC=$({name:"changeFontFamily",label:"labels.fontFamily",trackEvent:!1,perform:(t,e,o,r)=>({elements:fo(t,e,n=>{if(le(n)){let i=ue(n,{fontFamily:o,lineHeight:Dr(o)});return $t(i,r.scene.getContainerElement(n),r.scene.getNonDeletedElementsMap()),i}return n},!0),appState:{...e,currentItemFontFamily:o},commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>{let n=[{value:nl.Virgil,text:g("labels.handDrawn"),icon:na,testId:"font-family-virgil"},{value:nl.Helvetica,text:g("labels.normal"),icon:Hx,testId:"font-family-normal"},{value:nl.Cascadia,text:g("labels.code"),icon:$x,testId:"font-family-code"}];return(0,ae.jsxs)("fieldset",{children:[(0,ae.jsx)("legend",{children:g("labels.fontFamily")}),(0,ae.jsx)(fr,{group:"font-family",options:n,value:co(t,e,i=>{if(le(i))return i.fontFamily;let a=at(i,r.scene.getNonDeletedElementsMap());return a?a.fontFamily:null},i=>le(i)||at(i,r.scene.getNonDeletedElementsMap())!==null,i=>i?null:e.currentItemFontFamily||_i),onChange:i=>o(i)})]})}}),SC=$({name:"changeTextAlign",label:"Change text alignment",trackEvent:!1,perform:(t,e,o,r)=>({elements:fo(t,e,n=>{if(le(n)){let i=ue(n,{textAlign:o});return $t(i,r.scene.getContainerElement(n),r.scene.getNonDeletedElementsMap()),i}return n},!0),appState:{...e,currentItemTextAlign:o},commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>{let n=r.scene.getNonDeletedElementsMap();return(0,ae.jsxs)("fieldset",{children:[(0,ae.jsx)("legend",{children:g("labels.textAlign")}),(0,ae.jsx)(fr,{group:"text-align",options:[{value:"left",text:g("labels.left"),icon:Ux,testId:"align-left"},{value:"center",text:g("labels.center"),icon:Wx,testId:"align-horizontal-center"},{value:"right",text:g("labels.right"),icon:Gx,testId:"align-right"}],value:co(t,e,i=>{if(le(i))return i.textAlign;let a=at(i,n);return a?a.textAlign:null},i=>le(i)||at(i,n)!==null,i=>i?null:e.currentItemTextAlign),onChange:i=>o(i)})]})}}),kC=$({name:"changeVerticalAlign",label:"Change vertical alignment",trackEvent:{category:"element"},perform:(t,e,o,r)=>({elements:fo(t,e,n=>{if(le(n)){let i=ue(n,{verticalAlign:o});return $t(i,r.scene.getContainerElement(n),r.scene.getNonDeletedElementsMap()),i}return n},!0),appState:{...e},commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>(0,ae.jsx)("fieldset",{children:(0,ae.jsx)(fr,{group:"text-align",options:[{value:vo.TOP,text:g("labels.alignTop"),icon:(0,ae.jsx)(Vx,{theme:e.theme}),testId:"align-top"},{value:vo.MIDDLE,text:g("labels.centerVertically"),icon:(0,ae.jsx)(Yx,{theme:e.theme}),testId:"align-middle"},{value:vo.BOTTOM,text:g("labels.alignBottom"),icon:(0,ae.jsx)(Kx,{theme:e.theme}),testId:"align-bottom"}],value:co(t,e,n=>{if(le(n)&&n.containerId)return n.verticalAlign;let i=at(n,r.scene.getNonDeletedElementsMap());return i?i.verticalAlign:null},n=>le(n)||at(n,r.scene.getNonDeletedElementsMap())!==null,n=>n?null:vo.MIDDLE),onChange:n=>o(n)})})}),LD=$({name:"changeRoundness",label:"Change edge roundness",trackEvent:!1,perform:(t,e,o)=>({elements:fo(t,e,r=>ue(r,{roundness:o==="round"?{type:Ni(r.type)?yo.ADAPTIVE_RADIUS:yo.PROPORTIONAL_RADIUS}:null})),appState:{...e,currentItemRoundness:o},commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o})=>{let n=Qi(be(t),e).some(i=>i.roundness?.type===yo.LEGACY);return(0,ae.jsxs)("fieldset",{children:[(0,ae.jsx)("legend",{children:g("labels.edges")}),(0,ae.jsx)(fr,{group:"edges",options:[{value:"sharp",text:g("labels.sharp"),icon:kx},{value:"round",text:g("labels.round"),icon:Ix}],value:co(t,e,i=>n?null:i.roundness?"round":"sharp",i=>i.hasOwnProperty("roundness"),i=>i?null:e.currentItemRoundness),onChange:i=>o(i)})]})}}),_y=t=>[{value:null,text:g("labels.arrowhead_none"),keyBinding:"q",icon:Mx},{value:"arrow",text:g("labels.arrowhead_arrow"),keyBinding:"w",icon:(0,ae.jsx)(_x,{flip:t})},{value:"bar",text:g("labels.arrowhead_bar"),keyBinding:"e",icon:(0,ae.jsx)(Lx,{flip:t})},{value:"dot",text:g("labels.arrowhead_circle"),keyBinding:null,icon:(0,ae.jsx)(zp,{flip:t}),showInPicker:!1},{value:"circle",text:g("labels.arrowhead_circle"),keyBinding:"r",icon:(0,ae.jsx)(zp,{flip:t}),showInPicker:!1},{value:"circle_outline",text:g("labels.arrowhead_circle_outline"),keyBinding:null,icon:(0,ae.jsx)(Ax,{flip:t}),showInPicker:!1},{value:"triangle",text:g("labels.arrowhead_triangle"),icon:(0,ae.jsx)(Px,{flip:t}),keyBinding:"t"},{value:"triangle_outline",text:g("labels.arrowhead_triangle_outline"),icon:(0,ae.jsx)(Dx,{flip:t}),keyBinding:null,showInPicker:!1},{value:"diamond",text:g("labels.arrowhead_diamond"),icon:(0,ae.jsx)(Rx,{flip:t}),keyBinding:null,showInPicker:!1},{value:"diamond_outline",text:g("labels.arrowhead_diamond_outline"),icon:(0,ae.jsx)(Nx,{flip:t}),keyBinding:null,showInPicker:!1}],PD=$({name:"changeArrowhead",label:"Change arrowheads",trackEvent:!1,perform:(t,e,o)=>({elements:fo(t,e,r=>{if(Re(r)){let{position:n,type:i}=o;if(n==="start")return ue(r,{startArrowhead:i});if(n==="end")return ue(r,{endArrowhead:i})}return r}),appState:{...e,[o.position==="start"?"currentItemStartArrowhead":"currentItemEndArrowhead"]:o.type},commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o})=>{let r=$r().rtl;return(0,ae.jsxs)("fieldset",{children:[(0,ae.jsx)("legend",{children:g("labels.arrowheads")}),(0,ae.jsxs)("div",{className:"iconSelectList buttonList",children:[(0,ae.jsx)(Of,{label:"arrowhead_start",options:_y(!r),value:co(t,e,n=>Re(n)&&Oi(n.type)?n.startArrowhead:e.currentItemStartArrowhead,!0,e.currentItemStartArrowhead),onChange:n=>o({position:"start",type:n})}),(0,ae.jsx)(Of,{label:"arrowhead_end",group:"arrowheads",options:_y(!!r),value:co(t,e,n=>Re(n)&&Oi(n.type)?n.endArrowhead:e.currentItemEndArrowhead,!0,e.currentItemEndArrowhead),onChange:n=>o({position:"end",type:n})})]})]})}});h();h();var Ly=v(H(),1),Py=v(S(),1),Ia=()=>{let t=document.querySelector(".excalidraw-tooltip");if(t)return t;let e=document.createElement("div");return document.body.appendChild(e),e.classList.add("excalidraw-tooltip"),e},Hf=(t,e,o="bottom")=>{let r=t.getBoundingClientRect(),n=window.innerWidth,i=window.innerHeight,a=5,l=e.left+e.width/2-r.width/2;l<0?l=a:l+r.width>=n&&(l=n-r.width-a);let s;o==="bottom"?(s=e.top+e.height+a,s+r.height>=i&&(s=e.top-r.height-a)):(s=e.top-r.height-a,s<0&&(s=e.top+e.height+a)),Object.assign(t.style,{top:`${s}px`,left:`${l}px`})},IC=(t,e,o,r)=>{e.classList.add("excalidraw-tooltip--visible"),e.style.minWidth=r?"50ch":"10ch",e.style.maxWidth=r?"50ch":"15ch",e.textContent=o;let n=t.getBoundingClientRect();Hf(e,n)},ho=({children:t,label:e,long:o=!1,style:r,disabled:n})=>((0,Ly.useEffect)(()=>()=>Ia().classList.remove("excalidraw-tooltip--visible"),[]),n?null:(0,Py.jsx)("div",{className:"excalidraw-tooltip-wrapper",onPointerEnter:i=>IC(i.currentTarget,Ia(),e,o),onPointerLeave:()=>Ia().classList.remove("excalidraw-tooltip--visible"),style:r,children:t}));var ai=v(S(),1),MC=$({name:"changeViewBackgroundColor",label:"labels.canvasBackground",paletteName:"Change canvas background color",trackEvent:!1,predicate:(t,e,o,r)=>!!r.props.UIOptions.canvasActions.changeViewBackgroundColor&&!e.viewModeEnabled,perform:(t,e,o)=>({appState:{...e,...o},commitToHistory:!!o.viewBackgroundColor}),PanelComponent:({elements:t,appState:e,updateData:o,appProps:r})=>(0,ai.jsx)(ql,{palette:null,topPicks:Hs,label:g("labels.canvasBackground"),type:"canvasBackground",color:e.viewBackgroundColor,onChange:n=>o({viewBackgroundColor:n}),"data-testid":"canvas-background-picker",elements:t,appState:e,updateData:o})}),Kr=$({name:"clearCanvas",label:"labels.clearCanvas",paletteName:"Clear canvas",icon:Xo,trackEvent:{category:"canvas"},predicate:(t,e,o,r)=>!!r.props.UIOptions.canvasActions.clearCanvas&&!e.viewModeEnabled,perform:(t,e,o,r)=>(r.imageCache.clear(),{elements:t.map(n=>ue(n,{isDeleted:!0})),appState:{...$i(),files:{},theme:e.theme,penMode:e.penMode,penDetected:e.penDetected,exportBackground:e.exportBackground,exportEmbedScene:e.exportEmbedScene,gridSize:e.gridSize,showStats:e.showStats,pasteDialog:e.pasteDialog,activeTool:e.activeTool.type==="image"?{...e.activeTool,type:"selection"}:e.activeTool},commitToHistory:!0})}),Wd=$({name:"zoomIn",label:"buttons.zoomIn",viewMode:!0,icon:wp,trackEvent:{category:"canvas"},perform:(t,e,o,r)=>({appState:{...e,...zr({viewportX:e.width/2+e.offsetLeft,viewportY:e.height/2+e.offsetTop,nextZoom:Br(e.zoom.value+$n)},e),userToFollow:null},commitToHistory:!1}),PanelComponent:({updateData:t})=>(0,ai.jsx)(se,{type:"button",className:"zoom-in-button zoom-button",icon:wp,title:`${g("buttons.zoomIn")} \u2014 ${N("CtrlOrCmd++")}`,"aria-label":g("buttons.zoomIn"),onClick:()=>{t(null)}}),keyTest:t=>(t.code===fe.EQUAL||t.code===fe.NUM_ADD)&&(t[T.CTRL_OR_CMD]||t.shiftKey)}),Gd=$({name:"zoomOut",label:"buttons.zoomOut",icon:Cp,viewMode:!0,trackEvent:{category:"canvas"},perform:(t,e,o,r)=>({appState:{...e,...zr({viewportX:e.width/2+e.offsetLeft,viewportY:e.height/2+e.offsetTop,nextZoom:Br(e.zoom.value-$n)},e),userToFollow:null},commitToHistory:!1}),PanelComponent:({updateData:t})=>(0,ai.jsx)(se,{type:"button",className:"zoom-out-button zoom-button",icon:Cp,title:`${g("buttons.zoomOut")} \u2014 ${N("CtrlOrCmd+-")}`,"aria-label":g("buttons.zoomOut"),onClick:()=>{t(null)}}),keyTest:t=>(t.code===fe.MINUS||t.code===fe.NUM_SUBTRACT)&&(t[T.CTRL_OR_CMD]||t.shiftKey)}),_C=$({name:"resetZoom",label:"buttons.resetZoom",icon:Q0,viewMode:!0,trackEvent:{category:"canvas"},perform:(t,e,o,r)=>({appState:{...e,...zr({viewportX:e.width/2+e.offsetLeft,viewportY:e.height/2+e.offsetTop,nextZoom:Br(1)},e),userToFollow:null},commitToHistory:!1}),PanelComponent:({updateData:t,appState:e})=>(0,ai.jsx)(ho,{label:g("buttons.resetZoom"),style:{height:"100%"},children:(0,ai.jsxs)(se,{type:"button",className:"reset-zoom-button zoom-button",title:g("buttons.resetZoom"),"aria-label":g("buttons.resetZoom"),onClick:()=>{t(null)},children:[(e.zoom.value*100).toFixed(0),"%"]})}),keyTest:t=>(t.code===fe.ZERO||t.code===fe.NUM_ZERO)&&(t[T.CTRL_OR_CMD]||t.shiftKey)}),AC=(t,e)=>{let[o,r,n,i]=t,a=n-o,l=e.width/a,s=i-r,c=e.height/s,m=Math.min(l,c),d=Math.floor(m/$n)*$n;return Math.min(Math.max(d,c1),1)},Dy=({bounds:t,appState:e,fitToViewport:o=!1,viewportZoomFactor:r=.7})=>{let[n,i,a,l]=t,s=(n+a)/2,c=(i+l)/2,m,d,f;if(o){let p=a-n,b=l-i;m=Math.min(e.width/p,e.height/b)*Math.min(1,Math.max(r,.1)),m=Math.min(Math.max(m,.1),30);let x=e.width;if(e.openSidebar){let w=document.querySelector(".sidebar")?.offsetWidth??0;x=document.documentElement.getAttribute("dir")==="rtl"?e.width+w:e.width-w}d=x/2*(1/m)-s,f=e.height/2*(1/m)-c}else{m=AC(t,{width:e.width,height:e.height});let p=v0({scenePoint:{x:s,y:c},viewportDimensions:{width:e.width,height:e.height},zoom:{value:m}});d=p.scrollX,f=p.scrollY}return{appState:{...e,scrollX:d,scrollY:f,zoom:{value:m}},commitToHistory:!1}},Jl=({targetElements:t,appState:e,fitToViewport:o,viewportZoomFactor:r})=>{let n=Ke(be(t));return Dy({bounds:n,appState:e,fitToViewport:o,viewportZoomFactor:r})},nR=$({name:"zoomToFitSelectionInViewport",label:"labels.zoomToFitViewport",icon:pd,trackEvent:{category:"canvas"},perform:(t,e,o,r)=>{let n=r.scene.getSelectedElements(e);return Jl({targetElements:n.length?n:t,appState:{...e,userToFollow:null},fitToViewport:!1})},keyTest:t=>t.code===fe.TWO&&t.shiftKey&&!t.altKey&&!t[T.CTRL_OR_CMD]}),iR=$({name:"zoomToFitSelection",label:"helpDialog.zoomToSelection",icon:pd,trackEvent:{category:"canvas"},perform:(t,e,o,r)=>{let n=r.scene.getSelectedElements(e);return Jl({targetElements:n.length?n:t,appState:{...e,userToFollow:null},fitToViewport:!0})},keyTest:t=>t.code===fe.THREE&&t.shiftKey&&!t.altKey&&!t[T.CTRL_OR_CMD]}),LC=$({name:"zoomToFit",label:"helpDialog.zoomToFit",icon:pd,viewMode:!0,trackEvent:{category:"canvas"},perform:(t,e)=>Jl({targetElements:t,appState:{...e,userToFollow:null},fitToViewport:!1}),keyTest:t=>t.code===fe.ONE&&t.shiftKey&&!t.altKey&&!t[T.CTRL_OR_CMD]}),ii=$({name:"toggleTheme",label:(t,e)=>e.theme==="dark"?"buttons.lightMode":"buttons.darkMode",keywords:["toggle","dark","light","mode","theme"],icon:t=>t.theme===qe.LIGHT?Qc:ed,viewMode:!0,trackEvent:{category:"canvas"},perform:(t,e,o)=>({appState:{...e,theme:o||(e.theme===qe.LIGHT?qe.DARK:qe.LIGHT)},commitToHistory:!1}),keyTest:t=>t.altKey&&t.shiftKey&&t.code===fe.D,predicate:(t,e,o,r)=>!!r.props.UIOptions.canvasActions.toggleTheme}),aR=$({name:"toggleEraserTool",label:"toolBar.eraser",trackEvent:{category:"toolbar"},perform:(t,e)=>{let o;return So(e)?o=tt(e,{...e.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):o=tt(e,{type:"eraser",lastActiveToolBeforeEraser:e.activeTool}),{appState:{...e,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:o},commitToHistory:!0}},keyTest:t=>t.key===T.E}),Ry=$({name:"toggleHandTool",label:"toolBar.hand",paletteName:"Toggle hand tool",trackEvent:{category:"toolbar"},icon:ad,viewMode:!1,perform:(t,e,o,r)=>{let n;return Rr(e)?n=tt(e,{...e.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):(n=tt(e,{type:"hand",lastActiveToolBeforeEraser:e.activeTool}),Ne(r.interactiveCanvas,De.GRAB)),{appState:{...e,selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null,activeTool:n},commitToHistory:!0}},keyTest:t=>!t.altKey&&!t[T.CTRL_OR_CMD]&&t.key===T.H});h();var Ny=v(S(),1),Lo=$({name:"finalize",label:"",trackEvent:!1,perform:(t,e,o,{interactiveCanvas:r,focusContainer:n,scene:i})=>{let a=i.getNonDeletedElementsMap();if(e.editingLinearElement){let{elementId:d,startBindingElement:f,endBindingElement:p}=e.editingLinearElement,b=he.getElement(d,a);if(b)return Ar(b)&&dc(b,f,p,a),{elements:b.points.length<2||jn(b)?t.filter(x=>x.id!==b.id):void 0,appState:{...e,cursorButton:"up",editingLinearElement:null},commitToHistory:!0}}let l=t,s=e.pendingImageElementId&&i.getElement(e.pendingImageElementId);s&&te(s,{isDeleted:!0},!1),window.document.activeElement instanceof HTMLElement&&n();let c=e.multiElement?e.multiElement:e.editingElement?.type==="freedraw"?e.editingElement:null;if(c){if(c.type!=="freedraw"&&e.lastPointerDownWith!=="touch"){let{points:f,lastCommittedPoint:p}=c;(!p||f[f.length-1]!==p)&&te(c,{points:c.points.slice(0,-1)})}jn(c)&&(l=l.filter(f=>f.id!==c.id));let d=fl(c.points,e.zoom.value);if((c.type==="line"||c.type==="freedraw")&&d){let f=c.points,p=f[0];te(c,{points:f.map((b,x)=>x===f.length-1?[p[0],p[1]]:b)})}if(Ar(c)&&!d&&c.points.length>1){let[f,p]=he.getPointAtIndexGlobalCoordinates(c,-1,Ie(t));vl(c,e,ao.getScene(c),{x:f,y:p},a)}}(!e.activeTool.locked&&e.activeTool.type!=="freedraw"||!c)&&ko(r);let m;return e.activeTool.type==="eraser"?m=tt(e,{...e.activeTool.lastActiveTool||{type:"selection"},lastActiveToolBeforeEraser:null}):m=tt(e,{type:"selection"}),{elements:l,appState:{...e,cursorButton:"up",activeTool:(e.activeTool.locked||e.activeTool.type==="freedraw")&&c?e.activeTool:m,activeEmbeddable:null,draggingElement:null,multiElement:null,editingElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:c&&!e.activeTool.locked&&e.activeTool.type!=="freedraw"?{...e.selectedElementIds,[c.id]:!0}:e.selectedElementIds,selectedLinearElement:c&&Re(c)?new he(c):e.selectedLinearElement,pendingImageElementId:null},commitToHistory:e.activeTool.type==="freedraw"}},keyTest:(t,e)=>t.key===T.ESCAPE&&(e.editingLinearElement!==null||!e.draggingElement&&e.multiElement===null)||(t.key===T.ESCAPE||t.key===T.ENTER)&&e.multiElement!==null,PanelComponent:({appState:t,updateData:e,data:o})=>(0,Ny.jsx)(se,{type:"button",icon:dx,title:g("buttons.done"),"aria-label":g("buttons.done"),onClick:e,visible:t.multiElement!=null,size:o?.size||"medium"})});h();h();var Oy=v(H(),1);var Ql=v(S(),1),Fy=t=>{let{id:e}=Mt(),[o,r]=(0,Oy.useState)(t.value),n=a=>{t.ignoreFocus||M1(a.target);let l=a.target.value;l!==t.value&&t.onChange(l)},i=a=>{if(a.key===T.ENTER){if(a.preventDefault(),a.nativeEvent.isComposing||a.keyCode===229)return;a.currentTarget.blur()}};return(0,Ql.jsxs)("div",{className:"ProjectName",children:[(0,Ql.jsx)("label",{className:"ProjectName-label",htmlFor:"filename",children:`${t.label}:`}),(0,Ql.jsx)("input",{type:"text",className:"TextInput",onBlur:n,onKeyDown:i,id:`${e}-filename`,value:o,onChange:a=>r(a.target.value)})]})};h();var Ma=v(S(),1),zy=t=>{let e=t.title||(t.value==="dark"?g("buttons.lightMode"):g("buttons.darkMode"));return(0,Ma.jsx)(se,{type:"icon",icon:t.value===qe.LIGHT?By.MOON:By.SUN,title:e,"aria-label":e,onClick:()=>t.onChange(t.value===qe.DARK?qe.LIGHT:qe.DARK),"data-testid":"toggle-dark-mode"})},By={SUN:(0,Ma.jsx)("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:(0,Ma.jsx)("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})}),MOON:(0,Ma.jsx)("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512",children:(0,Ma.jsx)("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"})})};h();var li=(t,{selectedElementIds:e},o)=>{t=be(t);let r=o&&Oe(t,{selectedElementIds:e}),n=null,i=r?xe(t,{selectedElementIds:e},{includeBoundTextElement:!0}):t;return r&&(i.length===1&&Te(i[0])?(n=i[0],i=Fc(t,n)):i.length>1&&(i=xe(t,{selectedElementIds:e},{includeBoundTextElement:!0,includeElementsInFrames:!0}))),{exportingFrame:n,exportedElements:sr(i)}},si=async(t,e,o,r,{exportBackground:n,exportPadding:i=on,viewBackgroundColor:a,name:l=o.name||v1,fileHandle:s=null,exportingFrame:c=null})=>{if(e.length===0)throw new Error(g("alerts.cannotExportEmptyCanvas"));if(t==="svg"||t==="clipboard-svg"){let d=Ac(e,{exportBackground:n,exportWithDarkMode:o.exportWithDarkMode,viewBackgroundColor:a,exportPadding:i,exportScale:o.exportScale,exportEmbedScene:o.exportEmbedScene&&t==="svg"},r,{exportingFrame:c});if(t==="svg")return Xu(d.then(f=>new Blob([f.outerHTML],{type:Pt.svg})),{description:"Export to SVG",name:l,extension:o.exportEmbedScene?"excalidraw.svg":"svg",fileHandle:s});if(t==="clipboard-svg"){let f=await d.then(p=>p.outerHTML);try{await Zi(f)}catch{throw new Error(g("errors.copyToSystemClipboardFailed"))}return}}let m=Zb(e,o,r,{exportBackground:n,viewBackgroundColor:a,exportPadding:i,exportingFrame:c});if(t==="png"){let d=Fr(m);return o.exportEmbedScene&&(d=d.then(f=>import("./excalidraw-assets/image-EFCJDJH3.js").then(({encodePngMetadata:p})=>p({blob:f,metadata:op(e,o,r,"local")})))),Xu(d,{description:"Export to PNG",name:l,extension:"png",fileHandle:s})}else if(t==="clipboard")try{let d=Fr(m);await e0(d)}catch(d){throw console.warn(d),d.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(g("canvasError.canvasTooBig")):kr&&d.name==="TypeError"?new Error(`${g("alerts.couldNotCopyToClipboard")}

${g("hints.firefox_clipboard_write")}`):new Error(g("alerts.couldNotCopyToClipboard"))}else throw new Error("Unsupported export type")};h();var Hy=async(t,e,o,r)=>{let{exportBackground:n,viewBackgroundColor:i,fileHandle:a}=e,l=_b(a);if(!a||!Ab(l))throw new Error("fileHandle should exist and should be of type svg or png when resaving");e={...e,exportEmbedScene:!0};let{exportedElements:s,exportingFrame:c}=li(t,e,!1);return await si(l,s,e,o,{exportBackground:n,viewBackgroundColor:i,name:r,fileHandle:a,exportingFrame:c}),{fileHandle:a}};h();var es=v(S(),1),ci=({children:t,checked:e,onChange:o,className:r})=>(0,es.jsxs)("div",{className:z("Checkbox",r,{"is-checked":e}),onClick:n=>{o(!e,n),n.currentTarget.querySelector(".Checkbox-box").focus()},children:[(0,es.jsx)("button",{className:"Checkbox-box",role:"checkbox","aria-checked":e,children:ix}),(0,es.jsx)("div",{className:"Checkbox-label",children:t})]});var mo=v(S(),1),$f=$({name:"changeProjectName",label:"labels.fileTitle",trackEvent:!1,perform:(t,e,o)=>({appState:{...e,name:o},commitToHistory:!1}),PanelComponent:({appState:t,updateData:e,appProps:o,data:r,app:n})=>(0,mo.jsx)(Fy,{label:g("labels.fileTitle"),value:n.getName(),onChange:i=>e(i),ignoreFocus:r?.ignoreFocus??!1})}),$y=$({name:"changeExportScale",label:"imageExportDialog.scale",trackEvent:{category:"export",action:"scale"},perform:(t,e,o)=>({appState:{...e,exportScale:o},commitToHistory:!1}),PanelComponent:({elements:t,appState:e,updateData:o})=>{let r=be(t),i=Oe(r,e)?xe(r,e):r;return(0,mo.jsx)(mo.Fragment,{children:Ys.map(a=>{let[l,s]=jb(i,on,a),c=`${g("imageExportDialog.label.scale")} ${a}x (${l}x${s})`;return(0,mo.jsx)(se,{size:"small",type:"radio",icon:`${a}x`,name:"export-canvas-scale",title:c,"aria-label":c,id:"export-canvas-scale",checked:a===e.exportScale,onChange:()=>o(a)},a)})})}}),Uf=$({name:"changeExportBackground",label:"imageExportDialog.label.withBackground",trackEvent:{category:"export",action:"toggleBackground"},perform:(t,e,o)=>({appState:{...e,exportBackground:o},commitToHistory:!1}),PanelComponent:({appState:t,updateData:e})=>(0,mo.jsx)(ci,{checked:t.exportBackground,onChange:o=>e(o),children:g("imageExportDialog.label.withBackground")})}),Vd=$({name:"changeExportEmbedScene",label:"imageExportDialog.tooltip.embedScene",trackEvent:{category:"export",action:"embedScene"},perform:(t,e,o)=>({appState:{...e,exportEmbedScene:o},commitToHistory:!1}),PanelComponent:({appState:t,updateData:e})=>(0,mo.jsxs)(ci,{checked:t.exportEmbedScene,onChange:o=>e(o),children:[g("imageExportDialog.label.embedScene"),(0,mo.jsx)(ho,{label:g("imageExportDialog.tooltip.embedScene"),long:!0,children:(0,mo.jsx)("div",{className:"excalidraw-tooltip-icon",children:mx})})]})}),Kd=$({name:"saveToActiveFile",label:"buttons.save",icon:Jn,trackEvent:{category:"export"},predicate:(t,e,o,r)=>!!r.props.UIOptions.canvasActions.saveToActiveFile&&!!e.fileHandle&&!e.viewModeEnabled,perform:async(t,e,o,r)=>{let n=!!e.fileHandle;try{let{fileHandle:i}=Tc(e.fileHandle)?await Hy(t,e,r.files,r.getName()):await Mc(t,e,r.files,r.getName());return{commitToHistory:!1,appState:{...e,fileHandle:i,toast:n?{message:i?.name?g("toast.fileSavedToFilename").replace("{filename}",`"${i.name}"`):g("toast.fileSaved")}:null}}}catch(i){return i?.name!=="AbortError"?console.error(i):console.warn(i),{commitToHistory:!1}}},keyTest:t=>t.key===T.S&&t[T.CTRL_OR_CMD]&&!t.shiftKey}),ts=$({name:"saveFileToDisk",label:"exportDialog.disk_title",icon:Jn,viewMode:!0,trackEvent:{category:"export"},perform:async(t,e,o,r)=>{try{let{fileHandle:n}=await Mc(t,{...e,fileHandle:null},r.files,r.getName());return{commitToHistory:!1,appState:{...e,openDialog:null,fileHandle:n,toast:{message:g("toast.fileSaved")}}}}catch(n){return n?.name!=="AbortError"?console.error(n):console.warn(n),{commitToHistory:!1}}},keyTest:t=>t.key===T.S&&t.shiftKey&&t[T.CTRL_OR_CMD],PanelComponent:({updateData:t})=>(0,mo.jsx)(se,{type:"button",icon:lx,title:g("buttons.saveAs"),"aria-label":g("buttons.saveAs"),showAriaLabel:Me().editor.isMobile,hidden:!Vi,onClick:()=>t(null),"data-testid":"save-as-button"})}),_a=$({name:"loadScene",label:"buttons.load",trackEvent:{category:"export"},predicate:(t,e,o,r)=>!!r.props.UIOptions.canvasActions.loadScene&&!e.viewModeEnabled,perform:async(t,e,o,r)=>{try{let{elements:n,appState:i,files:a}=await rp(e,t);return{elements:n,appState:i,files:a,commitToHistory:!0}}catch(n){return n?.name==="AbortError"?(console.warn(n),!1):{elements:t,appState:{...e,errorMessage:n.message},files:r.files,commitToHistory:!1}}},keyTest:t=>t[T.CTRL_OR_CMD]&&t.key===T.O}),Uy=$({name:"exportWithDarkMode",label:"imageExportDialog.label.darkMode",trackEvent:{category:"export",action:"toggleTheme"},perform:(t,e,o)=>({appState:{...e,exportWithDarkMode:o},commitToHistory:!1}),PanelComponent:({appState:t,updateData:e})=>(0,mo.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"},children:(0,mo.jsx)(zy,{value:t.exportWithDarkMode?qe.DARK:qe.LIGHT,onChange:o=>{e(o===qe.DARK)},title:g("imageExportDialog.label.darkMode")})})});h();var Wy="{}",Wf=$({name:"copyStyles",label:"labels.copyStyles",icon:Up,trackEvent:{category:"element"},perform:(t,e,o,r)=>{let n=[],i=t.find(a=>e.selectedElementIds[a.id]);if(n.push(i),i&&cr(i)){let a=at(i,r.scene.getNonDeletedElementsMap());n.push(a)}return i&&(Wy=JSON.stringify(n)),{appState:{...e,toast:{message:g("toast.copyStyles")}},commitToHistory:!1}},keyTest:t=>t[T.CTRL_OR_CMD]&&t.altKey&&t.code===fe.C}),Gf=$({name:"pasteStyles",label:"labels.pasteStyles",icon:Up,trackEvent:{category:"element"},perform:(t,e,o,r)=>{let n=JSON.parse(Wy),i=n[0],a=n[1];if(!F1(i))return{elements:t,commitToHistory:!1};let l=xe(t,e,{includeBoundTextElement:!0}),s=l.map(c=>c.id);return{elements:t.map(c=>{if(s.includes(c.id)){let m=i;if(le(c)&&c.containerId&&(m=a),!m)return c;let d=ue(c,{backgroundColor:m?.backgroundColor,strokeWidth:m?.strokeWidth,strokeColor:m?.strokeColor,strokeStyle:m?.strokeStyle,fillStyle:m?.fillStyle,opacity:m?.opacity,roughness:m?.roughness,roundness:m.roundness?B1(m.roundness.type,c)?m.roundness:z1(c):null});if(le(d)){let f=m.fontSize||Ir,p=m.fontFamily||_i;d=ue(d,{fontSize:f,fontFamily:p,textAlign:m.textAlign||Qg,lineHeight:m.lineHeight||Dr(p)});let b=null;d.containerId&&(b=l.find(x=>le(d)&&x.id===d.containerId)||null),$t(d,b,r.scene.getNonDeletedElementsMap())}return d.type==="arrow"&&_r(m)&&(d=ue(d,{startArrowhead:m.startArrowhead,endArrowhead:m.endArrowhead})),Te(c)&&(d=ue(d,{roundness:null,backgroundColor:"transparent"})),d}return c}),commitToHistory:!0}},keyTest:t=>t[T.CTRL_OR_CMD]&&t.altKey&&t.code===fe.V});h();var Vf=v(S(),1),PC=$({name:"toggleCanvasMenu",label:"buttons.menu",trackEvent:{category:"menu"},perform:(t,e)=>({appState:{...e,openMenu:e.openMenu==="canvas"?null:"canvas"},commitToHistory:!1}),PanelComponent:({appState:t,updateData:e})=>(0,Vf.jsx)(se,{type:"button",icon:td,"aria-label":g("buttons.menu"),onClick:e,selected:t.openMenu==="canvas"})}),DC=$({name:"toggleEditMenu",label:"buttons.edit",trackEvent:{category:"menu"},perform:(t,e)=>({appState:{...e,openMenu:e.openMenu==="shape"?null:"shape"},commitToHistory:!1}),PanelComponent:({elements:t,appState:e,updateData:o})=>(0,Vf.jsx)(se,{visible:qi(e,be(t)),type:"button",icon:sx,"aria-label":g("buttons.edit"),onClick:o,selected:e.openMenu==="shape"})}),di=$({name:"toggleShortcuts",label:"welcomeScreen.defaults.helpHint",icon:tx,viewMode:!0,trackEvent:{category:"menu",action:"toggleHelpDialog"},perform:(t,e,o,{focusContainer:r})=>(e.openDialog?.name==="help"&&r(),{appState:{...e,openDialog:e.openDialog?.name==="help"?null:{name:"help"}},commitToHistory:!1}),keyTest:t=>t.key===T.QUESTION_MARK});h();var mi=v(S(),1),RC=t=>{if(t.length>=2){let e=t[0].groupIds;for(let o of e)if(t.reduce((r,n)=>r&&Ui(n,o),!0))return!0}return!1},Gy=(t,e,o)=>{let r=o.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!0});return r.length>=2&&!RC(r)},Kf=$({name:"group",label:"labels.group",icon:t=>(0,mi.jsx)(Op,{theme:t.theme}),trackEvent:{category:"element"},perform:(t,e,o,r)=>{let n=r.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!0});if(n.length<2)return{appState:e,elements:t,commitToHistory:!1};let i=Nr(e);if(i.length===1){let x=i[0],y=new Set(ut(t,x).map(C=>C.id)),w=new Set(n.map(C=>C.id));if(new Set([...Array.from(y),...Array.from(w)]).size===y.size)return{appState:e,elements:t,commitToHistory:!1}}let a=[...t];new Set(n.map(x=>x.frameId)).size>1&&o0(n).forEach((y,w)=>{Nc(y,r.scene.getNonDeletedElementsMap())});let s=ln(),c=Ie(n);a=a.map(x=>c.get(x.id)?ue(x,{groupIds:xb(x.groupIds,s,e.editingGroupId)}):x);let m=ut(a,s),d=m[m.length-1],f=a.lastIndexOf(d),p=a.slice(f+1);return a=[...a.slice(0,f).filter(x=>!Ui(x,s)),...m,...p],{appState:{...e,...pb(s,{...e,selectedGroupIds:{}},be(a))},elements:a,commitToHistory:!0}},predicate:(t,e,o,r)=>Gy(t,e,r),keyTest:t=>!t.shiftKey&&t[T.CTRL_OR_CMD]&&t.key===T.G,PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>(0,mi.jsx)(se,{hidden:!Gy(t,e,r),type:"button",icon:(0,mi.jsx)(Op,{theme:e.theme}),onClick:()=>o(null),title:`${g("labels.group")} \u2014 ${N("CtrlOrCmd+G")}`,"aria-label":g("labels.group"),visible:Oe(be(t),e)})}),Yf=$({name:"ungroup",label:"labels.ungroup",icon:t=>(0,mi.jsx)(Fp,{theme:t.theme}),trackEvent:{category:"element"},perform:(t,e,o,r)=>{let n=Nr(e),i=Ie(t);if(n.length===0)return{appState:e,elements:t,commitToHistory:!1};let a=[...t],l=[];a=a.map(f=>{gt(f)&&l.push(f.id);let p=vb(f.groupIds,e.selectedGroupIds);return p.length===f.groupIds.length?f:ue(f,{groupIds:p})});let s=Rt(e,be(a),e,null),c=r.scene.getSelectedElements(e),m=new Set(c.filter(f=>f.frameId).map(f=>f.frameId));return r0(t).filter(f=>m.has(f.id)).forEach(f=>{f&&(a=Oc(a,ji(a,f,e,i),f,r))}),s.selectedElementIds=Object.entries(s.selectedElementIds).reduce((f,[p,b])=>(b&&!l.includes(p)&&(f[p]=!0),f),{}),{appState:{...e,...s},elements:a,commitToHistory:!0}},keyTest:t=>t.shiftKey&&t[T.CTRL_OR_CMD]&&t.key===T.G.toUpperCase(),predicate:(t,e)=>Nr(e).length>0,PanelComponent:({elements:t,appState:e,updateData:o})=>(0,mi.jsx)(se,{type:"button",hidden:Nr(e).length===0,icon:(0,mi.jsx)(Fp,{theme:e.theme}),onClick:()=>o(null),title:`${g("labels.ungroup")} \u2014 ${N("CtrlOrCmd+Shift+G")}`,"aria-label":g("labels.ungroup"),visible:Oe(be(t),e)})});h();h();h();var Yd=(t,e,o,r,n,i,a)=>{t.beginPath(),t.moveTo(e+i,o),t.lineTo(e+r-i,o),t.quadraticCurveTo(e+r,o,e+r,o+i),t.lineTo(e+r,o+n-i),t.quadraticCurveTo(e+r,o+n,e+r-i,o+n),t.lineTo(e+i,o+n),t.quadraticCurveTo(e,o+n,e,o+n-i),t.lineTo(e,o+i),t.quadraticCurveTo(e,o,e+i,o),t.closePath(),t.fill(),a&&(t.strokeStyle=a),t.stroke()};h();function NC(t){let e=0;if(t.length===0)return e;for(let o=0;o<t.length;o++){let r=t.charCodeAt(o);e=(e<<5)-e+r}return e}var ui=(t,e)=>`hsl(${Math.abs(NC(e?.id||t))%37*10}, 100%, 83%)`,Vy=t=>{let e=t?.trim()?.codePointAt(0);return(e?String.fromCodePoint(e):"?").toUpperCase()},Ky=({context:t,renderConfig:e,appState:o,normalizedWidth:r,normalizedHeight:n})=>{for(let[i,a]of e.remotePointerViewportCoords){let{x:l,y:s}=a,c=o.collaborators.get(i);l-=o.offsetLeft,s-=o.offsetTop;let m=11,d=14,f=l<0||l>r-m||s<0||s>n-d;l=Math.max(l,0),l=Math.min(l,r-m),s=Math.max(s,0),s=Math.min(s,n-d);let p=ui(i,c);t.save(),t.strokeStyle=p,t.fillStyle=p;let b=e.remotePointerUserStates.get(i),x=f||b==="idle"||b==="away";x&&(t.globalAlpha=.3),e.remotePointerButton.get(i)==="down"&&(t.beginPath(),t.arc(l,s,15,0,2*Math.PI,!1),t.lineWidth=3,t.strokeStyle="#ffffff88",t.stroke(),t.closePath(),t.beginPath(),t.arc(l,s,15,0,2*Math.PI,!1),t.lineWidth=1,t.strokeStyle=p,t.stroke(),t.closePath());let y=o.theme===qe.DARK?"#2f6330":t1,w=c?.isSpeaking;w&&(t.fillStyle=y,t.strokeStyle=y,t.lineWidth=10,t.lineJoin="round",t.beginPath(),t.moveTo(l,s),t.lineTo(l+0,s+14),t.lineTo(l+4,s+9),t.lineTo(l+11,s+8),t.closePath(),t.stroke(),t.fill()),t.fillStyle=il,t.strokeStyle=il,t.lineWidth=6,t.lineJoin="round",t.beginPath(),t.moveTo(l,s),t.lineTo(l+0,s+14),t.lineTo(l+4,s+9),t.lineTo(l+11,s+8),t.closePath(),t.stroke(),t.fill(),t.fillStyle=p,t.strokeStyle=p,t.lineWidth=2,t.lineJoin="round",t.beginPath(),x?(t.moveTo(l-1,s-1),t.lineTo(l-1,s+15),t.lineTo(l+5,s+10),t.lineTo(l+12,s+9),t.closePath(),t.fill()):(t.moveTo(l,s),t.lineTo(l+0,s+14),t.lineTo(l+4,s+9),t.lineTo(l+11,s+8),t.closePath(),t.fill(),t.stroke());let k=e.remotePointerUsernames.get(i)||"";if(!f&&k){t.font="600 12px sans-serif";let C=(w?l+0:l)+m/2,M=(w?s+0:s)+d+2,_=5,I=3,A=t.measureText(k),P=A.actualBoundingBoxDescent+A.actualBoundingBoxAscent,F=Math.max(P,12),D=C-1,W=M-1,O=A.width+2+_*2+2,U=F+2+I*2+2;if(t.roundRect?(t.beginPath(),t.roundRect(D,W,O,U,8),t.fillStyle=p,t.fill(),t.strokeStyle=il,t.stroke(),w&&(t.beginPath(),t.roundRect(D-2,W-2,O+4,U+4,8),t.strokeStyle=y,t.stroke())):Yd(t,D,W,O,U,8,il),t.fillStyle=e1,t.fillText(k,C+_+1,M+I+A.actualBoundingBoxAscent+Math.floor((F-P)/2)+2),w){t.fillStyle=y;let ee=8,K=8,pe=5;t.fillRect(D+O+K,W+(U/2-ee/2),2,ee),t.fillRect(D+O+K+pe,W+(U/2-ee*2/2),2,ee*2),t.fillRect(D+O+K+pe*2,W+(U/2-ee/2),2,ee)}}t.restore(),t.closePath()}};h();var Yy=v(H(),1);var Zf=v(S(),1),jf=({color:t,onClick:e,name:o,src:r,className:n})=>{let i=Vy(o),[a,l]=(0,Yy.useState)(!1),s=!a&&r,c=s?void 0:{background:t};return(0,Zf.jsx)("div",{className:z("Avatar",n),style:c,onClick:e,children:s?(0,Zf.jsx)("img",{className:"Avatar-img",src:r,alt:i,referrerPolicy:"no-referrer",onError:()=>l(!0)}):i})};var Vt=v(S(),1),OC=$({name:"goToCollaborator",label:"Go to a collaborator",viewMode:!0,trackEvent:{category:"collab"},perform:(t,e,o)=>!o.socketId||e.userToFollow?.socketId===o.socketId||o.isCurrentUser?{appState:{...e,userToFollow:null},commitToHistory:!1}:{appState:{...e,userToFollow:{socketId:o.socketId,username:o.username||""},openMenu:e.openMenu==="canvas"?null:e.openMenu},commitToHistory:!1},PanelComponent:({updateData:t,data:e,appState:o})=>{let{socketId:r,collaborator:n,withName:i,isBeingFollowed:a}=e,l=ui(r,n),s=z({"is-followed":a,"is-current-user":n.isCurrentUser===!0,"is-speaking":n.isSpeaking,"is-in-call":n.isInCall,"is-muted":n.isMuted}),c=n.isInCall?n.isSpeaking?(0,Vt.jsxs)("div",{className:"UserList__collaborator-status-icon-speaking-indicator",title:g("userList.hint.isSpeaking"),children:[(0,Vt.jsx)("div",{}),(0,Vt.jsx)("div",{}),(0,Vt.jsx)("div",{})]}):n.isMuted?(0,Vt.jsx)("div",{className:"UserList__collaborator-status-icon-microphone-muted",title:g("userList.hint.micMuted"),children:a2}):(0,Vt.jsx)("div",{title:g("userList.hint.inCall"),children:i2}):null;return i?(0,Vt.jsxs)("div",{className:`dropdown-menu-item dropdown-menu-item-base UserList__collaborator ${s}`,style:{"--avatar-size":"1.5rem"},onClick:()=>t(n),children:[(0,Vt.jsx)(jf,{color:l,onClick:()=>{},name:n.username||"",src:n.avatarUrl,className:s}),(0,Vt.jsx)("div",{className:"UserList__collaborator-name",children:n.username}),(0,Vt.jsxs)("div",{className:"UserList__collaborator-status-icons","aria-hidden":!0,children:[a&&(0,Vt.jsx)("div",{className:"UserList__collaborator-status-icon-is-followed",title:g("userList.hint.followStatus"),children:ca}),c]})]}):(0,Vt.jsxs)("div",{className:`UserList__collaborator UserList__collaborator--avatar-only ${s}`,children:[(0,Vt.jsx)(jf,{color:l,onClick:()=>{t(n)},name:n.username||"",src:n.avatarUrl,className:s}),c&&(0,Vt.jsx)("div",{className:"UserList__collaborator-status-icon",children:c})]})}});h();var Xf=$({name:"addToLibrary",trackEvent:{category:"element"},perform:(t,e,o,r)=>{let n=r.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});for(let i of qs)if(n.some(a=>a.type===i))return{commitToHistory:!1,appState:{...e,errorMessage:g(`errors.libraryElementTypeError.${i}`)}};return r.library.getLatestLibrary().then(i=>r.library.setLibrary([{id:ln(),status:"unpublished",elements:n.map(Wi),created:Date.now()},...i])).then(()=>({commitToHistory:!1,appState:{...e,toast:{message:g("toast.addedToLibrary")}}})).catch(i=>({commitToHistory:!1,appState:{...e,errorMessage:i.message}}))},label:"labels.addToLibrary"});h();h();var Zy=(t,e,o)=>{let r=Kn(t,e),n=To(t);return r.flatMap(i=>{let a=FC(i,n,o);return i.map(l=>ue(l,{x:l.x+a.x,y:l.y+a.y}))})},FC=(t,e,{axis:o,position:r})=>{let n=To(t),[i,a]=o==="x"?["minX","maxX"]:["minY","maxY"],l={x:0,y:0};return r==="start"?{...l,[o]:e[i]-n[i]}:r==="end"?{...l,[o]:e[a]-n[a]}:{...l,[o]:(e[i]+e[a])/2-(n[i]+n[a])/2}};var pi=v(S(),1),Po=(t,e,o,r)=>{let n=r.scene.getSelectedElements(e);return n.length>1&&!n.some(i=>Te(i))},Aa=(t,e,o,r)=>{let n=o.scene.getSelectedElements(e),i=Ie(t),a=Zy(n,i,r),l=Ie(a);return dr(t.map(s=>l.get(s.id)||s),e,o)},BC=$({name:"alignTop",label:"labels.alignTop",icon:Ap,trackEvent:{category:"element"},predicate:Po,perform:(t,e,o,r)=>({appState:e,elements:Aa(t,e,r,{position:"start",axis:"y"}),commitToHistory:!0}),keyTest:t=>t[T.CTRL_OR_CMD]&&t.shiftKey&&t.key===T.ARROW_UP,PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>(0,pi.jsx)(se,{hidden:!Po(t,e,null,r),type:"button",icon:Ap,onClick:()=>o(null),title:`${g("labels.alignTop")} \u2014 ${N("CtrlOrCmd+Shift+Up")}`,"aria-label":g("labels.alignTop"),visible:Oe(be(t),e)})}),zC=$({name:"alignBottom",label:"labels.alignBottom",icon:Lp,trackEvent:{category:"element"},predicate:Po,perform:(t,e,o,r)=>({appState:e,elements:Aa(t,e,r,{position:"end",axis:"y"}),commitToHistory:!0}),keyTest:t=>t[T.CTRL_OR_CMD]&&t.shiftKey&&t.key===T.ARROW_DOWN,PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>(0,pi.jsx)(se,{hidden:!Po(t,e,null,r),type:"button",icon:Lp,onClick:()=>o(null),title:`${g("labels.alignBottom")} \u2014 ${N("CtrlOrCmd+Shift+Down")}`,"aria-label":g("labels.alignBottom"),visible:Oe(be(t),e)})}),HC=$({name:"alignLeft",label:"labels.alignLeft",icon:Pp,trackEvent:{category:"element"},predicate:Po,perform:(t,e,o,r)=>({appState:e,elements:Aa(t,e,r,{position:"start",axis:"x"}),commitToHistory:!0}),keyTest:t=>t[T.CTRL_OR_CMD]&&t.shiftKey&&t.key===T.ARROW_LEFT,PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>(0,pi.jsx)(se,{hidden:!Po(t,e,null,r),type:"button",icon:Pp,onClick:()=>o(null),title:`${g("labels.alignLeft")} \u2014 ${N("CtrlOrCmd+Shift+Left")}`,"aria-label":g("labels.alignLeft"),visible:Oe(be(t),e)})}),$C=$({name:"alignRight",label:"labels.alignRight",icon:Dp,trackEvent:{category:"element"},predicate:Po,perform:(t,e,o,r)=>({appState:e,elements:Aa(t,e,r,{position:"end",axis:"x"}),commitToHistory:!0}),keyTest:t=>t[T.CTRL_OR_CMD]&&t.shiftKey&&t.key===T.ARROW_RIGHT,PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>(0,pi.jsx)(se,{hidden:!Po(t,e,null,r),type:"button",icon:Dp,onClick:()=>o(null),title:`${g("labels.alignRight")} \u2014 ${N("CtrlOrCmd+Shift+Right")}`,"aria-label":g("labels.alignRight"),visible:Oe(be(t),e)})}),UC=$({name:"alignVerticallyCentered",label:"labels.centerVertically",icon:Rp,trackEvent:{category:"element"},predicate:Po,perform:(t,e,o,r)=>({appState:e,elements:Aa(t,e,r,{position:"center",axis:"y"}),commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>(0,pi.jsx)(se,{hidden:!Po(t,e,null,r),type:"button",icon:Rp,onClick:()=>o(null),title:g("labels.centerVertically"),"aria-label":g("labels.centerVertically"),visible:Oe(be(t),e)})}),WC=$({name:"alignHorizontallyCentered",label:"labels.centerHorizontally",icon:Np,trackEvent:{category:"element"},predicate:Po,perform:(t,e,o,r)=>({appState:e,elements:Aa(t,e,r,{position:"center",axis:"x"}),commitToHistory:!0}),PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>(0,pi.jsx)(se,{hidden:!Po(t,e,null,r),type:"button",icon:Np,onClick:()=>o(null),title:g("labels.centerHorizontally"),"aria-label":g("labels.centerHorizontally"),visible:Oe(be(t),e)})});h();h();var jy=(t,e,o)=>{let[r,n,i,a]=o.axis==="x"?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],l=To(t),s=Kn(t,e).map(f=>[f,To(f)]).sort((f,p)=>f[1][n]-p[1][n]),c=0;for(let f of s)c+=f[1][a];let m=(l[a]-c)/(s.length-1);if(m<0){let f=s.findIndex(y=>y[1][r]===l[r]),p=s.findIndex(y=>y[1][i]===l[i]),b=(s[p][1][n]-s[f][1][n])/(s.length-1),x=s[f][1][n];return s.flatMap(([y,w],k)=>{let C={x:0,y:0};return k!==f&&k!==p&&(x+=b,C[o.axis]=x-w[n]),y.map(M=>ue(M,{x:M.x+C.x,y:M.y+C.y}))})}let d=l[r];return s.flatMap(([f,p])=>{let b={x:0,y:0};return b[o.axis]=d-p[r],d+=m,d+=p[a],f.map(x=>ue(x,{x:x.x+b.x,y:x.y+b.y}))})};var qf=v(S(),1),Xy=(t,e)=>{let o=e.scene.getSelectedElements(t);return o.length>1&&!o.some(r=>Te(r))},qy=(t,e,o,r)=>{let n=o.scene.getSelectedElements(e),i=jy(n,o.scene.getNonDeletedElementsMap(),r),a=Ie(i);return dr(t.map(l=>a.get(l.id)||l),e,o)},GC=$({name:"distributeHorizontally",label:"labels.distributeHorizontally",trackEvent:{category:"element"},perform:(t,e,o,r)=>({appState:e,elements:qy(t,e,r,{space:"between",axis:"x"}),commitToHistory:!0}),keyTest:t=>!t[T.CTRL_OR_CMD]&&t.altKey&&t.code===fe.H,PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>(0,qf.jsx)(se,{hidden:!Xy(e,r),type:"button",icon:px,onClick:()=>o(null),title:`${g("labels.distributeHorizontally")} \u2014 ${N("Alt+H")}`,"aria-label":g("labels.distributeHorizontally"),visible:Oe(be(t),e)})}),VC=$({name:"distributeVertically",label:"labels.distributeVertically",trackEvent:{category:"element"},perform:(t,e,o,r)=>({appState:e,elements:qy(t,e,r,{space:"between",axis:"y"}),commitToHistory:!0}),keyTest:t=>!t[T.CTRL_OR_CMD]&&t.altKey&&t.code===fe.V,PanelComponent:({elements:t,appState:e,updateData:o,app:r})=>(0,qf.jsx)(se,{hidden:!Xy(e,r),type:"button",icon:fx,onClick:()=>o(null),title:`${g("labels.distributeVertically")} \u2014 ${N("Alt+V")}`,"aria-label":g("labels.distributeVertically"),visible:Oe(be(t),e)})});h();var Jf=$({name:"flipHorizontal",label:"labels.flipHorizontal",icon:d2,trackEvent:{category:"element"},perform:(t,e,o,r)=>({elements:dr(Jy(t,r.scene.getNonDeletedElementsMap(),e,"horizontal"),e,r),appState:e,commitToHistory:!0}),keyTest:t=>t.shiftKey&&t.code===fe.H}),Qf=$({name:"flipVertical",label:"labels.flipVertical",icon:c2,trackEvent:{category:"element"},perform:(t,e,o,r)=>({elements:dr(Jy(t,r.scene.getNonDeletedElementsMap(),e,"vertical"),e,r),appState:e,commitToHistory:!0}),keyTest:t=>t.shiftKey&&t.code===fe.V&&!t[T.CTRL_OR_CMD]}),Jy=(t,e,o,r)=>{let n=xe(be(t),o,{includeBoundTextElement:!0,includeElementsInFrames:!0}),i=KC(n,t,e,o,r),a=Ie(i);return t.map(l=>a.get(l.id)||l)},KC=(t,e,o,r,n)=>{let{minX:i,minY:a,maxX:l,maxY:s}=To(t);return u0(o,t,o,"nw",!0,n==="horizontal"?l:i,n==="horizontal"?a:s),Vn(r)?xl(t,e,o):yl(t,o),t};h();var La=$({name:"copy",label:"labels.copy",icon:Nl,trackEvent:{category:"element"},perform:async(t,e,o,r)=>{let n=r.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});try{await Jb(n,r.files,o)}catch(i){return{commitToHistory:!1,appState:{...e,errorMessage:i.message}}}return{commitToHistory:!1}},keyTest:void 0}),eh=$({name:"paste",label:"labels.paste",trackEvent:{category:"element"},perform:async(t,e,o,r)=>{let n;try{n=await Qb()}catch(i){return i.name==="AbortError"||i.name==="NotAllowedError"?!1:(console.error(`actionPaste ${i.name}: ${i.message}`),kr?{commitToHistory:!1,appState:{...e,errorMessage:g("hints.firefox_clipboard_write")}}:{commitToHistory:!1,appState:{...e,errorMessage:g("errors.asyncPasteFailedOnRead")}})}try{r.pasteFromClipboard(qb({types:n}))}catch(i){return console.error(i),{commitToHistory:!1,appState:{...e,errorMessage:g("errors.asyncPasteFailedOnParse")}}}return{commitToHistory:!1}},keyTest:void 0}),Zd=$({name:"cut",label:"labels.cut",icon:jx,trackEvent:{category:"element"},perform:(t,e,o,r)=>(La.perform(t,e,o,r),Bl.perform(t,e,null,r)),keyTest:t=>t[T.CTRL_OR_CMD]&&t.key===T.X}),jd=$({name:"copyAsSvg",label:"labels.copyAsSvg",icon:m2,trackEvent:{category:"element"},perform:async(t,e,o,r)=>{if(!r.canvas)return{commitToHistory:!1};let{exportedElements:n,exportingFrame:i}=li(t,e,!0);try{return await si("clipboard-svg",n,e,r.files,{...e,exportingFrame:i,name:r.getName()}),{commitToHistory:!1}}catch(a){return console.error(a),{appState:{...e,errorMessage:a.message},commitToHistory:!1}}},predicate:t=>ip&&t.length>0,keywords:["svg","clipboard","copy"]}),Xd=$({name:"copyAsPng",label:"labels.copyAsPng",icon:u2,trackEvent:{category:"element"},perform:async(t,e,o,r)=>{if(!r.canvas)return{commitToHistory:!1};let n=r.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}),{exportedElements:i,exportingFrame:a}=li(t,e,!0);try{return await si("clipboard",i,e,r.files,{...e,exportingFrame:a,name:r.getName()}),{appState:{...e,toast:{message:g("toast.copyToClipboardAsPng",{exportSelection:n.length?g("toast.selection"):g("toast.canvas"),exportColorScheme:e.exportWithDarkMode?g("buttons.darkMode"):g("buttons.lightMode")})}},commitToHistory:!1}}catch(l){return console.error(l),{appState:{...e,errorMessage:l.message},commitToHistory:!1}}},predicate:t=>Yi&&t.length>0,keyTest:t=>t.code===fe.C&&t.altKey&&t.shiftKey,keywords:["png","clipboard","copy"]}),qd=$({name:"copyText",label:"labels.copyText",trackEvent:{category:"element"},perform:(t,e,o,r)=>{let i=r.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!0}).reduce((a,l)=>(le(l)&&a.push(l.text),a),[]).join(`

`);try{Zi(i)}catch{throw new Error(g("errors.copyToSystemClipboardFailed"))}return{commitToHistory:!1}},predicate:(t,e,o,r)=>ip&&r.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!0}).some(le),keywords:["text","clipboard","copy"]});h();var Jd=$({name:"gridMode",label:"labels.showGrid",viewMode:!0,trackEvent:{category:"canvas",predicate:t=>!t.gridSize},perform(t,e){return{appState:{...e,gridSize:this.checked(e)?null:Mr,objectsSnapModeEnabled:!1},commitToHistory:!1}},checked:t=>t.gridSize!==null,predicate:(t,e,o)=>typeof o.gridModeEnabled>"u",keyTest:t=>t[T.CTRL_OR_CMD]&&t.code===fe.QUOTE});h();var Pa=$({name:"zenMode",label:"buttons.zenMode",icon:f2,paletteName:"Toggle zen mode",viewMode:!0,trackEvent:{category:"canvas",predicate:t=>!t.zenModeEnabled},perform(t,e){return{appState:{...e,zenModeEnabled:!this.checked(e)},commitToHistory:!1}},checked:t=>t.zenModeEnabled,predicate:(t,e,o)=>typeof o.zenModeEnabled>"u",keyTest:t=>!t[T.CTRL_OR_CMD]&&t.altKey&&t.code===fe.Z});h();var th=$({name:"objectsSnapMode",label:"buttons.objectsSnapMode",icon:p2,viewMode:!1,trackEvent:{category:"canvas",predicate:t=>!t.objectsSnapModeEnabled},perform(t,e){return{appState:{...e,objectsSnapModeEnabled:!this.checked(e),gridSize:null},commitToHistory:!1}},checked:t=>t.objectsSnapModeEnabled,predicate:(t,e,o)=>typeof o.objectsSnapModeEnabled>"u",keyTest:t=>!t[T.CTRL_OR_CMD]&&t.altKey&&t.code===fe.S});h();var Tn=$({name:"stats",label:"stats.title",icon:s2,paletteName:"Toggle stats",viewMode:!0,trackEvent:{category:"menu"},perform(t,e){return{appState:{...e,showStats:!this.checked(e)},commitToHistory:!1}},checked:t=>t.showStats,keyTest:t=>!t[T.CTRL_OR_CMD]&&t.altKey&&t.code===fe.SLASH});h();var oh=$({name:"unbindText",label:"labels.unbindText",trackEvent:{category:"element"},predicate:(t,e,o,r)=>r.scene.getSelectedElements(e).some(i=>cr(i)),perform:(t,e,o,r)=>{let n=r.scene.getSelectedElements(e),i=r.scene.getNonDeletedElementsMap();return n.forEach(a=>{let l=at(a,i);if(l){let{width:s,height:c}=fc(l.originalText,Ko(l),l.lineHeight),m=eb(a.id);Q1(a.id);let{x:d,y:f}=pc(a,l,i);te(l,{containerId:null,width:s,height:c,text:l.originalText,x:d,y:f}),te(a,{boundElements:a.boundElements?.filter(p=>p.id!==l.id),height:m||a.height})}}),{elements:t,appState:e,commitToHistory:!0}}}),rh=$({name:"bindText",label:"labels.bindText",trackEvent:{category:"element"},predicate:(t,e,o,r)=>{let n=r.scene.getSelectedElements(e);if(n.length===2){let i=le(n[0])||le(n[1]),a;if(Ri(n[0])?a=n[0]:Ri(n[1])&&(a=n[1]),i&&a&&at(a,r.scene.getNonDeletedElementsMap())===null)return!0}return!1},perform:(t,e,o,r)=>{let n=r.scene.getSelectedElements(e),i,a;le(n[0])&&Ri(n[1])?(i=n[0],a=n[1]):(i=n[1],a=n[0]),te(i,{containerId:a.id,verticalAlign:vo.MIDDLE,textAlign:al.CENTER}),te(a,{boundElements:(a.boundElements||[]).concat({type:"text",id:i.id})});let l=a.height;return $t(i,a,r.scene.getNonDeletedElementsMap()),wl(a.id,l),{elements:YC(t,a,i),appState:{...e,selectedElementIds:{[a.id]:!0}},commitToHistory:!0}}}),YC=(t,e,o)=>{let r=t.slice(),n=r.findIndex(a=>a.id===o.id);r.splice(n,1);let i=r.findIndex(a=>a.id===e.id);return r.splice(i+1,0,o),r},ZC=(t,e,o)=>{let r=t.slice(),n=r.findIndex(a=>a.id===e.id);r.splice(n,1);let i=r.findIndex(a=>a.id===o.id);return r.splice(i,0,e),r},Qy=$({name:"wrapTextInContainer",label:"labels.createContainerFromText",trackEvent:{category:"element"},predicate:(t,e,o,r)=>{let n=r.scene.getSelectedElements(e),i=n.every(a=>le(a));return n.length>0&&i},perform:(t,e,o,r)=>{let n=r.scene.getSelectedElements(e),i=t.slice(),a={};for(let l of n)if(le(l)){let s=dn({type:"rectangle",backgroundColor:e.currentItemBackgroundColor,boundElements:[...l.boundElements||[],{id:l.id,type:"text"}],angle:l.angle,fillStyle:e.currentItemFillStyle,strokeColor:e.currentItemStrokeColor,roughness:e.currentItemRoughness,strokeWidth:e.currentItemStrokeWidth,strokeStyle:e.currentItemStrokeStyle,roundness:e.currentItemRoundness==="round"?{type:Ni("rectangle")?yo.ADAPTIVE_RADIUS:yo.PROPORTIONAL_RADIUS}:null,opacity:100,locked:!1,x:l.x-Au,y:l.y-Au,width:Hi(l.width,"rectangle"),height:Hi(l.height,"rectangle"),groupIds:l.groupIds,frameId:l.frameId});if(l.boundElements?.length){let c=l.boundElements.filter(d=>d.type==="arrow").map(d=>d.id);i.filter(d=>c.includes(d.id)).forEach(d=>{let f=d.startBinding,p=d.endBinding;f?.elementId===l.id&&(f={...f,elementId:s.id}),p?.elementId===l.id&&(p={...p,elementId:s.id}),(f||p)&&te(d,{startBinding:f,endBinding:p},!1)})}te(l,{containerId:s.id,verticalAlign:vo.MIDDLE,boundElements:null,textAlign:al.CENTER},!1),$t(l,s,r.scene.getNonDeletedElementsMap()),i=ZC([...i,s],s,l),a[s.id]=!0}return{elements:i,appState:{...e,selectedElementIds:a},commitToHistory:!0}}});h();h();var Qo=v(H(),1);var Yr=v(S(),1),ah=320,eE=85,nh=5,jC=42,XC=500,ih=!1,Qd=new Map,tE=({element:t,elementsMap:e,setAppState:o,onLinkOpen:r,setToast:n,updateEmbedValidationStatus:i})=>{let a=Da(),l=Sn(),s=t.link||"",[c,m]=(0,Qo.useState)(s),d=(0,Qo.useRef)(null),f=a.showHyperlinkPopup==="editor",p=(0,Qo.useCallback)(()=>{if(!d.current)return;let k=Or(d.current.value)||null;if(!t.link&&k&&ve("hyperlink","create"),Ht(t)){if(a.activeEmbeddable?.element===t&&o({activeEmbeddable:null}),!k){te(t,{link:null}),i(t,!1);return}if(!Gi(k,l.validateEmbeddable))k&&n({message:g("toast.unableToEmbed"),closable:!0}),t.link&&Qd.set(t.id,t.link),te(t,{link:k}),i(t,!1);else{let{width:C,height:M}=t,_=Yn(k);_?.error instanceof URIError&&n({message:g("toast.unrecognizedLinkFormat"),closable:!0});let I=_?_.intrinsicSize.w/_.intrinsicSize.h:1,A=Qd.get(t.id)!==t.link;te(t,{...A?{width:_?.type==="video"?C>M?C:M*I:C,height:_?.type==="video"&&C>M?C/I:M}:{},link:k}),i(t,!0),Qd.has(t.id)&&Qd.delete(t.id)}}else te(t,{link:k})},[t,n,l.validateEmbeddable,a.activeEmbeddable,o,i]);(0,Qo.useLayoutEffect)(()=>()=>{p()},[p]),(0,Qo.useEffect)(()=>{let k=null,C=M=>{if(f)return;k&&clearTimeout(k),JC(t,e,a,[M.clientX,M.clientY])&&(k=window.setTimeout(()=>{o({showHyperlinkPopup:!1})},XC))};return window.addEventListener("pointermove",C,!1),()=>{window.removeEventListener("pointermove",C,!1),k&&clearTimeout(k)}},[a,t,f,o,e]);let b=(0,Qo.useCallback)(()=>{ve("hyperlink","delete"),te(t,{link:null}),f&&(d.current.value=""),o({showHyperlinkPopup:!1})},[o,t,f]),x=()=>{ve("hyperlink","edit","popup-ui"),o({showHyperlinkPopup:"editor"})},{x:y,y:w}=oE(t,a,e);return a.contextMenu||a.draggingElement||a.resizingElement||a.isRotating||a.openMenu||a.viewModeEnabled?null:(0,Yr.jsxs)("div",{className:"excalidraw-hyperlinkContainer",style:{top:`${w}px`,left:`${y}px`,width:ah,padding:nh},onClick:()=>{!t.link&&!f&&o({showHyperlinkPopup:"editor"})},children:[f?(0,Yr.jsx)("input",{className:z("excalidraw-hyperlinkContainer-input"),placeholder:"Type or paste your link here",ref:d,value:c,onChange:k=>m(k.target.value),autoFocus:!0,onKeyDown:k=>{k.stopPropagation(),k[T.CTRL_OR_CMD]&&k.key===T.K&&k.preventDefault(),(k.key===T.ENTER||k.key===T.ESCAPE)&&(p(),o({showHyperlinkPopup:"info"}))}}):t.link?(0,Yr.jsx)("a",{href:Or(t.link||""),className:"excalidraw-hyperlinkContainer-link",target:xc(t.link)?"_self":"_blank",onClick:k=>{if(t.link&&r){let C=oc("excalidraw-link",k.nativeEvent);r({...t,link:Or(t.link)},C),C.defaultPrevented&&k.preventDefault()}},rel:"noopener noreferrer",children:t.link}):(0,Yr.jsx)("div",{className:"excalidraw-hyperlinkContainer-link",children:g("labels.link.empty")}),(0,Yr.jsxs)("div",{className:"excalidraw-hyperlinkContainer__buttons",children:[!f&&(0,Yr.jsx)(se,{type:"button",title:g("buttons.edit"),"aria-label":g("buttons.edit"),label:g("buttons.edit"),onClick:x,className:"excalidraw-hyperlinkContainer--edit",icon:na}),s&&!Ht(t)&&(0,Yr.jsx)(se,{type:"button",title:g("buttons.remove"),"aria-label":g("buttons.remove"),label:g("buttons.remove"),onClick:b,className:"excalidraw-hyperlinkContainer--remove",icon:Xo})]})]})},oE=(t,e,o)=>{let[r,n]=Co(t,o),{x:i,y:a}=qt({sceneX:r+t.width/2,sceneY:n},e),l=i-e.offsetLeft-ah/2,s=a-e.offsetTop-eE;return{x:l,y:s}},lh=(t,e)=>{let o=xe(t,e);return o[0]?.link?Ht(o[0])?"labels.link.editEmbed":"labels.link.edit":Ht(o[0])?"labels.link.createEmbed":"labels.link.create"},os=null,rE=(t,e,o)=>{os&&clearTimeout(os),os=window.setTimeout(()=>qC(t,e,o),d1)},qC=(t,e,o)=>{if(!t.link)return;let r=Ia();r.classList.add("excalidraw-tooltip--visible"),r.style.maxWidth="20rem",r.textContent=t.link;let[n,i,a,l]=Co(t,o),[s,c,m,d]=Ub([n,i,a,l],t.angle,e),f=qt({sceneX:s,sceneY:c},e);Hf(r,{left:f.x,top:f.y,width:m,height:d},"top"),ve("hyperlink","tooltip","link-icon"),ih=!0},nE=()=>{os&&clearTimeout(os),ih&&(ih=!1,Ia().classList.remove("excalidraw-tooltip--visible"))},JC=(t,e,o,[r,n])=>{let{x:i,y:a}=Ve({clientX:r,clientY:n},o),l=15/o.zoom.value;if(Z1(t,e,[i,a],l,null))return!1;let[s,c,m]=Co(t,e);if(i>=s&&i<=m&&a>=c-eE&&a<=c)return!1;let{x:d,y:f}=oE(t,o,e);return!(r>=d-l&&r<=d+ah+nh*2+l&&n>=f-l&&n<=f+l+nh*2+jC)};var iE=v(S(),1),rs=$({name:"hyperlink",label:(t,e)=>lh(t,e),icon:Ol,perform:(t,e)=>e.showHyperlinkPopup==="editor"?!1:{elements:t,appState:{...e,showHyperlinkPopup:"editor",openMenu:null},commitToHistory:!0},trackEvent:{category:"hyperlink",action:"click"},keyTest:t=>t[T.CTRL_OR_CMD]&&t.key===T.K,predicate:(t,e)=>xe(t,e).length===1,PanelComponent:({elements:t,appState:e,updateData:o})=>{let r=xe(t,e);return(0,iE.jsx)(se,{type:"button",icon:Ol,"aria-label":g(lh(t,e)),title:`${Ht(t[0])?g("labels.link.labelEmbed"):g("labels.link.label")} - ${N("CtrlOrCmd+K")}`,onClick:()=>o(null),selected:r.length===1&&!!r[0].link})}});h();var sh=t=>t.every(e=>!e.locked),ch=$({name:"toggleElementLock",label:(t,e,o)=>{let r=o.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!1});return r.length===1&&!Te(r[0])?r[0].locked?"labels.elementLock.unlock":"labels.elementLock.lock":sh(r)?"labels.elementLock.lockAll":"labels.elementLock.unlockAll"},icon:(t,e)=>{let o=xe(e,t);return sh(o)?ra:qn},trackEvent:{category:"element"},predicate:(t,e,o,r)=>{let n=r.scene.getSelectedElements(e);return n.length>0&&!n.some(i=>i.locked&&i.frameId)},perform:(t,e,o,r)=>{let n=r.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});if(!n.length)return!1;let i=sh(n),a=Ie(n);return{elements:t.map(l=>a.has(l.id)?ue(l,{locked:i}):l),appState:{...e,selectedLinearElement:i?null:e.selectedLinearElement},commitToHistory:!0}},keyTest:(t,e,o,r)=>t.key.toLocaleLowerCase()===T.L&&t[T.CTRL_OR_CMD]&&t.shiftKey&&r.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!1}).length>0}),aE=$({name:"unlockAllElements",paletteName:"Unlock all elements",trackEvent:{category:"canvas"},viewMode:!1,icon:qn,predicate:(t,e)=>xe(t,e).length===0&&t.some(r=>r.locked),perform:(t,e)=>{let o=t.filter(r=>r.locked);return{elements:t.map(r=>r.locked?ue(r,{locked:!1}):r),appState:{...e,selectedElementIds:Object.fromEntries(o.map(r=>[r.id,!0]))},commitToHistory:!0}},label:"labels.elementLock.unlockAll"});h();h();var Oo=v(H(),1);h();var ym=v(H(),1);h();var em=v(H(),1),lE=()=>{let[t,e]=(0,em.useState)(null),o=(0,em.useCallback)(r=>e(r),[]);return[t,o]};h();var sE=v(H(),1);var cE=v(S(),1),Bt=sE.default.forwardRef(({children:t,padding:e,className:o,style:r},n)=>(0,cE.jsx)("div",{className:z("Island",o),style:{"--padding":e,...r},ref:n,children:t}));h();var dE=v(pr(),1);var mE=v(H(),1),ns=v(S(),1),uE=t=>{let{closeOnClickOutside:e=!0}=t,o=zd({className:"excalidraw-modal-container"}),r=(0,mE.useRef)(document.body.classList.contains("excalidraw-animations-disabled"));if(!o)return null;let n=i=>{i.key===T.ESCAPE&&(i.nativeEvent.stopImmediatePropagation(),i.stopPropagation(),t.onCloseRequest())};return(0,dE.createPortal)((0,ns.jsxs)("div",{className:z("Modal",t.className,{"animations-disabled":r.current}),role:"dialog","aria-modal":"true",onKeyDown:n,"aria-labelledby":t.labelledBy,"data-prevent-outside-click":!0,children:[(0,ns.jsx)("div",{className:"Modal__background",onClick:e?t.onCloseRequest:void 0}),(0,ns.jsx)("div",{className:"Modal__content",style:{"--max-width":`${t.maxWidth}px`},tabIndex:0,children:t.children})]}),o)};h();var bo=v(H(),1);h();var Na=v(H(),1);h();var tm=v(H(),1);var dh=$e(new Map),pE=async t=>await _l({elements:t,appState:{exportBackground:!1,viewBackgroundColor:Sr.white},files:null,renderEmbeddables:!1}),fE=(t,e,o)=>{let[r,n]=(0,tm.useState)();return(0,tm.useEffect)(()=>{if(e)if(t){let i=o.get(t);i?n(i):(async()=>{let a=await pE(e);a.querySelector(".style-fonts")?.remove(),a&&(o.set(t,a),n(a))})()}else(async()=>{let i=await pE(e);n(i)})()},[t,e,o,n]),r},om=()=>{let[t]=Ee(dh,Pe);return{clearLibraryCache:()=>t.clear(),deleteItemsFromLibraryCache:r=>{r.forEach(n=>t.delete(n))},svgCache:t}};h();var Do=class{subscribers=[];on(...e){let o=e.flat().filter(r=>typeof r=="function");return this.subscribers.push(...o),()=>this.off(o)}once(...e){let o=e.flat().filter(n=>typeof n=="function");o.push(()=>r());let r=this.on(...o);return r}off(...e){let o=e.flat();this.subscribers=this.subscribers.filter(r=>!o.includes(r))}trigger(...e){for(let o of this.subscribers)o(...e);return this}clear(){this.subscribers=[]}};h();var rm=class{jobs=[];running=!1;tick(){if(this.running)return;let e=this.jobs.shift();e?(this.running=!0,e.promise.resolve(ml(e.jobFactory,...e.args).finally(()=>{this.running=!1,this.tick()}))):this.running=!1}push(e,...o){let r=ec();return this.jobs.push({jobFactory:e,promise:r,args:o}),this.tick(),r}};var gE=new Do,fi=$e({status:"loaded",isInitialized:!1,libraryItems:[]}),is=t=>sr(t),QC=(t,e)=>!t.find(o=>o.elements.length!==e.elements.length?!1:o.elements.every((r,n)=>r.id===e.elements[n].id&&r.versionNonce===e.elements[n].versionNonce)),bE=(t,e)=>{let o=[];for(let r of e)QC(t,r)&&o.push(r);return[...o,...t]},xE=(t,e)=>{let o=Ie(e),r={deletedItems:new Map,addedItems:new Map};for(let i of t)o.has(i.id)||r.deletedItems.set(i.id,i);let n=Ie(t);for(let i of e)n.has(i.id)||r.addedItems.set(i.id,i);return r},mh=class{currLibraryItems=[];prevLibraryItems=is(this.currLibraryItems);app;constructor(e){this.app=e}updateQueue=[];getLastUpdateTask=()=>this.updateQueue[this.updateQueue.length-1];notifyListeners=()=>{if(this.updateQueue.length>0)Ut.set(fi,e=>({status:"loading",libraryItems:this.currLibraryItems,isInitialized:e.isInitialized}));else{Ut.set(fi,{status:"loaded",libraryItems:this.currLibraryItems,isInitialized:!0});try{let e=this.prevLibraryItems;this.prevLibraryItems=is(this.currLibraryItems);let o=is(this.currLibraryItems);this.app.props.onLibraryChange?.(o),gE.trigger(xE(e,o),o)}catch(e){console.error(e)}}};destroy=()=>{this.updateQueue=[],this.currLibraryItems=[],Ut.set(dh,new Map)};resetLibrary=()=>this.setLibrary([]);getLatestLibrary=()=>new Promise(async e=>{try{let o=await(this.getLastUpdateTask()||this.currLibraryItems);this.updateQueue.length>0?e(this.getLatestLibrary()):e(is(o))}catch{return e(this.currLibraryItems)}});updateLibrary=async({libraryItems:e,prompt:o=!1,merge:r=!1,openLibraryMenu:n=!1,defaultStatus:i="unpublished"})=>(n&&this.app.setState({openSidebar:{name:Vo.name,tab:Xs}}),this.setLibrary(()=>new Promise(async(a,l)=>{try{let s=await(typeof e=="function"&&!(e instanceof Blob)?e(this.currLibraryItems):e),c;s instanceof Blob?c=await ep(s,i):c=kl(s,i),!o||window.confirm(g("alerts.confirmAddLibrary",{numShapes:c.length}))?(o&&this.app.focusContainer(),a(r?bE(this.currLibraryItems,c):c)):l(new Ki)}catch(s){l(s)}})));setLibrary=e=>{let o=new Promise(async(r,n)=>{try{await this.getLastUpdateTask(),typeof e=="function"&&(e=e(this.currLibraryItems)),this.currLibraryItems=is(await e),r(this.currLibraryItems)}catch(i){n(i)}}).catch(r=>{if(r.name==="AbortError")return console.warn("Library update aborted by user"),this.currLibraryItems;throw r}).finally(()=>{this.updateQueue=this.updateQueue.filter(r=>r!==o),this.notifyListeners()});return this.updateQueue.push(o),this.notifyListeners(),o}},vE=mh,am=t=>{let o=Math.ceil(Math.sqrt(t.length)),r=[],n=p=>t.slice(p*o,p*o+o).reduce((x,y)=>{let{height:w}=To(y.elements);return Math.max(x,w)},0),i=p=>{let b=0,x=0,y=0;for(let w of t){if(b%o===0&&(x=0),x===p){let{width:k}=To(w.elements);y=Math.max(y,k)}b++,x++}return y},a=0,l=0,s=0,c=0,m=0,d=0,f=0;for(let p of t){m&&m%o===0&&(l+=s+50,a=0,d=0,f++),d===0&&(s=n(f)),c=i(d);let{minX:b,minY:x,width:y,height:w}=To(p.elements),k=(c-y)/2,C=(s-w)/2;r.push(...p.elements.map(M=>({...M,x:M.x+a+k-b,y:M.y+l+C-x}))),a+=c+50,m++,d++}return r},uh=()=>{let t=new URLSearchParams(window.location.hash.slice(1)).get(Ks.addLibrary)||new URLSearchParams(window.location.search).get(Vs.addLibrary),e=t?new URLSearchParams(window.location.hash.slice(1)).get("token"):null;return t?{libraryUrl:t,idToken:e}:null},Ra=class t{static queue=new rm;static async getLibraryItems(e,o,r=!0){let n=()=>new Promise(async(i,a)=>{try{let l=await e.load({source:o});i(kl(l?.libraryItems||[],"published"))}catch(l){a(l)}});return r?t.queue.push(n):n()}static run=async(e,o)=>{let r=new t(e);return t.queue.push(()=>o(r))};adapter;constructor(e){this.adapter=e}getLibraryItems(e){return t.getLibraryItems(this.adapter,e,!1)}},as=0,nm=0,im=t=>hp(t.map(e=>`${e.id}:${fp(e.elements)}`).sort().join()),hE=async(t,e)=>{try{return nm++,await Ra.run(t,async o=>{let r=Ie(await o.getLibraryItems("save"));for(let[l]of e.deletedItems)r.delete(l);let n=[];for(let[l,s]of e.addedItems)r.has(l)?r.set(l,s):n.push(s);let i=n.concat(Array.from(r.values())),a=im(i);return a!==as&&await t.save({libraryItems:i}),as=a,i})}finally{nm--}},eT=t=>{let{excalidrawAPI:e}=t,o=(0,Na.useRef)(t);o.current=t;let r=(0,Na.useRef)(!1);(0,Na.useEffect)(()=>{if(!e)return;r.current=!1;let n=async({libraryUrl:l,idToken:s})=>{let c=new Promise(async(d,f)=>{try{let b=await(await fetch(decodeURIComponent(l))).blob();d(b)}catch(p){f(p)}}),m=s!==e.id;await(m&&document.hidden?new Promise(d=>{window.addEventListener("focus",()=>d(),{once:!0})}):null);try{await e.updateLibrary({libraryItems:c,prompt:m,merge:!0,defaultStatus:"published",openLibraryMenu:!0})}catch(d){throw d}finally{if(window.location.hash.includes(Ks.addLibrary)){let d=new URLSearchParams(window.location.hash.slice(1));d.delete(Ks.addLibrary),window.history.replaceState({},ol,`#${d.toString()}`)}else if(window.location.search.includes(Vs.addLibrary)){let d=new URLSearchParams(window.location.search);d.delete(Vs.addLibrary),window.history.replaceState({},ol,`?${d.toString()}`)}}},i=l=>{l.preventDefault();let s=uh();s&&(l.stopImmediatePropagation(),window.history.replaceState({},"",l.oldURL),n(s))},a=uh();if(a&&n(a),"getInitialLibraryItems"in o.current&&o.current.getInitialLibraryItems&&(console.warn("useHandleLibrar `opts.getInitialLibraryItems` is deprecated. Use `opts.adapter` instead."),Promise.resolve(o.current.getInitialLibraryItems()).then(l=>{e.updateLibrary({libraryItems:l,merge:!0})}).catch(l=>{console.error(`UseHandeLibrary getInitialLibraryItems failed: ${l?.message}`)})),"adapter"in o.current&&o.current.adapter){let l=o.current.adapter,s=o.current.migrationAdapter,c=ec();s?c.resolve(ml(s.load).then(async m=>{let d=null;try{if(!m)return Ra.getLibraryItems(l,"load");d=kl(m.libraryItems||[],"published");let f=await hE(l,xE([],d));try{await s.clear()}catch(p){console.error(`couldn't delete legacy library data: ${p.message}`)}return f}catch(f){return console.error(`couldn't migrate legacy library data: ${f.message}`),d}}).catch(m=>(console.error(`error during library migration: ${m.message}`),Ra.getLibraryItems(l,"load")))):c.resolve(ml(Ra.getLibraryItems,l,"load")),e.updateLibrary({libraryItems:c.then(m=>{let d=m||[];return as=im(d),d}),merge:!0}).finally(()=>{r.current=!0})}return window.addEventListener("hashchange",i),()=>{window.removeEventListener("hashchange",i)}},[e]),(0,Na.useEffect)(()=>{let n=gE.on(async(a,l)=>{let s=r.current,c="adapter"in o.current&&o.current.adapter||null;try{c&&as!==im(l)&&await hE(c,a)}catch(m){console.error(`couldn't persist library update: ${m.message}`,a),s&&o.current.excalidrawAPI&&o.current.excalidrawAPI.updateScene({appState:{errorMessage:g("errors.saveLibraryError")}})}}),i=a=>{nm&&_1(a)};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i),n(),as=0,nm=0}},[])};h();var Kt=v(H(),1);h();var ph=v(H(),1);var fh=v(S(),1),tT=(0,ph.forwardRef)(({children:t,gap:e,align:o,justifyContent:r,className:n,style:i},a)=>(0,fh.jsx)("div",{className:z("Stack Stack_horizontal",n),style:{"--gap":e,alignItems:o,justifyContent:r,...i},ref:a,children:t})),oT=(0,ph.forwardRef)(({children:t,gap:e,align:o,justifyContent:r,className:n,style:i},a)=>(0,fh.jsx)("div",{className:z("Stack Stack_vertical",n),style:{"--gap":e,justifyItems:o,justifyContent:r,...i},ref:a,children:t})),At={Row:tT,Col:oT};h();h();var EE=v(S(),1),rT=({theme:t,id:e,libraryReturnUrl:o})=>{let r=o||window.location.origin+window.location.pathname;return(0,EE.jsx)("a",{className:"library-menu-browse-button",href:`${E.VITE_APP_LIBRARY_URL}?target=${window.name||"_blank"}&referrer=${r}&useHash=true&token=${e}&theme=${t}&version=${Zs.excalidrawLibrary}`,target:"_excalidraw_libraries",children:g("labels.libraries")})},yE=rT;var sm=v(S(),1),lm=({libraryReturnUrl:t,theme:e,id:o,style:r,children:n,className:i})=>(0,sm.jsxs)("div",{className:z("library-menu-control-buttons",i),style:r,children:[(0,sm.jsx)(yE,{id:o,libraryReturnUrl:t,theme:e}),n]});h();var Ha=v(H(),1);h();var ls=v(H(),1);var nT=/({{[\w-]+}})|(<[\w-]+>)|(<\/[\w-]+>)/g,iT=/{{([\w-]+)}}/,aT=/<([\w-]+)>/,lT=/<\/([\w-]+)>/,sT=(t,e)=>{let o=[{name:"",children:[]}];return t.split(nT).filter(Boolean).forEach(r=>{let n=r.match(aT),i=r.match(lT),a=r.match(iT);if(n!==null){let l=n[1];e.hasOwnProperty(l)?o.push({name:l,children:[]}):console.warn(`Trans: missed to pass in prop ${l} for interpolating ${t}`)}else if(i!==null)if(i[1]===o[o.length-1].name){let s=o.pop(),c=ls.default.createElement(ls.default.Fragment,{},...s.children),m=e[s.name];typeof m=="function"&&o[o.length-1].children.push(m(c))}else console.warn(`Trans: unexpected end tag ${r} for interpolating ${t}`);else if(a!==null){let l=a[1];e.hasOwnProperty(l)?o[o.length-1].children.push(e[l]):console.warn(`Trans: key ${l} not in props for interpolating ${t}`)}else o[o.length-1].children.push(r)}),o.length!==1&&console.warn(`Trans: stack not empty for interpolating ${t}`),o[0].children},cT=({i18nKey:t,children:e,...o})=>{let{t:r}=bt();return ls.default.createElement(ls.default.Fragment,{},...sT(r(t),o))},oo=cT;h();h();var hi=v(S(),1),dT=({label:t,onClick:e,className:o,children:r,actionType:n,type:i="button",isLoading:a,...l})=>{let s=n?`Dialog__action-button--${n}`:"";return(0,hi.jsxs)("button",{className:z("Dialog__action-button",s,o),type:i,"aria-label":t,onClick:e,...l,children:[r&&(0,hi.jsx)("div",{style:a?{visibility:"hidden"}:{},children:r}),(0,hi.jsx)("div",{style:a?{visibility:"hidden"}:{},children:t}),a&&(0,hi.jsx)("div",{style:{position:"absolute",inset:0},children:(0,hi.jsx)(Nt,{})})]})},Oa=dT;var Fa=v(S(),1),mT=t=>{let{onConfirm:e,onCancel:o,children:r,confirmText:n=g("buttons.confirm"),cancelText:i=g("buttons.cancel"),className:a="",...l}=t,s=_e(),c=Hr(Ba,Pe),{container:m}=Mt();return(0,Fa.jsxs)(Je,{onCloseRequest:o,size:"small",...l,className:`confirm-dialog ${a}`,children:[r,(0,Fa.jsxs)("div",{className:"confirm-dialog-buttons",children:[(0,Fa.jsx)(Oa,{label:i,onClick:()=>{s({openMenu:null}),c(!1),o(),m?.focus()}}),(0,Fa.jsx)(Oa,{label:n,onClick:()=>{s({openMenu:null}),c(!1),e(),m?.focus()},actionType:"danger"})]})]})},cm=mT;h();var go=v(H(),1);h();var uo=class{static has(e){try{return!!window.localStorage.getItem(e)}catch(o){return console.warn(`localStorage.getItem error: ${o.message}`),!1}}static get(e){try{let o=window.localStorage.getItem(e);return o?JSON.parse(o):null}catch(o){return console.warn(`localStorage.getItem error: ${o.message}`),null}}static set=(e,o)=>{try{return window.localStorage.setItem(e,JSON.stringify(o)),!0}catch(r){return console.warn(`localStorage.setItem error: ${r.message}`),!1}};static delete=e=>{try{window.localStorage.removeItem(e)}catch(o){console.warn(`localStorage.removeItem error: ${o.message}`)}}};var re=v(S(),1),uT=async t=>{let r=Math.round(8),n=Math.max(Math.round(128/64),2),i=k1(t,6),a=document.createElement("canvas");a.width=i[0].length*128+(i[0].length+1)*(r*2)-r*2,a.height=i.length*128+(i.length+1)*(r*2)-r*2;let l=a.getContext("2d");l.fillStyle=It.white,l.fillRect(0,0,a.width,a.height);for(let[s,c]of t.entries()){let m=await Zn({elements:c.elements,files:null,maxWidthOrHeight:128}),{width:d,height:f}=m,p=Math.floor(s/6)*(128+r*2),b=s%6*(128+r*2);l.drawImage(m,b+(128-d)/2+r,p+(128-f)/2+r),l.lineWidth=n,l.strokeStyle=It.gray[4],l.strokeRect(b+r/2,p+r/2,128+r,128+r)}return await Il(new File([await Fr(a)],"preview",{type:Pt.png}),{outputType:Pt.jpg,maxWidthOrHeight:5e3})},pT=({libItem:t,appState:e,index:o,onChange:r,onRemove:n})=>{let i=(0,go.useRef)(null),a=(0,go.useRef)(null);return(0,go.useEffect)(()=>{let l=i.current;l&&(async()=>{let s=await _l({elements:t.elements,appState:{...e,viewBackgroundColor:It.white,exportBackground:!0},files:null});l.innerHTML=s.outerHTML})()},[t.elements,e]),(0,re.jsxs)("div",{className:"single-library-item",children:[t.status==="published"&&(0,re.jsx)("span",{className:"single-library-item-status",children:g("labels.statusPublished")}),(0,re.jsx)("div",{ref:i,className:"single-library-item__svg"}),(0,re.jsx)(se,{"aria-label":g("buttons.remove"),type:"button",icon:Mo,className:"single-library-item--remove",onClick:n.bind(null,t.id),title:g("buttons.remove")}),(0,re.jsxs)("div",{style:{display:"flex",margin:"0.8rem 0",width:"100%",fontSize:"14px",fontWeight:500,flexDirection:"column"},children:[(0,re.jsxs)("label",{style:{display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[(0,re.jsxs)("div",{style:{padding:"0.5em 0"},children:[(0,re.jsx)("span",{style:{fontWeight:500,color:It.gray[6]},children:g("publishDialog.itemName")}),(0,re.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,re.jsx)("input",{type:"text",ref:a,style:{width:"80%",padding:"0.2rem"},defaultValue:t.name,placeholder:"Item name",onChange:l=>{r(l.target.value,o)}})]}),(0,re.jsx)("span",{className:"error",children:t.error})]})]})},fT=({onClose:t,libraryItems:e,appState:o,onSuccess:r,onError:n,updateItemsInStorage:i,onRemove:a})=>{let[l,s]=(0,go.useState)({authorName:"",githubHandle:"",name:"",description:"",twitterHandle:"",website:""}),[c,m]=(0,go.useState)(!1);(0,go.useEffect)(()=>{let C=uo.get(Eo.PUBLISH_LIBRARY);C&&s(C)},[]);let[d,f]=(0,go.useState)(e.slice());(0,go.useEffect)(()=>{f(e.slice())},[e]);let p=C=>{s({...l,[C.target.name]:C.target.value})},b=async C=>{C.preventDefault(),m(!0);let M=[],_=!1;if(d.forEach(W=>{let O="";W.name||(O=g("publishDialog.errors.required"),_=!0),M.push({...W,error:O})}),_){f(M),m(!1);return}let I=await uT(d),A={type:r1.excalidrawLibrary,version:Zs.excalidrawLibrary,source:n1,libraryItems:d},P=JSON.stringify(A,null,2),F=new Blob([P],{type:"application/json"}),D=new FormData;D.append("excalidrawLib",F),D.append("previewImage",I),D.append("previewImageType",I.type),D.append("title",l.name),D.append("authorName",l.authorName),D.append("githubHandle",l.githubHandle),D.append("name",l.name),D.append("description",l.description),D.append("twitterHandle",l.twitterHandle),D.append("website",l.website),fetch(`${E.VITE_APP_LIBRARY_BACKEND}/submit`,{method:"post",body:D}).then(W=>W.ok?W.json().then(({url:O})=>{uo.delete(Eo.PUBLISH_LIBRARY),r({url:O,authorName:l.authorName,items:d})}):W.json().catch(()=>{throw new Error(W.statusText||"something went wrong")}).then(O=>{throw new Error(O.message||W.statusText||"something went wrong")}),W=>{console.error(W),n(W),m(!1)}).catch(W=>{console.error(W),n(W),m(!1)})},x=()=>{let C=[];return d.forEach((M,_)=>{C.push((0,re.jsx)("div",{className:"single-library-item-wrapper",children:(0,re.jsx)(pT,{libItem:M,appState:o,index:_,onChange:(I,A)=>{let P=d.slice();P[A].name=I,f(P)},onRemove:a})},_))}),(0,re.jsx)("div",{className:"selected-library-items",children:C})},y=(0,go.useCallback)(()=>{i(d),uo.set(Eo.PUBLISH_LIBRARY,l),t()},[d,t,i,l]),w=!!e.length,k=e.some(C=>C.status==="published");return(0,re.jsx)(Je,{onCloseRequest:y,title:g("publishDialog.title"),className:"publish-library",children:w?(0,re.jsxs)("form",{onSubmit:b,children:[(0,re.jsx)("div",{className:"publish-library-note",children:(0,re.jsx)(oo,{i18nKey:"publishDialog.noteDescription",link:C=>(0,re.jsx)("a",{href:"https://libraries.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:C})})}),(0,re.jsx)("span",{className:"publish-library-note",children:(0,re.jsx)(oo,{i18nKey:"publishDialog.noteGuidelines",link:C=>(0,re.jsx)("a",{href:"https://github.com/excalidraw/excalidraw-libraries#guidelines",target:"_blank",rel:"noopener noreferrer",children:C})})}),(0,re.jsx)("div",{className:"publish-library-note",children:g("publishDialog.noteItems")}),k&&(0,re.jsx)("span",{className:"publish-library-note publish-library-warning",children:g("publishDialog.republishWarning")}),x(),(0,re.jsxs)("div",{className:"publish-library__fields",children:[(0,re.jsxs)("label",{children:[(0,re.jsxs)("div",{children:[(0,re.jsx)("span",{children:g("publishDialog.libraryName")}),(0,re.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,re.jsx)("input",{type:"text",name:"name",required:!0,value:l.name,onChange:p,placeholder:g("publishDialog.placeholder.libraryName")})]}),(0,re.jsxs)("label",{style:{alignItems:"flex-start"},children:[(0,re.jsxs)("div",{children:[(0,re.jsx)("span",{children:g("publishDialog.libraryDesc")}),(0,re.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,re.jsx)("textarea",{name:"description",rows:4,required:!0,value:l.description,onChange:p,placeholder:g("publishDialog.placeholder.libraryDesc")})]}),(0,re.jsxs)("label",{children:[(0,re.jsxs)("div",{children:[(0,re.jsx)("span",{children:g("publishDialog.authorName")}),(0,re.jsx)("span",{"aria-hidden":"true",className:"required",children:"*"})]}),(0,re.jsx)("input",{type:"text",name:"authorName",required:!0,value:l.authorName,onChange:p,placeholder:g("publishDialog.placeholder.authorName")})]}),(0,re.jsxs)("label",{children:[(0,re.jsx)("span",{children:g("publishDialog.githubUsername")}),(0,re.jsx)("input",{type:"text",name:"githubHandle",value:l.githubHandle,onChange:p,placeholder:g("publishDialog.placeholder.githubHandle")})]}),(0,re.jsxs)("label",{children:[(0,re.jsx)("span",{children:g("publishDialog.twitterUsername")}),(0,re.jsx)("input",{type:"text",name:"twitterHandle",value:l.twitterHandle,onChange:p,placeholder:g("publishDialog.placeholder.twitterHandle")})]}),(0,re.jsxs)("label",{children:[(0,re.jsx)("span",{children:g("publishDialog.website")}),(0,re.jsx)("input",{type:"text",name:"website",pattern:"https?://.+",title:g("publishDialog.errors.website"),value:l.website,onChange:p,placeholder:g("publishDialog.placeholder.website")})]}),(0,re.jsx)("span",{className:"publish-library-note",children:(0,re.jsx)(oo,{i18nKey:"publishDialog.noteLicense",link:C=>(0,re.jsx)("a",{href:"https://github.com/excalidraw/excalidraw-libraries/blob/main/LICENSE",target:"_blank",rel:"noopener noreferrer",children:C})})})]}),(0,re.jsxs)("div",{className:"publish-library__buttons",children:[(0,re.jsx)(Oa,{label:g("buttons.cancel"),onClick:y,"data-testid":"cancel-clear-canvas-button"}),(0,re.jsx)(Oa,{type:"submit",label:g("buttons.submit"),actionType:"primary",isLoading:c})]})]}):(0,re.jsx)("p",{style:{padding:"1em",textAlign:"center",fontWeight:500},children:g("publishDialog.atleastOneLibItem")})})},wE=fT;h();h();var SE=v(S(),1),CE=({className:t="",children:e,onToggle:o,title:r,...n})=>{let i=Me(),a=z(`dropdown-menu-button ${t}`,"zen-mode-transition",{"dropdown-menu-button--mobile":i.editor.isMobile}).trim();return(0,SE.jsx)("button",{"data-prevent-outside-click":!0,className:a,onClick:o,type:"button","data-testid":"dropdown-menu-button",title:r,...n,children:e})},TE=CE;CE.displayName="DropdownMenuTrigger";h();h();var dm=v(H(),1);var hh=dm.default.createContext({}),mm=(t="",e=!1)=>`dropdown-menu-item dropdown-menu-item-base ${t} ${e?"dropdown-menu-item--selected":""}`.trim(),um=(t,e)=>{let o=(0,dm.useContext)(hh);return nn(t,r=>{let n=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});e?.(n),n.defaultPrevented||o.onSelect?.(n)})};h();var kn=v(S(),1),hT=({icon:t,shortcut:e,children:o})=>{let r=Me();return(0,kn.jsxs)(kn.Fragment,{children:[(0,kn.jsx)("div",{className:"dropdown-menu-item__icon",children:t}),(0,kn.jsx)("div",{className:"dropdown-menu-item__text",children:o}),e&&!r.editor.isMobile&&(0,kn.jsx)("div",{className:"dropdown-menu-item__shortcut",children:e})]})},pm=hT;var fm=v(S(),1),gh=({icon:t,onSelect:e,children:o,shortcut:r,className:n,selected:i,...a})=>{let l=um(a.onClick,e);return(0,fm.jsx)("button",{...a,onClick:l,type:"button",className:mm(n,i),title:a.title??a["aria-label"],children:(0,fm.jsx)(pm,{icon:t,shortcut:r,children:o})})};gh.displayName="DropdownMenuItem";var kE=({children:t})=>(0,fm.jsx)("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"pink",borderRadius:6,fontSize:9,color:"black",fontFamily:"Cascadia, monospace"},children:t});kE.displayName="DropdownMenuItemBadge";gh.Badge=kE;var Ro=gh;h();var _E=v(S(),1),IE=()=>(0,_E.jsx)("div",{style:{height:"1px",backgroundColor:"var(--default-border-color)",margin:".5rem 0"}}),ME=IE;IE.displayName="DropdownMenuSeparator";h();var hm=v(S(),1),AE=({children:t,className:e="",style:o,title:r})=>(0,hm.jsxs)("div",{className:`dropdown-menu-group ${e}`,style:o,children:[r&&(0,hm.jsx)("p",{className:"dropdown-menu-group-title",children:r}),t]}),LE=AE;AE.displayName="DropdownMenuGroup";h();var gm=v(H(),1);var ss=v(S(),1),PE=({children:t,onClickOutside:e,className:o="",onSelect:r,style:n})=>{let i=Me(),a=(0,gm.useRef)(null),l=Hd({onClickOutside:e});ka(a,()=>{l.onClickOutside?.()}),(0,gm.useEffect)(()=>{let c=d=>{d.key===T.ESCAPE&&(d.stopImmediatePropagation(),l.onClickOutside?.())},m={capture:!0};return document.addEventListener("keydown",c,m),()=>{document.removeEventListener("keydown",c,m)}},[l]);let s=z(`dropdown-menu ${o}`,{"dropdown-menu--mobile":i.editor.isMobile}).trim();return(0,ss.jsx)(hh.Provider,{value:{onSelect:r},children:(0,ss.jsx)("div",{ref:a,className:s,style:n,"data-testid":"dropdown-menu",children:i.editor.isMobile?(0,ss.jsx)(At.Col,{className:"dropdown-menu-container",children:t}):(0,ss.jsx)(Bt,{className:"dropdown-menu-container",padding:2,style:{zIndex:2},children:t})})})};PE.displayName="DropdownMenuContent";var DE=PE;h();var bh=v(S(),1),RE=({icon:t,shortcut:e,href:o,children:r,onSelect:n,className:i="",selected:a,...l})=>{let s=um(l.onClick,n);return(0,bh.jsx)("a",{...l,href:o,target:"_blank",rel:"noreferrer",className:mm(i,a),title:l.title??l["aria-label"],onClick:s,children:(0,bh.jsx)(pm,{icon:t,shortcut:e,children:r})})},za=RE;RE.displayName="DropdownMenuItemLink";h();var OE=v(S(),1),gT=({children:t,className:e="",selected:o,...r})=>(0,OE.jsx)("div",{...r,className:`dropdown-menu-item-base dropdown-menu-item-custom ${e} ${o?"dropdown-menu-item--selected":""}`.trim(),children:t}),NE=gT;h();var cs=v(H(),1),FE=t=>{let e=cs.default.Children.toArray(t).find(o=>cs.default.isValidElement(o)&&typeof o.type!="string"&&o?.type.displayName&&o.type.displayName==="DropdownMenuTrigger");return e||null},BE=t=>{let e=cs.default.Children.toArray(t).find(o=>cs.default.isValidElement(o)&&typeof o.type!="string"&&o?.type.displayName&&o.type.displayName==="DropdownMenuContent");return e||null};var bm=v(S(),1),Zr=({children:t,open:e})=>{let o=FE(t),r=BE(t);return(0,bm.jsxs)(bm.Fragment,{children:[o,e&&r]})};Zr.Trigger=TE;Zr.Content=DE;Zr.Item=Ro;Zr.ItemLink=za;Zr.ItemCustom=NE;Zr.Group=LE;Zr.Separator=ME;var Le=Zr;Zr.displayName="DropdownMenu";var vt=v(S(),1),bT=(t,e)=>t.filter(o=>e.includes(o.id)),xT=({setAppState:t,selectedItems:e,library:o,onRemoveFromLibrary:r,resetLibrary:n,onSelectItems:i,appState:a,className:l})=>{let[s]=Ee(fi,Pe),[c,m]=Ee(Ba,Pe),d=()=>{let D=e.length?g("alerts.removeItemsFromsLibrary",{count:e.length}):g("alerts.resetLibrary"),W=e.length?g("confirmDialog.removeItemsFromLib"):g("confirmDialog.resetLibrary");return(0,vt.jsx)(cm,{onConfirm:()=>{e.length?r():n(),p(!1)},onCancel:()=>{p(!1)},title:W,children:(0,vt.jsx)("p",{children:D})})},[f,p]=(0,Ha.useState)(!1),b=!!e.length,x=b?s.libraryItems.filter(D=>e.includes(D.id)):s.libraryItems,y=b?g("buttons.remove"):g("buttons.resetLibrary"),[w,k]=(0,Ha.useState)(!1),[C,M]=(0,Ha.useState)(null),_=(0,Ha.useCallback)(()=>(0,vt.jsxs)(Je,{onCloseRequest:()=>M(null),title:g("publishSuccessDialog.title"),className:"publish-library-success",size:"small",children:[(0,vt.jsx)("p",{children:(0,vt.jsx)(oo,{i18nKey:"publishSuccessDialog.content",authorName:C.authorName,link:D=>(0,vt.jsx)("a",{href:C?.url,target:"_blank",rel:"noopener noreferrer",children:D})})}),(0,vt.jsx)(se,{type:"button",title:g("buttons.close"),"aria-label":g("buttons.close"),label:g("buttons.close"),onClick:()=>M(null),"data-testid":"publish-library-success-close",className:"publish-library-success-close"})]}),[M,C]),I=(D,W)=>{k(!1),M({url:D.url,authorName:D.authorName});let O=W.slice();O.forEach(U=>{e.includes(U.id)&&(U.status="published")}),o.setLibrary(O)},A=async()=>{try{await o.updateLibrary({libraryItems:Cc({description:"Excalidraw library files"}),merge:!0,openLibraryMenu:!0})}catch(D){if(D?.name==="AbortError"){console.warn(D);return}t({errorMessage:g("errors.importLibraryError")})}},P=async()=>{let D=b?x:await o.getLatestLibrary();Fb(D).catch(Qs).catch(W=>{t({errorMessage:W.message})})},F=()=>(0,vt.jsxs)(Le,{open:c,children:[(0,vt.jsx)(Le.Trigger,{onToggle:()=>m(!c),children:B0}),(0,vt.jsxs)(Le.Content,{onClickOutside:()=>m(!1),onSelect:()=>m(!1),className:"library-menu",children:[!b&&(0,vt.jsx)(Le.Item,{onSelect:A,icon:aa,"data-testid":"lib-dropdown--load",children:g("buttons.load")}),!!x.length&&(0,vt.jsx)(Le.Item,{onSelect:P,icon:Jn,"data-testid":"lib-dropdown--export",children:g("buttons.export")}),!!x.length&&(0,vt.jsx)(Le.Item,{onSelect:()=>p(!0),icon:Xo,children:y}),b&&(0,vt.jsx)(Le.Item,{icon:Zx,onSelect:()=>k(!0),"data-testid":"lib-dropdown--remove",children:g("buttons.publishLibrary")})]})]});return(0,vt.jsxs)("div",{className:z("library-menu-dropdown-container",l),children:[F(),e.length>0&&(0,vt.jsx)("div",{className:"library-actions-counter",children:e.length}),f&&d(),w&&(0,vt.jsx)(wE,{onClose:()=>k(!1),libraryItems:bT(s.libraryItems,e),appState:a,onSuccess:D=>I(D,s.libraryItems),onError:D=>window.alert(D),updateItemsInStorage:()=>o.setLibrary(s.libraryItems),onRemove:D=>i(e.filter(W=>W!==D))}),C&&_()]})},xh=({selectedItems:t,onSelectItems:e,className:o})=>{let{library:r}=so(),{clearLibraryCache:n,deleteItemsFromLibraryCache:i}=om(),a=ke(),l=_e(),[s]=Ee(fi,Pe),c=async d=>{let f=d.filter(p=>!t.includes(p.id));r.setLibrary(f).catch(()=>{l({errorMessage:g("alerts.errorRemovingFromLibrary")})}),i(t),e([])};return(0,vt.jsx)(xT,{appState:a,setAppState:l,selectedItems:t,onSelectItems:e,library:r,onRemoveFromLibrary:()=>c(s.libraryItems),resetLibrary:()=>{r.resetLibrary(),n()},className:o})};h();var $a=v(H(),1);h();var In=v(H(),1);var gi=v(S(),1),zE=(0,In.memo)(({id:t,elements:e,isPending:o,onClick:r,selected:n,onToggle:i,onDrag:a,svgCache:l})=>{let s=(0,In.useRef)(null),c=fE(t,e,l);(0,In.useEffect)(()=>{let b=s.current;if(b)return c&&(b.innerHTML=c.outerHTML),()=>{b.innerHTML=""}},[c]);let[m,d]=(0,In.useState)(!1),f=Me().editor.isMobile,p=o&&(0,gi.jsx)("div",{className:"library-unit__adder",children:F0});return(0,gi.jsxs)("div",{className:z("library-unit",{"library-unit__active":e,"library-unit--hover":e&&m,"library-unit--selected":n,"library-unit--skeleton":!c}),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[(0,gi.jsx)("div",{className:z("library-unit__dragger",{"library-unit__pulse":!!o}),ref:s,draggable:!!e,onClick:e||o?b=>{t&&b.shiftKey?i(t,b):r(t)}:void 0,onDragStart:b=>{if(!t){b.preventDefault();return}d(!1),a(t,b)}}),p,t&&e&&(m||f||n)&&(0,gi.jsx)(ci,{checked:n,onChange:(b,x)=>i(t,x),className:"library-unit__checkbox"})]})}),HE=()=>(0,gi.jsx)("div",{className:"library-unit library-unit--skeleton"});h();var xm=v(H(),1);function vT(){return[!1,(0,xm.useCallback)(e=>e(),[])]}var $E=xm.default.useTransition||vT;var bi=v(S(),1),UE=({children:t})=>(0,bi.jsx)("div",{className:"library-menu-items-container__grid",children:t}),vh=(0,$a.memo)(({items:t,onItemSelectToggle:e,onItemDrag:o,isItemSelected:r,onClick:n,svgCache:i,itemsRenderedPerBatch:a})=>{let[,l]=$E(),[s,c]=(0,$a.useState)(0);return(0,$a.useEffect)(()=>{s<t.length&&l(()=>{c(s+a)})},[s,t.length,l,a]),(0,bi.jsx)(bi.Fragment,{children:t.map((m,d)=>d<s?(0,bi.jsx)(zE,{elements:m?.elements,isPending:!m?.id&&!!m?.elements,onClick:n,svgCache:i,id:m?.id,selected:r(m.id),onToggle:e,onDrag:o},m?.id??d):(0,bi.jsx)(HE,{},d))})});h();var YE=v(H(),1);var ZE=v(Eh(),1),FT=$e(0),jE=t=>{let[e,o]=Ee(FT);return(0,YE.useEffect)(()=>{let{current:r}=t;if(!r)return;let n=(0,ZE.default)(()=>{let{scrollTop:i}=r;o(i)},200);return r.addEventListener("scroll",n),()=>{n.cancel(),r.removeEventListener("scroll",n)}},[t,o]),e};var Tt=v(S(),1),BT=17,zT=64;function wh({isLoading:t,libraryItems:e,onAddToLibrary:o,onInsertLibraryItems:r,pendingElements:n,theme:i,id:a,libraryReturnUrl:l,onSelectItems:s,selectedItems:c}){let m=(0,Kt.useRef)(null),d=jE(m);(0,Kt.useEffect)(()=>{d>0&&m.current?.scrollTo(0,d)},[]);let{svgCache:f}=om(),p=(0,Kt.useMemo)(()=>e.filter(D=>D.status!=="published"),[e]),b=(0,Kt.useMemo)(()=>e.filter(D=>D.status==="published"),[e]),x=!e.length&&!n.length,y=!n.length&&!p.length&&!b.length,[w,k]=(0,Kt.useState)(null),C=(0,Kt.useCallback)((D,W)=>{let O=!c.includes(D),U=[...p,...b];if(O){if(W.shiftKey&&w){let ee=U.findIndex(ce=>ce.id===w),K=U.findIndex(ce=>ce.id===D);if(ee===-1||K===-1){s([...c,D]);return}let pe=Ie(c),me=U.reduce((ce,oe,R)=>((R>=ee&&R<=K||pe.has(oe.id))&&ce.push(oe.id),ce),[]);s(me)}else s([...c,D]);k(D)}else k(null),s(c.filter(ee=>ee!==D))},[w,s,b,c,p]),M=(0,Kt.useCallback)(D=>{let W;return c.includes(D)?W=e.filter(O=>c.includes(O.id)):W=e.filter(O=>O.id===D),W.map(O=>({...O,elements:wc(O.elements,{randomizeSeed:!0})}))},[e,c]),_=(0,Kt.useCallback)((D,W)=>{W.dataTransfer.setData(Pt.excalidrawlib,np(M(D)))},[M]),I=(0,Kt.useCallback)(D=>D?c.includes(D):!1,[c]),A=(0,Kt.useCallback)(()=>{o(n)},[n,o]),P=(0,Kt.useCallback)(D=>{D&&r(M(D))},[M,r]),F=f.size>=e.length?zT:BT;return(0,Tt.jsxs)("div",{className:"library-menu-items-container",style:n.length||p.length||b.length?{justifyContent:"flex-start"}:{borderBottom:0},children:[!y&&(0,Tt.jsx)(xh,{selectedItems:c,onSelectItems:s,className:"library-menu-dropdown-container--in-heading"}),(0,Tt.jsxs)(At.Col,{className:"library-menu-items-container__items",align:"start",gap:1,style:{flex:b.length>0?1:"0 1 auto",marginBottom:0},ref:m,children:[(0,Tt.jsxs)(Tt.Fragment,{children:[!y&&(0,Tt.jsx)("div",{className:"library-menu-items-container__header",children:g("labels.personalLib")}),t&&(0,Tt.jsx)("div",{style:{position:"absolute",top:"var(--container-padding-y)",right:"var(--container-padding-x)",transform:"translateY(50%)"},children:(0,Tt.jsx)(Nt,{})}),!n.length&&!p.length?(0,Tt.jsxs)("div",{className:"library-menu-items__no-items",children:[(0,Tt.jsx)("div",{className:"library-menu-items__no-items__label",children:g("library.noItems")}),(0,Tt.jsx)("div",{className:"library-menu-items__no-items__hint",children:b.length>0?g("library.hint_emptyPrivateLibrary"):g("library.hint_emptyLibrary")})]}):(0,Tt.jsxs)(UE,{children:[n.length>0&&(0,Tt.jsx)(vh,{itemsRenderedPerBatch:F,items:[{id:null,elements:n}],onItemSelectToggle:C,onItemDrag:_,onClick:A,isItemSelected:I,svgCache:f}),(0,Tt.jsx)(vh,{itemsRenderedPerBatch:F,items:p,onItemSelectToggle:C,onItemDrag:_,onClick:P,isItemSelected:I,svgCache:f})]})]}),x&&(0,Tt.jsx)(lm,{style:{padding:"16px 0",width:"100%"},id:a,libraryReturnUrl:l,theme:i,children:(0,Tt.jsx)(xh,{selectedItems:c,onSelectItems:s})})]})]})}var No=v(S(),1),Ba=$e(!1),XE=({children:t})=>(0,No.jsx)("div",{className:"layer-ui__library",children:t}),HT=({onInsertLibraryItems:t,pendingElements:e,onAddToLibrary:o,setAppState:r,libraryReturnUrl:n,library:i,id:a,theme:l,selectedItems:s,onSelectItems:c})=>{let[m]=Ee(fi,Pe),d=(0,bo.useCallback)(b=>{(async(y,w)=>{ve("element","addToLibrary","ui");for(let C of qs)if(y.some(M=>M.type===C))return r({errorMessage:g(`errors.libraryElementTypeError.${C}`)});let k=[{status:"unpublished",elements:y,id:ln(),created:Date.now()},...w];o(),i.setLibrary(k).catch(()=>{r({errorMessage:g("alerts.errorAddingToLibrary")})})})(b,m.libraryItems)},[o,i,r,m.libraryItems]),f=(0,bo.useMemo)(()=>m.libraryItems,[m]);if(m.status==="loading"&&!m.isInitialized)return(0,No.jsx)(XE,{children:(0,No.jsx)("div",{className:"layer-ui__library-message",children:(0,No.jsxs)("div",{children:[(0,No.jsx)(Nt,{size:"2em"}),(0,No.jsx)("span",{children:g("labels.libraryLoadingMessage")})]})})});let p=m.libraryItems.length>0||e.length>0;return(0,No.jsxs)(XE,{children:[(0,No.jsx)(wh,{isLoading:m.status==="loading",libraryItems:f,onAddToLibrary:d,onInsertLibraryItems:t,pendingElements:e,id:a,libraryReturnUrl:n,theme:l,onSelectItems:c,selectedItems:s}),p&&(0,No.jsx)(lm,{className:"library-menu-control-buttons--at-bottom",style:{padding:"16px 12px 0 12px"},id:a,libraryReturnUrl:n,theme:l})]})},$T=(t,e)=>{let o=()=>xe(e,t,{includeBoundTextElement:!0,includeElementsInFrames:!0}),r=(0,bo.useRef)(o()),n=(0,bo.useRef)(t),i=(0,bo.useRef)(e);return(!Dt(t.selectedElementIds,n.current.selectedElementIds)||!Dt(e,i.current))&&(r.current=o(),n.current=t,i.current=e),r.current},qE=()=>{let{library:t,id:e,onInsertElements:o}=so(),r=Sn(),n=ke(),i=_e(),a=En(),[l,s]=(0,bo.useState)([]),c=(0,bo.useMemo)(()=>t,[t]),m=$T(n,a),d=(0,bo.useCallback)(p=>{o(am(p))},[o]),f=(0,bo.useCallback)(()=>{i({selectedElementIds:{},selectedGroupIds:{},activeEmbeddable:null})},[i]);return(0,No.jsx)(HT,{pendingElements:m,onInsertLibraryItems:d,onAddToLibrary:f,setAppState:i,libraryReturnUrl:r.libraryReturnUrl,library:c,id:e,theme:n.theme,selectedItems:l,onSelectItems:s})};var Mn=v(S(),1);function UT(t){if(t&&typeof t=="number")return t;switch(t){case"small":return 550;case"wide":return 1024;case"regular":default:return 800}}var Je=t=>{let[e,o]=lE(),[r]=(0,ym.useState)(document.activeElement),{id:n}=Mt(),i=Me().viewport.isMobile;(0,ym.useEffect)(()=>{if(!e)return;let c=dl(e);setTimeout(()=>{c.length>0&&t.autofocus!==!1&&(c[1]||c[0]).focus()});let m=d=>{if(d.key===T.TAB){let f=dl(e),{activeElement:p}=document,b=f.findIndex(x=>x===p);b===0&&d.shiftKey?(f[f.length-1].focus(),d.preventDefault()):b===f.length-1&&!d.shiftKey&&(f[0].focus(),d.preventDefault())}};return e.addEventListener("keydown",m),()=>e.removeEventListener("keydown",m)},[e,t.autofocus]);let a=_e(),l=Hr(Ba,Pe),s=()=>{a({openMenu:null}),l(!1),r.focus(),t.onCloseRequest()};return(0,Mn.jsx)(uE,{className:z("Dialog",t.className,{"Dialog--fullscreen":i}),labelledBy:"dialog-title",maxWidth:UT(t.size),onCloseRequest:s,closeOnClickOutside:t.closeOnClickOutside,children:(0,Mn.jsxs)(Bt,{ref:o,children:[t.title&&(0,Mn.jsx)("h2",{id:`${n}-dialog-title`,className:"Dialog__title",children:(0,Mn.jsx)("span",{className:"Dialog__titleContent",children:t.title})}),i&&(0,Mn.jsx)("button",{className:"Dialog__close",onClick:s,title:g("buttons.close"),"aria-label":g("buttons.close"),children:Mo}),(0,Mn.jsx)("div",{className:"Dialog__content",children:t.children})]})})};h();var Er=v(H(),1);h();var JE=v(S(),1),yr=({type:t="button",onSelect:e,selected:o,children:r,className:n="",...i})=>(0,JE.jsx)("button",{onClick:nn(i.onClick,a=>{e()}),type:t,className:z("excalidraw-button",n,{selected:o}),...i,children:r});var xi=v(S(),1),Em=(0,Er.forwardRef)(({onChange:t,label:e,fullWidth:o,placeholder:r,readonly:n,selectOnRender:i,onKeyDown:a,isRedacted:l=!1,...s},c)=>{let m=(0,Er.useRef)(null);(0,Er.useImperativeHandle)(c,()=>m.current),(0,Er.useLayoutEffect)(()=>{i&&m.current?.select()},[i]);let[d,f]=(0,Er.useState)(!1);return(0,xi.jsxs)("div",{className:z("ExcTextField",{"ExcTextField--fullWidth":o}),onClick:()=>{m.current?.focus()},children:[(0,xi.jsx)("div",{className:"ExcTextField__label",children:e}),(0,xi.jsxs)("div",{className:z("ExcTextField__input",{"ExcTextField__input--readonly":n}),children:[(0,xi.jsx)("input",{className:z({"is-redacted":"value"in s&&s.value&&l&&!d}),readOnly:n,value:"value"in s?s.value:void 0,defaultValue:"defaultValue"in s?s.defaultValue:void 0,placeholder:r,ref:m,onChange:p=>t?.(p.target.value),onKeyDown:a}),l&&(0,xi.jsx)(yr,{onSelect:()=>f(!d),style:{border:0,userSelect:"none"},children:d?t2:ca})]})]})});h();var WT={toggleTheme:[N("Shift+Alt+D")],saveScene:[N("CtrlOrCmd+S")],loadScene:[N("CtrlOrCmd+O")],clearCanvas:[N("CtrlOrCmd+Delete")],imageExport:[N("CtrlOrCmd+Shift+E")],commandPalette:[N("CtrlOrCmd+/"),N("CtrlOrCmd+Shift+P")],cut:[N("CtrlOrCmd+X")],copy:[N("CtrlOrCmd+C")],paste:[N("CtrlOrCmd+V")],copyStyles:[N("CtrlOrCmd+Alt+C")],pasteStyles:[N("CtrlOrCmd+Alt+V")],selectAll:[N("CtrlOrCmd+A")],deleteSelectedElements:[N("Delete")],duplicateSelection:[N("CtrlOrCmd+D"),N(`Alt+${g("helpDialog.drag")}`)],sendBackward:[N("CtrlOrCmd+[")],bringForward:[N("CtrlOrCmd+]")],sendToBack:[Wo?N("CtrlOrCmd+Alt+["):N("CtrlOrCmd+Shift+[")],bringToFront:[Wo?N("CtrlOrCmd+Alt+]"):N("CtrlOrCmd+Shift+]")],copyAsPng:[N("Shift+Alt+C")],copyAsSvg:[],group:[N("CtrlOrCmd+G")],ungroup:[N("CtrlOrCmd+Shift+G")],gridMode:[N("CtrlOrCmd+'")],zenMode:[N("Alt+Z")],objectsSnapMode:[N("Alt+S")],stats:[N("Alt+/")],addToLibrary:[],flipHorizontal:[N("Shift+H")],flipVertical:[N("Shift+V")],viewMode:[N("Alt+R")],hyperlink:[N("CtrlOrCmd+K")],toggleElementLock:[N("CtrlOrCmd+Shift+L")],resetZoom:[N("CtrlOrCmd+0")],zoomOut:[N("CtrlOrCmd+-")],zoomIn:[N("CtrlOrCmd++")],zoomToFitSelection:[N("Shift+3")],zoomToFit:[N("Shift+1")],zoomToFitSelectionInViewport:[N("Shift+2")],toggleEraserTool:[N("E")],toggleHandTool:[N("H")],setFrameAsActiveTool:[N("F")],saveFileToDisk:[N("CtrlOrCmd+S")],saveToActiveFile:[N("CtrlOrCmd+S")],toggleShortcuts:[N("?")]},yt=(t,e=0)=>{let o=WT[t];return o&&o.length>0?o[e]||o[0]:""};var Lw=v(tw(),1);h();var GT="\\u0300-\\u036f",VT="\\ufe20-\\ufe2f",KT="\\u20d0-\\u20ff",YT=GT+VT+KT,ZT=`[${YT}]`,jT=RegExp(ZT,"g"),XT=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qT={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"E",\u00E6:"e",\u00DE:"T",\u00FE:"t",\u00DF:"s",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"I",\u0133:"i",\u0152:"E",\u0153:"e",\u0149:"n",\u017F:"s"},Ch=t=>t.replace(XT,e=>qT[e]||e).replace(jT,"");h();var ow=v(S(),1),_n=({icon:t})=>(0,ow.jsx)("span",{style:{width:"1em",margin:"0 0.5ex 0 0.5ex",display:"inline-block",lineHeight:0,verticalAlign:"middle"},children:t});h();var ds=[{icon:W0,value:"selection",key:T.V,numericKey:T[1],fillable:!0},{icon:G0,value:"rectangle",key:T.R,numericKey:T[2],fillable:!0},{icon:V0,value:"diamond",key:T.D,numericKey:T[3],fillable:!0},{icon:K0,value:"ellipse",key:T.O,numericKey:T[4],fillable:!0},{icon:Y0,value:"arrow",key:T.A,numericKey:T[5],fillable:!0},{icon:Z0,value:"line",key:T.L,numericKey:T[6],fillable:!0},{icon:na,value:"freedraw",key:[T.P,T.X],numericKey:T[7],fillable:!1},{icon:X0,value:"text",key:T.T,numericKey:T[8],fillable:!1},{icon:q0,value:"image",key:null,numericKey:T[9],fillable:!1},{icon:J0,value:"eraser",key:T.E,numericKey:T[0],fillable:!1}],rw=t=>ds.find((o,r)=>o.numericKey!=null&&t===o.numericKey.toString()||o.key&&(typeof o.key=="string"?o.key===t:o.key.includes(t)))?.value||null;h();var Cw=v(H(),1);h();var Cm=v(H(),1);h();var ms=v(H());h();h();var nw=t=>{let e,o=new Set,r=(s,c)=>{let m=typeof s=="function"?s(e):s;if(!Object.is(m,e)){let d=e;e=c??(typeof m!="object"||m===null)?m:Object.assign({},e,m),o.forEach(f=>f(e,d))}},n=()=>e,l={setState:r,getState:n,subscribe:s=>(o.add(s),()=>o.delete(s)),destroy:()=>{(E?E.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}};return e=t(r,n,l),l},iw=t=>t?nw(t):nw;var gw=v(H(),1),bw=v(pw(),1),{useDebugValue:hS}=gw.default,{useSyncExternalStoreWithSelector:gS}=bw.default,fw=!1;function bS(t,e=t.getState,o){(E?E.MODE:void 0)!=="production"&&o&&!fw&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),fw=!0);let r=gS(t.subscribe,t.getState,t.getServerState||t.getState,e,o);return hS(r),r}var hw=t=>{(E?E.MODE:void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let e=typeof t=="function"?iw(t):t,o=(r,n)=>bS(e,r,n);return Object.assign(o,e),o},xw=t=>t?hw(t):hw;var vw,yw,Ew=typeof window<"u"&&((vw=window.document)!=null&&vw.createElement||((yw=window.navigator)==null?void 0:yw.product)==="ReactNative")?ms.default.useLayoutEffect:ms.default.useEffect;function er(){let t=xw(e=>({current:new Array,version:0,set:e}));return{In:({children:e})=>{let o=t(n=>n.set),r=t(n=>n.version);return Ew(()=>{o(n=>({version:n.version+1}))},[]),Ew(()=>(o(({current:n})=>({current:[...n,e]})),()=>o(({current:n})=>({current:n.filter(i=>i!==e)}))),[e,r]),null},Out:()=>{let e=t(o=>o.current);return ms.default.createElement(ms.default.Fragment,null,e)}}}var Sh=Cm.default.createContext(null),We=()=>Cm.default.useContext(Sh),ww=()=>Cm.default.useMemo(()=>({MainMenuTunnel:er(),WelcomeScreenMenuHintTunnel:er(),WelcomeScreenToolbarHintTunnel:er(),WelcomeScreenHelpHintTunnel:er(),WelcomeScreenCenterTunnel:er(),FooterCenterTunnel:er(),DefaultSidebarTriggerTunnel:er(),DefaultSidebarTabTriggersTunnel:er(),OverwriteConfirmDialogTunnel:er(),TTDDialogTriggerTunnel:er(),jotaiScope:Symbol()}),[]);var ie=v(S(),1),kh=(t,e)=>{let o=e[0]?.type||null;for(let r of e)if(r.type!==o){o=null;break}return bl(t.activeTool.type)&&t.activeTool.type!=="image"&&o!=="image"&&o!=="frame"&&o!=="magicframe"||e.some(r=>bl(r.type))},Ih=(t,e)=>cn(t.activeTool.type)||e.some(o=>cn(o.type)),Tm=({appState:t,elementsMap:e,renderAction:o})=>{let r=Qi(e,t),n=!1;r.length===2&&(cr(r[0])||cr(r[1]))&&(n=!0);let i=!!t.editingElement,a=Me(),l=document.documentElement.getAttribute("dir")==="rtl",s=cn(t.activeTool.type)&&!Gn(t.currentItemBackgroundColor)||r.some(m=>cn(m.type)&&!Gn(m.backgroundColor)),c=r.length===1||n;return(0,ie.jsxs)("div",{className:"panelColumn",children:[(0,ie.jsx)("div",{children:kh(t,r)&&o("changeStrokeColor")}),Ih(t,r)&&(0,ie.jsx)("div",{children:o("changeBackgroundColor")}),s&&o("changeFillStyle"),(Bu(t.activeTool.type)||r.some(m=>Bu(m.type)))&&o("changeStrokeWidth"),(t.activeTool.type==="freedraw"||r.some(m=>m.type==="freedraw"))&&o("changeStrokeShape"),(zu(t.activeTool.type)||r.some(m=>zu(m.type)))&&(0,ie.jsxs)(ie.Fragment,{children:[o("changeStrokeStyle"),o("changeSloppiness")]}),(Hu(t.activeTool.type)||r.some(m=>Hu(m.type)))&&(0,ie.jsx)(ie.Fragment,{children:o("changeRoundness")}),(t.activeTool.type==="text"||r.some(le))&&(0,ie.jsxs)(ie.Fragment,{children:[o("changeFontSize"),o("changeFontFamily"),(t.activeTool.type==="text"||cb(r,e))&&o("changeTextAlign")]}),sb(r,e)&&o("changeVerticalAlign"),(Oi(t.activeTool.type)||r.some(m=>Oi(m.type)))&&(0,ie.jsx)(ie.Fragment,{children:o("changeArrowhead")}),o("changeOpacity"),(0,ie.jsxs)("fieldset",{children:[(0,ie.jsx)("legend",{children:g("labels.layers")}),(0,ie.jsxs)("div",{className:"buttonList",children:[o("sendToBack"),o("sendBackward"),o("bringToFront"),o("bringForward")]})]}),r.length>1&&!n&&(0,ie.jsxs)("fieldset",{children:[(0,ie.jsx)("legend",{children:g("labels.align")}),(0,ie.jsxs)("div",{className:"buttonList",children:[l?(0,ie.jsxs)(ie.Fragment,{children:[o("alignRight"),o("alignHorizontallyCentered"),o("alignLeft")]}):(0,ie.jsxs)(ie.Fragment,{children:[o("alignLeft"),o("alignHorizontallyCentered"),o("alignRight")]}),r.length>2&&o("distributeHorizontally"),(0,ie.jsx)("div",{style:{flexBasis:"100%",height:0}}),(0,ie.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:".5rem",marginTop:"-0.5rem"},children:[o("alignTop"),o("alignVerticallyCentered"),o("alignBottom"),r.length>2&&o("distributeVertically")]})]})]}),!i&&r.length>0&&(0,ie.jsxs)("fieldset",{children:[(0,ie.jsx)("legend",{children:g("labels.actions")}),(0,ie.jsxs)("div",{className:"buttonList",children:[!a.editor.isMobile&&o("duplicateSelection"),!a.editor.isMobile&&o("deleteSelectedElements"),o("group"),o("ungroup"),c&&o("hyperlink")]})]})]})},Sm=({activeTool:t,appState:e,app:o,UIOptions:r})=>{let[n,i]=(0,Cw.useState)(!1),a=t.type==="frame",l=t.type==="laser",s=t.type==="embeddable",{TTDDialogTriggerTunnel:c}=We();return(0,ie.jsxs)(ie.Fragment,{children:[ds.map(({value:m,icon:d,key:f,numericKey:p,fillable:b},x)=>{if(r.tools?.[m]===!1)return null;let y=g(`toolBar.${m}`),w=f&&rn(typeof f=="string"?f:f[0]),k=w?`${w} ${g("helpDialog.or")} ${p}`:`${p}`;return(0,ie.jsx)(se,{className:z("Shape",{fillable:b}),type:"radio",icon:d,checked:t.type===m,name:"editor-current-shape",title:`${rn(y)} \u2014 ${k}`,keyBindingLabel:p||w,"aria-label":rn(y),"aria-keyshortcuts":k,"data-testid":`toolbar-${m}`,onPointerDown:({pointerType:C})=>{!e.penDetected&&C==="pen"&&o.togglePenMode(!0)},onChange:({pointerType:C})=>{e.activeTool.type!==m&&ve("toolbar",m,"ui"),m==="image"?o.setActiveTool({type:m,insertOnCanvasDirectly:C!=="mouse"}):o.setActiveTool({type:m})}},m)}),(0,ie.jsx)("div",{className:"App-toolbar__divider"}),(0,ie.jsxs)(Le,{open:n,children:[(0,ie.jsxs)(Le.Trigger,{className:z("App-toolbar__extra-tools-trigger",{"App-toolbar__extra-tools-trigger--selected":a||s||l&&!o.props.isCollaborating}),onToggle:()=>i(!n),title:g("toolBar.extraTools"),children:[Qx,o.props.aiEnabled!==!1&&(0,ie.jsx)("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",borderRadius:6,fontSize:8,fontFamily:"Cascadia, monospace",position:"absolute",background:"pink",color:"black",bottom:3,right:4},children:"AI"})]}),(0,ie.jsxs)(Le.Content,{onClickOutside:()=>i(!1),onSelect:()=>i(!1),className:"App-toolbar__extra-tools-dropdown",children:[(0,ie.jsx)(Le.Item,{onSelect:()=>o.setActiveTool({type:"frame"}),icon:sd,shortcut:T.F.toLocaleUpperCase(),"data-testid":"toolbar-frame",selected:a,children:g("toolBar.frame")}),(0,ie.jsx)(Le.Item,{onSelect:()=>o.setActiveTool({type:"embeddable"}),icon:ex,"data-testid":"toolbar-embeddable",selected:s,children:g("toolBar.embeddable")}),(0,ie.jsx)(Le.Item,{onSelect:()=>o.setActiveTool({type:"laser"}),icon:dd,"data-testid":"toolbar-laser",selected:l,shortcut:T.K.toLocaleUpperCase(),children:g("toolBar.laser")}),(0,ie.jsx)("div",{style:{margin:"6px 0",fontSize:14,fontWeight:600},children:"Generate"}),o.props.aiEnabled!==!1&&(0,ie.jsx)(c.Out,{}),(0,ie.jsx)(Le.Item,{onSelect:()=>o.setOpenDialog({name:"ttd",tab:"mermaid"}),icon:cd,"data-testid":"toolbar-embeddable",children:g("toolBar.mermaidToExcalidraw")}),o.props.aiEnabled!==!1&&(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)(Le.Item,{onSelect:()=>o.onMagicframeToolSelect(),icon:sa,"data-testid":"toolbar-magicframe",children:[g("toolBar.magicframe"),(0,ie.jsx)(Le.Item.Badge,{children:"AI"})]}),(0,ie.jsx)(Le.Item,{onSelect:()=>{ve("ai","open-settings","d2c"),o.setOpenDialog({name:"settings",source:"settings",tab:"diagram-to-code"})},icon:Fl,"data-testid":"toolbar-magicSettings",children:g("toolBar.magicSettings")})]})]})]})]})},Tw=({renderAction:t,zoom:e})=>(0,ie.jsx)(At.Col,{gap:1,className:"zoom-actions",children:(0,ie.jsxs)(At.Row,{align:"center",children:[t("zoomOut"),t("resetZoom"),t("zoomIn")]})}),Sw=({renderAction:t,className:e})=>(0,ie.jsxs)("div",{className:`undo-redo-buttons ${e}`,children:[(0,ie.jsx)("div",{className:"undo-button-container",children:(0,ie.jsx)(ho,{label:g("buttons.undo"),children:t("undo")})}),(0,ie.jsx)("div",{className:"redo-button-container",children:(0,ie.jsxs)(ho,{label:g("buttons.redo"),children:[" ",t("redo")]})})]}),kw=({actionManager:t,showExitZenModeBtn:e})=>(0,ie.jsx)("button",{className:z("disable-zen-mode",{"disable-zen-mode--visible":e}),onClick:()=>t.executeAction(Pa),children:g("buttons.exitZenMode")}),Iw=({renderAction:t,className:e})=>(0,ie.jsx)("div",{className:`finalize-button ${e}`,children:t("finalize",{size:"small"})});h();var Mw=v(H(),1),Mh=t=>{let e=(0,Mw.useRef)({userFn:t});return e.current.userFn=t,e.current.stableFn||(e.current.stableFn=(...o)=>e.current.userFn(...o)),e.current.stableFn};h();var km=v(S(),1),vi=$e(null),_w=()=>{let[t,e]=Ee(vi,Pe),o=St();return t&&t==="clearCanvas"?(0,km.jsx)(cm,{onConfirm:()=>{o.executeAction(Kr),e(null)},onCancel:()=>e(null),title:g("clearCanvasDialog.title"),children:(0,km.jsxs)("p",{className:"clear-canvas__content",children:[" ",g("alerts.clearReset")]})}):null};var _h={};$g(_h,{toggleTheme:()=>xS});h();var xS={...ii,category:"App",label:"Toggle theme",perform:({actionManager:t})=>{t.executeAction(ii,"commandPalette")}};var Ue=v(S(),1),vS=$e(null),st={app:"App",export:"Export",tools:"Tools",editor:"Editor",elements:"Elements",links:"Links"},yS=t=>{switch(t){case st.app:return 1;case st.export:return 2;case st.editor:return 3;case st.tools:return 4;case st.elements:return 5;case st.links:return 6;default:return 10}},Im=({shortcut:t,className:e,children:o})=>{let r=t.replace("++","+$").split("+");return(0,Ue.jsxs)("div",{className:z("shortcut",e),children:[r.map((n,i)=>(0,Ue.jsx)("div",{className:"shortcut-wrapper",children:(0,Ue.jsx)("div",{className:"shortcut-key",children:n==="$"?"+":n})},n)),(0,Ue.jsx)("div",{className:"shortcut-desc",children:o})]})},Pw=t=>!t.altKey&&t[T.CTRL_OR_CMD]&&(t.shiftKey&&t.key.toLowerCase()===T.P||t.key===T.SLASH),xK=Object.assign(t=>{let e=ke(),o=_e();return(0,Oo.useEffect)(()=>{let r=n=>{Pw(n)&&(n.preventDefault(),n.stopPropagation(),o(i=>({openDialog:i.openDialog?.name==="commandPalette"?null:{name:"commandPalette"}})))};return window.addEventListener("keydown",r,{capture:!0}),()=>window.removeEventListener("keydown",r,{capture:!0})},[o]),e.openDialog?.name!=="commandPalette"?null:(0,Ue.jsx)(ES,{...t})},{defaultItems:_h});function ES({customCommandPaletteItems:t}){let e=so(),o=ke(),r=_e(),n=Sn(),i=St(),[a,l]=Ee(vS),[s,c]=(0,Oo.useState)(null),m=(0,Oo.useRef)(null);(0,Oo.useEffect)(()=>{if(!o||!e.scene||!i)return;let _=F=>{let D="";return F.label&&(typeof F.label=="function"?D=g(F.label(e.scene.getNonDeletedElements(),o,e)):D=g(F.label)),D},I=F=>typeof F.icon=="function"?F.icon(o,e.scene.getNonDeletedElements()):F.icon,A=[],P=(F,D,W)=>{let O={label:_(F),icon:I(F),category:D,shortcut:yt(F.name),keywords:F.keywords,predicate:F.predicate,viewMode:F.viewMode,perform:()=>{i.executeAction(F,"commandPalette")}};return W?W(O,F):O};if(o&&e.scene&&i){let F=[i.actions.group,i.actions.ungroup,i.actions.cut,i.actions.copy,i.actions.deleteSelectedElements,i.actions.copyStyles,i.actions.pasteStyles,i.actions.sendBackward,i.actions.sendToBack,i.actions.bringForward,i.actions.bringToFront,i.actions.alignTop,i.actions.alignBottom,i.actions.alignLeft,i.actions.alignRight,i.actions.alignVerticallyCentered,i.actions.alignHorizontallyCentered,i.actions.duplicateSelection,i.actions.flipHorizontal,i.actions.flipVertical,i.actions.zoomToFitSelection,i.actions.zoomToFitSelectionInViewport,i.actions.increaseFontSize,i.actions.decreaseFontSize,i.actions.toggleLinearEditor,rs].map(K=>P(K,st.elements,(pe,me)=>({...pe,predicate:me.predicate?me.predicate:(ce,oe,R,B)=>xe(ce,oe).length>0}))),D=[i.actions.toggleHandTool,i.actions.setFrameAsActiveTool].map(K=>P(K,st.tools)),W=[i.actions.undo,i.actions.redo,i.actions.zoomIn,i.actions.zoomOut,i.actions.resetZoom,i.actions.zoomToFit,i.actions.zenMode,i.actions.viewMode,i.actions.objectsSnapMode,i.actions.toggleShortcuts,i.actions.selectAll,i.actions.toggleElementLock,i.actions.unlockAllElements,i.actions.stats].map(K=>P(K,st.editor)),O=[i.actions.saveToActiveFile,i.actions.saveFileToDisk,i.actions.copyAsPng,i.actions.copyAsSvg].map(K=>P(K,st.export));A=[...F,...W,{label:_(Kr),icon:I(Kr),shortcut:yt(Kr.name),category:st.editor,keywords:["delete","destroy"],viewMode:!1,perform:()=>{Ut.set(vi,"clearCanvas")}},{label:g("buttons.exportImage"),category:st.export,icon:nd,shortcut:yt("imageExport"),keywords:["export","image","png","jpeg","svg","clipboard","picture"],perform:()=>{r({openDialog:{name:"imageExport"}})}},...O];let U=[{label:g("toolBar.library"),category:st.app,icon:Jc,viewMode:!1,perform:()=>{o.openSidebar?r({openSidebar:null}):r({openSidebar:{name:Vo.name,tab:Vo.defaultTab}})}},{label:g("labels.changeStroke"),keywords:["color","outline"],category:st.elements,icon:rd,viewMode:!1,predicate:(K,pe)=>{let me=xe(K,pe);return me.length>0&&kh(pe,me)},perform:()=>{r(K=>({openMenu:K.openMenu==="shape"?null:"shape",openPopup:"elementStroke"}))}},{label:g("labels.changeBackground"),keywords:["color","fill"],icon:rd,category:st.elements,viewMode:!1,predicate:(K,pe)=>{let me=xe(K,pe);return me.length>0&&Ih(pe,me)},perform:()=>{r(K=>({openMenu:K.openMenu==="shape"?null:"shape",openPopup:"elementBackground"}))}},{label:g("labels.canvasBackground"),keywords:["color"],icon:rd,category:st.editor,viewMode:!1,perform:()=>{r(K=>({openMenu:K.openMenu==="canvas"?null:"canvas",openPopup:"canvasBackground"}))}},...ds.reduce((K,pe)=>{let{value:me,icon:ce,key:oe,numericKey:R}=pe;if(n.UIOptions.tools?.[me]===!1)return K;let V=oe&&rn(typeof oe=="string"?oe:oe[0])||R,Z={label:g(`toolBar.${me}`),category:st.tools,shortcut:V,icon:ce,keywords:["toolbar"],viewMode:!1,perform:({event:Y})=>{me==="image"?e.setActiveTool({type:me,insertOnCanvasDirectly:Y.type==="keydown"}):e.setActiveTool({type:me})}};return K.push(Z),K},[]),...D,{label:g("toolBar.lock"),category:st.tools,icon:o.activeTool.locked?ra:qn,shortcut:T.Q.toLocaleUpperCase(),viewMode:!1,perform:()=>{e.toggleLock()}},{label:`${g("labels.textToDiagram")}...`,category:st.tools,icon:r2,viewMode:!1,predicate:n.aiEnabled,perform:()=>{r(K=>({...K,openDialog:{name:"ttd",tab:"text-to-diagram"}}))}},{label:`${g("toolBar.mermaidToExcalidraw")}...`,category:st.tools,icon:cd,viewMode:!1,predicate:n.aiEnabled,perform:()=>{r(K=>({...K,openDialog:{name:"ttd",tab:"mermaid"}}))}}],ee=[...A,...U,...t||[]].map(K=>({...K,icon:K.icon||ud,order:K.order??yS(K.category),haystack:`${Ch(K.label)} ${K.keywords?.join(" ")||""}`}));c(ee),l(ee.find(K=>K.label===a?.label)??null)}},[e,n,o,i,c,a?.label,l,r,t]);let[d,f]=(0,Oo.useState)(""),[p,b]=(0,Oo.useState)(null),[x,y]=(0,Oo.useState)({}),w=_=>{r({openDialog:null},_),f("")},k=(_,I)=>{o.openDialog?.name==="commandPalette"&&(I.stopPropagation(),I.preventDefault(),document.body.classList.add("excalidraw-animations-disabled"),w(()=>{_.perform({actionManager:i,event:I}),l(_),requestAnimationFrame(()=>{document.body.classList.remove("excalidraw-animations-disabled")})}))},C=Mh(_=>_.viewMode===!1&&o.viewModeEnabled?!1:typeof _.predicate=="function"?_.predicate(e.scene.getNonDeletedElements(),o,n,e):_.predicate===void 0||_.predicate),M=Mh(_=>{let I=wo(_.target)||Pw(_)||_.key===T.ESCAPE;if(I&&_.key!==T.ARROW_UP&&_.key!==T.ARROW_DOWN&&_.key!==T.ENTER)return;let A=Object.values(x).flat(),P=a&&!d&&C(a);if(_.key===T.ARROW_UP){_.preventDefault();let F=A.findIndex(O=>O.label===p?.label);if(P){if(F===0){b(a);return}if(p===a){let O=A[A.length-1];O&&b(O);return}}let D;F===-1?D=A.length-1:D=F===0?A.length-1:(F-1)%A.length;let W=A[D];W&&b(W);return}if(_.key===T.ARROW_DOWN){_.preventDefault();let F=A.findIndex(O=>O.label===p?.label);if(P){if(!p||F===A.length-1){b(a);return}if(p===a){let O=A[0];O&&b(O);return}}let D=(F+1)%A.length,W=A[D];W&&b(W);return}if(_.key===T.ENTER&&p&&setTimeout(()=>{k(p,_)}),!I){if(_.stopPropagation(),/^[a-zA-Z0-9]$/.test(_.key)){m?.current?.focus();return}_.preventDefault()}});return(0,Oo.useEffect)(()=>(window.addEventListener("keydown",M,{capture:!0}),()=>window.removeEventListener("keydown",M,{capture:!0})),[M]),(0,Oo.useEffect)(()=>{if(!s)return;let _=F=>{let D={};for(let W of F)D[W.category]?D[W.category].push(W):D[W.category]=[W];return D},I=s.filter(C).sort((F,D)=>F.order-D.order),A=!d&&a&&C(a);if(!d){y(_(A?I.filter(F=>F.label!==a?.label):I)),b(A?a:I[0]||null);return}let P=Ch(d.replace(/[<>-_| ]/g,""));I=Lw.default.filter(P,I,{extract:F=>F.haystack}).sort((F,D)=>D.score-F.score).map(F=>F.original),y(_(I)),b(I[0]??null)},[d,s,C,a]),(0,Ue.jsxs)(Je,{onCloseRequest:()=>w(),closeOnClickOutside:!0,title:!1,size:720,autofocus:!0,className:"command-palette-dialog",children:[(0,Ue.jsx)(Em,{value:d,placeholder:g("commandPalette.search.placeholder"),onChange:_=>{f(_)},selectOnRender:!0,ref:m}),!e.device.viewport.isMobile&&(0,Ue.jsxs)("div",{className:"shortcuts-wrapper",children:[(0,Ue.jsx)(Im,{shortcut:"\u2191\u2193",children:g("commandPalette.shortcuts.select")}),(0,Ue.jsx)(Im,{shortcut:"\u21B5",children:g("commandPalette.shortcuts.confirm")}),(0,Ue.jsx)(Im,{shortcut:N("Esc"),children:g("commandPalette.shortcuts.close")})]}),(0,Ue.jsxs)("div",{className:"commands",children:[a&&!d&&(0,Ue.jsxs)("div",{className:"command-category",children:[(0,Ue.jsxs)("div",{className:"command-category-title",children:[g("commandPalette.recents"),(0,Ue.jsx)("div",{className:"icon",style:{marginLeft:"6px"},children:n2})]}),(0,Ue.jsx)(Aw,{command:a,isSelected:a.label===p?.label,onClick:_=>k(a,_),disabled:!C(a),onMouseMove:()=>b(a),showShortcut:!e.device.viewport.isMobile,appState:o})]}),Object.keys(x).length>0?Object.keys(x).map((_,I)=>(0,Ue.jsxs)("div",{className:"command-category",children:[(0,Ue.jsx)("div",{className:"command-category-title",children:_}),x[_].map(A=>(0,Ue.jsx)(Aw,{command:A,isSelected:A.label===p?.label,onClick:P=>k(A,P),onMouseMove:()=>b(A),showShortcut:!e.device.viewport.isMobile,appState:o},A.label))]},_)):s?(0,Ue.jsxs)("div",{className:"no-match",children:[(0,Ue.jsx)("div",{className:"icon",children:md})," ",g("commandPalette.search.noMatch")]}):null]})]})}var Aw=({command:t,isSelected:e,disabled:o,onMouseMove:r,onClick:n,showShortcut:i,appState:a})=>{let l=()=>{};return(0,Ue.jsxs)("div",{className:z("command-item",{"item-selected":e,"item-disabled":o}),ref:s=>{e&&!o&&s?.scrollIntoView?.({block:"nearest"})},onClick:o?l:n,onMouseMove:o?l:r,title:o?g("commandPalette.itemNotAvailable"):"",children:[(0,Ue.jsxs)("div",{className:"name",children:[t.icon&&(0,Ue.jsx)(_n,{icon:typeof t.icon=="function"?t.icon(a):t.icon}),t.label]}),i&&t.shortcut&&(0,Ue.jsx)(Im,{shortcut:t.shortcut})]})};var Ah=$({name:"toggleLinearEditor",category:st.elements,label:(t,e,o)=>{let r=o.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!0})[0];return e.editingLinearElement?.elementId===r?.id?"labels.lineEditor.exit":"labels.lineEditor.edit"},trackEvent:{category:"element"},predicate:(t,e,o,r)=>{let n=r.scene.getSelectedElements(e);return!!(n.length===1&&Re(n[0]))},perform(t,e,o,r){let n=r.scene.getSelectedElements({selectedElementIds:e.selectedElementIds,includeBoundTextElement:!0})[0],i=e.editingLinearElement?.elementId===n.id?null:new he(n);return{appState:{...e,editingLinearElement:i},commitToHistory:!1}}});h();var Lh=v(S(),1),Dw=(t,e,o)=>{if(!e.multiElement&&!e.resizingElement&&!e.editingElement&&!e.draggingElement){let n=o();if(n===null)return{commitToHistory:!1};let i=Ie(t),a=n.elements,l=Ie(a),s=t.filter(m=>!l.has(m.id)),c=a.map(m=>ue(i.get(m.id)||m,m)).concat(s.map(m=>ue(m,{isDeleted:!0})));return zi(c,s),{elements:c,appState:{...e,...n.appState},commitToHistory:!1,syncHistory:!0}}return{commitToHistory:!1}},Rw=t=>({name:"undo",label:"buttons.undo",icon:Tp,trackEvent:{category:"history"},viewMode:!1,perform:(e,o)=>Dw(e,o,()=>t.undoOnce()),keyTest:e=>e[T.CTRL_OR_CMD]&&e.key.toLowerCase()===T.Z&&!e.shiftKey,PanelComponent:({updateData:e,data:o})=>(0,Lh.jsx)(se,{type:"button",icon:Tp,"aria-label":g("buttons.undo"),onClick:e,size:o?.size||"medium"}),commitToHistory:()=>!1}),Nw=t=>({name:"redo",label:"buttons.redo",icon:Sp,trackEvent:{category:"history"},viewMode:!1,perform:(e,o)=>Dw(e,o,()=>t.redoOnce()),keyTest:e=>e[T.CTRL_OR_CMD]&&e.shiftKey&&e.key.toLowerCase()===T.Z||$s&&e.ctrlKey&&!e.shiftKey&&e.key===T.Y,PanelComponent:({updateData:e,data:o})=>(0,Lh.jsx)(se,{type:"button",icon:Sp,"aria-label":g("buttons.redo"),onClick:e,size:o?.size||"medium"}),commitToHistory:()=>!1});h();var Ow=v(S(),1),Ph=(t,e,o,r,n,i)=>{if(t.trackEvent)try{typeof t.trackEvent=="object"&&(!t.trackEvent.predicate||t.trackEvent.predicate(o,r,i))&&ve(t.trackEvent.category,t.trackEvent.action||t.name,`${e} (${n.device.editor.isMobile?"mobile":"desktop"})`)}catch(a){console.error("error while logging action:",a)}},Mm=class{actions={};updater;getAppState;getElementsIncludingDeleted;app;constructor(e,o,r,n){this.updater=i=>{if(Li(i))i.then(a=>e(a));else return e(i)},this.getAppState=o,this.getElementsIncludingDeleted=r,this.app=n}registerAction(e){this.actions[e.name]=e}registerAll(e){e.forEach(o=>this.registerAction(o))}handleKeyDown(e){let o=this.app.props.UIOptions.canvasActions,r=Object.values(this.actions).sort((s,c)=>(c.keyPriority||0)-(s.keyPriority||0)).filter(s=>(s.name in o?o[s.name]:!0)&&s.keyTest&&s.keyTest(e,this.getAppState(),this.getElementsIncludingDeleted(),this.app));if(r.length!==1)return r.length>1&&console.warn("Canceling as multiple actions match this shortcut",r),!1;let n=r[0];if(this.getAppState().viewModeEnabled&&n.viewMode!==!0)return!1;let i=this.getElementsIncludingDeleted(),a=this.getAppState(),l=null;return Ph(n,"keyboard",a,i,this.app,null),e.preventDefault(),e.stopPropagation(),this.updater(r[0].perform(i,a,l,this.app)),!0}executeAction(e,o="api",r=null){let n=this.getElementsIncludingDeleted(),i=this.getAppState();Ph(e,o,i,n,this.app,r),this.updater(e.perform(n,i,r,this.app))}renderAction=(e,o)=>{let r=this.app.props.UIOptions.canvasActions;if(this.actions[e]&&"PanelComponent"in this.actions[e]&&(!(e in r)||r[e])){let n=this.actions[e],i=n.PanelComponent;i.displayName="PanelComponent";let a=this.getElementsIncludingDeleted(),l=this.getAppState(),s=c=>{Ph(n,"ui",l,a,this.app,c),this.updater(n.perform(this.getElementsIncludingDeleted(),this.getAppState(),c,this.app))};return(0,Ow.jsx)(i,{elements:this.getElementsIncludingDeleted(),appState:this.getAppState(),updateData:s,appProps:this.app.props,app:this.app,data:o})}return null};isActionEnabled=e=>{let o=this.getElementsIncludingDeleted(),r=this.getAppState();return!e.predicate||e.predicate(o,r,this.app.props,this.app)}};h();var Dh=t=>{let e=Array.from(t.values());return{x:Fw(e,o=>o.x)/e.length,y:Fw(e,o=>o.y)/e.length}},Rh=([t,e])=>Math.hypot(t.x-e.x,t.y-e.y),Fw=(t,e)=>t.reduce((o,r)=>o+e(r),0);h();var wS=t=>({selectedElementIds:t.selectedElementIds,selectedGroupIds:t.selectedGroupIds,viewBackgroundColor:t.viewBackgroundColor,editingLinearElement:t.editingLinearElement,editingGroupId:t.editingGroupId,name:t.name}),Nh=class{elementCache=new Map;recording=!0;stateHistory=[];redoStack=[];lastEntry=null;hydrateHistoryEntry({appState:e,elements:o}){return{appState:JSON.parse(e),elements:o.map(r=>{let n=this.elementCache.get(r.id)?.get(r.versionNonce);if(!n)throw new Error(`Element not found: ${r.id}:${r.versionNonce}`);return n})}}dehydrateHistoryEntry({appState:e,elements:o}){return{appState:JSON.stringify(e),elements:o.map(r=>{this.elementCache.has(r.id)||this.elementCache.set(r.id,new Map);let n=this.elementCache.get(r.id);return n.has(r.versionNonce)||n.set(r.versionNonce,Wi(r)),{id:r.id,versionNonce:r.versionNonce}})}}getSnapshotForTest(){return{recording:this.recording,stateHistory:this.stateHistory.map(e=>this.hydrateHistoryEntry(e)),redoStack:this.redoStack.map(e=>this.hydrateHistoryEntry(e))}}clear(){this.stateHistory.length=0,this.redoStack.length=0,this.lastEntry=null,this.elementCache.clear()}generateEntry=(e,o)=>this.dehydrateHistoryEntry({appState:wS(e),elements:o.reduce((r,n)=>{if(Re(n)&&e.multiElement&&e.multiElement.id===n.id){if(e.multiElement&&e.multiElement.id===n.id&&n.points.length<2)return r;r.push({...n,points:n.lastCommittedPoint!==n.points[n.points.length-1]?n.points.slice(0,-1):n.points})}else r.push(n);return r},[])});shouldCreateEntry(e){let{lastEntry:o}=this;if(!o||e.elements.length!==o.elements.length)return!0;for(let n=e.elements.length-1;n>-1;n--){let i=e.elements[n],a=o.elements[n];if(!i||!a||i.id!==a.id||i.versionNonce!==a.versionNonce)return!0}let r;for(r in e.appState)if(!(r==="editingLinearElement"&&e.appState[r]?.elementId===o.appState[r]?.elementId)&&!(r==="selectedElementIds"||r==="selectedGroupIds")&&e.appState[r]!==o.appState[r])return!0;return!1}pushEntry(e,o){let r=this.generateEntry(e,o),n=this.hydrateHistoryEntry(r);if(n){if(!this.shouldCreateEntry(n))return;this.stateHistory.push(r),this.lastEntry=n,this.clearRedoStack()}}clearRedoStack(){this.redoStack.splice(0,this.redoStack.length)}redoOnce(){if(this.redoStack.length===0)return null;let e=this.redoStack.pop();return e!==void 0?(this.stateHistory.push(e),this.hydrateHistoryEntry(e)):null}undoOnce(){if(this.stateHistory.length===1)return null;let e=this.stateHistory.pop(),o=this.stateHistory[this.stateHistory.length-1];return e!==void 0?(this.redoStack.push(e),this.hydrateHistoryEntry(o)):null}setCurrentState(e,o){this.lastEntry=this.hydrateHistoryEntry(this.generateEntry(e,o))}resumeRecording(){this.recording=!0}record(e,o){this.recording&&(this.pushEntry(e,o),this.recording=!1)}},Bw=Nh;h();var zw=v(H(),1),jr=v(S(),1),ro="separator",Hw=zw.default.memo(({actionManager:t,items:e,top:o,left:r,onClose:n})=>{let i=Da(),a=En(),l=e.reduce((s,c)=>(c&&(c===ro||!c.predicate||c.predicate(a,i,t.app.props,t.app))&&s.push(c),s),[]);return(0,jr.jsx)(Ud,{onCloseRequest:()=>{n()},top:o,left:r,fitInViewport:!0,offsetLeft:i.offsetLeft,offsetTop:i.offsetTop,viewportWidth:i.width,viewportHeight:i.height,children:(0,jr.jsx)("ul",{className:"context-menu",onContextMenu:s=>s.preventDefault(),children:l.map((s,c)=>{if(s===ro)return!l[c-1]||l[c-1]===ro?null:(0,jr.jsx)("hr",{className:"context-menu-item-separator"},c);let m=s.name,d="";return s.label&&(typeof s.label=="function"?d=g(s.label(a,i,t.app)):d=g(s.label)),(0,jr.jsx)("li",{"data-testid":m,onClick:()=>{n(()=>{t.executeAction(s,"contextMenu")})},children:(0,jr.jsxs)("button",{className:z("context-menu-item",{dangerous:m==="deleteSelectedElements",checkmark:s.checked?.(i)}),children:[(0,jr.jsx)("div",{className:"context-menu-item__label",children:d}),(0,jr.jsx)("kbd",{className:"context-menu-item__shortcut",children:m?yt(m):""})]})},c)})})})});h();var q3=v(H(),1);h();var _m=v(H(),1);var Wa=v(S(),1),$w=({children:t,onClose:e})=>{let[o,r]=(0,_m.useState)(!!t),{container:n}=Mt(),i=_m.default.useCallback(()=>{r(!1),e&&e(),n?.focus()},[e,n]);return(0,Wa.jsx)(Wa.Fragment,{children:o&&(0,Wa.jsx)(Je,{size:"small",onCloseRequest:i,title:g("errorDialog.title"),children:(0,Wa.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:t})})})};h();var xo=v(H(),1);h();var us=v(S(),1),Uw=function({onChange:t,value:e,choices:o,name:r}){return(0,us.jsx)("div",{className:"RadioGroup",children:o.map(n=>(0,us.jsxs)("div",{className:z("RadioGroup__choice",{active:n.value===e}),children:[(0,us.jsx)("input",{name:r,type:"radio",checked:n.value===e,onChange:()=>t(n.value)}),n.label]},n.label))})};h();var Oh=v(S(),1),ps=({title:t,name:e,checked:o,onChange:r,disabled:n=!1})=>(0,Oh.jsx)("div",{className:z("Switch",{toggled:o,disabled:n}),children:(0,Oh.jsx)("input",{name:e,id:e,title:t,type:"checkbox",checked:o,disabled:n,onChange:()=>r(!o),onKeyDown:i=>{i.key===" "&&r(!o)}})});h();var Am=v(H(),1);var Ga=v(S(),1),wr=(0,Am.forwardRef)(({children:t,icon:e,onClick:o,label:r,variant:n="filled",color:i="primary",size:a="medium",fullWidth:l,className:s},c)=>{let[m,d]=(0,Am.useState)(!1),f=async p=>{let b=o?.(p);if(Li(b))try{d(!0),await b}catch(x){if(x instanceof Ki)console.warn(x);else throw x}finally{d(!1)}};return(0,Ga.jsx)("button",{className:z("ExcButton",`ExcButton--color-${i}`,`ExcButton--variant-${n}`,`ExcButton--size-${a}`,{"ExcButton--fullWidth":l},s),onClick:f,type:"button","aria-label":r,ref:c,disabled:m,children:(0,Ga.jsxs)("div",{className:"ExcButton__contents",children:[m&&(0,Ga.jsx)(Nt,{}),e&&(0,Ga.jsx)("div",{className:"ExcButton__icon","aria-hidden":!0,children:e}),n!=="icon"&&(t??r)]})})});var Se=v(S(),1),CS="filter"in document.createElement("canvas").getContext("2d"),TS=()=>(0,Se.jsxs)("div",{children:[(0,Se.jsx)("h3",{children:g("canvasError.cannotShowPreview")}),(0,Se.jsx)("p",{children:(0,Se.jsx)("span",{children:g("canvasError.canvasTooBig")})}),(0,Se.jsxs)("em",{children:["(",g("canvasError.canvasTooBigTip"),")"]})]}),SS=({appStateSnapshot:t,elementsSnapshot:e,files:o,actionManager:r,onExportImage:n,name:i})=>{let a=Oe(e,t),[l,s]=(0,xo.useState)(i),[c,m]=(0,xo.useState)(a),[d,f]=(0,xo.useState)(t.exportBackground),[p,b]=(0,xo.useState)(t.exportWithDarkMode),[x,y]=(0,xo.useState)(t.exportEmbedScene),[w,k]=(0,xo.useState)(t.exportScale),C=(0,xo.useRef)(null),[M,_]=(0,xo.useState)(null),{exportedElements:I,exportingFrame:A}=li(e,t,c);return(0,xo.useEffect)(()=>{let P=C.current;if(!P)return;let F=P.offsetWidth,D=P.offsetHeight;F&&Zn({elements:I,appState:{...t,name:l,exportBackground:d,exportWithDarkMode:p,exportScale:w,exportEmbedScene:x},files:o,exportPadding:on,maxWidthOrHeight:Math.max(F,D),exportingFrame:A}).then(W=>(_(null),Fr(W).then(()=>{P.replaceChildren(W)}).catch(O=>{throw O.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(g("canvasError.canvasTooBig")):O}))).catch(W=>{console.error(W),_(W)})},[t,o,I,A,l,d,p,w,x]),(0,Se.jsxs)("div",{className:"ImageExportModal",children:[(0,Se.jsx)("h3",{children:g("imageExportDialog.header")}),(0,Se.jsxs)("div",{className:"ImageExportModal__preview",children:[(0,Se.jsx)("div",{className:"ImageExportModal__preview__canvas",ref:C,children:M&&(0,Se.jsx)(TS,{})}),(0,Se.jsx)("div",{className:"ImageExportModal__preview__filename",children:!Vi&&(0,Se.jsx)("input",{type:"text",className:"TextInput",value:l,style:{width:"30ch"},onChange:P=>{s(P.target.value),r.executeAction($f,"ui",P.target.value)}})})]}),(0,Se.jsxs)("div",{className:"ImageExportModal__settings",children:[(0,Se.jsx)("h3",{children:g("imageExportDialog.header")}),a&&(0,Se.jsx)(fs,{label:g("imageExportDialog.label.onlySelected"),name:"exportOnlySelected",children:(0,Se.jsx)(ps,{name:"exportOnlySelected",checked:c,onChange:P=>{m(P)}})}),(0,Se.jsx)(fs,{label:g("imageExportDialog.label.withBackground"),name:"exportBackgroundSwitch",children:(0,Se.jsx)(ps,{name:"exportBackgroundSwitch",checked:d,onChange:P=>{f(P),r.executeAction(Uf,"ui",P)}})}),CS&&(0,Se.jsx)(fs,{label:g("imageExportDialog.label.darkMode"),name:"exportDarkModeSwitch",children:(0,Se.jsx)(ps,{name:"exportDarkModeSwitch",checked:p,onChange:P=>{b(P),r.executeAction(Uy,"ui",P)}})}),(0,Se.jsx)(fs,{label:g("imageExportDialog.label.embedScene"),tooltip:g("imageExportDialog.tooltip.embedScene"),name:"exportEmbedSwitch",children:(0,Se.jsx)(ps,{name:"exportEmbedSwitch",checked:x,onChange:P=>{y(P),r.executeAction(Vd,"ui",P)}})}),(0,Se.jsx)(fs,{label:g("imageExportDialog.label.scale"),name:"exportScale",children:(0,Se.jsx)(Uw,{name:"exportScale",value:w,onChange:P=>{k(P),r.executeAction($y,"ui",P)},choices:Ys.map(P=>({value:P,label:`${P}\xD7`}))})}),(0,Se.jsxs)("div",{className:"ImageExportModal__settings__buttons",children:[(0,Se.jsx)(wr,{className:"ImageExportModal__settings__buttons__button",label:g("imageExportDialog.title.exportToPng"),onClick:()=>n(Gs.png,I,{exportingFrame:A}),icon:$p,children:g("imageExportDialog.button.exportToPng")}),(0,Se.jsx)(wr,{className:"ImageExportModal__settings__buttons__button",label:g("imageExportDialog.title.exportToSvg"),onClick:()=>n(Gs.svg,I,{exportingFrame:A}),icon:$p,children:g("imageExportDialog.button.exportToSvg")}),(Yi||kr)&&(0,Se.jsx)(wr,{className:"ImageExportModal__settings__buttons__button",label:g("imageExportDialog.title.copyPngToClipboard"),onClick:()=>n(Gs.clipboard,I,{exportingFrame:A}),icon:ld,children:g("imageExportDialog.button.copyPngToClipboard")})]})]})]})},fs=({label:t,children:e,tooltip:o,name:r})=>(0,Se.jsxs)("div",{className:"ImageExportModal__settings__setting",title:t,children:[(0,Se.jsxs)("label",{htmlFor:r,className:"ImageExportModal__settings__setting__label",children:[t,o&&(0,Se.jsx)(ho,{label:o,long:!0,children:Xx})]}),(0,Se.jsx)("div",{className:"ImageExportModal__settings__setting__content",children:e})]}),Ww=({elements:t,appState:e,files:o,actionManager:r,onExportImage:n,onCloseRequest:i,name:a})=>{let[{appStateSnapshot:l,elementsSnapshot:s}]=(0,xo.useState)(()=>({appStateSnapshot:sr(e),elementsSnapshot:sr(t)}));return(0,Se.jsx)(Je,{onCloseRequest:i,size:"wide",title:!1,children:(0,Se.jsx)(SS,{elementsSnapshot:s,appStateSnapshot:l,files:o,actionManager:r,onExportImage:n,name:a})})};h();var Gw=v(S(),1),Lm=({children:t,side:e,className:o})=>(0,Gw.jsx)("div",{className:z("FixedSideContainer",`FixedSideContainer_side_${e}`,o),children:t});h();var Fh=v(S(),1),kS=({appState:t,isMobile:e,device:o,app:r})=>{let{activeTool:n,isResizing:i,isRotating:a,lastPointerDownWith:l}=t,s=t.multiElement!==null;if(t.openSidebar&&!o.editor.canFitSidebar)return null;if(So(t))return g("hints.eraserRevert");if(n.type==="arrow"||n.type==="line")return s?g("hints.linearElementMulti"):g("hints.linearElement");if(n.type==="freedraw")return g("hints.freeDraw");if(n.type==="text")return g("hints.text");if(n.type==="embeddable")return g("hints.embeddable");if(t.activeTool.type==="image"&&t.pendingImageElementId)return g("hints.placeImage");let c=r.scene.getSelectedElements(t);if(i&&l==="mouse"&&c.length===1){let m=c[0];return Re(m)&&m.points.length===2?g("hints.lockAngle"):an(m)?g("hints.resizeImage"):g("hints.resize")}if(a&&l==="mouse")return g("hints.rotate");if(c.length===1&&le(c[0]))return g("hints.text_selected");if(t.editingElement&&le(t.editingElement))return g("hints.text_editing");if(n.type==="selection"){if(t.draggingElement?.type==="selection"&&!c.length&&!t.editingElement&&!t.editingLinearElement)return g("hints.deepBoxSelect");if(t.gridSize&&t.draggingElement)return g("hints.disableSnapping");if(!c.length&&!e)return g("hints.canvasPanning");if(c.length===1){if(Re(c[0]))return t.editingLinearElement?t.editingLinearElement.selectedPointsIndices?g("hints.lineEditor_pointSelected"):g("hints.lineEditor_nothingSelected"):g("hints.lineEditor_info");if(!t.draggingElement&&Ri(c[0]))return g("hints.bindTextToElement")}}return null},Pm=({appState:t,isMobile:e,device:o,app:r})=>{let n=kS({appState:t,isMobile:e,device:o,app:r});return n?(n=N(n),(0,Fh.jsx)("div",{className:"HintViewer",children:(0,Fh.jsx)("span",{children:n})})):null};h();var hs=v(S(),1),IS="medium",Vw={CHECKED:ra,UNCHECKED:qn},Dm=t=>(0,hs.jsxs)("label",{className:z("ToolIcon ToolIcon__lock",`ToolIcon_size_${IS}`,{"is-mobile":t.isMobile}),title:`${t.title} \u2014 Q`,children:[(0,hs.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:t.name,onChange:t.onChange,checked:t.checked,"aria-label":t.title,"data-testid":"toolbar-lock"}),(0,hs.jsx)("div",{className:"ToolIcon__icon",children:t.checked?Vw.CHECKED:Vw.UNCHECKED})]});h();h();var yi=v(S(),1),An=({heading:t,children:e,...o})=>{let{id:r}=Mt(),n=(0,yi.jsx)("h2",{className:"visually-hidden",id:`${r}-${t}-title`,children:g(`headings.${t}`)});return(0,yi.jsx)("section",{...o,"aria-labelledby":`${r}-${t}-title`,children:typeof e=="function"?e(n):(0,yi.jsxs)(yi.Fragment,{children:[n,e]})})};h();var tr=4,Cr=6,Kw="rgba(0,0,0,0.3)",Yw=(t,e,o,r)=>{if(!t.length)return{horizontal:null,vertical:null};let[n,i,a,l]=Ke(t),s=e/r.zoom.value,c=o/r.zoom.value,m=e-s,d=o-c,f={top:parseInt(sl("sat"))||0,bottom:parseInt(sl("sab"))||0,left:parseInt(sl("sal"))||0,right:parseInt(sl("sar"))||0},p=$r().rtl,b=-r.scrollX+m/2+f.left,x=-r.scrollY+d/2+f.top,y=b+s-f.right,w=x+c-f.bottom,k=Math.min(n,b),C=Math.min(i,x),M=Math.max(a,y),_=Math.max(l,w);return{horizontal:b===k&&y===M?null:{x:Math.max(f.left,tr)+(b-k)/(M-k)*e,y:o-Cr-Math.max(tr,f.bottom),width:(y-b)/(M-k)*e-Math.max(tr*2,f.left+f.right),height:Cr},vertical:x===C&&w===_?null:{x:p?Math.max(f.left,tr):e-Cr-Math.max(f.right,tr),y:(x-C)/(_-C)*o+Math.max(f.top,tr),width:Cr,height:(w-x)/(_-C)*o-Math.max(tr*2,f.top+f.bottom)}}},Bh=(t,e,o)=>{let[r,n]=[t.horizontal,t.vertical].map(a=>a!=null&&a.x<=e&&e<=a.x+a.width&&a.y<=o&&o<=a.y+a.height);return{isOverEither:r||n,isOverHorizontal:r,isOverVertical:n}};h();var gs=v(S(),1),MS="medium",Rm=t=>t.penDetected?(0,gs.jsxs)("label",{className:z("ToolIcon ToolIcon__penMode",`ToolIcon_size_${MS}`,{"is-mobile":t.isMobile}),title:`${t.title}`,children:[(0,gs.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:t.name,onChange:t.onChange,checked:t.checked,"aria-label":t.title}),(0,gs.jsx)("div",{className:"ToolIcon__icon",children:j0})]}):null;h();var ge=v(S(),1),Nm=t=>{let e=Ke(t.elements),o=Qi(t.elements,t.appState),r=Ke(o);return(0,ge.jsx)("div",{className:"Stats",children:(0,ge.jsxs)(Bt,{padding:2,children:[(0,ge.jsx)("div",{className:"close",onClick:t.onClose,children:Mo}),(0,ge.jsx)("h3",{children:g("stats.title")}),(0,ge.jsx)("table",{children:(0,ge.jsxs)("tbody",{children:[(0,ge.jsx)("tr",{children:(0,ge.jsx)("th",{colSpan:2,children:g("stats.scene")})}),(0,ge.jsxs)("tr",{children:[(0,ge.jsx)("td",{children:g("stats.elements")}),(0,ge.jsx)("td",{children:t.elements.length})]}),(0,ge.jsxs)("tr",{children:[(0,ge.jsx)("td",{children:g("stats.width")}),(0,ge.jsx)("td",{children:Math.round(e[2])-Math.round(e[0])})]}),(0,ge.jsxs)("tr",{children:[(0,ge.jsx)("td",{children:g("stats.height")}),(0,ge.jsx)("td",{children:Math.round(e[3])-Math.round(e[1])})]}),o.length===1&&(0,ge.jsx)("tr",{children:(0,ge.jsx)("th",{colSpan:2,children:g("stats.element")})}),o.length>1&&(0,ge.jsxs)(ge.Fragment,{children:[(0,ge.jsx)("tr",{children:(0,ge.jsx)("th",{colSpan:2,children:g("stats.selected")})}),(0,ge.jsxs)("tr",{children:[(0,ge.jsx)("td",{children:g("stats.elements")}),(0,ge.jsx)("td",{children:o.length})]})]}),o.length>0&&(0,ge.jsxs)(ge.Fragment,{children:[(0,ge.jsxs)("tr",{children:[(0,ge.jsx)("td",{children:"x"}),(0,ge.jsx)("td",{children:Math.round(r[0])})]}),(0,ge.jsxs)("tr",{children:[(0,ge.jsx)("td",{children:"y"}),(0,ge.jsx)("td",{children:Math.round(r[1])})]}),(0,ge.jsxs)("tr",{children:[(0,ge.jsx)("td",{children:g("stats.width")}),(0,ge.jsx)("td",{children:Math.round(r[2]-r[0])})]}),(0,ge.jsxs)("tr",{children:[(0,ge.jsx)("td",{children:g("stats.height")}),(0,ge.jsx)("td",{children:Math.round(r[3]-r[1])})]})]}),o.length===1&&(0,ge.jsxs)("tr",{children:[(0,ge.jsx)("td",{children:g("stats.angle")}),(0,ge.jsx)("td",{children:`${Math.round(o[0].angle*180/Math.PI)}\xB0`})]}),t.renderCustomStats?.(t.elements,t.appState)]})})]})})};h();var Zw=v(S(),1),Om=t=>(0,Zw.jsx)(se,{className:z("Shape",{fillable:!1}),type:"radio",icon:ad,name:"editor-current-shape",checked:t.checked,title:`${t.title} \u2014 H`,keyBindingLabel:t.isMobile?void 0:T.H.toLocaleUpperCase(),"aria-label":`${t.title} \u2014 H`,"aria-keyshortcuts":T.H,"data-testid":"toolbar-hand",onChange:()=>t.onChange?.()});var Be=v(S(),1),jw=({appState:t,elements:e,actionManager:o,setAppState:r,onLockToggle:n,onHandToolToggle:i,onPenModeToggle:a,renderTopRightUI:l,renderCustomStats:s,renderSidebars:c,device:m,renderWelcomeScreen:d,UIOptions:f,app:p})=>{let{WelcomeScreenCenterTunnel:b,MainMenuTunnel:x,DefaultSidebarTriggerTunnel:y}=We(),w=()=>(0,Be.jsxs)(Lm,{side:"top",className:"App-top-bar",children:[d&&(0,Be.jsx)(b.Out,{}),(0,Be.jsx)(An,{heading:"shapes",children:C=>(0,Be.jsx)(At.Col,{gap:4,align:"center",children:(0,Be.jsxs)(At.Row,{gap:1,className:"App-toolbar-container",children:[(0,Be.jsxs)(Bt,{padding:1,className:"App-toolbar App-toolbar--mobile",children:[C,(0,Be.jsx)(At.Row,{gap:1,children:(0,Be.jsx)(Sm,{appState:t,activeTool:t.activeTool,UIOptions:f,app:p})})]}),l&&l(!0,t),(0,Be.jsxs)("div",{className:"mobile-misc-tools-container",children:[!t.viewModeEnabled&&(0,Be.jsx)(y.Out,{}),(0,Be.jsx)(Rm,{checked:t.penMode,onChange:()=>a(null),title:g("toolBar.penMode"),isMobile:!0,penDetected:t.penDetected}),(0,Be.jsx)(Dm,{checked:t.activeTool.locked,onChange:n,title:g("toolBar.lock"),isMobile:!0}),(0,Be.jsx)(Om,{checked:Rr(t),onChange:()=>i(),title:g("toolBar.hand"),isMobile:!0})]})]})})}),(0,Be.jsx)(Pm,{appState:t,isMobile:!0,device:m,app:p})]}),k=()=>t.viewModeEnabled?(0,Be.jsx)("div",{className:"App-toolbar-content",children:(0,Be.jsx)(x.Out,{})}):(0,Be.jsxs)("div",{className:"App-toolbar-content",children:[(0,Be.jsx)(x.Out,{}),o.renderAction("toggleEditMenu"),o.renderAction("undo"),o.renderAction("redo"),o.renderAction(t.multiElement?"finalize":"duplicateSelection"),o.renderAction("deleteSelectedElements")]});return(0,Be.jsxs)(Be.Fragment,{children:[c(),!t.viewModeEnabled&&w(),!t.openMenu&&t.showStats&&(0,Be.jsx)(Nm,{appState:t,setAppState:r,elements:e,onClose:()=>{o.executeAction(Tn)},renderCustomStats:s}),(0,Be.jsx)("div",{className:"App-bottom-bar",style:{marginBottom:Cr+tr*2,marginLeft:Cr+tr*2,marginRight:Cr+tr*2},children:(0,Be.jsxs)(Bt,{padding:0,children:[t.openMenu==="shape"&&!t.viewModeEnabled&&qi(t,e)?(0,Be.jsx)(An,{className:"App-mobile-menu",heading:"selectedShapeActions",children:(0,Be.jsx)(Tm,{appState:t,elementsMap:p.scene.getNonDeletedElementsMap(),renderAction:o.renderAction})}):null,(0,Be.jsxs)("footer",{className:"App-toolbar",children:[k(),t.scrolledOutside&&!t.openMenu&&!t.openSidebar&&(0,Be.jsx)("button",{className:"scroll-back-to-content",onClick:()=>{r(C=>({...Xn(e,C)}))},children:g("buttons.scrollBackToContent")})]})]})})]})};h();var Pn=v(H(),1);var Ln=v(S(),1),Xw=t=>{let e=(0,Pn.useRef)(null),[o,r]=(0,Pn.useState)(null);return(0,Pn.useLayoutEffect)(()=>{if(!t.spreadsheet)return;let n=Xb(t.chartType,t.spreadsheet,0,0);r(n);let i,a=e.current;return(async()=>(i=await Ac(n,{exportBackground:!1,viewBackgroundColor:It.white},null),i.querySelector(".style-fonts")?.remove(),a.replaceChildren(),a.appendChild(i),t.selected&&a.parentNode.focus()))(),()=>{a.replaceChildren()}},[t.spreadsheet,t.chartType,t.selected]),(0,Ln.jsx)("button",{className:"ChartPreview",onClick:()=>{o&&t.onClick(t.chartType,o)},children:(0,Ln.jsx)("div",{ref:e})})},qw=({setAppState:t,appState:e,onClose:o})=>{let{onInsertElements:r}=so(),n=Pn.default.useCallback(()=>{o&&o()},[o]),i=(a,l)=>{r(l),ve("paste","chart",a),t({currentChartType:a,pasteDialog:{shown:!1,data:null}})};return(0,Ln.jsx)(Je,{size:"small",onCloseRequest:n,title:g("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1,children:(0,Ln.jsxs)("div",{className:"container",children:[(0,Ln.jsx)(Xw,{chartType:"bar",spreadsheet:e.pasteDialog.data,selected:e.currentChartType==="bar",onClick:i}),(0,Ln.jsx)(Xw,{chartType:"line",spreadsheet:e.pasteDialog.data,selected:e.currentChartType==="line",onClick:i})]})})};h();var Jw=v(H(),1);var G=v(S(),1),_S=()=>(0,G.jsxs)("div",{className:"HelpDialog__header",children:[(0,G.jsxs)("a",{className:"HelpDialog__btn",href:"https://docs.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[g("helpDialog.documentation"),(0,G.jsx)("div",{className:"HelpDialog__link-icon",children:od})]}),(0,G.jsxs)("a",{className:"HelpDialog__btn",href:"https://blog.excalidraw.com",target:"_blank",rel:"noopener noreferrer",children:[g("helpDialog.blog"),(0,G.jsx)("div",{className:"HelpDialog__link-icon",children:od})]}),(0,G.jsxs)("a",{className:"HelpDialog__btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer",children:[g("helpDialog.github"),(0,G.jsx)("div",{className:"HelpDialog__link-icon",children:od})]})]}),AS=t=>(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("h3",{children:t.title}),(0,G.jsx)("div",{className:"HelpDialog__islands-container",children:t.children})]}),zh=t=>(0,G.jsxs)("div",{className:`HelpDialog__island ${t.className}`,children:[(0,G.jsx)("h4",{className:"HelpDialog__island-title",children:t.caption}),(0,G.jsx)("div",{className:"HelpDialog__island-content",children:t.children})]});function*LS(t,e){let o=!0;for(let r of t)o||(yield e),o=!1,yield r}var PS=t=>t.replace(/\b[a-z]\b/,e=>e.toUpperCase()),q=({label:t,shortcuts:e,isOr:o=!0})=>{let r=e.map(n=>(n.endsWith("++")?[...n.slice(0,-2).split("+"),"+"]:n.split("+")).map(a=>(0,G.jsx)(DS,{children:PS(a)},a)));return(0,G.jsxs)("div",{className:"HelpDialog__shortcut",children:[(0,G.jsx)("div",{children:t}),(0,G.jsx)("div",{className:"HelpDialog__key-container",children:[...LS(r,o?g("helpDialog.or"):null)]})]})},DS=t=>(0,G.jsx)("kbd",{className:"HelpDialog__key",...t}),Qw=({onClose:t})=>{let e=Jw.default.useCallback(()=>{t&&t()},[t]);return(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(Je,{onCloseRequest:e,title:g("helpDialog.title"),className:"HelpDialog",children:[(0,G.jsx)(_S,{}),(0,G.jsxs)(AS,{title:g("helpDialog.shortcuts"),children:[(0,G.jsxs)(zh,{className:"HelpDialog__island--tools",caption:g("helpDialog.tools"),children:[(0,G.jsx)(q,{label:g("toolBar.hand"),shortcuts:[T.H]}),(0,G.jsx)(q,{label:g("toolBar.selection"),shortcuts:[T.V,T[1]]}),(0,G.jsx)(q,{label:g("toolBar.rectangle"),shortcuts:[T.R,T[2]]}),(0,G.jsx)(q,{label:g("toolBar.diamond"),shortcuts:[T.D,T[3]]}),(0,G.jsx)(q,{label:g("toolBar.ellipse"),shortcuts:[T.O,T[4]]}),(0,G.jsx)(q,{label:g("toolBar.arrow"),shortcuts:[T.A,T[5]]}),(0,G.jsx)(q,{label:g("toolBar.line"),shortcuts:[T.L,T[6]]}),(0,G.jsx)(q,{label:g("toolBar.freedraw"),shortcuts:[T.P,T[7]]}),(0,G.jsx)(q,{label:g("toolBar.text"),shortcuts:[T.T,T[8]]}),(0,G.jsx)(q,{label:g("toolBar.image"),shortcuts:[T[9]]}),(0,G.jsx)(q,{label:g("toolBar.eraser"),shortcuts:[T.E,T[0]]}),(0,G.jsx)(q,{label:g("toolBar.frame"),shortcuts:[T.F]}),(0,G.jsx)(q,{label:g("toolBar.laser"),shortcuts:[T.K]}),(0,G.jsx)(q,{label:g("labels.eyeDropper"),shortcuts:[T.I,"Shift+S","Shift+G"]}),(0,G.jsx)(q,{label:g("helpDialog.editLineArrowPoints"),shortcuts:[N("CtrlOrCmd+Enter")]}),(0,G.jsx)(q,{label:g("helpDialog.editText"),shortcuts:[N("Enter")]}),(0,G.jsx)(q,{label:g("helpDialog.textNewLine"),shortcuts:[N("Enter"),N("Shift+Enter")]}),(0,G.jsx)(q,{label:g("helpDialog.textFinish"),shortcuts:[N("Esc"),N("CtrlOrCmd+Enter")]}),(0,G.jsx)(q,{label:g("helpDialog.curvedArrow"),shortcuts:["A",g("helpDialog.click"),g("helpDialog.click"),g("helpDialog.click")],isOr:!1}),(0,G.jsx)(q,{label:g("helpDialog.curvedLine"),shortcuts:["L",g("helpDialog.click"),g("helpDialog.click"),g("helpDialog.click")],isOr:!1}),(0,G.jsx)(q,{label:g("toolBar.lock"),shortcuts:[T.Q]}),(0,G.jsx)(q,{label:g("helpDialog.preventBinding"),shortcuts:[N("CtrlOrCmd")]}),(0,G.jsx)(q,{label:g("toolBar.link"),shortcuts:[N("CtrlOrCmd+K")]})]}),(0,G.jsxs)(zh,{className:"HelpDialog__island--view",caption:g("helpDialog.view"),children:[(0,G.jsx)(q,{label:g("buttons.zoomIn"),shortcuts:[N("CtrlOrCmd++")]}),(0,G.jsx)(q,{label:g("buttons.zoomOut"),shortcuts:[N("CtrlOrCmd+-")]}),(0,G.jsx)(q,{label:g("buttons.resetZoom"),shortcuts:[N("CtrlOrCmd+0")]}),(0,G.jsx)(q,{label:g("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),(0,G.jsx)(q,{label:g("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),(0,G.jsx)(q,{label:g("helpDialog.movePageUpDown"),shortcuts:["PgUp/PgDn"]}),(0,G.jsx)(q,{label:g("helpDialog.movePageLeftRight"),shortcuts:["Shift+PgUp/PgDn"]}),(0,G.jsx)(q,{label:g("buttons.zenMode"),shortcuts:[N("Alt+Z")]}),(0,G.jsx)(q,{label:g("buttons.objectsSnapMode"),shortcuts:[N("Alt+S")]}),(0,G.jsx)(q,{label:g("labels.showGrid"),shortcuts:[N("CtrlOrCmd+'")]}),(0,G.jsx)(q,{label:g("labels.viewMode"),shortcuts:[N("Alt+R")]}),(0,G.jsx)(q,{label:g("labels.toggleTheme"),shortcuts:[N("Alt+Shift+D")]}),(0,G.jsx)(q,{label:g("stats.title"),shortcuts:[N("Alt+/")]}),(0,G.jsx)(q,{label:g("commandPalette.title"),shortcuts:kr?[yt("commandPalette")]:[yt("commandPalette"),yt("commandPalette",1)]})]}),(0,G.jsxs)(zh,{className:"HelpDialog__island--editor",caption:g("helpDialog.editor"),children:[(0,G.jsx)(q,{label:g("labels.moveCanvas"),shortcuts:[N(`Space+${g("helpDialog.drag")}`),N(`Wheel+${g("helpDialog.drag")}`)],isOr:!0}),(0,G.jsx)(q,{label:g("buttons.clearReset"),shortcuts:[N("CtrlOrCmd+Delete")]}),(0,G.jsx)(q,{label:g("labels.delete"),shortcuts:[N("Delete")]}),(0,G.jsx)(q,{label:g("labels.cut"),shortcuts:[N("CtrlOrCmd+X")]}),(0,G.jsx)(q,{label:g("labels.copy"),shortcuts:[N("CtrlOrCmd+C")]}),(0,G.jsx)(q,{label:g("labels.paste"),shortcuts:[N("CtrlOrCmd+V")]}),(0,G.jsx)(q,{label:g("labels.pasteAsPlaintext"),shortcuts:[N("CtrlOrCmd+Shift+V")]}),(0,G.jsx)(q,{label:g("labels.selectAll"),shortcuts:[N("CtrlOrCmd+A")]}),(0,G.jsx)(q,{label:g("labels.multiSelect"),shortcuts:[N(`Shift+${g("helpDialog.click")}`)]}),(0,G.jsx)(q,{label:g("helpDialog.deepSelect"),shortcuts:[N(`CtrlOrCmd+${g("helpDialog.click")}`)]}),(0,G.jsx)(q,{label:g("helpDialog.deepBoxSelect"),shortcuts:[N(`CtrlOrCmd+${g("helpDialog.drag")}`)]}),(Yi||kr)&&(0,G.jsx)(q,{label:g("labels.copyAsPng"),shortcuts:[N("Shift+Alt+C")]}),(0,G.jsx)(q,{label:g("labels.copyStyles"),shortcuts:[N("CtrlOrCmd+Alt+C")]}),(0,G.jsx)(q,{label:g("labels.pasteStyles"),shortcuts:[N("CtrlOrCmd+Alt+V")]}),(0,G.jsx)(q,{label:g("labels.sendToBack"),shortcuts:[Wo?N("CtrlOrCmd+Alt+["):N("CtrlOrCmd+Shift+[")]}),(0,G.jsx)(q,{label:g("labels.bringToFront"),shortcuts:[Wo?N("CtrlOrCmd+Alt+]"):N("CtrlOrCmd+Shift+]")]}),(0,G.jsx)(q,{label:g("labels.sendBackward"),shortcuts:[N("CtrlOrCmd+[")]}),(0,G.jsx)(q,{label:g("labels.bringForward"),shortcuts:[N("CtrlOrCmd+]")]}),(0,G.jsx)(q,{label:g("labels.alignTop"),shortcuts:[N("CtrlOrCmd+Shift+Up")]}),(0,G.jsx)(q,{label:g("labels.alignBottom"),shortcuts:[N("CtrlOrCmd+Shift+Down")]}),(0,G.jsx)(q,{label:g("labels.alignLeft"),shortcuts:[N("CtrlOrCmd+Shift+Left")]}),(0,G.jsx)(q,{label:g("labels.alignRight"),shortcuts:[N("CtrlOrCmd+Shift+Right")]}),(0,G.jsx)(q,{label:g("labels.duplicateSelection"),shortcuts:[N("CtrlOrCmd+D"),N(`Alt+${g("helpDialog.drag")}`)]}),(0,G.jsx)(q,{label:g("helpDialog.toggleElementLock"),shortcuts:[N("CtrlOrCmd+Shift+L")]}),(0,G.jsx)(q,{label:g("buttons.undo"),shortcuts:[N("CtrlOrCmd+Z")]}),(0,G.jsx)(q,{label:g("buttons.redo"),shortcuts:$s?[N("CtrlOrCmd+Y"),N("CtrlOrCmd+Shift+Z")]:[N("CtrlOrCmd+Shift+Z")]}),(0,G.jsx)(q,{label:g("labels.group"),shortcuts:[N("CtrlOrCmd+G")]}),(0,G.jsx)(q,{label:g("labels.ungroup"),shortcuts:[N("CtrlOrCmd+Shift+G")]}),(0,G.jsx)(q,{label:g("labels.flipHorizontal"),shortcuts:[N("Shift+H")]}),(0,G.jsx)(q,{label:g("labels.flipVertical"),shortcuts:[N("Shift+V")]}),(0,G.jsx)(q,{label:g("labels.showStroke"),shortcuts:[N("S")]}),(0,G.jsx)(q,{label:g("labels.showBackground"),shortcuts:[N("G")]}),(0,G.jsx)(q,{label:g("labels.decreaseFontSize"),shortcuts:[N("CtrlOrCmd+Shift+<")]}),(0,G.jsx)(q,{label:g("labels.increaseFontSize"),shortcuts:[N("CtrlOrCmd+Shift+>")]})]})]})]})})};h();var Dn=v(H(),1);var zt=v(S(),1),RS=4,NS=8,OS=({shouldWrap:t,children:e,username:o})=>t?(0,zt.jsx)(ho,{label:o||"Unknown user",children:e}):(0,zt.jsx)(Dn.default.Fragment,{children:e}),Hh=({actionManager:t,collaborator:e,socketId:o,withName:r=!1,shouldWrapWithTooltip:n=!1,isBeingFollowed:i})=>{let a={socketId:o,collaborator:e,withName:r,isBeingFollowed:i},l=t.renderAction("goToCollaborator",a);return(0,zt.jsx)(OS,{username:e.username,shouldWrap:n,children:l},o)},FS=["avatarUrl","id","socketId","username","isInCall","isSpeaking","isMuted"],Fm=Dn.default.memo(({className:t,mobile:e,collaborators:o,userToFollow:r})=>{let n=St(),i=new Map;o.forEach((y,w)=>{let k=y.id||w;i.set(k,{...y,socketId:w})});let a=Array.from(i.values()).filter(y=>y.username?.trim()),[l,s]=Dn.default.useState(""),c=Dn.default.useRef(null);(0,Dn.useLayoutEffect)(()=>{if(c.current){let y=k=>{let C=Math.max(1,Math.min(8,Math.floor(k/38)));d(C)};if(y(c.current.clientWidth),!tl)return;let w=new ResizeObserver(k=>{for(let C of k){let{width:M}=C.contentRect;y(M)}});return w.observe(c.current),()=>{w.disconnect()}}},[]);let[m,d]=Dn.default.useState(RS),p=l.trim().toLowerCase()?a.filter(y=>y.username?.toLowerCase().includes(l)):a,x=a.slice(0,m-1).map(y=>Hh({actionManager:n,collaborator:y,socketId:y.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:y.socketId===r}));return e?(0,zt.jsx)("div",{className:z("UserList UserList_mobile",t),children:a.map(y=>Hh({actionManager:n,collaborator:y,socketId:y.socketId,shouldWrapWithTooltip:!0,isBeingFollowed:y.socketId===r}))}):(0,zt.jsx)("div",{className:"UserList-wrapper",ref:c,children:(0,zt.jsxs)("div",{className:z("UserList",t),style:{"--max-avatars":m},children:[x,a.length>m-1&&(0,zt.jsxs)(Od,{onOpenChange:y=>{y||s("")},children:[(0,zt.jsxs)(Fd,{className:"UserList__more",children:["+",a.length-m+1]}),(0,zt.jsx)(Bd,{style:{zIndex:2,width:"15rem",textAlign:"left"},align:"end",sideOffset:10,children:(0,zt.jsxs)(Bt,{style:{overflow:"hidden"},children:[a.length>=NS&&(0,zt.jsxs)("div",{className:"UserList__search-wrapper",children:[md,(0,zt.jsx)("input",{className:"UserList__search",type:"text",placeholder:g("userList.search.placeholder"),value:l,onChange:y=>{s(y.target.value)}})]}),(0,zt.jsxs)("div",{className:"dropdown-menu UserList__collaborators",children:[p.length===0&&(0,zt.jsx)("div",{className:"UserList__collaborators__empty",children:g("userList.search.empty")}),(0,zt.jsx)("div",{className:"UserList__hint",children:g("userList.hint.text")}),p.map(y=>Hh({actionManager:n,collaborator:y,socketId:y.socketId,withName:!0,isBeingFollowed:y.socketId===r}))]})]})})]})]})})},(t,e)=>{if(t.collaborators.size!==e.collaborators.size||t.mobile!==e.mobile||t.className!==e.className||t.userToFollow!==e.userToFollow)return!1;let o=e.collaborators.keys();for(let[r,n]of t.collaborators){let i=e.collaborators.get(r);if(!i||r!==o.next().value||!Dt(n,i,FS))return!1}return!0});h();var t3=v(H(),1);h();var e3=v(S(),1),$h=({children:t,color:e})=>(0,e3.jsx)("div",{className:"Card",style:{"--card-color":e==="primary"?"var(--color-primary)":It[e][7],"--card-color-darker":e==="primary"?"var(--color-primary-darker)":It[e][8],"--card-color-darkest":e==="primary"?"var(--color-primary-darkest)":It[e][9]},children:t});var kt=v(S(),1),BS=({elements:t,appState:e,setAppState:o,files:r,actionManager:n,exportOpts:i,canvas:a,onCloseRequest:l})=>{let{onExportToBackend:s}=i;return(0,kt.jsx)("div",{className:"ExportDialog ExportDialog--json",children:(0,kt.jsxs)("div",{className:"ExportDialog-cards",children:[i.saveFileToDisk&&(0,kt.jsxs)($h,{color:"lime",children:[(0,kt.jsx)("div",{className:"Card-icon",children:cx}),(0,kt.jsx)("h2",{children:g("exportDialog.disk_title")}),(0,kt.jsxs)("div",{className:"Card-details",children:[g("exportDialog.disk_details"),!Vi&&n.renderAction("changeProjectName")]}),(0,kt.jsx)(se,{className:"Card-button",type:"button",title:g("exportDialog.disk_button"),"aria-label":g("exportDialog.disk_button"),showAriaLabel:!0,onClick:()=>{n.executeAction(ts,"ui")}})]}),s&&(0,kt.jsxs)($h,{color:"pink",children:[(0,kt.jsx)("div",{className:"Card-icon",children:Ol}),(0,kt.jsx)("h2",{children:g("exportDialog.link_title")}),(0,kt.jsx)("div",{className:"Card-details",children:g("exportDialog.link_details")}),(0,kt.jsx)(se,{className:"Card-button",type:"button",title:g("exportDialog.link_button"),"aria-label":g("exportDialog.link_button"),showAriaLabel:!0,onClick:async()=>{try{ve("export","link",`ui (${L1()})`),await s(t,e,r),l()}catch(c){o({errorMessage:c.message})}}})]}),i.renderCustomUI&&i.renderCustomUI(t,e,r,a)]})})},o3=({elements:t,appState:e,files:o,actionManager:r,exportOpts:n,canvas:i,setAppState:a})=>{let l=t3.default.useCallback(()=>{a({openDialog:null})},[a]);return(0,kt.jsx)(kt.Fragment,{children:e.openDialog?.name==="jsonExport"&&(0,kt.jsx)(Je,{onCloseRequest:l,title:g("buttons.export"),children:(0,kt.jsx)(BS,{elements:t,appState:e,setAppState:a,files:o,actionManager:r,onCloseRequest:l,exportOpts:n,canvas:i})})})};h();h();var n3=v(S(),1),r3=t=>(0,n3.jsx)("button",{className:"help-icon",onClick:t.onClick,type:"button",title:`${g("helpDialog.title")} \u2014 ?`,"aria-label":g("helpDialog.title"),children:ia});var no=v(S(),1),i3=({appState:t,actionManager:e,showExitZenModeBtn:o,renderWelcomeScreen:r})=>{let{FooterCenterTunnel:n,WelcomeScreenHelpHintTunnel:i}=We(),a=Me(),l=!t.viewModeEnabled&&t.multiElement&&a.isTouchScreen;return(0,no.jsxs)("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer App-menu App-menu_bottom",children:[(0,no.jsx)("div",{className:z("layer-ui__wrapper__footer-left zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":t.zenModeEnabled}),children:(0,no.jsx)(At.Col,{gap:2,children:(0,no.jsxs)(An,{heading:"canvasActions",children:[(0,no.jsx)(Tw,{renderAction:e.renderAction,zoom:t.zoom}),!t.viewModeEnabled&&(0,no.jsx)(Sw,{renderAction:e.renderAction,className:z("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":t.zenModeEnabled})}),l&&(0,no.jsx)(Iw,{renderAction:e.renderAction,className:z("zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-left":t.zenModeEnabled})})]})})}),(0,no.jsx)(n.Out,{}),(0,no.jsx)("div",{className:z("layer-ui__wrapper__footer-right zen-mode-transition",{"transition-right":t.zenModeEnabled}),children:(0,no.jsxs)("div",{style:{position:"relative"},children:[r&&(0,no.jsx)(i.Out,{}),(0,no.jsx)(r3,{onClick:()=>e.executeAction(di)})]})}),(0,no.jsx)(kw,{actionManager:e,showExitZenModeBtn:o})]})},a3=i3;i3.displayName="Footer";h();var Et=v(H(),1);h();var l3=v(H(),1),Bm=l3.default.createContext({});h();var s3=v(H(),1);var Ei=v(S(),1),Uh=({children:t,className:e})=>{let o=Me(),r=(0,s3.useContext)(Bm),n=!!(o.editor.canFitSidebar&&r.shouldRenderDockButton);return(0,Ei.jsxs)("div",{className:z("sidebar__header",e),"data-testid":"sidebar-header",children:[t,(0,Ei.jsxs)("div",{className:"sidebar__header__buttons",children:[n&&(0,Ei.jsx)(ho,{label:g("labels.sidebarLock"),children:(0,Ei.jsx)(yr,{onSelect:()=>r.onDock?.(!r.docked),selected:!!r.docked,className:"sidebar__dock","data-testid":"sidebar-dock","aria-label":g("labels.sidebarLock"),children:z0})}),(0,Ei.jsx)(yr,{"data-testid":"sidebar-close",className:"sidebar__close",onSelect:r.onCloseRequest,"aria-label":g("buttons.close"),children:Mo})]})]})};Uh.displayName="SidebarHeader";h();var wi=v(S(),1),Wh=({name:t,tab:e,icon:o,title:r,children:n,onToggle:i,className:a,style:l})=>{let s=_e(),c=ke();return(0,wi.jsxs)("label",{title:r,className:"sidebar-trigger__label-element",children:[(0,wi.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",onChange:m=>{document.querySelector(".layer-ui__wrapper")?.classList.remove("animate");let d=m.target.checked;s({openSidebar:d?{name:t,tab:e}:null}),i?.(d)},checked:c.openSidebar?.name===t,"aria-label":r,"aria-keyshortcuts":"0"}),(0,wi.jsxs)("div",{className:z("sidebar-trigger",a),style:l,children:[o&&(0,wi.jsx)("div",{children:o}),n&&(0,wi.jsx)("div",{className:"sidebar-trigger__label",children:n})]})]})};Wh.displayName="SidebarTrigger";h();h();var Lt=v(H());h();var Ge=v(H());h();var or=v(H());function c3(t){let e=t+"CollectionProvider",[o,r]=gr(e),[n,i]=o(e,{collectionRef:{current:null},itemMap:new Map}),a=p=>{let{scope:b,children:x}=p,y=or.default.useRef(null),w=or.default.useRef(new Map).current;return or.default.createElement(n,{scope:b,itemMap:w,collectionRef:y},x)},l=t+"CollectionSlot",s=or.default.forwardRef((p,b)=>{let{scope:x,children:y}=p,w=i(l,x),k=Ot(b,w.collectionRef);return or.default.createElement(gn,{ref:k},y)}),c=t+"CollectionItemSlot",m="data-radix-collection-item",d=or.default.forwardRef((p,b)=>{let{scope:x,children:y,...w}=p,k=or.default.useRef(null),C=Ot(b,k),M=i(c,x);return or.default.useEffect(()=>(M.itemMap.set(k,{ref:k,...w}),()=>void M.itemMap.delete(k))),or.default.createElement(gn,{[m]:"",ref:C},y)});function f(p){let b=i(t+"CollectionConsumer",p);return or.default.useCallback(()=>{let y=b.collectionRef.current;if(!y)return[];let w=Array.from(y.querySelectorAll(`[${m}]`));return Array.from(b.itemMap.values()).sort((M,_)=>w.indexOf(M.ref.current)-w.indexOf(_.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:s,ItemSlot:d},f,r]}h();var bs=v(H()),zS=(0,bs.createContext)(void 0);function zm(t){let e=(0,bs.useContext)(zS);return t||e||"ltr"}var Gh="rovingFocusGroup.onEntryFocus",HS={bubbles:!1,cancelable:!0},Kh="RovingFocusGroup",[Vh,d3,$S]=c3(Kh),[US,Yh]=gr(Kh,[$S]),[WS,GS]=US(Kh),VS=(0,Ge.forwardRef)((t,e)=>(0,Ge.createElement)(Vh.Provider,{scope:t.__scopeRovingFocusGroup},(0,Ge.createElement)(Vh.Slot,{scope:t.__scopeRovingFocusGroup},(0,Ge.createElement)(KS,ye({},t,{ref:e}))))),KS=(0,Ge.forwardRef)((t,e)=>{let{__scopeRovingFocusGroup:o,orientation:r,loop:n=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:s,onEntryFocus:c,...m}=t,d=(0,Ge.useRef)(null),f=Ot(e,d),p=zm(i),[b=null,x]=Ea({prop:a,defaultProp:l,onChange:s}),[y,w]=(0,Ge.useState)(!1),k=eo(c),C=d3(o),M=(0,Ge.useRef)(!1),[_,I]=(0,Ge.useState)(0);return(0,Ge.useEffect)(()=>{let A=d.current;if(A)return A.addEventListener(Gh,k),()=>A.removeEventListener(Gh,k)},[k]),(0,Ge.createElement)(WS,{scope:o,orientation:r,dir:p,loop:n,currentTabStopId:b,onItemFocus:(0,Ge.useCallback)(A=>x(A),[x]),onItemShiftTab:(0,Ge.useCallback)(()=>w(!0),[]),onFocusableItemAdd:(0,Ge.useCallback)(()=>I(A=>A+1),[]),onFocusableItemRemove:(0,Ge.useCallback)(()=>I(A=>A-1),[])},(0,Ge.createElement)(lt.div,ye({tabIndex:y||_===0?-1:0,"data-orientation":r},m,{ref:f,style:{outline:"none",...t.style},onMouseDown:xt(t.onMouseDown,()=>{M.current=!0}),onFocus:xt(t.onFocus,A=>{let P=!M.current;if(A.target===A.currentTarget&&P&&!y){let F=new CustomEvent(Gh,HS);if(A.currentTarget.dispatchEvent(F),!F.defaultPrevented){let D=C().filter(K=>K.focusable),W=D.find(K=>K.active),O=D.find(K=>K.id===b),ee=[W,O,...D].filter(Boolean).map(K=>K.ref.current);m3(ee)}}M.current=!1}),onBlur:xt(t.onBlur,()=>w(!1))})))}),YS="RovingFocusGroupItem",ZS=(0,Ge.forwardRef)((t,e)=>{let{__scopeRovingFocusGroup:o,focusable:r=!0,active:n=!1,tabStopId:i,...a}=t,l=ba(),s=i||l,c=GS(YS,o),m=c.currentTabStopId===s,d=d3(o),{onFocusableItemAdd:f,onFocusableItemRemove:p}=c;return(0,Ge.useEffect)(()=>{if(r)return f(),()=>p()},[r,f,p]),(0,Ge.createElement)(Vh.ItemSlot,{scope:o,id:s,focusable:r,active:n},(0,Ge.createElement)(lt.span,ye({tabIndex:m?0:-1,"data-orientation":c.orientation},a,{ref:e,onMouseDown:xt(t.onMouseDown,b=>{r?c.onItemFocus(s):b.preventDefault()}),onFocus:xt(t.onFocus,()=>c.onItemFocus(s)),onKeyDown:xt(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){c.onItemShiftTab();return}if(b.target!==b.currentTarget)return;let x=qS(b,c.orientation,c.dir);if(x!==void 0){b.preventDefault();let w=d().filter(k=>k.focusable).map(k=>k.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();let k=w.indexOf(b.currentTarget);w=c.loop?JS(w,k+1):w.slice(k+1)}setTimeout(()=>m3(w))}})})))}),jS={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function XS(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function qS(t,e,o){let r=XS(t.key,o);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return jS[r]}function m3(t){let e=document.activeElement;for(let o of t)if(o===e||(o.focus(),document.activeElement!==e))return}function JS(t,e){return t.map((o,r)=>t[(e+r)%t.length])}var u3=VS,p3=ZS;var f3="Tabs",[QS,oJ]=gr(f3,[Yh]),h3=Yh(),[ek,Zh]=QS(f3),tk=(0,Lt.forwardRef)((t,e)=>{let{__scopeTabs:o,value:r,onValueChange:n,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:s="automatic",...c}=t,m=zm(l),[d,f]=Ea({prop:r,onChange:n,defaultProp:i});return(0,Lt.createElement)(ek,{scope:o,baseId:ba(),value:d,onValueChange:f,orientation:a,dir:m,activationMode:s},(0,Lt.createElement)(lt.div,ye({dir:m,"data-orientation":a},c,{ref:e})))}),ok="TabsList",rk=(0,Lt.forwardRef)((t,e)=>{let{__scopeTabs:o,loop:r=!0,...n}=t,i=Zh(ok,o),a=h3(o);return(0,Lt.createElement)(u3,ye({asChild:!0},a,{orientation:i.orientation,dir:i.dir,loop:r}),(0,Lt.createElement)(lt.div,ye({role:"tablist","aria-orientation":i.orientation},n,{ref:e})))}),nk="TabsTrigger",ik=(0,Lt.forwardRef)((t,e)=>{let{__scopeTabs:o,value:r,disabled:n=!1,...i}=t,a=Zh(nk,o),l=h3(o),s=g3(a.baseId,r),c=b3(a.baseId,r),m=r===a.value;return(0,Lt.createElement)(p3,ye({asChild:!0},l,{focusable:!n,active:m}),(0,Lt.createElement)(lt.button,ye({type:"button",role:"tab","aria-selected":m,"aria-controls":c,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:s},i,{ref:e,onMouseDown:xt(t.onMouseDown,d=>{!n&&d.button===0&&d.ctrlKey===!1?a.onValueChange(r):d.preventDefault()}),onKeyDown:xt(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(r)}),onFocus:xt(t.onFocus,()=>{let d=a.activationMode!=="manual";!m&&!n&&d&&a.onValueChange(r)})})))}),ak="TabsContent",lk=(0,Lt.forwardRef)((t,e)=>{let{__scopeTabs:o,value:r,forceMount:n,children:i,...a}=t,l=Zh(ak,o),s=g3(l.baseId,r),c=b3(l.baseId,r),m=r===l.value,d=(0,Lt.useRef)(m);return(0,Lt.useEffect)(()=>{let f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),(0,Lt.createElement)(ya,{present:n||m},({present:f})=>(0,Lt.createElement)(lt.div,ye({"data-state":m?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":s,hidden:!f,id:c,tabIndex:0},a,{ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0}}),f&&i))});function g3(t,e){return`${t}-trigger-${e}`}function b3(t,e){return`${t}-content-${e}`}var Hm=tk,$m=rk,Um=ik,Wm=lk;var x3=v(S(),1),jh=({children:t,...e})=>(0,x3.jsx)($m,{className:"sidebar-triggers",...e,children:t});jh.displayName="SidebarTabTriggers";h();var Xh=v(S(),1),qh=({children:t,tab:e,onSelect:o,...r})=>(0,Xh.jsx)(Um,{value:e,asChild:!0,onSelect:o,children:(0,Xh.jsx)("button",{type:"button",className:"excalidraw-button sidebar-tab-trigger",...r,children:t})});qh.displayName="SidebarTabTrigger";h();var v3=v(S(),1),Jh=({children:t,...e})=>{let o=ke(),r=_e();if(!o.openSidebar)return null;let{name:n}=o.openSidebar;return(0,v3.jsx)(Hm,{className:"sidebar-tabs-root",value:o.openSidebar.tab,onValueChange:i=>r(a=>({...a,openSidebar:{...a.openSidebar,name:n,tab:i}})),...e,children:t})};Jh.displayName="SidebarTabs";h();var y3=v(S(),1),Qh=({tab:t,children:e,...o})=>(0,y3.jsx)(Wm,{...o,value:t,"data-testid":t,children:e});Qh.displayName="SidebarTab";var eg=v(S(),1),w3=v(H(),1),xs=$e(!1),E3=(0,Et.forwardRef)(({name:t,children:e,onDock:o,docked:r,className:n,...i},a)=>{E.DEV&&o&&r==null&&console.warn("Sidebar: `docked` must be set when `onDock` is supplied for the sidebar to be user-dockable. To hide this message, either pass `docked` or remove `onDock`");let l=_e(),s=Hr(xs,Pe);(0,Et.useLayoutEffect)(()=>(s(!!r),()=>{s(!1)}),[s,r]);let c=(0,Et.useRef)({});c.current.onCloseRequest=()=>{l({openSidebar:null})},c.current.onDock=p=>o?.(p),c.current=Ai(c.current,{docked:r,shouldRenderDockButton:!!o&&r!=null});let m=(0,Et.useRef)(null);(0,Et.useImperativeHandle)(a,()=>m.current);let d=Me(),f=(0,Et.useCallback)(()=>{document.querySelector(".Dialog")||l({openSidebar:null})},[l]);return ka(m,(0,Et.useCallback)(p=>{p.target.closest(".sidebar-trigger")||(!r||!d.editor.canFitSidebar)&&f()},[f,r,d.editor.canFitSidebar])),(0,Et.useEffect)(()=>{let p=b=>{b.key===T.ESCAPE&&(!r||!d.editor.canFitSidebar)&&f()};return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[f,r,d.editor.canFitSidebar]),(0,eg.jsx)(Bt,{...i,className:z("sidebar",{"sidebar--docked":r},n),ref:m,children:(0,eg.jsx)(Bm.Provider,{value:c.current,children:e})})});E3.displayName="SidebarInner";var Xr=Object.assign((0,Et.forwardRef)((t,e)=>{let o=ke(),{onStateChange:r}=t,n=(0,Et.useRef)(o.openSidebar);(0,Et.useEffect)(()=>{(!o.openSidebar&&n?.current?.name===t.name||o.openSidebar?.name===t.name&&n?.current?.name!==t.name||n.current?.name===t.name)&&o.openSidebar!==n.current&&r?.(o.openSidebar?.name!==t.name?null:o.openSidebar),n.current=o.openSidebar},[o.openSidebar,r,t.name]);let[i,a]=(0,Et.useState)(!1);return(0,Et.useLayoutEffect)(()=>(a(!0),()=>a(!1)),[]),i&&o.openSidebar?.name===t.name?(0,w3.createElement)(E3,{...t,ref:e,key:t.name}):null}),{Header:Uh,TabTriggers:jh,TabTrigger:qh,Tabs:Jh,Tab:Qh,Trigger:Wh});Xr.displayName="Sidebar";h();var og={};$g(og,{ChangeCanvasBackground:()=>L3,ClearCanvas:()=>_3,CommandPalette:()=>I3,Export:()=>P3,Help:()=>M3,LiveCollaborationTrigger:()=>R3,LoadScene:()=>T3,SaveAsImage:()=>k3,SaveToActiveFile:()=>S3,Socials:()=>D3,ToggleTheme:()=>A3});h();h();var tg=$e({active:!1});async function C3({title:t,description:e,actionLabel:o,color:r}){return new Promise(n=>{Ut.set(tg,{active:!0,onConfirm:()=>n(!0),onClose:()=>n(!1),onReject:()=>n(!1),title:t,description:e,actionLabel:o,color:r})})}var nt=v(S(),1),T3=()=>{let{t}=bt(),e=St(),o=En();return e.isActionEnabled(_a)?(0,nt.jsx)(Ro,{icon:aa,onSelect:async()=>{(!o.length||await C3({title:t("overwriteConfirm.modal.loadFromFile.title"),actionLabel:t("overwriteConfirm.modal.loadFromFile.button"),color:"warning",description:(0,nt.jsx)(oo,{i18nKey:"overwriteConfirm.modal.loadFromFile.description",bold:n=>(0,nt.jsx)("strong",{children:n}),br:()=>(0,nt.jsx)("br",{})})}))&&e.executeAction(_a)},"data-testid":"load-button",shortcut:yt("loadScene"),"aria-label":t("buttons.load"),children:t("buttons.load")}):null};T3.displayName="LoadScene";var S3=()=>{let{t}=bt(),e=St();return e.isActionEnabled(Kd)?(0,nt.jsx)(Ro,{shortcut:yt("saveScene"),"data-testid":"save-button",onSelect:()=>e.executeAction(Kd),icon:ax,"aria-label":`${t("buttons.save")}`,children:`${t("buttons.save")}`}):null};S3.displayName="SaveToActiveFile";var k3=()=>{let t=_e(),{t:e}=bt();return(0,nt.jsx)(Ro,{icon:nd,"data-testid":"image-export-button",onSelect:()=>t({openDialog:{name:"imageExport"}}),shortcut:yt("imageExport"),"aria-label":e("buttons.exportImage"),children:e("buttons.exportImage")})};k3.displayName="SaveAsImage";var I3=()=>{let t=_e(),{t:e}=bt();return(0,nt.jsx)(Ro,{icon:ud,"data-testid":"command-palette-button",onSelect:()=>t({openDialog:{name:"commandPalette"}}),shortcut:yt("commandPalette"),"aria-label":e("commandPalette.title"),children:e("commandPalette.title")})};I3.displayName="CommandPalette";var M3=()=>{let{t}=bt(),e=St();return(0,nt.jsx)(Ro,{"data-testid":"help-menu-item",icon:ia,onSelect:()=>e.executeAction(di),shortcut:"?","aria-label":t("helpDialog.title"),children:t("helpDialog.title")})};M3.displayName="Help";var _3=()=>{let{t}=bt(),e=Hr(vi,Pe);return St().isActionEnabled(Kr)?(0,nt.jsx)(Ro,{icon:Xo,onSelect:()=>e("clearCanvas"),"data-testid":"clear-canvas-button","aria-label":t("buttons.clearReset"),children:t("buttons.clearReset")}):null};_3.displayName="ClearCanvas";var A3=()=>{let{t}=bt(),e=ke(),o=St();return o.isActionEnabled(ii)?(0,nt.jsx)(Ro,{onSelect:r=>(r.preventDefault(),o.executeAction(ii)),icon:e.theme==="dark"?ed:Qc,"data-testid":"toggle-dark-mode",shortcut:yt("toggleTheme"),"aria-label":e.theme==="dark"?t("buttons.lightMode"):t("buttons.darkMode"),children:e.theme==="dark"?t("buttons.lightMode"):t("buttons.darkMode")}):null};A3.displayName="ToggleTheme";var L3=()=>{let{t}=bt(),e=ke(),o=St(),r=Sn();return e.viewModeEnabled||!r.UIOptions.canvasActions.changeViewBackgroundColor?null:(0,nt.jsxs)("div",{style:{marginTop:"0.5rem"},children:[(0,nt.jsx)("div",{"data-testid":"canvas-background-label",style:{fontSize:".75rem",marginBottom:".5rem"},children:t("labels.canvasBackground")}),(0,nt.jsx)("div",{style:{padding:"0 0.625rem"},children:o.renderAction("changeViewBackgroundColor")})]})};L3.displayName="ChangeCanvasBackground";var P3=()=>{let{t}=bt(),e=_e();return(0,nt.jsx)(Ro,{icon:Jn,onSelect:()=>{e({openDialog:{name:"jsonExport"}})},"data-testid":"json-export-button","aria-label":t("buttons.export"),children:t("buttons.export")})};P3.displayName="Export";var D3=()=>{let{t}=bt();return(0,nt.jsxs)(nt.Fragment,{children:[(0,nt.jsx)(za,{icon:ox,href:"https://github.com/excalidraw/excalidraw","aria-label":"GitHub",children:"GitHub"}),(0,nt.jsx)(za,{icon:nx,href:"https://x.com/excalidraw","aria-label":"X",children:t("labels.followUs")}),(0,nt.jsx)(za,{icon:rx,href:"https://discord.gg/UexuTaE","aria-label":"Discord",children:t("labels.discordChat")})]})};D3.displayName="Socials";var R3=({onSelect:t,isCollaborating:e})=>{let{t:o}=bt();return(0,nt.jsx)(Ro,{"data-testid":"collab-button",icon:id,className:z({"active-collab":e}),onSelect:t,children:o("labels.liveCollaboration")})};R3.displayName="LiveCollaborationTrigger";h();var Gm=v(H(),1);var N3=v(S(),1),qr=(t,e)=>{let o=$e(0),r=n=>{let{jotaiScope:i}=We(),[,a]=Ee(o,i),l=(0,Gm.useRef)({preferHost:!1,counter:0});return(0,Gm.useLayoutEffect)(()=>{let s=l.current;return a(c=>{let m=c+1;return s.counter=m,m}),()=>{a(c=>{let m=c-1;return s.counter=m,m||(s.preferHost=!1),m})}},[a]),n.__fallback||(l.current.preferHost=!0),!l.current.counter&&n.__fallback&&l.current.preferHost||l.current.counter>1&&n.__fallback?null:(0,N3.jsx)(e,{...n})};return r.displayName=t,r};var Jr=v(S(),1),sk=Object.assign(qr("MainMenu",({children:t,onSelect:e})=>{let{MainMenuTunnel:o}=We(),r=Me(),n=ke(),i=_e(),a=r.editor.isMobile?void 0:()=>i({openMenu:null});return(0,Jr.jsx)(o.In,{children:(0,Jr.jsxs)(Le,{open:n.openMenu==="canvas",children:[(0,Jr.jsx)(Le.Trigger,{onToggle:()=>{i({openMenu:n.openMenu==="canvas"?null:"canvas"})},"data-testid":"main-menu-trigger",className:"main-menu-trigger",children:td}),(0,Jr.jsxs)(Le.Content,{onClickOutside:a,onSelect:nn(e,()=>{i({openMenu:null})}),children:[t,r.editor.isMobile&&n.collaborators.size>0&&(0,Jr.jsxs)("fieldset",{className:"UserList-Wrapper",children:[(0,Jr.jsx)("legend",{children:g("labels.collaborators")}),(0,Jr.jsx)(Fm,{mobile:!0,collaborators:n.collaborators,userToFollow:n.userToFollow?.socketId||null})]})]})]})})}),{Trigger:Le.Trigger,Item:Le.Item,ItemLink:Le.ItemLink,ItemCustom:Le.ItemCustom,Group:Le.Group,Separator:Le.Separator,DefaultItems:og}),io=sk;h();h();var Qr=v(S(),1),Vm=({title:t,children:e,actionLabel:o,onClick:r})=>(0,Qr.jsxs)("div",{className:"OverwriteConfirm__Actions__Action",children:[(0,Qr.jsx)("h4",{children:t}),(0,Qr.jsx)("div",{className:"OverwriteConfirm__Actions__Action__content",children:e}),(0,Qr.jsx)(wr,{variant:"outlined",color:"muted",label:o,size:"large",fullWidth:!0,onClick:r})]}),ck=()=>{let{t}=bt(),e=St(),o=_e();return(0,Qr.jsx)(Vm,{title:t("overwriteConfirm.action.exportToImage.title"),actionLabel:t("overwriteConfirm.action.exportToImage.button"),onClick:()=>{e.executeAction(Vd,"ui",!0),o({openDialog:{name:"imageExport"}})},children:t("overwriteConfirm.action.exportToImage.description")})},dk=()=>{let{t}=bt(),e=St();return(0,Qr.jsx)(Vm,{title:t("overwriteConfirm.action.saveToDisk.title"),actionLabel:t("overwriteConfirm.action.saveToDisk.button"),onClick:()=>{e.executeAction(ts,"ui")},children:t("overwriteConfirm.action.saveToDisk.description")})},rg=Object.assign(({children:t})=>(0,Qr.jsx)("div",{className:"OverwriteConfirm__Actions",children:t}),{ExportToImage:ck,SaveToDisk:dk});var Fo=v(S(),1),Km=Object.assign(qr("OverwriteConfirmDialog",({children:t})=>{let{OverwriteConfirmDialogTunnel:e}=We(),[o,r]=Ee(tg,Pe);if(!o.active)return null;let n=()=>{o.onClose(),r(a=>({...a,active:!1}))},i=()=>{o.onConfirm(),r(a=>({...a,active:!1}))};return(0,Fo.jsx)(e.In,{children:(0,Fo.jsx)(Je,{onCloseRequest:n,title:!1,size:916,children:(0,Fo.jsxs)("div",{className:"OverwriteConfirm",children:[(0,Fo.jsx)("h3",{children:o.title}),(0,Fo.jsxs)("div",{className:`OverwriteConfirm__Description OverwriteConfirm__Description--color-${o.color}`,children:[(0,Fo.jsx)("div",{className:"OverwriteConfirm__Description__icon",children:qx}),(0,Fo.jsx)("div",{children:o.description}),(0,Fo.jsx)("div",{className:"OverwriteConfirm__Description__spacer"}),(0,Fo.jsx)(wr,{color:o.color,size:"large",label:o.actionLabel,onClick:i})]}),(0,Fo.jsx)(rg,{children:t})]})})})}),{Actions:rg,Action:Vm});h();var Bo=v(S(),1),B3=v(H(),1),O3=qr("DefaultSidebarTrigger",t=>{let{DefaultSidebarTriggerTunnel:e}=We();return(0,Bo.jsx)(e.In,{children:(0,Bo.jsx)(Xr.Trigger,{...t,className:"default-sidebar-trigger",name:Vo.name})})});O3.displayName="DefaultSidebarTrigger";var F3=({children:t,...e})=>{let{DefaultSidebarTabTriggersTunnel:o}=We();return(0,Bo.jsx)(o.In,{children:(0,Bo.jsx)(Xr.TabTriggers,{...e,children:t})})};F3.displayName="DefaultTabTriggers";var Ym=Object.assign(qr("DefaultSidebar",({children:t,className:e,onDock:o,docked:r,...n})=>{let i=ke(),a=_e(),{DefaultSidebarTabTriggersTunnel:l}=We();return(0,B3.createElement)(Xr,{...n,name:"default",key:"default",className:z("default-sidebar",e),docked:r??i.defaultSidebarDockedPreference,onDock:o===!1||!o&&r!=null?void 0:nn(o,s=>{a({defaultSidebarDockedPreference:s})})},(0,Bo.jsxs)(Xr.Tabs,{children:[(0,Bo.jsxs)(Xr.Header,{children:[n.__fallback&&(0,Bo.jsx)("div",{style:{color:"var(--color-primary)",fontSize:"1.2em",fontWeight:"bold",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",paddingRight:"1em"},children:g("toolBar.library")}),(0,Bo.jsx)(l.Out,{})]}),(0,Bo.jsx)(Xr.Tab,{tab:Xs,children:(0,Bo.jsx)(qE,{})}),t]}))}),{Trigger:O3,TabTriggers:F3});h();var vs=v(S(),1),mk="small",z3=t=>(0,vs.jsxs)("label",{className:z("ToolIcon ToolIcon__LaserPointer",`ToolIcon_size_${mk}`,{"is-mobile":t.isMobile}),title:`${t.title}`,children:[(0,vs.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:t.name,onChange:t.onChange,checked:t.checked,"aria-label":t.title,"data-testid":"toolbar-LaserPointer"}),(0,vs.jsx)("div",{className:"ToolIcon__icon",children:dd})]});h();var ig=v(H(),1);h();var H3=v(S(),1),Va=t=>(0,H3.jsx)("p",{className:"excalidraw__paragraph",style:t.style,children:t.children});h();var ng=v(H(),1);var U3=v(S(),1),$3=t=>{let e=_e(),o=(0,ng.useRef)(null),r=(0,ng.useRef)(0);return(0,U3.jsx)(Hm,{ref:o,className:"ttd-dialog-tabs-root",value:t.tab,onValueChange:n=>{if(!n)return;let i=o.current?.closest(".Modal__content");if(i){let a=i.offsetHeight||0;a>r.current&&(r.current=a,i.style.minHeight=`min(${r.current}px, 100%)`)}t.dialog==="settings"&&Nu(["text-to-diagram","diagram-to-code"],n)?e({openDialog:{name:t.dialog,tab:n,source:"settings"}}):t.dialog==="ttd"&&Nu(["text-to-diagram","mermaid"],n)&&e({openDialog:{name:t.dialog,tab:n}})},children:t.children})};$3.displayName="TTDDialogTabs";var Zm=$3;h();var W3=v(S(),1),Ka=({tab:t,children:e,...o})=>(0,W3.jsx)(Wm,{...o,value:t,children:e});Ka.displayName="TTDDialogTab";var ht=v(S(),1),G3=t=>{let[e,o]=(0,ig.useState)(t.openAIKey||""),[r,n]=(0,ig.useState)(t.isPersisted),i=ke(),a=()=>{t.onConfirm(e.trim(),r)};return i.openDialog?.name!=="settings"?null:(0,ht.jsx)(Je,{onCloseRequest:()=>{t.onClose(),t.onConfirm(e.trim(),r)},title:(0,ht.jsxs)("div",{style:{display:"flex"},children:["Wireframe to Code (AI)"," ",(0,ht.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0.1rem 0.5rem",marginLeft:"1rem",fontSize:14,borderRadius:"12px",color:"#000",background:"pink"},children:"Experimental"})]}),className:"MagicSettings",autofocus:!1,children:(0,ht.jsx)(Zm,{dialog:"settings",tab:i.openDialog.tab,children:(0,ht.jsxs)(Ka,{tab:"diagram-to-code",children:[(0,ht.jsxs)(Va,{children:["For the diagram-to-code feature we use"," ",(0,ht.jsx)(_n,{icon:Fl}),"OpenAI."]}),(0,ht.jsxs)(Va,{children:["While the OpenAI API is in beta, its use is strictly limited \u2014 as such we require you use your own API key. You can create an"," ",(0,ht.jsx)("a",{href:"https://platform.openai.com/login?launch",rel:"noopener noreferrer",target:"_blank",children:"OpenAI account"}),", add a small credit (5 USD minimum), and"," ",(0,ht.jsx)("a",{href:"https://platform.openai.com/api-keys",rel:"noopener noreferrer",target:"_blank",children:"generate your own API key"}),"."]}),(0,ht.jsx)(Va,{children:"Your OpenAI key does not leave the browser, and you can also set your own limit in your OpenAI account dashboard if needed."}),(0,ht.jsx)(Em,{isRedacted:!0,value:e,placeholder:"Paste your API key here",label:"OpenAI API key",onChange:l=>{o(l),t.onChange(l.trim(),r)},selectOnRender:!0,onKeyDown:l=>l.key===T.ENTER&&a()}),(0,ht.jsx)(Va,{children:"By default, your API token is not persisted anywhere so you'll need to insert it again after reload. But, you can persist locally in your browser below."}),(0,ht.jsx)(ci,{checked:r,onChange:n,children:"Persist API key in browser storage"}),(0,ht.jsxs)(Va,{children:["Once API key is set, you can use the ",(0,ht.jsx)(_n,{icon:sa})," ","tool to wrap your elements in a frame that will then allow you to turn it into code. This dialog can be accessed using the"," ",(0,ht.jsx)("b",{children:"AI Settings"})," ",(0,ht.jsx)(_n,{icon:Fl}),"."]}),(0,ht.jsx)(wr,{className:"MagicSettings__confirm",size:"large",label:"Confirm",onClick:a})]})})})};h();h();var rr=v(H(),1);h();var uk=({canvasRef:t,setError:e})=>{let o=t.current;if(!o)return;let r=o.parentElement;r&&(r.style.background="",e(null),o.replaceChildren())},jm=async({canvasRef:t,mermaidToExcalidrawLib:e,mermaidDefinition:o,setError:r,data:n})=>{let i=t.current,a=i?.parentElement;if(!(!i||!a)){if(!o){uk({canvasRef:t,setError:r});return}try{let l=await e.api,s;try{s=await l.parseMermaidToExcalidraw(o,{fontSize:Ir})}catch{s=await l.parseMermaidToExcalidraw(o.replace(/"/g,"'"),{fontSize:Ir})}let{elements:c,files:m}=s;r(null),n.current={elements:Es(c,{regenerateIds:!0}),files:m};let d=await Zn({elements:n.current.elements,files:n.current.files,exportPadding:on,maxWidthOrHeight:Math.max(a.offsetWidth,a.offsetHeight)*window.devicePixelRatio});try{await Fr(d)}catch(f){throw f.name==="CANVAS_POSSIBLY_TOO_BIG"?new Error(g("canvasError.canvasTooBig")):f}a.style.background="var(--default-bg-color)",i.replaceChildren(d)}catch(l){throw a.style.background="var(--default-bg-color)",o&&r(l),l}}},ys=t=>{uo.set(Eo.MERMAID_TO_EXCALIDRAW,t)},Xm=({app:t,data:e,text:o,shouldSaveMermaidDataToStorage:r})=>{let{elements:n,files:i}=e.current;n.length&&(t.addElementsFromPasteOrLibrary({elements:n,files:i,position:"center",fitToContent:!0}),t.setOpenDialog(null),r&&o&&ys(o))};h();var V3=v(S(),1),qm=({children:t})=>(0,V3.jsx)("div",{className:"ttd-dialog-panels",children:t});h();var Tr=v(S(),1),Ya=({label:t,children:e,panelAction:o,panelActionDisabled:r=!1,onTextSubmitInProgess:n,renderTopRight:i,renderSubmitShortcut:a,renderBottomRight:l})=>(0,Tr.jsxs)("div",{className:"ttd-dialog-panel",children:[(0,Tr.jsxs)("div",{className:"ttd-dialog-panel__header",children:[(0,Tr.jsx)("label",{children:t}),i?.()]}),e,(0,Tr.jsxs)("div",{className:z("ttd-dialog-panel-button-container",{invisible:!o}),style:{display:"flex",alignItems:"center"},children:[(0,Tr.jsxs)(yr,{className:"ttd-dialog-panel-button",onSelect:o?o.action:()=>{},disabled:r||n,children:[(0,Tr.jsxs)("div",{className:z({invisible:n}),children:[o?.label,o?.icon&&(0,Tr.jsx)("span",{children:o.icon})]}),n&&(0,Tr.jsx)(Nt,{})]}),!r&&!n&&a?.(),l?.()]})]});h();var ws=v(H(),1);var K3=v(S(),1),Jm=({input:t,placeholder:e,onChange:o,onKeyboardSubmit:r})=>{let n=(0,ws.useRef)(null),i=(0,ws.useRef)(r);return i.current=r,(0,ws.useEffect)(()=>{if(!i.current)return;let a=n.current;if(a){let l=s=>{s[T.CTRL_OR_CMD]&&s.key===T.ENTER&&(s.preventDefault(),i.current?.())};return a.addEventListener("keydown",l),()=>{a.removeEventListener("keydown",l)}}},[]),(0,K3.jsx)("textarea",{className:"ttd-dialog-input",onChange:o,value:t,placeholder:e,autoFocus:!0,ref:n})};h();var Nn=v(S(),1),pk=({error:t})=>(0,Nn.jsxs)("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",(0,Nn.jsx)("p",{children:t})]}),Qm=({error:t,canvasRef:e,loaded:o})=>(0,Nn.jsxs)("div",{className:"ttd-dialog-output-wrapper",children:[t&&(0,Nn.jsx)(pk,{error:t.message}),o?(0,Nn.jsx)("div",{ref:e,style:{opacity:t?"0.15":1},className:"ttd-dialog-output-canvas-container"}):(0,Nn.jsx)(Nt,{size:"2rem"})]});h();var Cs=v(S(),1),eu=()=>(0,Cs.jsxs)("div",{className:"ttd-dialog-submit-shortcut",children:[(0,Cs.jsx)("div",{className:"ttd-dialog-submit-shortcut__key",children:N("CtrlOrCmd")}),(0,Cs.jsx)("div",{className:"ttd-dialog-submit-shortcut__key",children:N("Enter")})]});var Yt=v(S(),1),fk=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,Y3=ll(ys,300),hk=({mermaidToExcalidrawLib:t})=>{let[e,o]=(0,rr.useState)(()=>uo.get(Eo.MERMAID_TO_EXCALIDRAW)||fk),r=(0,rr.useDeferredValue)(e.trim()),[n,i]=(0,rr.useState)(null),a=(0,rr.useRef)(null),l=(0,rr.useRef)({elements:[],files:null}),s=so();(0,rr.useEffect)(()=>{jm({canvasRef:a,data:l,mermaidToExcalidrawLib:t,setError:i,mermaidDefinition:r}).catch(()=>{}),Y3(r)},[r,t]),(0,rr.useEffect)(()=>()=>{Y3.flush()},[]);let c=()=>{Xm({app:s,data:l,text:e,shouldSaveMermaidDataToStorage:!0})};return(0,Yt.jsxs)(Yt.Fragment,{children:[(0,Yt.jsx)("div",{className:"ttd-dialog-desc",children:(0,Yt.jsx)(oo,{i18nKey:"mermaid.description",flowchartLink:m=>(0,Yt.jsx)("a",{href:"https://mermaid.js.org/syntax/flowchart.html",children:m}),sequenceLink:m=>(0,Yt.jsx)("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",children:m}),classLink:m=>(0,Yt.jsx)("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",children:m})})}),(0,Yt.jsxs)(qm,{children:[(0,Yt.jsx)(Ya,{label:g("mermaid.syntax"),children:(0,Yt.jsx)(Jm,{input:e,placeholder:"Write Mermaid diagram defintion here...",onChange:m=>o(m.target.value),onKeyboardSubmit:()=>{c()}})}),(0,Yt.jsx)(Ya,{label:g("mermaid.preview"),panelAction:{action:()=>{c()},label:g("mermaid.button"),icon:la},renderSubmitShortcut:()=>(0,Yt.jsx)(eu,{}),children:(0,Yt.jsx)(Qm,{canvasRef:a,loaded:t.loaded,error:n})})]})]})},Z3=hk;var nr=v(H(),1);h();var j3=v(S(),1),ag=({children:t,...e})=>(0,j3.jsx)($m,{className:"ttd-dialog-triggers",...e,children:t});ag.displayName="TTDDialogTabTriggers";h();var lg=v(S(),1),tu=({children:t,tab:e,onSelect:o,...r})=>(0,lg.jsx)(Um,{value:e,asChild:!0,onSelect:o,children:(0,lg.jsx)("button",{type:"button",className:"ttd-dialog-tab-trigger",...r,children:t})});tu.displayName="TTDDialogTabTrigger";var je=v(S(),1),sg=3,Za=1e3,gk=$e(null),bk=$e(null),cg=t=>{let e=ke();return e.openDialog?.name!=="ttd"?null:(0,je.jsx)(xk,{...t,tab:e.openDialog.tab})},xk=qr("TTDDialogBase",({tab:t,...e})=>{let o=so(),r=_e(),n=(0,nr.useRef)(null),[i,a]=Ee(bk),[l,s]=(0,nr.useState)(i?.prompt??""),c=l.trim(),m=I=>{s(I.target.value),a(A=>({generatedResponse:A?.generatedResponse??null,prompt:I.target.value}))},[d,f]=(0,nr.useState)(!1),[p,b]=Ee(gk),x=async()=>{if(c.length>Za||c.length<sg||d||p?.rateLimitRemaining===0||"__fallback"in e){c.length<sg&&_(new Error(`Prompt is too short (min ${sg} characters)`)),c.length>Za&&_(new Error(`Prompt is too long (max ${Za} characters)`));return}try{f(!0),ve("ai","generate","ttd");let{generatedResponse:I,error:A,rateLimit:P,rateLimitRemaining:F}=await e.onTextSubmit(c);if(typeof I=="string"&&a(D=>({generatedResponse:I,prompt:D?.prompt??null})),Ou(P)&&Ou(F)&&b({rateLimit:P,rateLimitRemaining:F}),A){_(A);return}if(!I){_(new Error("Generation failed"));return}try{await jm({canvasRef:n,data:C,mermaidToExcalidrawLib:w,setError:_,mermaidDefinition:I}),ve("ai","mermaid parse success","ttd")}catch(D){console.info(`%cTTD mermaid render errror: ${D.message}`,"color: red"),console.info(`>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
TTD mermaid definition render errror: ${D.message}`,"color: yellow"),ve("ai","mermaid parse failed","ttd"),_(new Error("Generated an invalid diagram :(. You may also try a different prompt."))}}catch(I){let A=I.message;(!A||A==="Failed to fetch")&&(A="Request failed"),_(new Error(A))}finally{f(!1)}},y=(0,nr.useRef)(x);y.current=x;let[w,k]=(0,nr.useState)({loaded:!1,api:import("./excalidraw-assets/dist-CUYI2DTX.js")});(0,nr.useEffect)(()=>{(async()=>{await w.api,k(A=>({...A,loaded:!0}))})()},[w.api]);let C=(0,nr.useRef)({elements:[],files:null}),[M,_]=(0,nr.useState)(null);return(0,je.jsx)(Je,{className:"ttd-dialog",onCloseRequest:()=>{o.setOpenDialog(null)},size:1200,title:!1,...e,autofocus:!1,children:(0,je.jsxs)(Zm,{dialog:"ttd",tab:t,children:["__fallback"in e&&e.__fallback?(0,je.jsx)("p",{className:"dialog-mermaid-title",children:g("mermaid.title")}):(0,je.jsxs)(ag,{children:[(0,je.jsx)(tu,{tab:"text-to-diagram",children:(0,je.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[g("labels.textToDiagram"),(0,je.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"1px 6px",marginLeft:"10px",fontSize:10,borderRadius:"12px",background:"pink",color:"#000"},children:"AI Beta"})]})}),(0,je.jsx)(tu,{tab:"mermaid",children:"Mermaid"})]}),(0,je.jsx)(Ka,{className:"ttd-dialog-content",tab:"mermaid",children:(0,je.jsx)(Z3,{mermaidToExcalidrawLib:w})}),!("__fallback"in e)&&(0,je.jsxs)(Ka,{className:"ttd-dialog-content",tab:"text-to-diagram",children:[(0,je.jsx)("div",{className:"ttd-dialog-desc",children:"Currently we use Mermaid as a middle step, so you'll get best results if you describe a diagram, workflow, flow chart, and similar."}),(0,je.jsxs)(qm,{children:[(0,je.jsx)(Ya,{label:g("labels.prompt"),panelAction:{action:x,label:"Generate",icon:la},onTextSubmitInProgess:d,panelActionDisabled:c.length>Za||p?.rateLimitRemaining===0,renderTopRight:()=>p?(0,je.jsxs)("div",{className:"ttd-dialog-rate-limit",style:{fontSize:12,marginLeft:"auto",color:p.rateLimitRemaining===0?"var(--color-danger)":void 0},children:[p.rateLimitRemaining," requests left today"]}):null,renderSubmitShortcut:()=>(0,je.jsx)(eu,{}),renderBottomRight:()=>{if(typeof i?.generatedResponse=="string")return(0,je.jsxs)("div",{className:"excalidraw-link",style:{marginLeft:"auto",fontSize:14},onClick:()=>{typeof i?.generatedResponse=="string"&&(ys(i.generatedResponse),r({openDialog:{name:"ttd",tab:"mermaid"}}))},children:["View as Mermaid",(0,je.jsx)(_n,{icon:la})]});let I=c.length/Za;return I>.8?(0,je.jsxs)("div",{style:{marginLeft:"auto",fontSize:12,fontFamily:"monospace",color:I>1?"var(--color-danger)":void 0},children:["Length: ",c.length,"/",Za]}):null},children:(0,je.jsx)(Jm,{onChange:m,input:l,placeholder:"Describe what you want to see...",onKeyboardSubmit:()=>{y.current()}})}),(0,je.jsx)(Ya,{label:"Preview",panelAction:{action:()=>{console.info("Panel action clicked"),Xm({app:o,data:C})},label:"Insert",icon:la},children:(0,je.jsx)(Qm,{canvasRef:n,error:M,loaded:w.loaded})})]})]})]})})});var X=v(S(),1),vk=({UIOptions:t})=>(0,X.jsxs)(io,{__fallback:!0,children:[(0,X.jsx)(io.DefaultItems.LoadScene,{}),(0,X.jsx)(io.DefaultItems.SaveToActiveFile,{}),t.canvasActions.export&&(0,X.jsx)(io.DefaultItems.Export,{}),t.canvasActions.saveAsImage&&(0,X.jsx)(io.DefaultItems.SaveAsImage,{}),(0,X.jsx)(io.DefaultItems.Help,{}),(0,X.jsx)(io.DefaultItems.ClearCanvas,{}),(0,X.jsx)(io.Separator,{}),(0,X.jsx)(io.Group,{title:"Excalidraw links",children:(0,X.jsx)(io.DefaultItems.Socials,{})}),(0,X.jsx)(io.Separator,{}),(0,X.jsx)(io.DefaultItems.ToggleTheme,{}),(0,X.jsx)(io.DefaultItems.ChangeCanvasBackground,{})]}),yk=()=>(0,X.jsxs)(Km,{__fallback:!0,children:[(0,X.jsx)(Km.Actions.SaveToDisk,{}),(0,X.jsx)(Km.Actions.ExportToImage,{})]}),Ek=({actionManager:t,appState:e,files:o,setAppState:r,elements:n,canvas:i,onLockToggle:a,onHandToolToggle:l,onPenModeToggle:s,showExitZenModeBtn:c,renderTopRightUI:m,renderCustomStats:d,UIOptions:f,onExportImage:p,renderWelcomeScreen:b,children:x,app:y,isCollaborating:w,openAIKey:k,isOpenAIKeyPersisted:C,onOpenAIAPIKeyChange:M,onMagicSettingsConfirm:_})=>{let I=Me(),A=ww(),[P,F]=Ee(yn,Pe),D=()=>f.canvasActions.export?(0,X.jsx)(o3,{elements:n,appState:e,files:o,actionManager:t,exportOpts:f.canvasActions.export,canvas:i,setAppState:r}):null,W=()=>!f.canvasActions.saveAsImage||e.openDialog?.name!=="imageExport"?null:(0,X.jsx)(Ww,{elements:n,appState:e,files:o,actionManager:t,onExportImage:p,onCloseRequest:()=>r({openDialog:null}),name:y.getName()}),O=()=>(0,X.jsxs)("div",{style:{position:"relative"},children:[(0,X.jsx)(A.MainMenuTunnel.Out,{}),b&&(0,X.jsx)(A.WelcomeScreenMenuHintTunnel.Out,{})]}),U=()=>(0,X.jsx)(An,{heading:"selectedShapeActions",className:z("selected-shape-actions zen-mode-transition",{"transition-left":e.zenModeEnabled}),children:(0,X.jsx)(Bt,{className:Ws.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:`${e.height-166}px`},children:(0,X.jsx)(Tm,{appState:e,elementsMap:y.scene.getNonDeletedElementsMap(),renderAction:t.renderAction})})}),ee=()=>{let ce=qi(e,n);return(0,X.jsx)(Lm,{side:"top",children:(0,X.jsxs)("div",{className:"App-menu App-menu_top",children:[(0,X.jsxs)(At.Col,{gap:6,className:z("App-menu_top__left"),children:[O(),ce&&U()]}),!e.viewModeEnabled&&(0,X.jsx)(An,{heading:"shapes",className:"shapes-section",children:oe=>(0,X.jsxs)("div",{style:{position:"relative"},children:[b&&(0,X.jsx)(A.WelcomeScreenToolbarHintTunnel.Out,{}),(0,X.jsx)(At.Col,{gap:4,align:"start",children:(0,X.jsxs)(At.Row,{gap:1,className:z("App-toolbar-container",{"zen-mode":e.zenModeEnabled}),children:[(0,X.jsxs)(Bt,{padding:1,className:z("App-toolbar",{"zen-mode":e.zenModeEnabled}),children:[(0,X.jsx)(Pm,{appState:e,isMobile:I.editor.isMobile,device:I,app:y}),oe,(0,X.jsxs)(At.Row,{gap:1,children:[(0,X.jsx)(Rm,{zenModeEnabled:e.zenModeEnabled,checked:e.penMode,onChange:()=>s(null),title:g("toolBar.penMode"),penDetected:e.penDetected}),(0,X.jsx)(Dm,{checked:e.activeTool.locked,onChange:a,title:g("toolBar.lock")}),(0,X.jsx)("div",{className:"App-toolbar__divider"}),(0,X.jsx)(Om,{checked:Rr(e),onChange:()=>l(),title:g("toolBar.hand"),isMobile:!0}),(0,X.jsx)(Sm,{appState:e,activeTool:e.activeTool,UIOptions:f,app:y})]})]}),w&&(0,X.jsx)(Bt,{style:{marginLeft:8,alignSelf:"center",height:"fit-content"},children:(0,X.jsx)(z3,{title:g("toolBar.laser"),checked:e.activeTool.type===mt.laser,onChange:()=>y.setActiveTool({type:mt.laser}),isMobile:!0})})]})})]})}),(0,X.jsxs)("div",{className:z("layer-ui__wrapper__top-right zen-mode-transition",{"transition-right":e.zenModeEnabled}),children:[e.collaborators.size>0&&(0,X.jsx)(Fm,{collaborators:e.collaborators,userToFollow:e.userToFollow?.socketId||null}),m?.(I.editor.isMobile,e),!e.viewModeEnabled&&(!pe||e.openSidebar?.name!==Vo.name)&&(0,X.jsx)(A.DefaultSidebarTriggerTunnel.Out,{})]})]})})},K=()=>(0,X.jsx)(Ym,{__fallback:!0,onDock:ce=>{ve("sidebar",`toggleDock (${ce?"dock":"undock"})`,`(${I.editor.isMobile?"mobile":"desktop"})`)}}),pe=Rl(xs,Pe),me=(0,X.jsxs)(X.Fragment,{children:[x,(0,X.jsx)(vk,{UIOptions:f}),(0,X.jsx)(Ym.Trigger,{__fallback:!0,icon:Jc,title:rn(g("toolBar.library")),onToggle:ce=>{ce&&ve("sidebar",`${Vo.name} (open)`,`button (${I.editor.isMobile?"mobile":"desktop"})`)},tab:Vo.defaultTab,children:g("toolBar.library")}),(0,X.jsx)(yk,{}),e.openDialog?.name==="ttd"&&(0,X.jsx)(cg,{__fallback:!0}),e.isLoading&&(0,X.jsx)(Xc,{delay:250}),e.errorMessage&&(0,X.jsx)($w,{onClose:()=>r({errorMessage:null}),children:e.errorMessage}),P&&!I.editor.isMobile&&(0,X.jsx)(Ey,{colorPickerType:P.colorPickerType,onCancel:()=>{F(null)},onChange:(ce,oe,R,{altKey:B})=>{if(!(ce!=="elementBackground"&&ce!=="elementStroke"))if(R.length){for(let V of R)te(V,{[B&&P.swapPreviewOnAlt?ce==="elementBackground"?"strokeColor":"backgroundColor":ce==="elementBackground"?"backgroundColor":"strokeColor"]:oe},!1),mr.delete(V);ao.getScene(R[0])?.informMutation()}else r(ce==="elementBackground"?{currentItemBackgroundColor:oe}:{currentItemStrokeColor:oe})},onSelect:(ce,oe)=>{F(R=>R?.keepOpenOnAlt&&oe.altKey?R:null),P?.onSelect?.(ce,oe)}}),e.openDialog?.name==="help"&&(0,X.jsx)(Qw,{onClose:()=>{r({openDialog:null})}}),e.openDialog?.name==="settings"&&(0,X.jsx)(G3,{openAIKey:k,isPersisted:C,onChange:M,onConfirm:(ce,oe)=>{let R=e.openDialog?.name==="settings"?e.openDialog?.source:"settings";r({openDialog:null},()=>{_(ce,oe,R)})},onClose:()=>{r({openDialog:null})}}),(0,X.jsx)(_w,{}),(0,X.jsx)(A.OverwriteConfirmDialogTunnel.Out,{}),W(),D(),e.pasteDialog.shown&&(0,X.jsx)(qw,{setAppState:r,appState:e,onClose:()=>r({pasteDialog:{shown:!1,data:null}})}),I.editor.isMobile&&(0,X.jsx)(jw,{app:y,appState:e,elements:n,actionManager:t,renderJSONExportDialog:D,renderImageExportDialog:W,setAppState:r,onLockToggle:a,onHandToolToggle:l,onPenModeToggle:s,renderTopRightUI:m,renderCustomStats:d,renderSidebars:K,device:I,renderWelcomeScreen:b,UIOptions:f}),!I.editor.isMobile&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("div",{className:"layer-ui__wrapper",style:e.openSidebar&&pe&&I.editor.canFitSidebar?{width:`calc(100% - ${g1}px)`}:{},children:[b&&(0,X.jsx)(A.WelcomeScreenCenterTunnel.Out,{}),ee(),(0,X.jsx)(a3,{appState:e,actionManager:t,showExitZenModeBtn:c,renderWelcomeScreen:b}),e.showStats&&(0,X.jsx)(Nm,{appState:e,setAppState:r,elements:n,onClose:()=>{t.executeAction(Tn)},renderCustomStats:d}),e.scrolledOutside&&(0,X.jsx)("button",{className:"scroll-back-to-content",onClick:()=>{r(ce=>({...Xn(n,ce)}))},children:g("buttons.scrollBackToContent")})]}),K()]})]});return(0,X.jsx)(Nf.Provider,{value:e,children:(0,X.jsx)(Wc,{scope:A.jotaiScope,children:(0,X.jsx)(Sh.Provider,{value:A,children:me})})})},X3=t=>{let{suggestedBindings:e,startBoundElement:o,cursorButton:r,scrollX:n,scrollY:i,...a}=t;return a},wk=(t,e)=>{if(t.children!==e.children)return!1;let{canvas:o,appState:r,...n}=t,{canvas:i,appState:a,...l}=e;return Dt(X3(r),X3(a),{selectedElementIds:Dt,selectedGroupIds:Dt})&&Dt(n,l)},J3=q3.default.memo(Ek,wk);h();var ja=v(H(),1);var Ts=v(S(),1),Ck=5e3,Q3=({message:t,onClose:e,closable:o=!1,duration:r=Ck,style:n})=>{let i=(0,ja.useRef)(0),a=r!==1/0,l=(0,ja.useCallback)(()=>{a&&(i.current=window.setTimeout(()=>e(),r))},[e,r,a]);return(0,ja.useEffect)(()=>{if(a)return l(),()=>clearTimeout(i.current)},[l,t,r,a]),(0,Ts.jsxs)("div",{className:"Toast",onMouseEnter:a?()=>clearTimeout(i?.current):void 0,onMouseLeave:a?l:void 0,style:n,children:[(0,Ts.jsx)("p",{className:"Toast__message",children:t}),o&&(0,Ts.jsx)(se,{icon:Mo,"aria-label":"close",type:"icon",onClick:e,className:"close"})]})};h();var dg=$({name:"viewMode",label:"labels.viewMode",paletteName:"Toggle view mode",icon:ca,viewMode:!0,trackEvent:{category:"canvas",predicate:t=>!t.viewModeEnabled},perform(t,e){return{appState:{...e,viewModeEnabled:!this.checked(e)},commitToHistory:!1}},checked:t=>t.viewModeEnabled,predicate:(t,e,o)=>typeof o.viewModeEnabled>"u",keyTest:t=>!t[T.CTRL_OR_CMD]&&t.altKey&&t.code===fe.R});var z5=v(Eh(),1);h();var ou=class t{scene;onSceneUpdated;constructor({scene:e,onSceneUpdated:o}){this.scene=e,this.onSceneUpdated=o}static loadedFontFaces=new Set;onFontsLoaded=e=>{if(e.every(r=>{let n=`${r.family}-${r.style}-${r.weight}`;return t.loadedFontFaces.has(n)?!0:(t.loadedFontFaces.add(n),!1)}))return!1;let o=!1;this.scene.mapElements(r=>le(r)&&!gt(r)?(mr.delete(r),o=!0,ue(r,{...Tb(r,Pr(r,this.scene.getNonDeletedElementsMap()),this.scene.getNonDeletedElementsMap())})):r),o&&this.onSceneUpdated()};loadFontsForElements=async e=>{let o=await Promise.all([...new Set(e.filter(r=>le(r)).map(r=>r.fontFamily))].map(r=>{let n=Ko({fontFamily:r,fontSize:16});if(!document.fonts?.check?.(n))return document.fonts?.load?.(n)}));this.onFontsLoaded(o.flat().filter(Boolean))}};h();var e5=(t,e)=>{let o=e.scene.getSelectedElements(t);return o.length===1&&Te(o[0])},t5=$({name:"selectAllElementsInFrame",label:"labels.selectAllElementsInFrame",trackEvent:{category:"canvas"},perform:(t,e,o,r)=>{let n=r.scene.getSelectedElements(e).at(0)||null;if(Te(n)){let i=un(be(t),n.id).filter(a=>!(a.type==="text"&&a.containerId));return{elements:t,appState:{...e,selectedElementIds:i.reduce((a,l)=>(a[l.id]=!0,a),{})},commitToHistory:!1}}return{elements:t,appState:e,commitToHistory:!1}},predicate:(t,e,o,r)=>e5(e,r)}),o5=$({name:"removeAllElementsFromFrame",label:"labels.removeAllElementsFromFrame",trackEvent:{category:"history"},perform:(t,e,o,r)=>{let n=r.scene.getSelectedElements(e).at(0)||null;return Te(n)?{elements:a0(t,n),appState:{...e,selectedElementIds:{[n.id]:!0}},commitToHistory:!0}:{elements:t,appState:e,commitToHistory:!1}},predicate:(t,e,o,r)=>e5(e,r)}),Pre=$({name:"updateFrameRendering",label:"labels.updateFrameRendering",viewMode:!0,trackEvent:{category:"canvas"},perform:(t,e)=>({elements:t,appState:{...e,frameRendering:{...e.frameRendering,enabled:!e.frameRendering.enabled}},commitToHistory:!1}),checked:t=>t.frameRendering.enabled}),Dre=$({name:"setFrameAsActiveTool",label:"toolBar.frame",trackEvent:{category:"toolbar"},icon:sd,viewMode:!1,perform:(t,e,o,r)=>{let n=tt(e,{type:"frame"});return Yo(r.interactiveCanvas,{...e,activeTool:n}),{elements:t,appState:{...e,activeTool:tt(e,{type:"frame"})},commitToHistory:!1}},keyTest:t=>!t[T.CTRL_OR_CMD]&&!t.shiftKey&&!t.altKey&&t.key.toLocaleLowerCase()===T.F});h();var Tk=8,r5=99999,ru=t=>Tk/t,zo=class t{static referenceSnapPoints=null;static visibleGaps=null;static setReferenceSnapPoints=e=>{t.referenceSnapPoints=e};static getReferenceSnapPoints=()=>t.referenceSnapPoints;static setVisibleGaps=e=>{t.visibleGaps=e};static getVisibleGaps=()=>t.visibleGaps;static destroy=()=>{t.referenceSnapPoints=null,t.visibleGaps=null}},en=({event:t,appState:e,selectedElements:o})=>t?e.objectsSnapModeEnabled&&!t[T.CTRL_OR_CMD]||!e.objectsSnapModeEnabled&&t[T.CTRL_OR_CMD]&&e.gridSize===null:o.length===1&&o[0].type==="arrow"?!1:e.objectsSnapModeEnabled,Sk=(t,e,o=.01)=>Math.abs(t-e)<=o,Ss=(t,e,{omitCenter:o,boundingBoxCorners:r,dragOffset:n}={omitCenter:!1,boundingBoxCorners:!1})=>{let i=[];if(t.length===1){let a=t[0],[l,s,c,m,d,f]=Co(a,e);n&&(l+=n.x,c+=n.x,d+=n.x,s+=n.y,m+=n.y,f+=n.y);let p=(c-l)/2,b=(m-s)/2;if((a.type==="diamond"||a.type==="ellipse")&&!r){let x=Lr([l,s+b],[d,f],a.angle),y=Lr([l+p,s],[d,f],a.angle),w=Lr([c,s+b],[d,f],a.angle),k=Lr([l+p,m],[d,f],a.angle);i=o?[x,y,w,k]:[x,y,w,k,[d,f]]}else{let x=Lr([l,s],[d,f],a.angle),y=Lr([c,s],[d,f],a.angle),w=Lr([l,m],[d,f],a.angle),k=Lr([c,m],[d,f],a.angle);i=o?[x,y,w,k]:[x,y,w,k,[d,f]]}}else if(t.length>1){let[a,l,s,c]=gc(t,n??{x:0,y:0}),m=s-a,d=c-l,f=[a,l],p=[s,l],b=[a,c],x=[s,c],y=[a+m/2,l+d/2];i=o?[f,p,b,x]:[f,p,b,x,y]}return i.map(a=>[Qe(a[0]),Qe(a[1])])},a5=(t,e,o,r)=>{let n=e.filter(i=>Te(i)).map(i=>i.id);return bp(t,e,o,r).filter(i=>!(i.frameId&&n.includes(i.frameId)))},l5=(t,e,o,r)=>{let n=a5(t,e,o,r),i=Kn(n,r).filter(d=>!(d.length===1&&gt(d[0]))).map(d=>Ke(d).map(f=>Qe(f))),a=i.sort((d,f)=>d[0]-f[0]),l=[],s=0;e:for(let d=0;d<a.length;d++){let f=a[d];for(let p=d+1;p<a.length;p++){if(++s>r5)break e;let b=a[p],[,x,y,w]=f,[k,C,,M]=b;y<k&&hl([x,w],[C,M])&&l.push({startBounds:f,endBounds:b,startSide:[[y,x],[y,w]],endSide:[[k,C],[k,M]],length:k-y,overlap:gl([x,w],[C,M])})}}let c=i.sort((d,f)=>d[1]-f[1]),m=[];s=0;e:for(let d=0;d<c.length;d++){let f=c[d];for(let p=d+1;p<c.length;p++){if(++s>r5)break e;let b=c[p],[x,,y,w]=f,[k,C,M]=b;w<C&&hl([x,y],[k,M])&&m.push({startBounds:f,endBounds:b,startSide:[[x,w],[y,w]],endSide:[[k,C],[M,C]],length:C-w,overlap:gl([x,y],[k,M])})}}return{horizontalGaps:l,verticalGaps:m}},n5=(t,e,o,r,n,i,a)=>{if(!en({appState:o,event:r,selectedElements:t}))return[];if(t.length===0)return[];let l=zo.getVisibleGaps();if(l){let{horizontalGaps:s,verticalGaps:c}=l,[m,d,f,p]=gc(t,e).map(y=>Qe(y)),b=(m+f)/2,x=(d+p)/2;for(let y of s){if(!hl([d,p],y.overlap))continue;let w=y.startSide[0][0]+y.length/2,k=Qe(w-b);if(y.length>f-m&&Math.abs(k)<=a.x){Math.abs(k)<a.x&&(n.length=0),a.x=Math.abs(k);let D={type:"gap",direction:"center_horizontal",gap:y,offset:k};n.push(D);continue}let[,,M]=y.endBounds,_=m-M,I=Qe(y.length-_);if(Math.abs(I)<=a.x){Math.abs(I)<a.x&&(n.length=0),a.x=Math.abs(I);let D={type:"gap",direction:"side_right",gap:y,offset:I};n.push(D);continue}let[A,,,]=y.startBounds,P=A-f,F=Qe(P-y.length);if(Math.abs(F)<=a.x){Math.abs(F)<a.x&&(n.length=0),a.x=Math.abs(F);let D={type:"gap",direction:"side_left",gap:y,offset:F};n.push(D);continue}}for(let y of c){if(!hl([m,f],y.overlap))continue;let w=y.startSide[0][1]+y.length/2,k=Qe(w-x);if(y.length>p-d&&Math.abs(k)<=a.y){Math.abs(k)<a.y&&(i.length=0),a.y=Math.abs(k);let D={type:"gap",direction:"center_vertical",gap:y,offset:k};i.push(D);continue}let[,M,,]=y.startBounds,_=M-p,I=Qe(_-y.length);if(Math.abs(I)<=a.y){Math.abs(I)<a.y&&(i.length=0),a.y=Math.abs(I);let D={type:"gap",direction:"side_top",gap:y,offset:I};i.push(D);continue}let[,,,A]=y.endBounds,P=Qe(d-A),F=y.length-P;if(Math.abs(F)<=a.y){Math.abs(F)<a.y&&(i.length=0),a.y=Math.abs(F);let D={type:"gap",direction:"side_bottom",gap:y,offset:F};i.push(D);continue}}}},s5=(t,e,o,r)=>{let n=a5(t,e,o,r);return Kn(n,r).filter(i=>!(i.length===1&&gt(i[0]))).flatMap(i=>Ss(i,r))},Xa=(t,e,o,r,n,i,a)=>{if(!en({appState:o,event:r,selectedElements:t})||t.length===0&&e.length===0)return[];let l=zo.getReferenceSnapPoints();if(l)for(let s of e)for(let c of l){let m=c[0]-s[0],d=c[1]-s[1];Math.abs(m)<=a.x&&(Math.abs(m)<a.x&&(n.length=0),n.push({type:"point",points:[s,c],offset:m}),a.x=Math.abs(m)),Math.abs(d)<=a.y&&(Math.abs(d)<a.y&&(i.length=0),i.push({type:"point",points:[s,c],offset:d}),a.y=Math.abs(d))}},c5=(t,e,o,r,n)=>{let i=xe(t,o);if(!en({appState:o,event:r,selectedElements:i})||i.length===0)return{snapOffset:{x:0,y:0},snapLines:[]};e.x=Qe(e.x),e.y=Qe(e.y);let a=[],l=[],s=ru(o.zoom.value),c={x:s,y:s},m=Ss(i,n,{dragOffset:e});Xa(i,m,o,r,a,l,c),n5(i,e,o,r,a,l,c);let d={x:a[0]?.offset??0,y:l[0]?.offset??0};c.x=0,c.y=0,a.length=0,l.length=0;let f={x:Qe(e.x+d.x),y:Qe(e.y+d.y)};Xa(i,Ss(i,n,{dragOffset:f}),o,r,a,l,c),n5(i,f,o,r,a,l,c);let p=mg(a,l),b=Ik(i,f,[...a,...l].filter(x=>x.type==="gap"));return{snapOffset:d,snapLines:[...p,...b]}},Qe=t=>Math.round(t*10**6)/10**6,i5=t=>{let e=new Map;for(let o of t){let r=o.join(",");e.has(r)||e.set(r,o)}return Array.from(e.values())},mg=(t,e)=>{let o={},r={};if(t.length>0){for(let n of t)if(n.type==="point"){let i=Qe(n.points[0][0]);o[i]||(o[i]=[]),o[i].push(...n.points.map(a=>[Qe(a[0]),Qe(a[1])]))}}if(e.length>0){for(let n of e)if(n.type==="point"){let i=Qe(n.points[0][1]);r[i]||(r[i]=[]),r[i].push(...n.points.map(a=>[Qe(a[0]),Qe(a[1])]))}}return Object.entries(o).map(([n,i])=>({type:"points",points:i5(i.map(a=>[Number(n),a[1]]).sort((a,l)=>a[1]-l[1]))})).concat(Object.entries(r).map(([n,i])=>({type:"points",points:i5(i.map(a=>[a[0],Number(n)]).sort((a,l)=>a[0]-l[0]))})))},kk=t=>{let e=new Map;for(let o of t){let r=o.points.flat().map(n=>[Qe(n)]).join(",");e.has(r)||e.set(r,o)}return Array.from(e.values())},Ik=(t,e,o)=>{let[r,n,i,a]=gc(t,e),l=[];for(let s of o){let[c,m,d,f]=s.gap.startBounds,[p,b,x,y]=s.gap.endBounds,w=gl([n,a],s.gap.overlap),k=gl([r,i],s.gap.overlap);switch(s.direction){case"center_horizontal":{if(w){let C=(w[0]+w[1])/2;l.push({type:"gap",direction:"horizontal",points:[[s.gap.startSide[0][0],C],[r,C]]},{type:"gap",direction:"horizontal",points:[[i,C],[s.gap.endSide[0][0],C]]})}break}case"center_vertical":{if(k){let C=(k[0]+k[1])/2;l.push({type:"gap",direction:"vertical",points:[[C,s.gap.startSide[0][1]],[C,n]]},{type:"gap",direction:"vertical",points:[[C,a],[C,s.gap.endSide[0][1]]]})}break}case"side_right":{if(w){let C=(w[0]+w[1])/2;l.push({type:"gap",direction:"horizontal",points:[[d,C],[p,C]]},{type:"gap",direction:"horizontal",points:[[x,C],[r,C]]})}break}case"side_left":{if(w){let C=(w[0]+w[1])/2;l.push({type:"gap",direction:"horizontal",points:[[i,C],[c,C]]},{type:"gap",direction:"horizontal",points:[[d,C],[p,C]]})}break}case"side_top":{if(k){let C=(k[0]+k[1])/2;l.push({type:"gap",direction:"vertical",points:[[C,a],[C,m]]},{type:"gap",direction:"vertical",points:[[C,f],[C,b]]})}break}case"side_bottom":{if(k){let C=(k[0]+k[1])/2;l.push({type:"gap",direction:"vertical",points:[[C,f],[C,b]]},{type:"gap",direction:"vertical",points:[[C,y],[C,n]]})}break}}}return kk(l.map(s=>({...s,points:s.points.map(c=>[Qe(c[0]),Qe(c[1])])})))},d5=(t,e,o,r,n,i)=>{if(!en({event:r,selectedElements:t,appState:o})||t.length===0||t.length===1&&!Sk(t[0].angle,0))return{snapOffset:{x:0,y:0},snapLines:[]};let[a,l,s,c]=Ke(e);i&&(i.includes("e")?s+=n.x:i.includes("w")&&(a+=n.x),i.includes("n")?l+=n.y:i.includes("s")&&(c+=n.y));let m=[];if(i)switch(i){case"e":{m.push([s,l],[s,c]);break}case"w":{m.push([a,l],[a,c]);break}case"n":{m.push([a,l],[s,l]);break}case"s":{m.push([a,c],[s,c]);break}case"ne":{m.push([s,l]);break}case"nw":{m.push([a,l]);break}case"se":{m.push([s,c]);break}case"sw":{m.push([a,c]);break}}let d=ru(o.zoom.value),f={x:d,y:d},p=[],b=[];Xa(e,m,o,r,p,b,f);let x={x:p[0]?.offset??0,y:b[0]?.offset??0};f.x=0,f.y=0,p.length=0,b.length=0;let[y,w,k,C]=Ke(t).map(I=>Qe(I));Xa(t,[[y,w],[y,C],[k,w],[k,C]],o,r,p,b,f);let _=mg(p,b);return{snapOffset:x,snapLines:_}},m5=(t,e,o,r,n,i)=>{if(!en({event:o,selectedElements:[t],appState:e}))return{snapOffset:{x:0,y:0},snapLines:[]};let a=[[r.x+n.x,r.y+n.y]],l=ru(e.zoom.value),s={x:l,y:l},c=[],m=[];Xa([t],a,e,o,c,m,s);let d={x:c[0]?.offset??0,y:m[0]?.offset??0};s.x=0,s.y=0,c.length=0,m.length=0;let f=Ss([t],i,{boundingBoxCorners:!0,omitCenter:!0});Xa([t],f,e,o,c,m,s);let p=mg(c,m);return{snapOffset:d,snapLines:p}},u5=(t,e,o,r,n)=>{if(!en({event:r,selectedElements:[],appState:e}))return{originOffset:{x:0,y:0},snapLines:[]};let i=bp(t,[],e,n),a=ru(e.zoom.value),l={x:a,y:a},s=[],c=[];for(let m of i){let d=Ss([m],n);for(let f of d){let p=f[0]-o.x;Math.abs(p)<=Math.abs(l.x)&&(Math.abs(p)<Math.abs(l.x)&&(c.length=0),c.push({type:"pointer",points:[f,[f[0],o.y]],direction:"vertical"}),l.x=p);let b=f[1]-o.y;Math.abs(b)<=Math.abs(l.y)&&(Math.abs(b)<Math.abs(l.y)&&(s.length=0),s.push({type:"pointer",points:[f,[o.x,f[1]]],direction:"horizontal"}),l.y=b)}}return{originOffset:{x:c.length>0?c[0].points[0][0]-o.x:0,y:s.length>0?s[0].points[0][1]-o.y:0},snapLines:[...c,...s]}},p5=t=>t===mt.rectangle||t===mt.ellipse||t===mt.diamond||t===mt.frame||t===mt.magicframe||t===mt.image;h();var Zt=v(S(),1),Mk=()=>(0,Zt.jsxs)("div",{"data-testid":"brave-measure-text-error",children:[(0,Zt.jsx)("p",{children:(0,Zt.jsx)(oo,{i18nKey:"errors.brave_measure_text_error.line1",bold:t=>(0,Zt.jsx)("span",{style:{fontWeight:600},children:t})})}),(0,Zt.jsx)("p",{children:(0,Zt.jsx)(oo,{i18nKey:"errors.brave_measure_text_error.line2",bold:t=>(0,Zt.jsx)("span",{style:{fontWeight:600},children:t})})}),(0,Zt.jsx)("p",{children:(0,Zt.jsx)(oo,{i18nKey:"errors.brave_measure_text_error.line3",link:t=>(0,Zt.jsx)("a",{href:"http://docs.excalidraw.com/docs/@excalidraw/excalidraw/faq#turning-off-aggresive-block-fingerprinting-in-brave-browser",children:t})})}),(0,Zt.jsx)("p",{children:(0,Zt.jsx)(oo,{i18nKey:"errors.brave_measure_text_error.line4",issueLink:t=>(0,Zt.jsx)("a",{href:"https://github.com/excalidraw/excalidraw/issues/new",children:t}),discordLink:t=>(0,Zt.jsxs)("a",{href:"https://discord.gg/UexuTaE",children:[t,"."]})})})]}),f5=Mk;h();var nu={width:100,height:0},On=100,_k=(t,e,o)=>{let r=mn({x:0,y:0,textAlign:al.CENTER,verticalAlign:vo.MIDDLE,...e,containerId:t.id,strokeColor:e.strokeColor||t.strokeColor});return Object.assign(t,{boundElements:(t.boundElements||[]).concat({type:"text",id:r.id})}),$t(r,t,o),[t,r]},h5=(t,e,o,r,n)=>{let i,a;if(Object.assign(t,{startBinding:t?.startBinding||null,endBinding:t.endBinding||null}),e){let m=e?.width??On,d=e?.height??On,f;e.id&&(f=r.getElement(e.id),f||console.error(`No element for start binding with id ${e.id} found`));let p=e.x||t.x-m,b=e.y||t.y-d/2,x=f?f.type:e.type;if(x){if(x==="text"){let y="";f&&f.type==="text"?y=f.text:e.type==="text"&&(y=e.text),y||console.error(`No text found for start binding text element for ${t.id}`),i=mn({x:p,y:b,type:"text",...f,...e,text:y}),Object.assign(i,{x:e.x||t.x-i.width,y:e.y||t.y-i.height/2})}else switch(x){case"rectangle":case"ellipse":case"diamond":{i=dn({x:p,y:b,width:m,height:d,...f,...e,type:x});break}default:rc(t,`Unhandled element start type "${e.type}"`,!0)}Gu(t,i,"start",n)}}if(o){let m=o?.height??On,d=o?.width??On,f;o.id&&(f=r.getElement(o.id),f||console.error(`No element for end binding with id ${o.id} found`));let p=o.x||t.x+t.width,b=o.y||t.y-m/2,x=f?f.type:o.type;if(x){if(x==="text"){let y="";f&&f.type==="text"?y=f.text:o.type==="text"&&(y=o.text),y||console.error(`No text found for end binding text element for ${t.id}`),a=mn({x:p,y:b,type:"text",...f,...o,text:y}),Object.assign(a,{y:o.y||t.y-a.height/2})}else switch(x){case"rectangle":case"ellipse":case"diamond":{a=dn({x:p,y:b,width:d,height:m,...f,...o,type:x});break}default:rc(t,`Unhandled element end type "${x}"`,!0)}Gu(t,a,"end",n)}}let l=t.points.length-1,s=.5,c=sr(t.points);return t.points[l][0]>t.points[l-1][0]&&(c[0][0]=s,c[l][0]-=s),t.points[l][0]<t.points[l-1][0]&&(c[0][0]=-s,c[l][0]+=s),t.points[l][1]>t.points[l-1][1]&&(c[0][1]=s,c[l][1]-=s),t.points[l][1]<t.points[l-1][1]&&(c[0][1]=-s,c[l][1]+=s),Object.assign(t,{points:c}),{linearElement:t,startBoundElement:i,endBoundElement:a}},ug=class{excalidrawElements=new Map;add=e=>{e&&this.excalidrawElements.set(e.id,e)};getElements=()=>Array.from(this.excalidrawElements.values());getElementsMap=()=>ic(this.excalidrawElements);getElement=e=>this.excalidrawElements.get(e)},Es=(t,e)=>{if(!t)return[];let o=sr(t),r=new ug,n=new Map,i=new Map;for(let l of o){let s,c=l.id;switch(e?.regenerateIds!==!1&&Object.assign(l,{id:ln()}),l.type){case"rectangle":case"ellipse":case"diamond":{let d=l?.label?.text&&l.width===void 0?0:l?.width||On,f=l?.label?.text&&l.height===void 0?0:l?.height||On;s=dn({...l,width:d,height:f});break}case"line":{let d=l.width||nu.width,f=l.height||nu.height;s=Sl({width:d,height:f,points:[[0,0],[d,f]],...l});break}case"arrow":{let d=l.width||nu.width,f=l.height||nu.height;s=Sl({width:d,height:f,endArrowhead:"arrow",points:[[0,0],[d,f]],...l}),Object.assign(s,$1(s.points));break}case"text":{let d=l?.fontFamily||_i,f=l?.fontSize||Ir,p=l?.lineHeight||Dr(d),b=l.text??"",x=Cl(b),y=fc(x,Ko({fontFamily:d,fontSize:f}),p);s=mn({width:y.width,height:y.height,fontFamily:d,fontSize:f,...l});break}case"image":{s=yc({width:l?.width||On,height:l?.height||On,...l});break}case"frame":{s=vc({x:0,y:0,...l});break}case"magicframe":{s=Tl({x:0,y:0,...l});break}case"freedraw":case"iframe":case"embeddable":{s=l;break}default:s=l,rc(l,`Unhandled element type "${l.type}"`,!0)}r.getElement(s.id)?console.error(`Duplicate id found for ${s.id}`):(r.add(s),n.set(s.id,l),c&&i.set(c,s.id))}let a=r.getElementsMap();for(let[l,s]of n){let c=r.getElement(l);switch(s.type){case"rectangle":case"ellipse":case"diamond":case"arrow":{if(s.label?.text){let[m,d]=_k(c,s?.label,a);if(r.add(m),r.add(d),m.type==="arrow"){let f=s.type==="arrow"?s?.start:void 0,p=s.type==="arrow"?s?.end:void 0;if(f&&f.id){let w=i.get(f.id);w&&Object.assign(f,{id:w})}if(p&&p.id){let w=i.get(p.id);w&&Object.assign(p,{id:w})}let{linearElement:b,startBoundElement:x,endBoundElement:y}=h5(m,f,p,r,a);m=b,r.add(b),r.add(x),r.add(y)}}else switch(s.type){case"arrow":{let{start:m,end:d}=s;if(m&&m.id){let x=i.get(m.id);Object.assign(m,{id:x})}if(d&&d.id){let x=i.get(d.id);Object.assign(d,{id:x})}let{linearElement:f,startBoundElement:p,endBoundElement:b}=h5(c,m,d,r,a);r.add(f),r.add(p),r.add(b);break}}break}}}for(let[l,s]of n){if(s.type!=="frame"&&s.type!=="magicframe")continue;let c=r.getElement(l);if(!c)throw new Error(`Excalidraw element with id ${l} doesn't exist`);let m=[];s.children.forEach(k=>{let C=i.get(k);if(!C)throw new Error(`Element with ${k} wasn't mapped correctly`);let M=r.getElement(C);if(!M)throw new Error(`Frame element with id ${C} doesn't exist`);Object.assign(M,{frameId:c.id}),M?.boundElements?.forEach(_=>{let I=r.getElement(_.id);if(!I)throw new Error(`Bound element with id ${_.id} doesn't exist`);Object.assign(I,{frameId:c.id}),m.push(I)}),m.push(M)});let[d,f,p,b]=Ke(m),x=10;d=d-x,f=f-x,p=p+x,b=b+x;let y=Math.max(c?.width,p-d),w=Math.max(c?.height,b-f);Object.assign(c,{x:d,y:f,width:y,height:w})}return r.getElements()};h();h();var qa=v(H(),1);h();var pg=v(pr(),1),g5=v(H(),1);var Xe=t=>e=>{(0,pg.unstable_batchedUpdates)(t,e)},iu=t=>Js(e=>{(0,pg.unstable_batchedUpdates)(t,e)}),au=(()=>{let t;try{let o=g5.version.split(".");t=Number(o[0])>17}catch{t=!1}let e=!1;return()=>window.EXCALIDRAW_THROTTLE_RENDER===!0?t?!0:(e||(e=!0,console.warn("Excalidraw: render throttling is disabled on React versions < 18.")),!1):!1})();h();h();var Ak="#ff6b6b",Lk="#ff0000",b5=1,x5=2,v5=(t,e)=>{if(!e.snapLines.length)return;let o=e.theme==="light"||e.zenModeEnabled?Ak:Lk,r=(e.zenModeEnabled?b5*1.5:b5)/e.zoom.value;t.save(),t.translate(e.scrollX,e.scrollY);for(let n of e.snapLines)n.type==="pointer"?(t.lineWidth=r,t.strokeStyle=o,Dk(n,t,e)):n.type==="gap"?(t.lineWidth=r,t.strokeStyle=o,Rk(n.points[0],n.points[1],n.direction,e,t)):n.type==="points"&&(t.lineWidth=r,t.strokeStyle=o,Pk(n,t,e));t.restore()},Pk=(t,e,o)=>{if(!o.zenModeEnabled){let r=t.points[0],n=t.points[t.points.length-1];Ho(r,n,e)}for(let r of t.points)y5(r,o,e)},Dk=(t,e,o)=>{y5(t.points[0],o,e),o.zenModeEnabled||Ho(t.points[0],t.points[1],e)},y5=([t,e],o,r)=>{r.save();let n=(o.zenModeEnabled?x5*1.5:x5)/o.zoom.value;r.beginPath(),r.moveTo(t-n,e-n),r.lineTo(t+n,e+n),r.moveTo(t+n,e-n),r.lineTo(t-n,e+n),r.stroke(),r.restore()},Ho=(t,e,o)=>{o.beginPath(),o.lineTo(...t),o.lineTo(...e),o.stroke()},Rk=(t,e,o,r,n)=>{let i=8/r.zoom.value,a=i/2,l=i/4;if(o==="horizontal"){let s=[(t[0]+e[0])/2,t[1]];r.zenModeEnabled||Ho([t[0],t[1]-i],[t[0],t[1]+i],n),Ho([s[0]-l,s[1]-a],[s[0]-l,s[1]+a],n),Ho([s[0]+l,s[1]-a],[s[0]+l,s[1]+a],n),r.zenModeEnabled||(Ho([e[0],e[1]-i],[e[0],e[1]+i],n),Ho(t,e,n))}else{let s=[t[0],(t[1]+e[1])/2];r.zenModeEnabled||Ho([t[0]-i,t[1]],[t[0]+i,t[1]],n),Ho([s[0]-a,s[1]-l],[s[0]+a,s[1]-l],n),Ho([s[0]-a,s[1]+l],[s[0]+a,s[1]+l],n),r.zenModeEnabled||(Ho([e[0]-i,e[1]],[e[0]+i,e[1]],n),Ho(t,e,n))}};var Nk=(t,e,o)=>{let{elementId:r,hoverPointIndex:n}=e.selectedLinearElement;if(e.editingLinearElement?.selectedPointsIndices?.includes(n))return;let i=he.getElement(r,o);if(!i)return;let a=he.getPointAtIndexGlobalCoordinates(i,n,o);t.save(),t.translate(e.scrollX,e.scrollY),hg(a,t,e),t.restore()},hg=(t,e,o)=>{e.fillStyle="rgba(105, 101, 219, 0.4)",Ml(e,t[0],t[1],he.POINT_HANDLE_SIZE/o.zoom.value,!1)},ks=(t,e,o,r,n,i,a,l,s=!1,c=0)=>{t.save(),t.translate(i,a),t.rotate(l),s&&t.fillRect(e-i,o-a,r,n),c&&t.roundRect?(t.beginPath(),t.roundRect(e-i,o-a,r,n,c),t.stroke(),t.closePath()):t.strokeRect(e-i,o-a,r,n),t.restore()},Ok=(t,e,o,r,n,i)=>{t.save(),t.translate(r,n),t.rotate(i),t.beginPath(),t.moveTo(0,o/2),t.lineTo(e/2,0),t.lineTo(0,-o/2),t.lineTo(-e/2,0),t.closePath(),t.stroke(),t.restore()},lu=(t,e,o,r,n,i=!1)=>{t.strokeStyle="#5e5ad8",t.setLineDash([]),t.fillStyle="rgba(255, 255, 255, 0.9)",n?t.fillStyle="rgba(134, 131, 226, 0.9)":i&&(t.fillStyle="rgba(177, 151, 252, 0.7)"),Ml(t,o[0],o[1],r/e.zoom.value,!i)},Fk=(t,e,o,r,n,i)=>{t.beginPath(),t.ellipse(r,n,e/2,o/2,i,0,Math.PI*2),t.stroke()},Bk=(t,e,o)=>{let[r,n,i,a]=Co(e,o),l=i-r,s=a-n,c=Wu(e,l,s),m=4;t.strokeStyle="rgba(0,0,0,.05)",t.lineWidth=c-m;let d=m/2+c/2;switch(e.type){case"rectangle":case"text":case"image":case"iframe":case"embeddable":case"frame":case"magicframe":ks(t,r-d,n-d,l+d*2,s+d*2,r+l/2,n+s/2,e.angle);break;case"diamond":let f=Math.hypot(l,s),p=d*f/s,b=d*f/l;Ok(t,l+p*2,s+b*2,r+l/2,n+s/2,e.angle);break;case"ellipse":Fk(t,l+d*2,s+d*2,r+l/2,n+s/2,e.angle);break}},zk=(t,e,o)=>{let[r,n,i]=e,a=Wu(i,i.width,i.height);t.strokeStyle="rgba(0,0,0,0)",t.fillStyle="rgba(0,0,0,.05)",(n==="both"?[0,-1]:n==="start"?[0]:[-1]).forEach(s=>{let[c,m]=he.getPointAtIndexGlobalCoordinates(r,s,o);Ml(t,c,m,a)})},w5=(t,e,o,r=Iu*2)=>{let{angle:n,elementX1:i,elementY1:a,elementX2:l,elementY2:s,selectionColors:c,cx:m,cy:d,dashed:f,activeEmbeddable:p}=o,b=l-i,x=s-a,y=r/e.zoom.value,w=8/e.zoom.value,k=4/e.zoom.value;t.save(),t.translate(e.scrollX,e.scrollY),t.lineWidth=(p?4:1)/e.zoom.value;let C=c.length;for(let M=0;M<C;++M)t.strokeStyle=c[M],f&&t.setLineDash([w,k+(w+k)*(C-1)]),t.lineDashOffset=(w+k)*M,ks(t,i-y,a-y,b+y*2,x+y*2,m,d,n);t.restore()},Hk=(t,e,o,r)=>{let n=Array.isArray(o)?zk:Bk;t.save(),t.translate(e.scrollX,e.scrollY),n(t,o,r),t.restore()},$k=(t,e,o,r)=>{let[n,i,a,l]=Co(o,r),s=a-n,c=l-i;t.strokeStyle="rgb(0,118,255)",t.lineWidth=Go.strokeWidth/e.zoom.value,t.save(),t.translate(e.scrollX,e.scrollY),ks(t,n,i,s,c,n+s/2,i+c/2,o.angle,!1,Go.radius/e.zoom.value),t.restore()},Uk=(t,e,o)=>{let r=o.filter(l=>l.groupIds.length===0),n=o.filter(l=>l.groupIds.length>0),i=l=>{let[s,c,m,d]=Ke(l);return{angle:0,elementX1:s,elementX2:m,elementY1:c,elementY2:d,selectionColors:["rgb(0,118,255)"],dashed:!1,cx:s+(m-s)/2,cy:c+(d-c)/2,activeEmbeddable:!1}},a=l=>{let s=ut(o,l);return i(s)};Object.entries(hb(n,e)).filter(([l,s])=>s).map(([l,s])=>l).map(l=>a(l)).concat(r.map(l=>i([l]))).forEach(l=>w5(t,e,l))},fg=(t,e,o,r)=>{if(!e.selectedLinearElement)return;t.save(),t.translate(e.scrollX,e.scrollY),t.lineWidth=1/e.zoom.value;let n=he.getPointsGlobalCoordinates(o,r),{POINT_HANDLE_SIZE:i}=he,a=e.editingLinearElement?i:i/2;n.forEach((s,c)=>{let m=!!e.editingLinearElement?.selectedPointsIndices?.includes(c);lu(t,e,s,a,m)}),he.getEditorMidPoints(o,r,e).filter(s=>s!==null).forEach(s=>{e?.selectedLinearElement?.segmentMidPointHoveredCoords&&he.arePointsEqual(s,e.selectedLinearElement.segmentMidPointHoveredCoords)?e.editingLinearElement?(lu(t,e,s,a,!1),hg(s,t,e)):(hg(s,t,e),lu(t,e,s,a,!1)):(e.editingLinearElement||n.length===2)&&lu(t,e,s,i/2,!1,!0)}),t.restore()},E5=(t,e,o,r,n)=>{Object.keys(r).forEach(i=>{let a=r[i];if(a!==void 0){let[l,s,c,m]=a;t.save(),t.lineWidth=1/o.zoom.value,e.selectionColor&&(t.strokeStyle=e.selectionColor),i==="rotation"?Ml(t,l+c/2,s+m/2,c/2):t.roundRect?(t.beginPath(),t.roundRect(l,s,c,m,2/o.zoom.value),t.fill(),t.stroke()):ks(t,l,s,c,m,l+c/2,s+m/2,n,!0),t.restore()}})},C5=({canvas:t,elementsMap:e,visibleElements:o,selectedElements:r,scale:n,appState:i,renderConfig:a})=>{if(t===null)return{atLeastOneVisibleElement:!1,elementsMap:e};let[l,s]=Gb(t,n),c=Vb({canvas:t,scale:n,normalizedWidth:l,normalizedHeight:s});c.save(),c.scale(i.zoom.value,i.zoom.value);let m;if(o.forEach(p=>{i.editingLinearElement?.elementId===p.id&&p&&(m=p)}),m&&fg(c,i,m,e),i.selectionElement)try{c0(i.selectionElement,c,i)}catch(p){console.error(p)}i.isBindingEnabled&&i.suggestedBindings.filter(p=>p!=null).forEach(p=>{Hk(c,i,p,e)}),i.frameToHighlight&&$k(c,i,i.frameToHighlight,e),i.elementsToHighlight&&Uk(c,i,i.elementsToHighlight);let d=r.some(p=>Te(p));if(r.length===1&&i.editingLinearElement?.elementId===r[0].id&&fg(c,i,r[0],e),i.selectedLinearElement&&i.selectedLinearElement.hoverPointIndex>=0&&Nk(c,i,e),!i.multiElement&&!i.editingLinearElement){let p=ac(r,i);r.length===1&&Re(r[0])&&i.selectedLinearElement?.elementId===r[0].id&&!r[0].locked&&fg(c,i,r[0],e);let x=a.selectionColor||It.black;if(p){let y=Ie(r),w=[];for(let C of e.values()){let M=[];y.has(C.id)&&!bc(i,C)&&M.push(x);let _=a.remoteSelectedElementIds.get(C.id);if(_&&M.push(..._.map(I=>ui(I,i.collaborators.get(I)))),M.length){let[I,A,P,F,D,W]=Co(C,e,!0);w.push({angle:C.angle,elementX1:I,elementY1:A,elementX2:P,elementY2:F,selectionColors:M,dashed:!!_,cx:D,cy:W,activeEmbeddable:i.activeEmbeddable?.element===C&&i.activeEmbeddable.state==="active"})}}let k=C=>{let M=ut(e,C),[_,I,A,P]=Ke(M);w.push({angle:0,elementX1:_,elementX2:A,elementY1:I,elementY2:P,selectionColors:[It.black],dashed:!0,cx:_+(A-_)/2,cy:I+(P-I)/2,activeEmbeddable:!1})};for(let C of Nr(i))k(C);i.editingGroupId&&k(i.editingGroupId),w.forEach(C=>w5(c,i,C))}if(c.save(),c.translate(i.scrollX,i.scrollY),r.length===1){c.fillStyle=It.white;let y=Y1(r[0],i.zoom,e,"mouse");!i.viewModeEnabled&&p&&E5(c,a,i,y,r[0].angle)}else if(r.length>1&&!i.isRotating){let y=Iu*2/i.zoom.value;c.fillStyle=It.white;let[w,k,C,M]=Ke(r),_=c.getLineDash();c.setLineDash([2/i.zoom.value]);let I=c.lineWidth;c.lineWidth=1/i.zoom.value,c.strokeStyle=x,ks(c,w-y,k-y,C-w+y*2,M-k+y*2,(w+C)/2,(k+M)/2,0),c.lineWidth=I,c.setLineDash(_);let A=K1([w,k,C,M,(w+C)/2,(k+M)/2],0,i.zoom,"mouse",d?V1:G1);r.some(P=>!P.locked)&&E5(c,a,i,A,0)}c.restore()}v5(c,i),c.restore(),Ky({context:c,renderConfig:a,appState:i,normalizedWidth:l,normalizedHeight:s});let f;return a.renderScrollbars&&(f=Yw(o,l,s,i),c.save(),c.fillStyle=Kw,c.strokeStyle="rgba(255,255,255,0.8)",[f.horizontal,f.vertical].forEach(p=>{p&&Yd(c,p.x,p.y,p.width,p.height,Cr/2)}),c.restore()),{scrollBars:f,atLeastOneVisibleElement:o.length>0,elementsMap:e}},gg=Js(t=>{let e=C5(t);t.callback?.(e)},{trailing:!0}),T5=(t,e)=>{if(e){gg(t);return}let o=C5(t);return t.callback(o),o};var k5=v(S(),1),Wk=t=>{let e=(0,qa.useRef)(!1);return(0,qa.useEffect)(()=>{if(!e.current){e.current=!0;return}let o=new Map,r=new Map,n=new Map,i=new Map,a=new Map;t.appState.collaborators.forEach((s,c)=>{if(s.selectedElementIds)for(let m of Object.keys(s.selectedElementIds))n.has(m)||n.set(m,[]),n.get(m).push(c);!s.pointer||s.pointer.renderCursor===!1||(s.username&&i.set(c,s.username),s.userState&&a.set(c,s.userState),r.set(c,qt({sceneX:s.pointer.x,sceneY:s.pointer.y},t.appState)),o.set(c,s.button))});let l=t.containerRef?.current&&getComputedStyle(t.containerRef.current).getPropertyValue("--color-selection")||"#6965db";T5({canvas:t.canvas,elementsMap:t.elementsMap,visibleElements:t.visibleElements,selectedElements:t.selectedElements,scale:window.devicePixelRatio,appState:t.appState,renderConfig:{remotePointerViewportCoords:r,remotePointerButton:o,remoteSelectedElementIds:n,remotePointerUsernames:i,remotePointerUserStates:a,selectionColor:l,renderScrollbars:!1},callback:t.renderInteractiveSceneCallback},au())}),(0,k5.jsx)("canvas",{className:"excalidraw__canvas interactive",style:{width:t.appState.width,height:t.appState.height,cursor:t.appState.viewModeEnabled?De.GRAB:De.AUTO},width:t.appState.width*t.scale,height:t.appState.height*t.scale,ref:t.handleCanvasRef,onContextMenu:t.onContextMenu,onPointerMove:t.onPointerMove,onPointerUp:t.onPointerUp,onPointerCancel:t.onPointerCancel,onTouchMove:t.onTouchMove,onPointerDown:t.onPointerDown,onDoubleClick:t.appState.viewModeEnabled?void 0:t.onDoubleClick,children:g("labels.drawingCanvas")})},S5=t=>({zoom:t.zoom,scrollX:t.scrollX,scrollY:t.scrollY,width:t.width,height:t.height,viewModeEnabled:t.viewModeEnabled,editingGroupId:t.editingGroupId,editingLinearElement:t.editingLinearElement,selectedElementIds:t.selectedElementIds,frameToHighlight:t.frameToHighlight,offsetLeft:t.offsetLeft,offsetTop:t.offsetTop,theme:t.theme,pendingImageElementId:t.pendingImageElementId,selectionElement:t.selectionElement,selectedGroupIds:t.selectedGroupIds,selectedLinearElement:t.selectedLinearElement,multiElement:t.multiElement,isBindingEnabled:t.isBindingEnabled,suggestedBindings:t.suggestedBindings,isRotating:t.isRotating,elementsToHighlight:t.elementsToHighlight,collaborators:t.collaborators,activeEmbeddable:t.activeEmbeddable,snapLines:t.snapLines,zenModeEnabled:t.zenModeEnabled}),Gk=(t,e)=>t.selectionNonce!==e.selectionNonce||t.versionNonce!==e.versionNonce||t.scale!==e.scale||t.elementsMap!==e.elementsMap||t.visibleElements!==e.visibleElements||t.selectedElements!==e.selectedElements?!1:Dt(S5(t.appState),S5(e.appState)),bg=qa.default.memo(Wk,Gk);h();var Ci=v(H(),1);var M5=v(S(),1),Vk=t=>{let e=(0,Ci.useRef)(null),o=(0,Ci.useRef)(!1);return(0,Ci.useEffect)(()=>{let r=e.current;if(!r)return;let n=t.canvas;o.current||(o.current=!0,r.replaceChildren(n),n.classList.add("excalidraw__canvas","static"));let i=`${t.appState.width}px`,a=`${t.appState.height}px`;n.style.width!==i&&(n.style.width=i),n.style.height!==a&&(n.style.height=a);let l=t.appState.width*t.scale,s=t.appState.height*t.scale;n.width!==l&&(n.width=l),n.height!==s&&(n.height=s),Yb({canvas:n,rc:t.rc,scale:t.scale,elementsMap:t.elementsMap,allElementsMap:t.allElementsMap,visibleElements:t.visibleElements,appState:t.appState,renderConfig:t.renderConfig},au())}),(0,M5.jsx)("div",{className:"excalidraw__canvas-wrapper",ref:e})},I5=t=>({zoom:t.zoom,scrollX:t.scrollX,scrollY:t.scrollY,width:t.width,height:t.height,viewModeEnabled:t.viewModeEnabled,offsetLeft:t.offsetLeft,offsetTop:t.offsetTop,theme:t.theme,pendingImageElementId:t.pendingImageElementId,shouldCacheIgnoreZoom:t.shouldCacheIgnoreZoom,viewBackgroundColor:t.viewBackgroundColor,exportScale:t.exportScale,selectedElementsAreBeingDragged:t.selectedElementsAreBeingDragged,gridSize:t.gridSize,frameRendering:t.frameRendering,selectedElementIds:t.selectedElementIds,frameToHighlight:t.frameToHighlight,editingGroupId:t.editingGroupId}),Kk=(t,e)=>t.versionNonce!==e.versionNonce||t.scale!==e.scale||t.elementsMap!==e.elementsMap||t.visibleElements!==e.visibleElements?!1:Dt(I5(t.appState),I5(e.appState))&&Dt(t.renderConfig,e.renderConfig),xg=Ci.default.memo(Vk,Kk);h();var Is=class{scene;constructor(e){this.scene=e}getRenderableElements=(()=>{let e=({elementsMap:r,zoom:n,offsetLeft:i,offsetTop:a,scrollX:l,scrollY:s,height:c,width:m})=>{let d=[];for(let f of r.values())Al(f,m,c,{zoom:n,offsetLeft:i,offsetTop:a,scrollX:l,scrollY:s},r)&&d.push(f);return d},o=({elements:r,editingElement:n,pendingImageElementId:i})=>{let a=ic(new Map);for(let l of r)an(l)&&i===l.id||(!n||n.type!=="text"||l.id!==n.id)&&a.set(l.id,l);return a};return P1(({zoom:r,offsetLeft:n,offsetTop:i,scrollX:a,scrollY:l,height:s,width:c,editingElement:m,pendingImageElementId:d,versionNonce:f})=>{let p=this.scene.getNonDeletedElements(),b=o({elements:p,editingElement:m,pendingImageElementId:d}),x=e({elementsMap:b,zoom:r,offsetLeft:n,offsetTop:i,scrollX:a,scrollY:l,height:s,width:c});return{elementsMap:b,visibleElements:x}})})();destroy(){gg.cancel(),Kb.cancel(),this.getRenderableElements.clear()}};h();var su=v(H(),1);var vg=v(S(),1),_5=({trails:t})=>{let e=(0,su.useRef)(null);return(0,su.useEffect)(()=>{if(e.current)for(let o of t)o.start(e.current);return()=>{for(let o of t)o.stop()}},t),(0,vg.jsx)("div",{className:"SVGLayer",children:(0,vg.jsx)("svg",{ref:e})})};h();var A5=v(S(),1),Yk=5,Zk=(t,e,o)=>{let[r,n]=Co(t,o),{x:i,y:a}=qt({sceneX:r+t.width,sceneY:n},e),l=i-e.offsetLeft+10,s=a-e.offsetTop;return{x:l,y:s}},yg=({children:t,element:e,elementsMap:o})=>{let r=Da();if(r.contextMenu||r.draggingElement||r.resizingElement||r.isRotating||r.openMenu||r.viewModeEnabled)return null;let{x:n,y:i}=Zk(e,r,o);return(0,A5.jsx)("div",{className:"excalidraw-canvas-buttons",style:{top:`${i}px`,left:`${n}px`,padding:Yk},children:t})};h();var jk=`You are a skilled front-end developer who builds interactive prototypes from wireframes, and is an expert at CSS Grid and Flex design.
Your role is to transform low-fidelity wireframes into working front-end HTML code.

YOU MUST FOLLOW FOLLOWING RULES:

- Use HTML, CSS, JavaScript to build a responsive, accessible, polished prototype
- Leverage Tailwind for styling and layout (import as script <script src="https://cdn.tailwindcss.com"><\/script>)
- Inline JavaScript when needed
- Fetch dependencies from CDNs when needed (using unpkg or skypack)
- Source images from Unsplash or create applicable placeholders
- Interpret annotations as intended vs literal UI
- Fill gaps using your expertise in UX and business logic
- generate primarily for desktop UI, but make it responsive.
- Use grid and flexbox wherever applicable.
- Convert the wireframe in its entirety, don't omit elements if possible.

If the wireframes, diagrams, or text is unclear or unreadable, refer to provided text for clarification.

Your goal is a production-ready prototype that brings the wireframes to life.

Please output JUST THE HTML file containing your best attempt at implementing the provided wireframes.`;async function L5({image:t,apiKey:e,text:o,theme:r="light"}){let n={model:"gpt-4-vision-preview",max_tokens:4096,temperature:.1,messages:[{role:"system",content:jk},{role:"user",content:[{type:"image_url",image_url:{url:t,detail:"high"}},{type:"text",text:`Above is the reference wireframe. Please make a new website based on these and return just the HTML file. Also, please make it for the ${r} theme. What follows are the wireframe's text annotations (if any)...`},{type:"text",text:o}]}]},i,a=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(n)});return a.ok?i={...await a.json(),ok:!0}:i={...await a.json(),ok:!1},i}h();var Ms=v(S(),1),Xk="small",cu=t=>(0,Ms.jsxs)("label",{className:z("ToolIcon ToolIcon__MagicButton",`ToolIcon_size_${Xk}`,{"is-mobile":t.isMobile}),title:`${t.title}`,children:[(0,Ms.jsx)("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:t.name,onChange:t.onChange,checked:t.checked,"aria-label":t.title}),(0,Ms.jsx)("div",{className:"ToolIcon__icon",children:t.icon})]});h();var Ti=v(S(),1),qk=({height:t,width:e,userToFollow:o,onDisconnect:r})=>(0,Ti.jsx)("div",{className:"follow-mode",style:{width:e,height:t},children:(0,Ti.jsxs)("div",{className:"follow-mode__badge",children:[(0,Ti.jsxs)("div",{className:"follow-mode__badge__label",children:["Following"," ",(0,Ti.jsx)("span",{className:"follow-mode__badge__username",title:o.username,children:o.username})]}),(0,Ti.jsx)("button",{onClick:r,className:"follow-mode__disconnect-btn",children:Mo})]})}),P5=qk;h();var du=class{targets=new WeakMap;rafIds=new WeakMap;register(e,o){this.targets.set(e,{callback:o,stopped:!0})}start(e){let o=this.targets.get(e);o&&(this.rafIds.has(e)||(this.targets.set(e,{...o,stopped:!1}),this.scheduleFrame(e)))}stop(e){let o=this.targets.get(e);o&&!o.stopped&&this.targets.set(e,{...o,stopped:!0}),this.cancelFrame(e)}constructFrame(e){return o=>{let r=this.targets.get(e);if(!r)return;let n=this.onFrame(r,o);!r.stopped&&!n?this.scheduleFrame(e):this.cancelFrame(e)}}scheduleFrame(e){let o=requestAnimationFrame(this.constructFrame(e));this.rafIds.set(e,o)}cancelFrame(e){if(this.rafIds.has(e)){let o=this.rafIds.get(e);cancelAnimationFrame(o)}this.rafIds.delete(e)}onFrame(e,o){return e.callback(o)??!1}};h();h();function Jk(t,e,o,r){Object.defineProperty(t,e,{get:o,set:r,enumerable:!0,configurable:!0})}var Qk={};Jk(Qk,"LaserPointer",()=>As);function ct([t,e,o],[r,n,i]){return[t+r,e+n,o+i]}function _s([t,e,o],[r,n,i]){return[t-r,e-n,o-i]}function wt([t,e,o],r){return[t*r,e*r,o*r]}function Ja([t,e,o]){return[t/Math.sqrt(t**2+e**2),e/Math.sqrt(t**2+e**2),o]}function jt([t,e,o],r){return[Math.cos(r)*t-Math.sin(r)*e,Math.sin(r)*t+Math.cos(r)*e,o]}function eI(t,e,o){return ct(t,wt(_s(e,t),o))}function D5(t,e,o){return Math.atan2(o[1]-t[1],o[0]-t[0])-Math.atan2(e[1]-t[1],e[0]-t[0])}function R5(t){return Math.atan2(Math.sin(t),Math.cos(t))}function N5([t,e]){return Math.sqrt(t**2+e**2)}function Qa([t,e],[o,r]){return Math.sqrt((o-t)**2+(r-e)**2)}function tI(t){if(t.length<2)return 0;let e=0;for(let o=1;o<=t.length-1;o++)e+=Qa(t[o-1],t[o]);return e+=Qa(t[t.length-2],t[t.length-1]),e}var oI=(t,e,o)=>Math.max(e,Math.min(o,t));function rI(t,e,o){let r=Qa(e,o);if(r===0)return Qa(t,e);let n=oI(((t[0]-e[0])*(o[0]-e[0])+(t[1]-e[1])*(o[1]-e[1]))/r**2,0,1),i=[e[0]+n*(o[0]-e[0]),e[1]+n*(o[1]-e[1]),t[2]];return Qa(i,t)}function mu(t,e){if(e===0||t.length<=2)return t;let o=t[0],r=t[t.length-1],[n,i]=t.reduce(([a,l],s,c)=>{let m=rI(s,o,r);return m>a?[m,c]:[a,l]},[0,-1]);if(n>=e){let a=t[i];return[...mu([o,...t.slice(1,i),a],e).slice(0,-1),a,...mu([a,...t.slice(i,-1),r],e).slice(1)]}else return[o,r]}var As=class t{static{this.defaults={size:2,streamline:.45,simplify:.1,simplifyPhase:"output",keepHead:!1,sizeMapping:()=>1}}static{this.constants={cornerDetectionMaxAngle:75,cornerDetectionVariance:e=>e>35?.5:1,maxTailLength:50}}constructor(e){this.originalPoints=[],this.stablePoints=[],this.tailPoints=[],this.isFresh=!0,this.options=Object.assign({},t.defaults,e)}get lastPoint(){return this.tailPoints[this.tailPoints.length-1]??this.stablePoints[this.stablePoints.length-1]}addPoint(e){let o=this.originalPoints[this.originalPoints.length-1];if(!(o&&o[0]===e[0]&&o[1]===e[1])){if(this.originalPoints.push(e),this.isFresh){this.isFresh=!1,this.stablePoints.push(e);return}this.options.streamline>0&&(e=eI(this.lastPoint,e,1-this.options.streamline)),this.tailPoints.push(e),tI(this.tailPoints)>t.constants.maxTailLength&&this.stabilizeTail()}}close(){this.stabilizeTail()}stabilizeTail(){if(this.options.simplify>0&&this.options.simplifyPhase=="tail")throw new Error("Not implemented yet");this.stablePoints.push(...this.tailPoints),this.tailPoints=[]}getSize(e,o,r,n,i){return(e??this.options.size)*this.options.sizeMapping({pressure:o,runningLength:i,currentIndex:r,totalLength:n})}getStrokeOutline(e){if(this.isFresh)return[];let o=[...this.stablePoints,...this.tailPoints];this.options.simplify>0&&this.options.simplifyPhase==="input"&&(o=mu(o,this.options.simplify));let r=o.length;if(r===0)return[];if(r===1){let A=o[0],P=this.getSize(e,A[2],0,r,0);if(P<.5)return[];let F=[];for(let D=0;D<=Math.PI*2;D+=Math.PI/16)F.push(ct(A,wt(jt([1,0,0],D),P)));return F.push(ct(A,wt([1,0,0],this.getSize(e,A[2],0,r,0)))),F}if(r===2){let A=o[0],P=o[1],F=this.getSize(e,A[2],0,r,0),D=this.getSize(e,P[2],0,r,0);if(F<.5||D<.5)return[];let W=[],O=D5(A,[A[0],A[1]-100,A[2]],P);for(let U=O;U<=Math.PI+O;U+=Math.PI/16)W.push(ct(A,wt(jt([1,0,0],U),F)));for(let U=Math.PI+O;U<=Math.PI*2+O;U+=Math.PI/16)W.push(ct(P,wt(jt([1,0,0],U),D)));return W.push(W[0]),W}let n=[],i=[],a=0,l=0,s=0,c=0;for(let A=1;A<r-1;A++){let P=o[A-1],F=o[A],D=o[A+1],W=F[2],O=Qa(P,F);c+=O,a=l+(O-l)*.2;let U=this.getSize(e,W,A,r,c);if(U===0){s=A+1;continue}let ee=Ja(_s(P,F)),K=Ja(_s(D,F)),pe=jt(ee,Math.PI/2),me=jt(ee,-Math.PI/2),ce=jt(K,Math.PI/2),oe=jt(K,-Math.PI/2),R=ct(F,wt(pe,U)),B=ct(F,wt(me,U)),V=ct(F,wt(ce,U)),Z=ct(F,wt(oe,U)),Y=ct(pe,oe),j=ct(me,ce),J=ct(F,wt(N5(Y)===0?ee:Ja(Y),U)),ne=ct(F,wt(N5(j)===0?K:Ja(j),U)),dt=R5(D5(F,P,D)),et=t.constants.cornerDetectionMaxAngle/180*Math.PI*t.constants.cornerDetectionVariance(a);if(Math.abs(dt)<et){let it=Math.abs(R5(Math.PI-dt));if(it===0)continue;if(dt<0){i.push(B,ne);for(let He=0;He<=it;He+=it/4)n.push(ct(F,jt(wt(pe,U),He)));for(let He=it;He>=0;He-=it/4)i.push(ct(F,jt(wt(pe,U),He)));i.push(ne,V)}else{n.push(R,J);for(let He=0;He<=it;He+=it/4)i.push(ct(F,jt(wt(pe,-U),-He)));for(let He=it;He>=0;He-=it/4)n.push(ct(F,jt(wt(pe,-U),-He)));n.push(J,Z)}}else n.push(J),i.push(ne);l=a}if(s>=r-2)if(this.options.keepHead){let A=o[r-1],P=[];for(let F=0;F<=Math.PI*2;F+=Math.PI/16)P.push(ct(A,wt(jt([1,0,0],F),this.options.size)));return P.push(ct(A,wt([1,0,0],this.options.size))),P}else return[];let m=o[s],d=o[s+1],f=o[r-2],p=o[r-1],b=Ja(_s(d,m)),x=Ja(_s(f,p)),y=jt(b,-Math.PI/2),w=jt(x,Math.PI/2),k=this.getSize(e,m[2],0,r,0),C=[],M=this.options.keepHead?this.options.size:this.getSize(e,f[2],r-2,r,c),_=[];if(k>1){for(let A=0;A<=Math.PI;A+=Math.PI/16)C.unshift(ct(m,jt(wt(y,k),-A)));C.unshift(ct(m,wt(y,-k)))}else C.push(m);for(let A=0;A<=Math.PI*3;A+=Math.PI/16)_.push(ct(p,jt(wt(w,-M),-A)));let I=[...C,...n,..._.reverse(),...i.reverse()];return C.length>0&&I.push(C[0]),this.options.simplify>0&&this.options.simplifyPhase==="output"?mu(I,this.options.simplify):I}};var Si=class{constructor(e,o,r){this.animationFrameHandler=e;this.app=o;this.options=r;this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.trailElement=document.createElementNS(x1,"path")}currentTrail;pastTrails=[];container;trailElement;get hasCurrentTrail(){return!!this.currentTrail}hasLastPoint(e,o){if(this.currentTrail){let r=this.currentTrail.originalPoints.length;return this.currentTrail.originalPoints[r-1][0]===e&&this.currentTrail.originalPoints[r-1][1]===o}return!1}start(e){e&&(this.container=e),this.trailElement.parentNode!==this.container&&this.container&&this.container.appendChild(this.trailElement),this.animationFrameHandler.start(this)}stop(){this.animationFrameHandler.stop(this),this.trailElement.parentNode===this.container&&this.container?.removeChild(this.trailElement)}startPath(e,o){this.currentTrail=new As(this.options),this.currentTrail.addPoint([e,o,performance.now()]),this.update()}addPointToPath(e,o){this.currentTrail&&(this.currentTrail.addPoint([e,o,performance.now()]),this.update())}endPath(){this.currentTrail&&(this.currentTrail.close(),this.currentTrail.options.keepHead=!1,this.pastTrails.push(this.currentTrail),this.currentTrail=void 0,this.update())}update(){this.start()}onFrame(){let e=[];for(let r of this.pastTrails)e.push(this.drawTrail(r,this.app.state));if(this.currentTrail){let r=this.drawTrail(this.currentTrail,this.app.state);e.push(r)}this.pastTrails=this.pastTrails.filter(r=>r.getStrokeOutline().length!==0),e.length===0&&this.stop();let o=e.join(" ").trim();this.trailElement.setAttribute("d",o),this.trailElement.setAttribute("fill",(this.options.fill??(()=>"black"))(this))}drawTrail(e,o){let r=e.getStrokeOutline(e.options.size/o.zoom.value).map(([n,i])=>{let a=qt({sceneX:n,sceneY:i},o);return[a.x,a.y]});return D1(r,!0)}};h();var uu=class{constructor(e,o){this.animationFrameHandler=e;this.app=o;this.animationFrameHandler.register(this,this.onFrame.bind(this)),this.localTrail=new Si(e,o,{...this.getTrailOptions(),fill:()=>Tu})}localTrail;collabTrails=new Map;container;getTrailOptions(){return{simplify:0,streamline:.4,sizeMapping:e=>{let n=Math.max(0,1-(performance.now()-e.pressure)/1e3),i=(50-Math.min(50,e.totalLength-e.currentIndex))/50;return Math.min(Un(i),Un(n))}}}startPath(e,o){this.localTrail.startPath(e,o)}addPointToPath(e,o){this.localTrail.addPointToPath(e,o)}endPath(){this.localTrail.endPath()}start(e){this.container=e,this.animationFrameHandler.start(this),this.localTrail.start(e)}stop(){this.animationFrameHandler.stop(this),this.localTrail.stop()}onFrame(){this.updateCollabTrails()}updateCollabTrails(){if(!(!this.container||this.app.state.collaborators.size===0)){for(let[e,o]of this.app.state.collaborators.entries()){let r;this.collabTrails.has(e)?r=this.collabTrails.get(e):(r=new Si(this.animationFrameHandler,this.app,{...this.getTrailOptions(),fill:()=>o.pointer?.laserColor||ui(e,o)}),r.start(this.container),this.collabTrails.set(e,r)),o.pointer&&o.pointer.tool==="laser"&&(o.button==="down"&&!r.hasCurrentTrail&&r.startPath(o.pointer.x,o.pointer.y),o.button==="down"&&r.hasCurrentTrail&&!r.hasLastPoint(o.pointer.x,o.pointer.y)&&r.addPointToPath(o.pointer.x,o.pointer.y),o.button==="up"&&r.hasCurrentTrail&&(r.addPointToPath(o.pointer.x,o.pointer.y),r.endPath()))}for(let e of this.collabTrails.keys())this.app.state.collaborators.has(e)||(this.collabTrails.get(e).stop(),this.collabTrails.delete(e))}}};h();var nI=(t,e,o,r,n,i)=>{let{zoom:a}=r,l=180*o/Math.PI,s=t*(a.value-1)/2,c=e*(a.value-1)/2;return t>n&&a.value!==1&&(s=n*(a.value-1)/2),e>i&&a.value!==1&&(c=i*(a.value-1)/2),`translate(${s}px, ${c}px) scale(${a.value}) rotate(${l}deg)`},O5=({id:t,onChange:e,onSubmit:o,getViewportCoords:r,element:n,canvas:i,excalidrawContainer:a,app:l})=>{let s=(O,U)=>{if(!U.style.fontFamily||!U.style.fontSize)return!1;let ee=U.style.fontFamily.replace(/"/g,"");return Pu({fontFamily:O.fontFamily})!==ee||`${O.fontSize}px`!==U.style.fontSize},c=()=>{let O=l.state,U=ao.getScene(n)?.getElement(t);if(!U)return;let{textAlign:ee,verticalAlign:K}=U,pe=l.scene.getNonDeletedElementsMap();if(U&&le(U)){let me=U.x,ce=U.y,oe=Pr(U,l.scene.getNonDeletedElementsMap()),R=U.width,B=U.height,V=U.width,Z=U.height;if(oe&&U.containerId){if(_r(oe)){let Xt=he.getBoundTextElementPosition(oe,U,pe);me=Xt.x,ce=Xt.y}let it=s(U,m),He;if(it?He=wl(oe.id,oe.height):(He=J1[oe.id],He||(He=wl(oe.id,oe.height))),R=Yu(oe,U),B=mb(oe,U),!_r(oe)&&Z>B){let Xt=Hi(Z,oe.type);te(oe,{height:Xt});return}else if(!_r(oe)&&oe.height>He.height&&Z<B){let Xt=Hi(Z,oe.type);te(oe,{height:Xt})}else{let{y:Xt}=pc(oe,U,pe);ce=Xt}}let[Y,j]=r(me,ce),J=m.selectionStart,ne=m.selectionEnd,dt=m.value.length;if(J===ne&&ne!==dt){let it=dt-ne;m.selectionStart=m.value.length-it,m.selectionEnd=m.value.length-it}oe||(R=(O.width-8-Y)/O.zoom.value,V=Math.min(V,R));let et=(O.height-j)/O.zoom.value;Object.assign(m.style,{font:Ko(U),lineHeight:U.lineHeight,width:`${V}px`,height:`${Z}px`,left:`${Y}px`,top:`${j}px`,transform:nI(V,Z,lb(U,oe),O,R,et),textAlign:ee,verticalAlign:K,color:U.strokeColor,opacity:U.opacity/100,filter:"var(--theme-filter)",maxHeight:`${et}px`}),m.scrollTop=0,tc()&&(m.style.fontFamily=Pu(U)),te(U,{x:me,y:ce})}},m=document.createElement("textarea");m.dir="auto",m.tabIndex=0,m.dataset.type="wysiwyg",m.wrap="off",m.classList.add("excalidraw-wysiwyg");let d="pre",f="normal";gt(n)&&(d="pre-wrap",f="break-word"),Object.assign(m.style,{position:"absolute",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",zIndex:"var(--zIndex-wysiwyg)",wordBreak:f,whiteSpace:d,overflowWrap:"break-word",boxSizing:"content-box"}),m.value=n.originalText,c(),e&&(m.onpaste=async O=>{let U=await Lc(O,!0);if(!U.text)return;let ee=Cl(U.text);if(!ee)return;let K=Pr(n,l.scene.getNonDeletedElementsMap()),pe=Ko({fontSize:l.state.currentItemFontSize,fontFamily:l.state.currentItemFontFamily});if(K){let me=at(K,l.scene.getNonDeletedElementsMap()),ce=nb(`${m.value}${ee}`,pe,Yu(K,me)),oe=rb(ce,pe);m.style.width=`${oe}px`}},m.oninput=()=>{e(Cl(m.value))}),m.onkeydown=O=>{if(!O.shiftKey&&Wd.keyTest(O))O.preventDefault(),l.actionManager.executeAction(Wd),c();else if(!O.shiftKey&&Gd.keyTest(O))O.preventDefault(),l.actionManager.executeAction(Gd),c();else if(Bf.keyTest(O))l.actionManager.executeAction(Bf);else if(zf.keyTest(O))l.actionManager.executeAction(zf);else if(O.key===T.ESCAPE)O.preventDefault(),M=!0,_();else if(O.key===T.ENTER&&O[T.CTRL_OR_CMD]){if(O.preventDefault(),O.isComposing||O.keyCode===229)return;M=!0,_()}else if(O.key===T.TAB||O[T.CTRL_OR_CMD]&&(O.code===fe.BRACKET_LEFT||O.code===fe.BRACKET_RIGHT)){if(O.preventDefault(),O.isComposing)return;O.shiftKey||O.code===fe.BRACKET_LEFT?w():y(),m.dispatchEvent(new Event("input"))}};let p=4,b=" ".repeat(p),x=new RegExp(`^ {1,${p}}`),y=()=>{let{selectionStart:O,selectionEnd:U}=m,ee=k(),K=m.value;ee.forEach(pe=>{let me=K.slice(0,pe),ce=K.slice(pe);K=`${me}${b}${ce}`}),m.value=K,m.selectionStart=O+p,m.selectionEnd=U+p*ee.length},w=()=>{let{selectionStart:O,selectionEnd:U}=m,ee=k(),K=[],pe=m.value;ee.forEach(me=>{let ce=pe.slice(me,me+p).match(x);if(ce){let oe=pe.slice(0,me),R=pe.slice(me+ce[0].length);pe=`${oe}${R}`,K.push(me)}}),m.value=pe,K.length&&(O>K[K.length-1]?m.selectionStart=Math.max(O-p,K[K.length-1]):m.selectionStart=O,m.selectionEnd=Math.max(m.selectionStart,U-p*K.length))},k=()=>{let{selectionStart:O,selectionEnd:U,value:ee}=m,K=ee.slice(0,O).match(/[^\n]*$/)[0].length;return O=O-K,ee.slice(O,U).split(`
`).reduce((me,ce,oe,R)=>me.concat(oe?me[oe-1]+R[oe-1].length+1:O),[]).reverse()},C=O=>{O.preventDefault(),O.stopPropagation()},M=!1,_=()=>{I();let O=ao.getScene(n)?.getElement(n.id);if(!O)return;let U=m.value,ee=Pr(O,l.scene.getNonDeletedElementsMap());if(ee){if(U=O.text,m.value.trim()){let K=ab(ee);!K||K!==n.id?te(ee,{boundElements:(ee.boundElements||[]).concat({type:"text",id:n.id})}):_r(ee)&&Xi(ee)}else te(ee,{boundElements:ee.boundElements?.filter(K=>!le(K))});$t(O,ee,l.scene.getNonDeletedElementsMap())}o({text:U,viaKeyboard:M,originalText:m.value})},I=()=>{D||(D=!0,m.onblur=null,m.oninput=null,m.onkeydown=null,W&&W.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("wheel",C,!0),window.removeEventListener("pointerdown",P),window.removeEventListener("pointerup",A),window.removeEventListener("blur",_),window.removeEventListener("beforeunload",_),F(),m.remove())},A=O=>{window.removeEventListener("pointerup",A);let U=O?.target,ee=U instanceof HTMLElement&&U.classList.contains("active-color");setTimeout(()=>{if(m.onblur=_,ee){let K=(me,ce)=>{me.find(R=>R.removedNodes.length>0&&R.removedNodes[0].dataset?.radixPopperContentWrapper!==void 0)&&(setTimeout(()=>{m.focus()}),ce.disconnect())};new MutationObserver(K).observe(document.querySelector(".excalidraw-container"),{childList:!0})}ee||m.focus()})},P=O=>{let U=O.target instanceof HTMLElement&&O.target.classList.contains("active-color");((O.target instanceof HTMLElement||O.target instanceof SVGElement)&&O.target.closest(`.${Ws.SHAPE_ACTIONS_MENU}`)&&!wo(O.target)||U)&&(m.onblur=null,window.addEventListener("pointerup",A),window.addEventListener("blur",_))},F=ao.getScene(n).addCallback(()=>{c(),!!document.activeElement?.closest(".color-picker-content")||m.focus()}),D=!1;m.select(),A();let W=null;i&&"ResizeObserver"in window?(W=new window.ResizeObserver(()=>{c()}),W.observe(i)):window.addEventListener("resize",c),window.addEventListener("pointerdown",P),window.addEventListener("wheel",C,{passive:!1,capture:!0}),window.addEventListener("beforeunload",_),a?.querySelector(".excalidraw-textEditorContainer").appendChild(m)};var Ce=v(S(),1),H5=Ct.default.createContext(null),$5=Ct.default.createContext(null),U5={viewport:{isMobile:!1,isLandscape:!1},editor:{isMobile:!1,canFitSidebar:!1},isTouchScreen:!1},kg=Ct.default.createContext(U5);kg.displayName="DeviceContext";var Ig=Ct.default.createContext({container:null,id:null});Ig.displayName="ExcalidrawContainerContext";var Mg=Ct.default.createContext([]);Mg.displayName="ExcalidrawElementsContext";var _g=Ct.default.createContext({...$i(),width:0,height:0,offsetLeft:0,offsetTop:0});_g.displayName="ExcalidrawAppStateContext";var Ag=Ct.default.createContext(()=>{console.warn("Uninitialized ExcalidrawSetAppStateContext context!")});Ag.displayName="ExcalidrawSetAppStateContext";var Lg=Ct.default.createContext(null);Lg.displayName="ExcalidrawActionManagerContext";var so=()=>(0,Ct.useContext)(H5),Sn=()=>(0,Ct.useContext)($5),Me=()=>(0,Ct.useContext)(kg),Mt=()=>(0,Ct.useContext)(Ig),En=()=>(0,Ct.useContext)(Mg),Da=()=>(0,Ct.useContext)(_g),_e=()=>(0,Ct.useContext)(Ag),St=()=>(0,Ct.useContext)(Lg),Ls=!1,Eg=0,ki=!1,Ps=!1,wg=!1,Cg={horizontal:null,vertical:null},Fn=0,Ds=!1,Tg=new Map,pu=!1,F5=0,B5=!1,Rs=null,Ae={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null},Sg=class t extends Ct.default.Component{canvas;interactiveCanvas=null;rc;unmounted=!1;actionManager;device=U5;excalidrawContainerRef=Ct.default.createRef();scene;renderer;fonts;resizeObserver;nearestScrollableContainer;library;libraryItemsFromStorage;id;history;excalidrawContainerValue;files={};imageCache=new Map;iFrameRefs=new Map;embedsValidationStatus=new Map;initializedEmbeds=new Set;elementsPendingErasure=new Set;hitLinkElement;lastPointerDownEvent=null;lastPointerUpEvent=null;lastPointerMoveEvent=null;lastViewportPosition={x:0,y:0};animationFrameHandler=new du;laserTrails=new uu(this.animationFrameHandler,this);eraserTrail=new Si(this.animationFrameHandler,this,{streamline:.2,size:5,keepHead:!0,sizeMapping:e=>{let n=Math.max(0,1-(performance.now()-e.pressure)/200),i=(10-Math.min(10,e.totalLength-e.currentIndex))/10;return Math.min(Un(i),Un(n))},fill:()=>this.state.theme===qe.LIGHT?"rgba(0, 0, 0, 0.2)":"rgba(255, 255, 255, 0.2)"});onChangeEmitter=new Do;onPointerDownEmitter=new Do;onPointerUpEmitter=new Do;onUserFollowEmitter=new Do;onScrollChangeEmitter=new Do;missingPointerEventCleanupEmitter=new Do;onRemoveEventListenersEmitter=new Do;constructor(e){super(e);let o=$i(),{excalidrawAPI:r,viewModeEnabled:n=!1,zenModeEnabled:i=!1,gridModeEnabled:a=!1,objectsSnapModeEnabled:l=!1,theme:s=o.theme,name:c=`${g("labels.untitled")}-${Lu()}`}=e;if(this.state={...o,theme:s,isLoading:!0,...this.getCanvasOffsets(),viewModeEnabled:n,zenModeEnabled:i,objectsSnapModeEnabled:l,gridSize:a?Mr:null,name:c,width:window.innerWidth,height:window.innerHeight},this.id=E1(),this.library=new vE(this),this.actionManager=new Mm(this.syncActionResult,()=>this.state,()=>this.scene.getElementsIncludingDeleted(),this),this.scene=new ao,this.canvas=document.createElement("canvas"),this.rc=y1.canvas(this.canvas),this.renderer=new Is(this.scene),r){let m={updateScene:this.updateScene,updateLibrary:this.library.updateLibrary,addFiles:this.addFiles,resetScene:this.resetScene,getSceneElementsIncludingDeleted:this.getSceneElementsIncludingDeleted,history:{clear:this.resetHistory},scrollToContent:this.scrollToContent,getSceneElements:this.getSceneElements,getAppState:()=>this.state,getFiles:()=>this.files,getName:this.getName,registerAction:d=>{this.actionManager.registerAction(d)},refresh:this.refresh,setToast:this.setToast,id:this.id,setActiveTool:this.setActiveTool,setCursor:this.setCursor,resetCursor:this.resetCursor,updateFrameRendering:this.updateFrameRendering,toggleSidebar:this.toggleSidebar,onChange:d=>this.onChangeEmitter.on(d),onPointerDown:d=>this.onPointerDownEmitter.on(d),onPointerUp:d=>this.onPointerUpEmitter.on(d),onScrollChange:d=>this.onScrollChangeEmitter.on(d),onUserFollow:d=>this.onUserFollowEmitter.on(d)};typeof r=="function"?r(m):console.error("excalidrawAPI should be a function!")}this.excalidrawContainerValue={container:this.excalidrawContainerRef.current,id:this.id},this.fonts=new ou({scene:this.scene,onSceneUpdated:this.onSceneUpdated}),this.history=new Bw,this.actionManager.registerAll(Eb),this.actionManager.registerAction(Rw(this.history)),this.actionManager.registerAction(Nw(this.history))}onWindowMessage(e){if(e.origin!=="https://player.vimeo.com"&&e.origin!=="https://www.youtube.com")return;let o=null;try{o=JSON.parse(e.data)}catch{}if(o)switch(e.origin){case"https://player.vimeo.com":if(o.method==="paused"){let r=null,n=document.body.querySelectorAll("iframe.excalidraw__embeddable");if(!n)break;for(let i of n)i.contentWindow===e.source&&(r=i.contentWindow);r?.postMessage(JSON.stringify({method:o.value?"play":"pause",value:!0}),"*")}break;case"https://www.youtube.com":if(o.event==="infoDelivery"&&o.info&&o.id&&typeof o.info.playerState=="number"){let r=o.id,n=o.info.playerState;Object.values(rl).includes(n)&&Tg.set(r,n)}break}}cacheEmbeddableRef(e,o){o&&this.iFrameRefs.set(e.id,o)}getHTMLIFrameElement(e){return this.iFrameRefs.get(e.id)}handleEmbeddableCenterClick(e){if(this.state.activeEmbeddable?.element===e&&this.state.activeEmbeddable?.state==="active"||(setTimeout(()=>{this.setState({activeEmbeddable:{element:e,state:"active"},selectedElementIds:{[e.id]:!0},draggingElement:null,selectionElement:null})},100),Pi(e)))return;let o=this.getHTMLIFrameElement(e);if(o?.contentWindow){if(o.src.includes("youtube")){let r=Tg.get(e.id);switch(r||(Tg.set(e.id,rl.UNSTARTED),o.contentWindow.postMessage(JSON.stringify({event:"listening",id:e.id}),"*")),r){case rl.PLAYING:case rl.BUFFERING:o.contentWindow?.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:""}),"*");break;default:o.contentWindow?.postMessage(JSON.stringify({event:"command",func:"playVideo",args:""}),"*")}}o.src.includes("player.vimeo.com")&&o.contentWindow.postMessage(JSON.stringify({method:"paused"}),"*")}}isIframeLikeElementCenter(e,o,r,n){return e&&!o.altKey&&!o.shiftKey&&!o.metaKey&&!o.ctrlKey&&(this.state.activeEmbeddable?.element!==e||this.state.activeEmbeddable?.state==="hover"||!this.state.activeEmbeddable)&&r>=e.x+e.width/3&&r<=e.x+2*e.width/3&&n>=e.y+e.height/3&&n<=e.y+2*e.height/3}updateEmbedValidationStatus=(e,o)=>{this.embedsValidationStatus.set(e.id,o),mr.delete(e)};updateEmbeddables=()=>{let e=new Set,o=!1;this.scene.getNonDeletedElements().filter(r=>{if(Ht(r)){if(e.add(r.id),!this.embedsValidationStatus.has(r.id)){o=!0;let n=Gi(r.link,this.props.validateEmbeddable);this.updateEmbedValidationStatus(r,n)}}else Pi(r)&&e.add(r.id);return!1}),o&&this.scene.informMutation(),this.iFrameRefs.forEach((r,n)=>{e.has(n)||this.iFrameRefs.delete(n)})};renderEmbeddables(){let e=this.state.zoom.value,o=this.state.width,r=this.state.height,n=this.scene.getNonDeletedElements().filter(i=>Ht(i)&&this.embedsValidationStatus.get(i.id)===!0||Pi(i));return(0,Ce.jsx)(Ce.Fragment,{children:n.map(i=>{let{x:a,y:l}=qt({sceneX:i.x,sceneY:i.y},this.state),s=Al(i,o,r,this.state,this.scene.getNonDeletedElementsMap()),c=this.initializedEmbeds.has(i.id);if(s&&!c&&this.initializedEmbeds.add(i.id),!(s||c))return null;let d;if(Pi(i)){d=null;let b=(i.customData?.generationData??this.magicGenerations.get(i.id))||{status:"error",message:"No generation data",code:"ERR_NO_GENERATION_DATA"};if(b.status==="done"){let x=b.html;d={intrinsicSize:{w:i.width,h:i.height},type:"document",srcdoc:()=>x}}else if(b.status==="pending")d={intrinsicSize:{w:i.width,h:i.height},type:"document",srcdoc:()=>ju(`
                    <style>
                      html, body {
                        width: 100%;
                        height: 100%;
                        color: ${this.state.theme==="dark"?"white":"black"};
                      }
                      body {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        gap: 1rem;
                      }

                      .Spinner {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        margin-left: auto;
                        margin-right: auto;
                      }

                      .Spinner svg {
                        animation: rotate 1.6s linear infinite;
                        transform-origin: center center;
                        width: 40px;
                        height: 40px;
                      }

                      .Spinner circle {
                        stroke: currentColor;
                        animation: dash 1.6s linear 0s infinite;
                        stroke-linecap: round;
                      }

                      @keyframes rotate {
                        100% {
                          transform: rotate(360deg);
                        }
                      }

                      @keyframes dash {
                        0% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: 0;
                        }
                        50% {
                          stroke-dasharray: 150, 300;
                          stroke-dashoffset: -200;
                        }
                        100% {
                          stroke-dasharray: 1, 300;
                          stroke-dashoffset: -280;
                        }
                      }
                    </style>
                    <div class="Spinner">
                      <svg
                        viewBox="0 0 100 100"
                      >
                        <circle
                          cx="50"
                          cy="50"
                          r="46"
                          stroke-width="8"
                          fill="none"
                          stroke-miter-limit="10"
                        />
                      </svg>
                    </div>
                    <div>Generating...</div>
                  `)};else{let x;b.code==="ERR_GENERATION_INTERRUPTED"?x="Generation was interrupted...":x=b.message||"Generation failed",d={intrinsicSize:{w:i.width,h:i.height},type:"document",srcdoc:()=>ju(`
                    <style>
                    html, body {
                      height: 100%;
                    }
                      body {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        color: ${Sr.red[3]};
                      }
                      h1, h3 {
                        margin-top: 0;
                        margin-bottom: 0.5rem;
                      }
                    </style>
                    <h1>Error!</h1>
                    <h3>${x}</h3>
                  `)}}}else d=Yn(yb(i.link||""));let f=this.state.activeEmbeddable?.element===i&&this.state.activeEmbeddable?.state==="active",p=this.state.activeEmbeddable?.element===i&&this.state.activeEmbeddable?.state==="hover";return(0,Ce.jsx)("div",{className:z("excalidraw__embeddable-container",{"is-hovered":p}),style:{transform:s?`translate(${a-this.state.offsetLeft}px, ${l-this.state.offsetTop}px) scale(${e})`:"none",display:s?"block":"none",opacity:s0(i,Dc(i,this.scene.getNonDeletedElementsMap()),this.elementsPendingErasure),"--embeddable-radius":`${U1(Math.min(i.width,i.height),i)}px`},children:(0,Ce.jsxs)("div",{className:"excalidraw__embeddable-container__inner",style:{width:s?`${i.width}px`:0,height:s?`${i.height}px`:0,transform:s?`rotate(${i.angle}rad)`:"none",pointerEvents:f?Hn.enabled:Hn.disabled},children:[p&&(0,Ce.jsx)("div",{className:"excalidraw__embeddable-hint",children:g("buttons.embeddableInteractionButton")}),(0,Ce.jsx)("div",{className:"excalidraw__embeddable__outer",style:{padding:`${i.strokeWidth}px`},children:(Ht(i)?this.props.renderEmbeddable?.(i,this.state):null)??(0,Ce.jsx)("iframe",{ref:b=>this.cacheEmbeddableRef(i,b),className:"excalidraw__embeddable",srcDoc:d?.type==="document"?d.srcdoc(this.state.theme):void 0,src:d?.type!=="document"?d?.link??"":void 0,scrolling:"no",referrerPolicy:"no-referrer-when-downgrade",title:"Excalidraw Embedded Content",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation allow-downloads"})})]})},i.id)})})}getFrameNameDOMId=e=>`${this.id}-frame-name-${e.id}`;frameNameBoundsCache={get:e=>{let o=this.frameNameBoundsCache._cache.get(e.id);if(!o||o.zoom!==this.state.zoom.value||o.versionNonce!==e.versionNonce){let r=document.getElementById(this.getFrameNameDOMId(e));if(r){let n=r.getBoundingClientRect(),i=Ve({clientX:n.x,clientY:n.y},this.state),a=Ve({clientX:n.right,clientY:n.bottom},this.state);return o={x:i.x,y:i.y,width:a.x-i.x,height:a.y-i.y,angle:0,zoom:this.state.zoom.value,versionNonce:e.versionNonce},this.frameNameBoundsCache._cache.set(e.id,o),o}return null}return o},_cache:new Map};renderFrameNames=()=>{if(!this.state.frameRendering.enabled||!this.state.frameRendering.name)return null;let e=this.state.theme==="dark",o=0,r=0;return this.scene.getNonDeletedFramesLikes().map(n=>{if(Fu(n)?o++:r++,!Al(n,this.canvas.width/window.devicePixelRatio,this.canvas.height/window.devicePixelRatio,{offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,zoom:this.state.zoom},this.scene.getNonDeletedElementsMap()))return null;let{x:i,y:a}=qt({sceneX:n.x,sceneY:n.y},this.state),l=6,s=()=>{te(n,{name:n.name?.trim()||null}),this.setState({editingFrame:null})},c,m=l0(n,Fu(n)?o:r);if(n.id===this.state.editingFrame){let d=m;c=(0,Ce.jsx)("input",{autoFocus:!0,value:d,onChange:f=>{te(n,{name:f.target.value})},onFocus:f=>f.target.select(),onBlur:()=>s(),onKeyDown:f=>{(f.key===T.ESCAPE||f.key===T.ENTER)&&s()},style:{background:this.state.viewBackgroundColor,filter:e?m1:"none",zIndex:2,border:"none",display:"block",padding:`${l}px`,borderRadius:4,boxShadow:"inset 0 0 0 1px var(--color-primary)",fontFamily:"Assistant",fontSize:"14px",transform:`translate(-${l}px, ${l}px)`,color:"var(--color-gray-80)",overflow:"hidden",maxWidth:`${document.body.clientWidth-i-l}px`},size:d.length+1||1,dir:"auto",autoComplete:"off",autoCapitalize:"off",autoCorrect:"off"})}else c=m;return(0,Ce.jsx)("div",{id:this.getFrameNameDOMId(n),style:{position:"absolute",bottom:`${this.state.height+Go.nameOffsetY-a+this.state.offsetTop}px`,left:`${i-this.state.offsetLeft}px`,zIndex:2,fontSize:Go.nameFontSize,color:e?Go.nameColorDarkTheme:Go.nameColorLightTheme,lineHeight:Go.nameLineHeight,width:"max-content",maxWidth:`${n.width}px`,overflow:n.id===this.state.editingFrame?"visible":"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",cursor:De.MOVE,pointerEvents:this.state.viewModeEnabled?Hn.disabled:Hn.enabled},onPointerDown:d=>this.handleCanvasPointerDown(d),onWheel:d=>this.handleWheel(d),onContextMenu:this.handleCanvasContextMenu,onDoubleClick:()=>{this.setState({editingFrame:n.id})},children:c},n.id)})};toggleOverscrollBehavior(e){document.documentElement.style.overscrollBehaviorX=e.type==="pointerenter"?"none":"auto"}render(){let e=this.scene.getSelectedElements(this.state),{renderTopRightUI:o,renderCustomStats:r}=this.props,n=this.scene.getVersionNonce(),{elementsMap:i,visibleElements:a}=this.renderer.getRenderableElements({versionNonce:n,zoom:this.state.zoom,offsetLeft:this.state.offsetLeft,offsetTop:this.state.offsetTop,scrollX:this.state.scrollX,scrollY:this.state.scrollY,height:this.state.height,width:this.state.width,editingElement:this.state.editingElement,pendingImageElementId:this.state.pendingImageElementId}),l=this.scene.getNonDeletedElementsMap(),s=!(this.state.editingElement&&Re(this.state.editingElement))&&(this.state.selectionElement||this.state.draggingElement||this.state.resizingElement||this.state.activeTool.type==="laser"&&this.state.cursorButton==="down"||this.state.editingElement&&!le(this.state.editingElement)),c=e[0];return(0,Ce.jsx)("div",{className:z("excalidraw excalidraw-container",{"excalidraw--view-mode":this.state.viewModeEnabled,"excalidraw--mobile":this.device.editor.isMobile}),style:{"--ui-pointerEvents":s?Hn.disabled:Hn.enabled},ref:this.excalidrawContainerRef,onDrop:this.handleAppOnDrop,tabIndex:0,onKeyDown:this.props.handleKeyboardGlobally?void 0:this.onKeyDown,onPointerEnter:this.toggleOverscrollBehavior,onPointerLeave:this.toggleOverscrollBehavior,children:(0,Ce.jsx)(H5.Provider,{value:this,children:(0,Ce.jsx)($5.Provider,{value:this.props,children:(0,Ce.jsx)(Ig.Provider,{value:this.excalidrawContainerValue,children:(0,Ce.jsx)(kg.Provider,{value:this.device,children:(0,Ce.jsx)(Ag.Provider,{value:this.setAppState,children:(0,Ce.jsx)(_g.Provider,{value:this.state,children:(0,Ce.jsxs)(Mg.Provider,{value:this.scene.getNonDeletedElements(),children:[(0,Ce.jsxs)(Lg.Provider,{value:this.actionManager,children:[(0,Ce.jsx)(J3,{canvas:this.canvas,appState:this.state,files:this.files,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getNonDeletedElements(),onLockToggle:this.toggleLock,onPenModeToggle:this.togglePenMode,onHandToolToggle:this.onHandToolToggle,langCode:$r().code,renderTopRightUI:o,renderCustomStats:r,showExitZenModeBtn:typeof this.props?.zenModeEnabled>"u"&&this.state.zenModeEnabled,UIOptions:this.props.UIOptions,onExportImage:this.onExportImage,renderWelcomeScreen:!this.state.isLoading&&this.state.showWelcomeScreen&&this.state.activeTool.type==="selection"&&!this.state.zenModeEnabled&&!this.scene.getElementsIncludingDeleted().length,app:this,isCollaborating:this.props.isCollaborating,openAIKey:this.OPENAI_KEY,isOpenAIKeyPersisted:this.OPENAI_KEY_IS_PERSISTED,onOpenAIAPIKeyChange:this.onOpenAIKeyChange,onMagicSettingsConfirm:this.onMagicSettingsConfirm,children:this.props.children}),(0,Ce.jsx)("div",{className:"excalidraw-textEditorContainer"}),(0,Ce.jsx)("div",{className:"excalidraw-contextMenuContainer"}),(0,Ce.jsx)("div",{className:"excalidraw-eye-dropper-container"}),(0,Ce.jsx)(_5,{trails:[this.laserTrails,this.eraserTrail]}),e.length===1&&this.state.showHyperlinkPopup&&(0,Ce.jsx)(tE,{element:c,elementsMap:l,setAppState:this.setAppState,onLinkOpen:this.props.onLinkOpen,setToast:this.setToast,updateEmbedValidationStatus:this.updateEmbedValidationStatus},c.id),this.props.aiEnabled!==!1&&e.length===1&&pl(c)&&(0,Ce.jsx)(yg,{element:c,elementsMap:i,children:(0,Ce.jsx)(cu,{title:g("labels.convertToCode"),icon:sa,checked:!1,onChange:()=>this.onMagicFrameGenerate(c,"button")})}),e.length===1&&Pi(c)&&c.customData?.generationData?.status==="done"&&(0,Ce.jsxs)(yg,{element:c,elementsMap:i,children:[(0,Ce.jsx)(cu,{title:g("labels.copySource"),icon:ld,checked:!1,onChange:()=>this.onIframeSrcCopy(c)}),(0,Ce.jsx)(cu,{title:"Enter fullscreen",icon:e2,checked:!1,onChange:()=>{let m=this.getHTMLIFrameElement(c);if(m)try{m.requestFullscreen(),this.setState({activeEmbeddable:{element:c,state:"active"},selectedElementIds:{[c.id]:!0},draggingElement:null,selectionElement:null})}catch(d){console.warn(d),this.setState({errorMessage:"Couldn't enter fullscreen"})}}})]}),this.state.toast!==null&&(0,Ce.jsx)(Q3,{message:this.state.toast.message,onClose:()=>this.setToast(null),duration:this.state.toast.duration,closable:this.state.toast.closable}),this.state.contextMenu&&(0,Ce.jsx)(Hw,{items:this.state.contextMenu.items,top:this.state.contextMenu.top,left:this.state.contextMenu.left,actionManager:this.actionManager,onClose:m=>{this.setState({contextMenu:null},()=>{this.focusContainer(),m?.()})}}),(0,Ce.jsx)(xg,{canvas:this.canvas,rc:this.rc,elementsMap:i,allElementsMap:l,visibleElements:a,versionNonce:n,selectionNonce:this.state.selectionElement?.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderConfig:{imageCache:this.imageCache,isExporting:!1,renderGrid:!0,canvasBackgroundColor:this.state.viewBackgroundColor,embedsValidationStatus:this.embedsValidationStatus,elementsPendingErasure:this.elementsPendingErasure}}),(0,Ce.jsx)(bg,{containerRef:this.excalidrawContainerRef,canvas:this.interactiveCanvas,elementsMap:i,visibleElements:a,selectedElements:e,versionNonce:n,selectionNonce:this.state.selectionElement?.versionNonce,scale:window.devicePixelRatio,appState:this.state,renderInteractiveSceneCallback:this.renderInteractiveSceneCallback,handleCanvasRef:this.handleInteractiveCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.handleCanvasPointerUp,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick}),this.state.userToFollow&&(0,Ce.jsx)(P5,{width:this.state.width,height:this.state.height,userToFollow:this.state.userToFollow,onDisconnect:this.maybeUnfollowRemoteUser}),this.renderFrameNames()]}),this.renderEmbeddables()]})})})})})})})})}focusContainer=()=>{this.excalidrawContainerRef.current?.focus()};getSceneElementsIncludingDeleted=()=>this.scene.getElementsIncludingDeleted();getSceneElements=()=>this.scene.getNonDeletedElements();onInsertElements=e=>{this.addElementsFromPasteOrLibrary({elements:e,position:"center",files:null})};onExportImage=async(e,o,r)=>{ve("export",e,"ui");let n=await si(e,o,this.state,this.files,{exportBackground:this.state.exportBackground,name:this.getName(),viewBackgroundColor:this.state.viewBackgroundColor,exportingFrame:r.exportingFrame}).catch(Qs).catch(i=>{console.error(i),this.setState({errorMessage:i.message})});this.state.exportEmbedScene&&n&&Tc(n)&&this.setState({fileHandle:n})};magicGenerations=new Map;updateMagicGeneration=({frameElement:e,data:o})=>{o.status==="pending"?te(e,{customData:{generationData:void 0}},!1):te(e,{customData:{generationData:o}},!1),this.magicGenerations.set(e.id,o),this.onSceneUpdated()};getTextFromElements(e){return e.reduce((r,n)=>(le(n)&&r.push(n.text),r),[]).join(`

`)}async onMagicFrameGenerate(e,o){if(!this.OPENAI_KEY){this.setState({openDialog:{name:"settings",tab:"diagram-to-code",source:"generation"}}),ve("ai","generate (missing key)","d2c");return}let r=Fc(this.scene.getNonDeletedElements(),e).filter(d=>!pl(d));if(!r.length){o==="button"?(this.setState({errorMessage:"Cannot generate from an empty frame"}),ve("ai","generate (no-children)","d2c")):this.setActiveTool({type:"magicframe"});return}let n=this.insertIframeElement({sceneX:e.x+e.width+30,sceneY:e.y,width:e.width,height:e.height});if(!n)return;this.updateMagicGeneration({frameElement:n,data:{status:"pending"}}),this.setState({selectedElementIds:{[n.id]:!0}});let i=await ap({elements:this.scene.getNonDeletedElements(),appState:{...this.state,exportBackground:!0,viewBackgroundColor:this.state.viewBackgroundColor},exportingFrame:e,files:this.files}),a=await Ic(i),l=this.getTextFromElements(r);ve("ai","generate (start)","d2c");let s=await L5({image:a,apiKey:this.OPENAI_KEY,text:l,theme:this.state.theme});if(!s.ok){ve("ai","generate (failed)","d2c"),console.error(s.error),this.updateMagicGeneration({frameElement:n,data:{status:"error",code:"ERR_OAI",message:s.error?.message||"Unknown error during generation"}});return}if(ve("ai","generate (success)","d2c"),s.choices[0].message.content==null){this.updateMagicGeneration({frameElement:n,data:{status:"error",code:"ERR_OAI",message:"Nothing genereated :("}});return}let c=s.choices[0].message.content,m=c.slice(c.indexOf("<!DOCTYPE html>"),c.indexOf("</html>")+7);this.updateMagicGeneration({frameElement:n,data:{status:"done",html:m}})}onIframeSrcCopy(e){e.customData?.generationData?.status==="done"&&(Zi(e.customData.generationData.html),this.setToast({message:"copied to clipboard",closable:!1,duration:1500}))}OPENAI_KEY=uo.get(Eo.OAI_API_KEY);OPENAI_KEY_IS_PERSISTED=uo.has(Eo.OAI_API_KEY)||!1;onOpenAIKeyChange=(e,o)=>{if(this.OPENAI_KEY=e||null,o){let r=uo.set(Eo.OAI_API_KEY,e);this.OPENAI_KEY_IS_PERSISTED=r}else this.OPENAI_KEY_IS_PERSISTED=!1};onMagicSettingsConfirm=(e,o,r)=>{if(this.OPENAI_KEY=e||null,this.onOpenAIKeyChange(this.OPENAI_KEY,o),r==="settings")return;let n=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});e?n.length?this.onMagicframeToolSelect():this.setActiveTool({type:"magicframe"}):pl(n[0])||this.setActiveTool({type:"magicframe"})};onMagicframeToolSelect=()=>{if(!this.OPENAI_KEY){this.setState({openDialog:{name:"settings",tab:"diagram-to-code",source:"tool"}}),ve("ai","tool-select (missing key)","d2c");return}let e=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds});if(e.length===0)this.setActiveTool({type:mt.magicframe}),ve("ai","tool-select (empty-selection)","d2c");else{let o=e.length===1&&pl(e[0])&&e[0];if(!o&&e.some(n=>Te(n)||n.frameId)){this.setActiveTool({type:mt.magicframe});return}ve("ai","tool-select (existing selection)","d2c");let r;if(o)r=o;else{let[n,i,a,l]=Ke(e),s=50;r=Tl({...Go,x:n-s,y:i-s,width:a-n+s*2,height:l-i+s*2,opacity:100,locked:!1}),this.scene.addNewElement(r);for(let c of e)te(c,{frameId:r.id});this.setState({selectedElementIds:{[r.id]:!0}})}this.onMagicFrameGenerate(r,"upstream")}};openEyeDropper=({type:e})=>{Ut.set(yn,{swapPreviewOnAlt:!0,colorPickerType:e==="stroke"?"elementStroke":"elementBackground",onSelect:(o,r)=>{let n=e==="background"&&r.altKey||e==="stroke"&&!r.altKey;!this.scene.getSelectedElements(this.state).length||this.state.activeTool.type!=="selection"?n?this.syncActionResult({appState:{...this.state,currentItemStrokeColor:o},commitToHistory:!0}):this.syncActionResult({appState:{...this.state,currentItemBackgroundColor:o},commitToHistory:!0}):this.updateScene({elements:this.scene.getElementsIncludingDeleted().map(a=>this.state.selectedElementIds[a.id]?ue(a,{[n?"strokeColor":"backgroundColor"]:o}):a)})},keepOpenOnAlt:!1})};syncActionResult=Xe(e=>{if(this.unmounted||e===!1)return;let o=null;if(e.elements&&(e.elements.forEach(r=>{this.state.editingElement?.id===r.id&&this.state.editingElement!==r&&gp(r)&&(o=r)}),this.scene.replaceAllElements(e.elements),e.commitToHistory&&this.history.resumeRecording()),e.files&&(this.files=e.replaceFiles?e.files:{...this.files,...e.files},this.addNewImagesToImageCache()),e.appState||o||this.state.contextMenu){e.commitToHistory&&this.history.resumeRecording();let r=e?.appState?.viewModeEnabled||!1,n=e?.appState?.zenModeEnabled||!1,i=e?.appState?.gridSize||null,a=e?.appState?.theme||this.props.theme||qe.LIGHT,l=e?.appState?.name??this.state.name,s=e?.appState?.errorMessage??this.state.errorMessage;typeof this.props.viewModeEnabled<"u"&&(r=this.props.viewModeEnabled),typeof this.props.zenModeEnabled<"u"&&(n=this.props.zenModeEnabled),typeof this.props.gridModeEnabled<"u"&&(i=this.props.gridModeEnabled?Mr:null),o=o||e.appState?.editingElement||null,o?.isDeleted&&(o=null),this.setState(c=>Object.assign(e.appState||{},{contextMenu:null,editingElement:o,viewModeEnabled:r,zenModeEnabled:n,gridSize:i,theme:a,name:l,errorMessage:s}),()=>{e.syncHistory&&this.history.setCurrentState(this.state,this.scene.getElementsIncludingDeleted())})}});onBlur=Xe(()=>{ki=!1,this.setState({isBindingEnabled:!0})});onUnload=()=>{this.onBlur()};disableEvent=e=>{e.preventDefault()};resetHistory=()=>{this.history.clear()};resetScene=Xe(e=>{this.scene.replaceAllElements([]),this.setState(o=>({...$i(),isLoading:e?.resetLoadingState?!1:o.isLoading,theme:this.state.theme})),this.resetHistory()});initializeScene=async()=>{"launchQueue"in window&&"LaunchParams"in window&&window.launchQueue.setConsumer(async r=>{if(!r.files.length)return;let n=r.files[0],i=await n.getFile();this.loadFileToCanvas(new File([i],i.name||"",{type:i.type}),n)}),this.props.theme&&this.setState({theme:this.props.theme}),this.state.isLoading||this.setState({isLoading:!0});let e=null;try{e=await this.props.initialData||null,e?.libraryItems&&this.library.updateLibrary({libraryItems:e.libraryItems,merge:!0}).catch(r=>{console.error(r)})}catch(r){console.error(r),e={appState:{errorMessage:r.message||"Encountered an error during importing or restoring scene data"}}}let o=Ju(e,null,null,{repairBindings:!0});o.appState={...o.appState,theme:this.props.theme||o.appState.theme,openSidebar:o.appState?.openSidebar||this.state.openSidebar,activeTool:o.appState.activeTool.type==="image"?{...o.appState.activeTool,type:"selection"}:o.appState.activeTool,isLoading:!1,toast:this.state.toast},e?.scrollToContent&&(o.appState={...o.appState,...Xn(o.elements,{...o.appState,width:this.state.width,height:this.state.height,offsetTop:this.state.offsetTop,offsetLeft:this.state.offsetLeft})}),this.fonts.loadFontsForElements(o.elements),this.resetHistory(),this.syncActionResult({...o,commitToHistory:!0})};isMobileBreakpoint=(e,o)=>e<u1||o<f1&&e<p1;refreshViewportBreakpoints=()=>{if(!this.excalidrawContainerRef.current)return;let{clientWidth:o,clientHeight:r}=document.body,n=this.device.viewport,i=Ai(n,{isLandscape:o>r,isMobile:this.isMobileBreakpoint(o,r)});return n!==i?(this.device={...this.device,viewport:i},!0):!1};refreshEditorBreakpoints=()=>{let e=this.excalidrawContainerRef.current;if(!e)return;let{width:o,height:r}=e.getBoundingClientRect(),n=this.props.UIOptions.dockedSidebarBreakpoint!=null?this.props.UIOptions.dockedSidebarBreakpoint:h1,i=this.device.editor,a=Ai(i,{isMobile:this.isMobileBreakpoint(o,r),canFitSidebar:o>n});return i!==a?(this.device={...this.device,editor:a},!0):!1};async componentDidMount(){if(this.unmounted=!1,this.excalidrawContainerValue.container=this.excalidrawContainerRef.current,E.MODE===Su.TEST||E.DEV){let o=this.setState.bind(this);Object.defineProperties(window.h,{state:{configurable:!0,get:()=>this.state},setState:{configurable:!0,value:(...r)=>this.setState(...r)},app:{configurable:!0,value:this},history:{configurable:!0,value:this.history}})}this.scene.addCallback(this.onSceneUpdated),this.addEventListeners(),this.props.autoFocus&&this.excalidrawContainerRef.current&&this.focusContainer(),tc()||(this.refreshViewportBreakpoints(),this.refreshEditorBreakpoints()),tl&&this.excalidrawContainerRef.current&&(this.resizeObserver=new ResizeObserver(()=>{this.refreshEditorBreakpoints(),this.updateDOMRect()}),this.resizeObserver?.observe(this.excalidrawContainerRef.current)),new URLSearchParams(window.location.search.slice(1)).has("web-share-target")?this.restoreFileFromShare():this.updateDOMRect(this.initializeScene),Xg()&&!ub()&&this.setState({errorMessage:(0,Ce.jsx)(f5,{})})}componentWillUnmount(){this.renderer.destroy(),this.scene=new ao,this.renderer=new Is(this.scene),this.files={},this.imageCache.clear(),this.resizeObserver?.disconnect(),this.unmounted=!0,this.removeEventListeners(),this.scene.destroy(),this.library.destroy(),this.laserTrails.stop(),this.eraserTrail.stop(),this.onChangeEmitter.clear(),mr.destroy(),zo.destroy(),clearTimeout(Fn),Oe.clearCache(),Rt.clearCache(),Fn=0,document.documentElement.style.overscrollBehaviorX=""}onResize=Xe(()=>{this.scene.getElementsIncludingDeleted().forEach(e=>mr.delete(e)),this.refreshViewportBreakpoints(),this.updateDOMRect(),tl||this.refreshEditorBreakpoints(),this.setState({})});onFullscreenChange=()=>{!document.fullscreenElement&&this.state.activeEmbeddable?.state==="active"&&this.setState({activeEmbeddable:null})};removeEventListeners(){this.onRemoveEventListenersEmitter.trigger()}addEventListeners(){this.removeEventListeners(),this.props.handleKeyboardGlobally&&this.onRemoveEventListenersEmitter.once(ot(document,"keydown",this.onKeyDown,!1)),this.onRemoveEventListenersEmitter.once(ot(this.excalidrawContainerRef.current,"wheel",this.onWheel,{passive:!1}),ot(window,"message",this.onWindowMessage,!1),ot(document,"pointerup",this.removePointer),ot(document,"copy",this.onCopy),ot(document,"keyup",this.onKeyUp,{passive:!0}),ot(document,"mousemove",this.updateCurrentCursorPosition),ot(document.fonts,"loadingdone",e=>{let o=e.fontfaces;this.fonts.onFontsLoaded(o)}),ot(document,"gesturestart",this.onGestureStart,!1),ot(document,"gesturechange",this.onGestureChange,!1),ot(document,"gestureend",this.onGestureEnd,!1),ot(window,"focus",()=>{this.maybeCleanupAfterMissingPointerUp(null)})),!this.state.viewModeEnabled&&(this.onRemoveEventListenersEmitter.once(ot(document,"fullscreenchange",this.onFullscreenChange),ot(document,"paste",this.pasteFromClipboard),ot(document,"cut",this.onCut),ot(window,"resize",this.onResize,!1),ot(window,"unload",this.onUnload,!1),ot(window,"blur",this.onBlur,!1),ot(this.excalidrawContainerRef.current,"dragover",this.disableEvent,!1),ot(this.excalidrawContainerRef.current,"drop",this.disableEvent,!1)),this.props.detectScroll&&this.onRemoveEventListenersEmitter.once(ot(I1(this.excalidrawContainerRef.current),"scroll",this.onScroll)))}componentDidUpdate(e,o){this.updateEmbeddables();let r=this.scene.getElementsIncludingDeleted(),n=this.scene.getNonDeletedElementsMap();!this.state.showWelcomeScreen&&!r.length&&this.setState({showWelcomeScreen:!0}),e.UIOptions.dockedSidebarBreakpoint!==this.props.UIOptions.dockedSidebarBreakpoint&&this.refreshEditorBreakpoints(),o.userToFollow&&!this.state.collaborators.has(o.userToFollow.socketId)&&this.maybeUnfollowRemoteUser(),(o.zoom.value!==this.state.zoom.value||o.scrollX!==this.state.scrollX||o.scrollY!==this.state.scrollY)&&(this.props?.onScrollChange?.(this.state.scrollX,this.state.scrollY,this.state.zoom),this.onScrollChangeEmitter.trigger(this.state.scrollX,this.state.scrollY,this.state.zoom)),o.userToFollow!==this.state.userToFollow&&(o.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:o.userToFollow,action:"UNFOLLOW"}),this.state.userToFollow&&this.onUserFollowEmitter.trigger({userToFollow:this.state.userToFollow,action:"FOLLOW"})),Object.keys(this.state.selectedElementIds).length&&So(this.state)&&this.setState({activeTool:tt(this.state,{type:"selection"})}),this.state.activeTool.type==="eraser"&&o.theme!==this.state.theme&&wb(this.interactiveCanvas,this.state.theme),o.activeTool.type==="selection"&&this.state.activeTool.type!=="selection"&&this.state.showHyperlinkPopup&&this.setState({showHyperlinkPopup:!1}),e.langCode!==this.props.langCode&&this.updateLanguage(),So(o)&&!So(this.state)&&this.eraserTrail.endPath(),e.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled}),o.viewModeEnabled!==this.state.viewModeEnabled&&(this.addEventListeners(),this.deselectElements()),e.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),e.theme!==this.props.theme&&this.props.theme&&this.setState({theme:this.props.theme}),e.gridModeEnabled!==this.props.gridModeEnabled&&this.setState({gridSize:this.props.gridModeEnabled?Mr:null}),this.excalidrawContainerRef.current?.classList.toggle("theme--dark",this.state.theme==="dark"),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(()=>{this.state.editingLinearElement&&this.actionManager.executeAction(Lo)}),this.state.editingElement?.isDeleted&&this.setState({editingElement:null}),this.state.selectedLinearElement&&!this.state.selectedElementIds[this.state.selectedLinearElement.elementId]&&this.setState({selectedLinearElement:null});let{multiElement:a}=o;o.activeTool!==this.state.activeTool&&a!=null&&Vn(this.state)&&Ar(a,!1)&&vl(a,this.state,this.scene,cl(he.getPointAtIndexGlobalCoordinates(a,-1,n)),n),this.history.record(this.state,r),this.state.isLoading||(this.props.onChange?.(r,this.state,this.files),this.onChangeEmitter.trigger(r,this.state,this.files))}renderInteractiveSceneCallback=({atLeastOneVisibleElement:e,scrollBars:o,elementsMap:r})=>{o&&(Cg=o);let n=le(this.state.editingElement)?!1:!e&&r.size>0;this.state.scrolledOutside!==n&&this.setState({scrolledOutside:n}),this.scheduleImageRefresh()};onScroll=ll(()=>{let{offsetTop:e,offsetLeft:o}=this.getCanvasOffsets();this.setState(r=>r.offsetLeft===o&&r.offsetTop===e?null:{offsetTop:e,offsetLeft:o})},s1);onCut=Xe(e=>{!this.excalidrawContainerRef.current?.contains(document.activeElement)||wo(e.target)||(this.actionManager.executeAction(Zd,"keyboard",e),e.preventDefault(),e.stopPropagation())});onCopy=Xe(e=>{!this.excalidrawContainerRef.current?.contains(document.activeElement)||wo(e.target)||(this.actionManager.executeAction(La,"keyboard",e),e.preventDefault(),e.stopPropagation())});static resetTapTwice(){Ls=!1}onTouchStart=e=>{if(jg&&e.preventDefault(),!Ls){Ls=!0,clearTimeout(Eg),Eg=window.setTimeout(t.resetTapTwice,a1);return}if(Ls&&e.touches.length===1){let o=e.touches[0];this.handleCanvasDoubleClick({clientX:o.clientX,clientY:o.clientY}),Ls=!1,clearTimeout(Eg)}e.touches.length===2&&this.setState({selectedElementIds:Fe({},this.state),activeEmbeddable:null})};onTouchEnd=e=>{this.resetContextMenuTimer(),e.touches.length>0?this.setState({previousSelectedElementIds:{},selectedElementIds:Fe(this.state.previousSelectedElementIds,this.state)}):Ae.pointers.clear()};pasteFromClipboard=Xe(async e=>{let o=!!pu,r=document.activeElement,n=this.excalidrawContainerRef.current?.contains(r);if(e&&!n)return;let i=document.elementFromPoint(this.lastViewportPosition.x,this.lastViewportPosition.y);if(e&&(!(i instanceof HTMLCanvasElement)||wo(r)))return;let{x:a,y:l}=Ve({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),s=e?.clipboardData?.files[0],c=await Lc(e,o);if(!s&&!o){if(c.mixedContent)return this.addElementsFromMixedContentPaste(c.mixedContent,{isPlainPaste:o,sceneX:a,sceneY:l});if(c.text){let m=c.text.trim();m.startsWith("<svg")&&m.endsWith("</svg>")&&(s=tp(m))}}if(Sc(s)&&!c.spreadsheet){if(!this.isToolSupported("image")){this.setState({errorMessage:g("errors.imageToolNotSupported")});return}let m=this.createImageElement({sceneX:a,sceneY:l});this.insertImageElement(m,s),this.initializeImageDimensions(m),this.setState({selectedElementIds:Fe({[m.id]:!0},this.state)});return}if(this.props.onPaste)try{if(await this.props.onPaste(c,e)===!1)return}catch(m){console.error(m)}if(c.errorMessage)this.setState({errorMessage:c.errorMessage});else if(c.spreadsheet&&!o)this.setState({pasteDialog:{data:c.spreadsheet,shown:!0}});else if(c.elements){let m=c.programmaticAPI?Es(c.elements):c.elements;this.addElementsFromPasteOrLibrary({elements:m,files:c.files||null,position:"cursor",retainSeed:o})}else if(c.text){let m=R1(c.text).split(/\n+/).map(f=>f.trim()).filter(Boolean),d=m.map(f=>Ib(f)).filter(f=>Gi(f,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(f)||Yn(f)?.type==="video"));if(!pu&&d.length>0&&d.length===m.length){let f=[];for(let p of d){let b=f[f.length-1],x=this.insertEmbeddableElement({sceneX:b?b.x+b.width+20:a,sceneY:l,link:Or(p)});x&&f.push(x)}f.length&&this.setState({selectedElementIds:Object.fromEntries(f.map(p=>[p.id,!0]))});return}this.addTextFromPaste(c.text,o)}this.setActiveTool({type:"selection"}),e?.preventDefault()});addElementsFromPasteOrLibrary=e=>{let o=qu(e.elements,null,void 0),[r,n,i,a]=Ke(o),l=Wn(r,i)/2,s=Wn(n,a)/2,c=typeof e.position=="object"?e.position.clientX:e.position==="cursor"?this.lastViewportPosition.x:this.state.width/2+this.state.offsetLeft,m=typeof e.position=="object"?e.position.clientY:e.position==="cursor"?this.lastViewportPosition.y:this.state.height/2+this.state.offsetTop,{x:d,y:f}=Ve({clientX:c,clientY:m},this.state),p=d-l,b=f-s,[x,y]=Jt(p,b,this.state.gridSize),w=wc(o.map(_=>ue(_,{x:_.x+x-r,y:_.y+y-n})),{randomizeSeed:!e.retainSeed}),k=[...this.scene.getElementsIncludingDeleted(),...w],C=this.getTopLayerFrameAtSceneCoords({x:d,y:f});if(C){let _=i0(w,C);Rc(k,_,C)}this.scene.replaceAllElements(k),w.forEach(_=>{if(le(_)&&gt(_)){let I=Pr(_,this.scene.getElementsMapIncludingDeleted());$t(_,I,this.scene.getElementsMapIncludingDeleted())}}),e.files&&(this.files={...this.files,...e.files}),this.history.resumeRecording();let M=Ji(w);this.setState({...this.state,openSidebar:this.state.openSidebar&&this.device.editor.canFitSidebar&&Ut.get(xs)?this.state.openSidebar:null,...Rt({editingGroupId:null,selectedElementIds:M.reduce((_,I)=>(gt(I)||(_[I.id]=!0),_),{})},this.scene.getNonDeletedElements(),this.state,this)},()=>{e.files&&this.addNewImagesToImageCache()}),this.setActiveTool({type:"selection"}),e.fitToContent&&this.scrollToContent(w,{fitToContent:!0})};async addElementsFromMixedContentPaste(e,{isPlainPaste:o,sceneX:r,sceneY:n}){if(!o&&e.some(i=>i.type==="imageUrl")&&this.isToolSupported("image")){let i=e.filter(d=>d.type==="imageUrl").map(d=>d.value),a=await Promise.all(i.map(async d=>{try{return{file:await Rb(d)}}catch(f){let p=f.message;return f.cause==="FETCH_ERROR"?p=g("errors.failedToFetchImage"):f.cause==="UNSUPPORTED"&&(p=g("errors.unsupportedFileType")),{errorMessage:p}}})),l=n,s=!1,c={};for(let d of a)if(d.file){let f=this.createImageElement({sceneX:r,sceneY:l}),p=await this.insertImageElement(f,d.file);p&&(s||(s=!0,l-=p.height/2),te(p,{y:l},!1),l=f.y+f.height+25,c[f.id]=!0)}this.setState({selectedElementIds:Fe(c,this.state)});let m=a.find(d=>!!d.errorMessage);m&&m.errorMessage&&this.setState({errorMessage:m.errorMessage})}else{let i=e.filter(a=>a.type==="text");i.length&&this.addTextFromPaste(i.map(a=>a.value).join(`

`),o)}}addTextFromPaste(e,o=!1){let{x:r,y:n}=Ve({clientX:this.lastViewportPosition.x,clientY:this.lastViewportPosition.y},this.state),i={x:r,y:n,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roundness:null,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:e,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:this.state.currentItemTextAlign,verticalAlign:ku,locked:!1},a=10,l=n,s=o?[e]:e.split(`
`),c=s.reduce((d,f,p)=>{let b=f.trim(),x=Dr(i.fontFamily);if(b.length){let y=this.getTopLayerFrameAtSceneCoords({x:r,y:l}),w=mn({...i,x:r,y:l,text:b,lineHeight:x,frameId:y?y.id:null});d.push(w),l+=w.height+a}else s[p-1]?.trim()&&(l+=tb(i.fontSize,x)+a);return d},[]);if(c.length===0)return;let m=c[0].frameId;m?this.scene.insertElementsAtIndex(c,this.scene.getElementIndex(m)):this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted(),...c]),this.setState({selectedElementIds:Fe(Object.fromEntries(c.map(d=>[d.id,!0])),this.state)}),!o&&c.length>1&&B5===!1&&!this.device.editor.isMobile&&(this.setToast({message:g("toast.pasteAsSingleElement",{shortcut:N("CtrlOrCmd+Shift+V")}),duration:5e3}),B5=!0),this.history.resumeRecording()}setAppState=(e,o)=>{this.setState(e,o)};removePointer=e=>{Fn&&this.resetContextMenuTimer(),Ae.pointers.delete(e.pointerId)};toggleLock=(e="ui")=>{this.state.activeTool.locked||ve("toolbar","toggleLock",`${e} (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setState(o=>({activeTool:{...o.activeTool,...tt(this.state,o.activeTool.locked?{type:"selection"}:o.activeTool),locked:!o.activeTool.locked}}))};updateFrameRendering=e=>{this.setState(o=>{let r=typeof e=="function"?e(o.frameRendering):e;return{frameRendering:{enabled:r?.enabled??o.frameRendering.enabled,clip:r?.clip??o.frameRendering.clip,name:r?.name??o.frameRendering.name,outline:r?.outline??o.frameRendering.outline}}})};togglePenMode=e=>{this.setState(o=>({penMode:e??!o.penMode,penDetected:!0}))};onHandToolToggle=()=>{this.actionManager.executeAction(Ry)};zoomCanvas=e=>{this.setState({...zr({viewportX:this.state.width/2+this.state.offsetLeft,viewportY:this.state.height/2+this.state.offsetTop,nextZoom:Br(e)},this.state)})};cancelInProgressAnimation=null;scrollToContent=(e=this.scene.getNonDeletedElements(),o)=>{this.cancelInProgressAnimation?.();let r=Array.isArray(e)?e:[e],n=this.state.zoom,i=this.state.scrollX,a=this.state.scrollY;if(o?.fitToContent||o?.fitToViewport){let{appState:l}=Jl({targetElements:r,appState:this.state,fitToViewport:!!o?.fitToViewport,viewportZoomFactor:o?.viewportZoomFactor});n=l.zoom,i=l.scrollX,a=l.scrollY}else{let l=Xn(r,this.state);i=l.scrollX,a=l.scrollY}if(o?.animate){let l=this.state.scrollX,s=this.state.scrollY,c=this.state.zoom.value,m=S1({fromValues:{scrollX:l,scrollY:s,zoom:c},toValues:{scrollX:i,scrollY:a,zoom:n.value},interpolateValue:(d,f,p,b)=>{if(b==="zoom")return d*Math.pow(f/d,Un(p))},onStep:({scrollX:d,scrollY:f,zoom:p})=>{this.setState({scrollX:d,scrollY:f,zoom:{value:p}})},onStart:()=>{this.setState({shouldCacheIgnoreZoom:!0})},onEnd:()=>{this.setState({shouldCacheIgnoreZoom:!1})},onCancel:()=>{this.setState({shouldCacheIgnoreZoom:!1})},duration:o?.duration??500});this.cancelInProgressAnimation=()=>{m(),this.cancelInProgressAnimation=null}}else this.setState({scrollX:i,scrollY:a,zoom:n})};maybeUnfollowRemoteUser=()=>{this.state.userToFollow&&this.setState({userToFollow:null})};translateCanvas=e=>{this.cancelInProgressAnimation?.(),this.maybeUnfollowRemoteUser(),this.setState(e)};setToast=e=>{this.setState({toast:e})};restoreFileFromShare=async()=>{try{let e=await caches.open("web-share-target"),o=await e.match("shared-file");if(o){let r=await o.blob(),n=new File([r],r.name||"",{type:r.type});this.loadFileToCanvas(n,null),await e.delete("shared-file"),window.history.replaceState(null,ol,window.location.pathname)}}catch(e){this.setState({errorMessage:e.message})}};addFiles=Xe(e=>{let o=e.reduce((r,n)=>(r.set(n.id,n),r),new Map);this.files={...this.files,...Object.fromEntries(o)},this.scene.getNonDeletedElements().forEach(r=>{ul(r)&&o.has(r.fileId)&&(this.imageCache.delete(r.fileId),mr.delete(r))}),this.scene.informMutation(),this.addNewImagesToImageCache()});updateScene=Xe(e=>{e.commitToHistory&&this.history.resumeRecording(),e.appState&&this.setState(e.appState),e.elements&&this.scene.replaceAllElements(e.elements),e.collaborators&&this.setState({collaborators:e.collaborators})});onSceneUpdated=()=>{this.setState({})};toggleSidebar=({name:e,tab:o,force:r})=>{let n;r===void 0?n=this.state.openSidebar?.name===e&&this.state.openSidebar?.tab===o?null:e:n=r?e:null;let i=n?{name:n}:null;return i&&o&&(i.tab=o),this.setState({openSidebar:i}),!!n};updateCurrentCursorPosition=Xe(e=>{this.lastViewportPosition.x=e.clientX,this.lastViewportPosition.y=e.clientY});onKeyDown=Xe(e=>{if("Proxy"in window&&(!e.shiftKey&&/^[A-Z]$/.test(e.key)||e.shiftKey&&/^[a-z]$/.test(e.key))&&(e=new Proxy(e,{get(i,a){let l=i[a];return typeof l=="function"?l.bind(i):a==="key"?e.shiftKey?i.key.toUpperCase():i.key.toLowerCase():l}})),e[T.CTRL_OR_CMD]&&e.key===T.P&&!e.shiftKey&&!e.altKey){this.setToast({message:g("commandPalette.shortcutHint",{shortcut:yt("commandPalette")})}),e.preventDefault();return}if(e[T.CTRL_OR_CMD]&&e.key.toLowerCase()===T.V&&(pu=e.shiftKey,clearTimeout(F5),F5=window.setTimeout(()=>{pu=!1},100)),e[T.CTRL_OR_CMD]&&wo(e.target)&&(e.code===fe.MINUS||e.code===fe.EQUAL)){e.preventDefault();return}if(wo(e.target)&&e.key!==T.ESCAPE||Fi(e.key)&&C1(e.target))return;if(e.key===T.QUESTION_MARK){this.setState({openDialog:{name:"help"}});return}else if(e.key.toLowerCase()===T.E&&e.shiftKey&&e[T.CTRL_OR_CMD]){e.preventDefault(),this.setState({openDialog:{name:"imageExport"}});return}if(e.key===T.PAGE_UP||e.key===T.PAGE_DOWN){let i=(e.shiftKey?this.state.width:this.state.height)/this.state.zoom.value;e.key===T.PAGE_DOWN&&(i=-i),e.shiftKey?this.translateCanvas(a=>({scrollX:a.scrollX+i})):this.translateCanvas(a=>({scrollY:a.scrollY+i}))}if(this.actionManager.handleKeyDown(e)||this.state.viewModeEnabled)return;if(e[T.CTRL_OR_CMD]&&this.state.isBindingEnabled&&this.setState({isBindingEnabled:!1}),Fi(e.key)){let i=this.state.gridSize&&(e.shiftKey?Cu:this.state.gridSize)||(e.shiftKey?qg:Cu),a=0,l=0;e.key===T.ARROW_LEFT?a=-i:e.key===T.ARROW_RIGHT?a=i:e.key===T.ARROW_UP?l=-i:e.key===T.ARROW_DOWN&&(l=i);let s=this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0});s.forEach(c=>{te(c,{x:c.x+a,y:c.y+l}),Vu(c,this.scene.getNonDeletedElementsMap(),{simultaneouslyUpdated:s})}),this.maybeSuggestBindingForAll(s),e.preventDefault()}else if(e.key===T.ENTER){let i=this.scene.getSelectedElements(this.state);if(i.length===1){let a=i[0];if(e[T.CTRL_OR_CMD])Re(a)&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==i[0].id)&&(this.history.resumeRecording(),this.setState({editingLinearElement:new he(a)}));else if(le(a)||db(a)){let l;le(a)||(l=a);let s=hc(a,this.state,this.scene.getNonDeletedElementsMap()),c=s.x,m=s.y;this.startTextEditing({sceneX:c,sceneY:m,container:l}),e.preventDefault();return}else Te(a)&&this.setState({editingFrame:a.id})}}else if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&this.state.draggingElement===null){let i=rw(e.key);i?(this.state.activeTool.type!==i&&ve("toolbar",i,`keyboard (${this.device.editor.isMobile?"mobile":"desktop"})`),this.setActiveTool({type:i}),e.stopPropagation()):e.key===T.Q&&(this.toggleLock("keyboard"),e.stopPropagation())}if(e.key===T.SPACE&&Ae.pointers.size===0&&(ki=!0,Ne(this.interactiveCanvas,De.GRAB),e.preventDefault()),(e.key===T.G||e.key===T.S)&&!e.altKey&&!e[T.CTRL_OR_CMD]){let i=this.scene.getSelectedElements(this.state);if(this.state.activeTool.type==="selection"&&!i.length)return;e.key===T.G&&(cn(this.state.activeTool.type)||i.some(a=>cn(a.type)))&&(this.setState({openPopup:"elementBackground"}),e.stopPropagation()),e.key===T.S&&(this.setState({openPopup:"elementStroke"}),e.stopPropagation())}if(e.key===T.K&&!e.altKey&&!e[T.CTRL_OR_CMD]){this.state.activeTool.type==="laser"?this.setActiveTool({type:"selection"}):this.setActiveTool({type:"laser"});return}e[T.CTRL_OR_CMD]&&(e.key===T.BACKSPACE||e.key===T.DELETE)&&Ut.set(vi,"clearCanvas");let o=e.key.toLocaleLowerCase(),r=o===T.S&&e.shiftKey,n=e.key===T.I||o===T.G&&e.shiftKey;(r||n)&&this.openEyeDropper({type:r?"stroke":"background"})});onWheel=Xe(e=>{!(e.target instanceof HTMLCanvasElement)&&e.ctrlKey&&e.preventDefault()});onKeyUp=Xe(e=>{if(e.key===T.SPACE&&(this.state.viewModeEnabled?Ne(this.interactiveCanvas,De.GRAB):this.state.activeTool.type==="selection"?ko(this.interactiveCanvas):(Yo(this.interactiveCanvas,this.state),this.setState({selectedElementIds:Fe({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})),ki=!1),!e[T.CTRL_OR_CMD]&&!this.state.isBindingEnabled&&this.setState({isBindingEnabled:!0}),Fi(e.key)){let o=this.scene.getSelectedElements(this.state),r=this.scene.getNonDeletedElementsMap();Vn(this.state)?xl(o,this.scene.getNonDeletedElements(),r):yl(o,r),this.setState({suggestedBindings:[]})}});isToolSupported=e=>this.props.UIOptions.tools?.[e]!==!1;setActiveTool=e=>{if(!this.isToolSupported(e.type)){console.warn(`"${e.type}" tool is disabled via "UIOptions.canvasActions.tools.${e.type}"`);return}let o=tt(this.state,e);o.type==="hand"?Ne(this.interactiveCanvas,De.GRAB):ki||Yo(this.interactiveCanvas,this.state),w1(document.activeElement)&&this.focusContainer(),N1(o.type)||this.setState({suggestedBindings:[]}),o.type==="image"&&this.onImageAction({insertOnCanvasDirectly:(e.type==="image"&&e.insertOnCanvasDirectly)??!1}),this.setState(r=>{let n={snapLines:r.snapLines.length?[]:r.snapLines,originSnapOffset:null,activeEmbeddable:null};return o.type!=="selection"?{...r,activeTool:o,selectedElementIds:Fe({},r),selectedGroupIds:Fe({},r),editingGroupId:null,multiElement:null,...n}:{...r,activeTool:o,...n}})};setOpenDialog=e=>{this.setState({openDialog:e})};setCursor=e=>{Ne(this.interactiveCanvas,e)};resetCursor=()=>{ko(this.interactiveCanvas)};isTouchScreenMultiTouchGesture=()=>Ae.pointers.size>=2;getName=()=>this.state.name||this.props.name||`${g("labels.untitled")}-${Lu()}`;onGestureStart=Xe(e=>{e.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({selectedElementIds:Fe({},this.state),activeEmbeddable:null}),Ae.initialScale=this.state.zoom.value});onGestureChange=Xe(e=>{if(e.preventDefault(),this.isTouchScreenMultiTouchGesture())return;let o=Ae.initialScale;o&&this.setState(r=>({...zr({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Br(o*e.scale)},r)}))});onGestureEnd=Xe(e=>{e.preventDefault(),this.isTouchScreenMultiTouchGesture()&&this.setState({previousSelectedElementIds:{},selectedElementIds:Fe(this.state.previousSelectedElementIds,this.state)}),Ae.initialScale=null});handleTextWysiwyg(e,{isExistingElement:o=!1}){let r=this.scene.getElementsMapIncludingDeleted(),n=(i,a,l)=>{this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted().map(s=>s.id===e.id&&le(s)?Sb(s,Pr(s,r),r,{text:i,isDeleted:l,originalText:a}):s)])};O5({id:e.id,canvas:this.canvas,getViewportCoords:(i,a)=>{let{x:l,y:s}=qt({sceneX:i,sceneY:a},this.state);return[l-this.state.offsetLeft,s-this.state.offsetTop]},onChange:Xe(i=>{n(i,i,!1),gp(e)&&Vu(e,r)}),onSubmit:Xe(({text:i,viaKeyboard:a,originalText:l})=>{let s=!i.trim();if(n(i,l,s),!s&&a){let c=e.containerId?e.containerId:e.id;this.setState(m=>({selectedElementIds:Fe({...m.selectedElementIds,[c]:!0},m)}))}s&&zi(this.scene.getNonDeletedElements(),[e]),(!s||o)&&this.history.resumeRecording(),this.setState({draggingElement:null,editingElement:null}),this.state.activeTool.locked&&Yo(this.interactiveCanvas,this.state),this.focusContainer()}),element:e,excalidrawContainer:this.excalidrawContainerRef.current,app:this}),this.deselectElements(),n(e.text,e.originalText,!1)}deselectElements(){this.setState({selectedElementIds:Fe({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})}getTextElementAtPosition(e,o){let r=this.getElementAtPosition(e,o,{includeBoundTextElement:!0});return r&&le(r)&&!r.isDeleted?r:null}getElementAtPosition(e,o,r){let n=this.getElementsAtPosition(e,o,r?.includeBoundTextElement,r?.includeLockedElements);if(n.length>1){if(r?.preferSelected){for(let a=n.length-1;a>-1;a--)if(this.state.selectedElementIds[n[a].id])return n[a]}let i=n[n.length-1];return lc(i,this.state,this.frameNameBoundsCache,e,o,this.scene.getNonDeletedElementsMap())?n[n.length-2]:i}return n.length===1?n[0]:null}getElementsAtPosition(e,o,r=!1,n=!1){let i=r&&n?this.scene.getNonDeletedElements():this.scene.getNonDeletedElements().filter(l=>(n||!l.locked)&&(r||!(le(l)&&l.containerId))),a=this.scene.getNonDeletedElementsMap();return W1(i,l=>$u(l,this.state,this.frameNameBoundsCache,e,o,a)).filter(l=>{let s=Dc(l,a);return s&&this.state.frameRendering.enabled&&this.state.frameRendering.clip?lp({x:e,y:o},s,a):!0})}startTextEditing=({sceneX:e,sceneY:o,insertAtParentCenter:r=!0,container:n})=>{let i=!1,a=r&&this.getTextWysiwygSnappedToCenterPosition(e,o,this.state,n);n&&a&&(at(n,this.scene.getNonDeletedElementsMap())||(i=!0));let l=null,s=this.scene.getSelectedElements(this.state);s.length===1?le(s[0])?l=s[0]:n?l=at(s[0],this.scene.getNonDeletedElementsMap()):l=this.getTextElementAtPosition(e,o):l=this.getTextElementAtPosition(e,o);let c=l?.fontFamily||this.state.currentItemFontFamily,m=l?.lineHeight||Dr(c),d=this.state.currentItemFontSize;if(!l&&i&&n&&!_r(n)){let x=ib(Ko({fontSize:d,fontFamily:c}),m),y=ob(d,m),w=Math.max(n.height,y),k=Math.max(n.width,x);te(n,{height:w,width:k}),e=n.x+k/2,o=n.y+w/2,a&&(a=this.getTextWysiwygSnappedToCenterPosition(e,o,this.state,n))}let f=this.getTopLayerFrameAtSceneCoords({x:e,y:o}),p=l||mn({x:a?a.elementCenterX:e,y:a?a.elementCenterY:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,text:"",fontSize:d,fontFamily:c,textAlign:a?"center":this.state.currentItemTextAlign,verticalAlign:a?vo.MIDDLE:ku,containerId:i?n?.id:void 0,groupIds:n?.groupIds??[],lineHeight:m,angle:n?.angle??0,frameId:f?f.id:null});if(!l&&i&&n&&te(n,{boundElements:(n.boundElements||[]).concat({type:"text",id:p.id})}),this.setState({editingElement:p}),!l)if(n&&i){let b=this.scene.getElementIndex(n.id);this.scene.insertElementAtIndex(p,b+1)}else this.scene.addNewElement(p);this.setState({editingElement:p}),this.handleTextWysiwyg(p,{isExistingElement:!!l})};handleCanvasDoubleClick=e=>{if(this.state.multiElement||this.state.activeTool.type!=="selection")return;let o=this.scene.getSelectedElements(this.state);if(o.length===1&&Re(o[0])&&e[T.CTRL_OR_CMD]&&(!this.state.editingLinearElement||this.state.editingLinearElement.elementId!==o[0].id)){this.history.resumeRecording(),this.setState({editingLinearElement:new he(o[0])});return}ko(this.interactiveCanvas);let{x:r,y:n}=Ve(e,this.state);if(Nr(this.state).length>0){let a=this.getElementAtPosition(r,n),l=a&&bb(a,this.state.selectedGroupIds);if(l){this.setState(s=>({...s,...Rt({editingGroupId:l,selectedElementIds:{[a.id]:!0}},this.scene.getNonDeletedElements(),s,this)}));return}}if(ko(this.interactiveCanvas),!e[T.CTRL_OR_CMD]&&!this.state.viewModeEnabled){let a=this.getElementAtPosition(r,n);if(Di(a)){this.setState({activeEmbeddable:{element:a,state:"active"}});return}let l=Ku(this.scene.getNonDeletedElements(),this.state,r,n,this.scene.getNonDeletedElementsMap());if(l&&(cr(l)||!Gn(l.backgroundColor)||Uu(l,this.state,this.frameNameBoundsCache,[r,n],this.scene.getNonDeletedElementsMap()))){let s=hc(l,this.state,this.scene.getNonDeletedElementsMap());r=s.x,n=s.y}this.startTextEditing({sceneX:r,sceneY:n,insertAtParentCenter:!e.altKey,container:l})}};getElementLinkAtPosition=(e,o)=>{let r=this.scene.getNonDeletedElements().slice().reverse(),n=1/0;return r.find((i,a)=>(o&&i.id===o.id&&(n=a),i.link&&a<=n&&_c(i,this.scene.getNonDeletedElementsMap(),this.state,[e.x,e.y],this.device.editor.isMobile)))};redirectToLink=(e,o)=>{let r=sn(this.lastPointerDownEvent.clientX,this.lastPointerDownEvent.clientY,this.lastPointerUpEvent.clientX,this.lastPointerUpEvent.clientY);if(!this.hitLinkElement||o&&r>zn||!o&&r!==0)return;let n=Ve(this.lastPointerDownEvent,this.state),i=this.scene.getNonDeletedElementsMap(),a=_c(this.hitLinkElement,i,this.state,[n.x,n.y],this.device.editor.isMobile),l=Ve(this.lastPointerUpEvent,this.state),s=_c(this.hitLinkElement,i,this.state,[l.x,l.y],this.device.editor.isMobile);if(a&&s){let c=this.hitLinkElement.link;if(c){c=Or(c);let m;if(this.props.onLinkOpen&&(m=oc("excalidraw-link",e.nativeEvent),this.props.onLinkOpen({...this.hitLinkElement,link:c},m)),!m?.defaultPrevented){let d=xc(c)?"_self":"_blank",f=window.open(void 0,d,"noopener noreferrer");f&&(f.opener=null,f.location=c)}}}};getTopLayerFrameAtSceneCoords=e=>{let o=this.scene.getNonDeletedElementsMap(),r=this.scene.getNonDeletedFramesLikes().filter(n=>lp(e,n,o));return r.length?r[r.length-1]:null};handleCanvasPointerMove=e=>{this.savePointer(e.clientX,e.clientY,this.state.cursorButton),this.lastPointerMoveEvent=e.nativeEvent,Ae.pointers.has(e.pointerId)&&Ae.pointers.set(e.pointerId,{x:e.clientX,y:e.clientY});let o=Ae.initialScale;if(Ae.pointers.size===2&&Ae.lastCenter&&o&&Ae.initialDistance){let f=Dh(Ae.pointers),p=f.x-Ae.lastCenter.x,b=f.y-Ae.lastCenter.y;Ae.lastCenter=f;let x=Rh(Array.from(Ae.pointers.values())),y=this.state.activeTool.type==="freedraw"&&this.state.penMode?1:x/Ae.initialDistance,w=y?Br(o*y):this.state.zoom.value;this.setState(k=>{let C=zr({viewportX:f.x,viewportY:f.y,nextZoom:w},k);this.translateCanvas({zoom:C.zoom,scrollX:C.scrollX+p/w,scrollY:C.scrollY+b/w,shouldCacheIgnoreZoom:!0})}),this.resetShouldCacheIgnoreZoomDebounced()}else Ae.lastCenter=Ae.initialDistance=Ae.initialScale=null;if(ki||Ps||wg||Rr(this.state))return;let n=Bh(Cg,e.clientX-this.state.offsetLeft,e.clientY-this.state.offsetTop).isOverEither;!this.state.draggingElement&&!this.state.multiElement&&(n?ko(this.interactiveCanvas):Yo(this.interactiveCanvas,this.state));let i=Ve(e,this.state),{x:a,y:l}=i;if(!this.state.draggingElement&&p5(this.state.activeTool.type)){let{originOffset:f,snapLines:p}=u5(this.scene.getNonDeletedElements(),this.state,{x:a,y:l},e,this.scene.getNonDeletedElementsMap());this.setState(b=>{let x=nc(b.snapLines,p),y=b.originSnapOffset?nc(b.originSnapOffset,f):f;return b.snapLines===x&&b.originSnapOffset===y?null:{snapLines:x,originSnapOffset:y}})}else this.state.draggingElement||this.setState(f=>f.snapLines.length?{snapLines:[]}:null);if(this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging){let f=he.handlePointerMove(e,a,l,this.state,this.scene.getNonDeletedElementsMap());f&&f!==this.state.editingLinearElement&&(0,fu.flushSync)(()=>{this.setState({editingLinearElement:f})}),f?.lastUncommittedPoint!=null?this.maybeSuggestBindingAtCursor(i):(0,fu.flushSync)(()=>{this.setState({suggestedBindings:[]})})}if(O1(this.state.activeTool.type)){let{draggingElement:f}=this.state;Ar(f,!1)?this.maybeSuggestBindingsForLinearElementAtCoords(f,[i],this.state.startBoundElement):this.maybeSuggestBindingAtCursor(i)}if(this.state.multiElement){let{multiElement:f}=this.state,{x:p,y:b}=f,{points:x,lastCommittedPoint:y}=f,w=x[x.length-1];if(Yo(this.interactiveCanvas,this.state),w===y)sn(a-p,l-b,w[0],w[1])>=Us?te(f,{points:[...x,[a-p,l-b]]}):Ne(this.interactiveCanvas,De.POINTER);else if(x.length>2&&y&&sn(a-p,l-b,y[0],y[1])<Us)Ne(this.interactiveCanvas,De.POINTER),te(f,{points:x.slice(0,-1)});else{let[k,C]=Jt(a,l,e[T.CTRL_OR_CMD]?null:this.state.gridSize),[M,_]=f?.lastCommittedPoint??[0,0],I=k-p-M,A=C-b-_;cc(e)&&({width:I,height:A}=cp(M+p,_+b,k,C)),fl(x,this.state.zoom.value)&&Ne(this.interactiveCanvas,De.POINTER),te(f,{points:[...x.slice(0,-1),[M+I,_+A]]})}return}if(!!e.buttons||this.state.activeTool.type!=="selection"&&this.state.activeTool.type!=="text"&&this.state.activeTool.type!=="eraser")return;let c=this.scene.getNonDeletedElements(),m=this.scene.getSelectedElements(this.state);if(m.length===1&&!n&&!this.state.editingLinearElement){let f=dp(c,this.state,a,l,this.state.zoom,e.pointerType,this.scene.getNonDeletedElementsMap());if(f&&f.transformHandleType){Ne(this.interactiveCanvas,up(f));return}}else if(m.length>1&&!n){let f=mp(Ke(m),a,l,this.state.zoom,e.pointerType);if(f){Ne(this.interactiveCanvas,up({transformHandleType:f}));return}}let d=this.getElementAtPosition(i.x,i.y);this.hitLinkElement=this.getElementLinkAtPosition(i,d),!So(this.state)&&(this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?(Ne(this.interactiveCanvas,De.POINTER),rE(this.hitLinkElement,this.state,this.scene.getNonDeletedElementsMap())):(nE(),d&&(d.link||Ht(d))&&this.state.selectedElementIds[d.id]&&!this.state.contextMenu&&!this.state.showHyperlinkPopup?this.setState({showHyperlinkPopup:"info"}):this.state.activeTool.type==="text"?Ne(this.interactiveCanvas,le(d)?De.TEXT:De.CROSSHAIR):this.state.viewModeEnabled?Ne(this.interactiveCanvas,De.GRAB):n?Ne(this.interactiveCanvas,De.AUTO):this.state.selectedLinearElement?this.handleHoverSelectedLinearElement(this.state.selectedLinearElement,a,l):e[T.CTRL_OR_CMD]?Ne(this.interactiveCanvas,De.AUTO):(d||this.isHittingCommonBoundingBoxOfSelectedElements(i,m))&&!d?.locked&&(d&&Di(d)&&this.isIframeLikeElementCenter(d,e,a,l)?(Ne(this.interactiveCanvas,De.POINTER),this.setState({activeEmbeddable:{element:d,state:"hover"}})):(Ne(this.interactiveCanvas,De.MOVE),this.state.activeEmbeddable?.state==="hover"&&this.setState({activeEmbeddable:null})))))};handleEraser=(e,o,r)=>{this.eraserTrail.addPointToPath(r.x,r.y);let n=!1,i=new Set,a=this.scene.getNonDeletedElements(),l=f=>{for(let p of f){if(p.locked)return;if(e.altKey?this.elementsPendingErasure.delete(p.id)&&(n=!0):this.elementsPendingErasure.has(p.id)||(n=!0,this.elementsPendingErasure.add(p.id)),n&&p.groupIds?.length){let b=p.groupIds.at(-1);if(!i.has(b)){i.add(b);let x=ut(a,b);for(let y of x)e.altKey?this.elementsPendingErasure.delete(y.id):this.elementsPendingErasure.add(y.id)}}}},s=sn(o.lastCoords.x,o.lastCoords.y,r.x,r.y),c=10/this.state.zoom.value,m={...o.lastCoords},d=0;for(;d<=s;){let f=this.getElementsAtPosition(m.x,m.y);if(l(f),d===s)break;d=Math.min(d+c,s);let p=d/s,b=(1-p)*m.x+p*r.x,x=(1-p)*m.y+p*r.y;m.x=b,m.y=x}if(o.lastCoords.x=r.x,o.lastCoords.y=r.y,n){for(let f of this.scene.getNonDeletedElements())gt(f)&&(this.elementsPendingErasure.has(f.id)||this.elementsPendingErasure.has(f.containerId))&&(e.altKey?(this.elementsPendingErasure.delete(f.id),this.elementsPendingErasure.delete(f.containerId)):(this.elementsPendingErasure.add(f.id),this.elementsPendingErasure.add(f.containerId)));this.elementsPendingErasure=new Set(this.elementsPendingErasure),this.onSceneUpdated()}};handleTouchMove=e=>{Ds=!0};handleHoverSelectedLinearElement(e,o,r){let n=this.scene.getNonDeletedElementsMap(),i=he.getElement(e.elementId,n),a=at(i,n);if(i)if(this.state.selectedLinearElement){let l=-1,s=null;Uu(i,this.state,this.frameNameBoundsCache,[o,r],n)?(l=he.getPointIndexUnderCursor(i,n,this.state.zoom,o,r),s=he.getSegmentMidpointHitCoords(e,{x:o,y:r},this.state,this.scene.getNonDeletedElementsMap()),l>=0||s?Ne(this.interactiveCanvas,De.POINTER):Ne(this.interactiveCanvas,De.MOVE)):ac([i],this.state)&&lc(i,this.state,this.frameNameBoundsCache,o,r,n)?Ne(this.interactiveCanvas,De.MOVE):a&&$u(a,this.state,this.frameNameBoundsCache,o,r,this.scene.getNonDeletedElementsMap())&&Ne(this.interactiveCanvas,De.MOVE),this.state.selectedLinearElement.hoverPointIndex!==l&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,hoverPointIndex:l}}),he.arePointsEqual(this.state.selectedLinearElement.segmentMidPointHoveredCoords,s)||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,segmentMidPointHoveredCoords:s}})}else Ne(this.interactiveCanvas,De.AUTO)}handleCanvasPointerDown=e=>{if(this.maybeCleanupAfterMissingPointerUp(e.nativeEvent),this.maybeUnfollowRemoteUser(),this.state.contextMenu&&this.setState({contextMenu:null}),this.state.snapLines&&this.setAppState({snapLines:[]}),this.updateGestureOnPointerDown(e),e.pointerType==="touch"&&this.state.draggingElement&&this.state.draggingElement.type==="freedraw"){let c=this.state.draggingElement;this.updateScene({...c.points.length<10?{elements:this.scene.getElementsIncludingDeleted().filter(m=>m.id!==c.id)}:{},appState:{draggingElement:null,editingElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:Fe(Object.keys(this.state.selectedElementIds).filter(m=>m!==c.id).reduce((m,d)=>(m[d]=this.state.selectedElementIds[d],m),{}),this.state)}});return}let o=document.getSelection();if(o?.anchorNode&&o.removeAllRanges(),this.maybeOpenContextMenuAfterPointerDownOnTouchDevices(e),!this.state.penDetected&&e.pointerType==="pen"&&this.setState(c=>({penMode:!0,penDetected:!0})),!this.device.isTouchScreen&&["pen","touch"].includes(e.pointerType)&&(this.device=Ai(this.device,{isTouchScreen:!0})),Ps||(this.lastPointerDownEvent=e,this.handleCanvasPanUsingWheelOrSpaceDrag(e)))return;if(this.setState({lastPointerDownWith:e.pointerType,cursorButton:"down"}),this.savePointer(e.clientX,e.clientY,"down"),e.button===tn.ERASER&&this.state.activeTool.type!==mt.eraser){this.setState({activeTool:tt(this.state,{type:mt.eraser,lastActiveToolBeforeEraser:this.state.activeTool})},()=>{this.handleCanvasPointerDown(e);let c=()=>{m(),d?.(),So(this.state)&&this.setState({activeTool:tt(this.state,{...this.state.activeTool.lastActiveTool||{type:mt.selection},lastActiveToolBeforeEraser:null})})},m=ot(window,"pointerup",c,{once:!0}),d;requestAnimationFrame(()=>{d=this.missingPointerEventCleanupEmitter.once(c)})});return}if(e.button!==tn.MAIN&&e.button!==tn.TOUCH&&e.button!==tn.ERASER||Ae.pointers.size>1)return;let r=this.initialPointerDownState(e);if(this.setState({selectedElementsAreBeingDragged:!1}),this.handleDraggingScrollBar(e,r)||(this.clearSelectionIfNotUsingSelection(),this.updateBindingEnabledOnPointerMove(e),this.handleSelectionOnPointerDown(e,r))||!(!this.state.penMode||e.pointerType!=="touch"||this.state.activeTool.type==="selection"||this.state.activeTool.type==="text"||this.state.activeTool.type==="image"))return;if(this.state.activeTool.type==="text"){this.handleTextOnPointerDown(e,r);return}else if(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")this.handleLinearElementOnPointerDown(e,this.state.activeTool.type,r);else if(this.state.activeTool.type==="image"){Ne(this.interactiveCanvas,De.CROSSHAIR);let c=this.state.pendingImageElementId&&this.scene.getElement(this.state.pendingImageElementId);if(!c)return;this.setState({draggingElement:c,editingElement:c,pendingImageElementId:null,multiElement:null});let{x:m,y:d}=Ve(e,this.state),f=this.getTopLayerFrameAtSceneCoords({x:m,y:d});te(c,{x:m,y:d,frameId:f?f.id:null})}else this.state.activeTool.type==="freedraw"?this.handleFreeDrawElementOnPointerDown(e,this.state.activeTool.type,r):this.state.activeTool.type==="custom"?Yo(this.interactiveCanvas,this.state):this.state.activeTool.type===mt.frame||this.state.activeTool.type===mt.magicframe?this.createFrameElementOnPointerDown(r,this.state.activeTool.type):this.state.activeTool.type==="laser"?this.laserTrails.startPath(r.lastCoords.x,r.lastCoords.y):this.state.activeTool.type!=="eraser"&&this.state.activeTool.type!=="hand"&&this.createGenericElementOnPointerDown(this.state.activeTool.type,r);this.props?.onPointerDown?.(this.state.activeTool,r),this.onPointerDownEmitter.trigger(this.state.activeTool,r,e),this.state.activeTool.type==="eraser"&&this.eraserTrail.startPath(r.lastCoords.x,r.lastCoords.y);let i=this.onPointerMoveFromPointerDownHandler(r),a=this.onPointerUpFromPointerDownHandler(r),l=this.onKeyDownFromPointerDownHandler(r),s=this.onKeyUpFromPointerDownHandler(r);this.missingPointerEventCleanupEmitter.once(c=>a(c||e.nativeEvent)),(!this.state.viewModeEnabled||this.state.activeTool.type==="laser")&&(window.addEventListener("pointermove",i),window.addEventListener("pointerup",a),window.addEventListener("keydown",l),window.addEventListener("keyup",s),r.eventListeners.onMove=i,r.eventListeners.onUp=a,r.eventListeners.onKeyUp=s,r.eventListeners.onKeyDown=l)};handleCanvasPointerUp=e=>{this.removePointer(e),this.lastPointerUpEvent=e;let o=Ve({clientX:e.clientX,clientY:e.clientY},this.state),r=e.timeStamp-(this.lastPointerDownEvent?.timeStamp??0);if(this.device.editor.isMobile&&r<300){let n=this.getElementAtPosition(o.x,o.y);if(Di(n)&&this.isIframeLikeElementCenter(n,e,o.x,o.y)){this.handleEmbeddableCenterClick(n);return}}if(this.device.isTouchScreen){let n=this.getElementAtPosition(o.x,o.y);this.hitLinkElement=this.getElementLinkAtPosition(o,n)}this.hitLinkElement&&!this.state.selectedElementIds[this.hitLinkElement.id]?r<300&&Di(this.hitLinkElement)&&!Wb(this.hitLinkElement,this.scene.getNonDeletedElementsMap(),this.state,[o.x,o.y])?this.handleEmbeddableCenterClick(this.hitLinkElement):this.redirectToLink(e,this.device.isTouchScreen):this.state.viewModeEnabled&&this.setState({activeEmbeddable:null,selectedElementIds:{}})};maybeOpenContextMenuAfterPointerDownOnTouchDevices=e=>{e.pointerType==="touch"&&(Ds=!1,Fn?Ds=!0:Fn=window.setTimeout(()=>{Fn=0,Ds||this.handleCanvasContextMenu(e)},l1))};resetContextMenuTimer=()=>{clearTimeout(Fn),Fn=0,Ds=!1};maybeCleanupAfterMissingPointerUp=e=>{Rs?.(),this.missingPointerEventCleanupEmitter.trigger(e).clear()};handleCanvasPanUsingWheelOrSpaceDrag=e=>{if(!(Ae.pointers.size<=1&&(e.button===tn.WHEEL||e.button===tn.MAIN&&ki||Rr(this.state)||this.state.viewModeEnabled))||le(this.state.editingElement))return!1;Ps=!0,e.preventDefault();let o=!1,r=typeof window===void 0?!1:/Linux/.test(window.navigator.platform);Ne(this.interactiveCanvas,De.GRABBING);let{clientX:n,clientY:i}=e,a=iu(s=>{let c=n-s.clientX,m=i-s.clientY;if(n=s.clientX,i=s.clientY,r&&!o&&(Math.abs(c)>1||Math.abs(m)>1)){o=!0;let d=p=>{document.body.removeEventListener("paste",d),p.stopPropagation()},f=()=>{setTimeout(()=>{document.body.removeEventListener("paste",d),window.removeEventListener("pointerup",f)},100)};document.body.addEventListener("paste",d),window.addEventListener("pointerup",f)}this.translateCanvas({scrollX:this.state.scrollX-c/this.state.zoom.value,scrollY:this.state.scrollY-m/this.state.zoom.value})}),l=Xe(Rs=()=>{Rs=null,Ps=!1,ki||(this.state.viewModeEnabled?Ne(this.interactiveCanvas,De.GRAB):Yo(this.interactiveCanvas,this.state)),this.setState({cursorButton:"up"}),this.savePointer(e.clientX,e.clientY,"up"),window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",l),window.removeEventListener("blur",l),a.flush()});return window.addEventListener("blur",l),window.addEventListener("pointermove",a,{passive:!0}),window.addEventListener("pointerup",l),!0};updateGestureOnPointerDown(e){Ae.pointers.set(e.pointerId,{x:e.clientX,y:e.clientY}),Ae.pointers.size===2&&(Ae.lastCenter=Dh(Ae.pointers),Ae.initialScale=this.state.zoom.value,Ae.initialDistance=Rh(Array.from(Ae.pointers.values())))}initialPointerDownState(e){let o=Ve(e,this.state),r=this.scene.getSelectedElements(this.state),[n,i,a,l]=Ke(r);return{origin:o,withCmdOrCtrl:e[T.CTRL_OR_CMD],originInGrid:cl(Jt(o.x,o.y,e[T.CTRL_OR_CMD]?null:this.state.gridSize)),scrollbars:Bh(Cg,e.clientX-this.state.offsetLeft,e.clientY-this.state.offsetTop),lastCoords:{...o},originalElements:this.scene.getNonDeletedElements().reduce((s,c)=>(s.set(c.id,Wi(c)),s),new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(a+n)/2,y:(l+i)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(o,r)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null},boxSelection:{hasOccurred:!1}}}handleDraggingScrollBar(e,o){if(!(o.scrollbars.isOverEither&&!this.state.multiElement))return!1;wg=!0,o.lastCoords.x=e.clientX,o.lastCoords.y=e.clientY;let r=iu(i=>{i.target instanceof HTMLElement&&this.handlePointerMoveOverScrollbars(i,o)}),n=Xe(()=>{Rs=null,wg=!1,Yo(this.interactiveCanvas,this.state),this.setState({cursorButton:"up"}),this.savePointer(e.clientX,e.clientY,"up"),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",n),r.flush()});return Rs=n,window.addEventListener("pointermove",r),window.addEventListener("pointerup",n),!0}clearSelectionIfNotUsingSelection=()=>{this.state.activeTool.type!=="selection"&&this.setState({selectedElementIds:Fe({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null})};handleSelectionOnPointerDown=(e,o)=>{if(this.state.activeTool.type==="selection"){let r=this.scene.getNonDeletedElements(),n=this.scene.getNonDeletedElementsMap(),i=this.scene.getSelectedElements(this.state);if(i.length===1&&!this.state.editingLinearElement){let a=dp(r,this.state,o.origin.x,o.origin.y,this.state.zoom,e.pointerType,this.scene.getNonDeletedElementsMap());a!=null&&(this.setState({resizingElement:a.element}),o.resize.handleType=a.transformHandleType)}else i.length>1&&(o.resize.handleType=mp(Ke(i),o.origin.x,o.origin.y,this.state.zoom,e.pointerType));if(o.resize.handleType)o.resize.isResizing=!0,o.resize.offset=cl(p0(o.resize.handleType,i,n,o.origin.x,o.origin.y)),i.length===1&&Re(i[0])&&i[0].points.length===2&&(o.resize.arrowDirection=f0(o.resize.handleType,i[0]));else{if(this.state.selectedLinearElement){let s=this.state.editingLinearElement||this.state.selectedLinearElement,c=he.handlePointerDown(e,this.state,this.history,o.origin,s,this.scene.getNonDeletedElements(),n);if(c.hitElement&&(o.hit.element=c.hitElement),c.linearElementEditor&&(this.setState({selectedLinearElement:c.linearElementEditor}),this.state.editingLinearElement&&this.setState({editingLinearElement:c.linearElementEditor})),c.didAddPoint)return!0}if(o.hit.element=o.hit.element??this.getElementAtPosition(o.origin.x,o.origin.y),o.hit.element&&this.getElementLinkAtPosition({x:o.origin.x,y:o.origin.y},o.hit.element))return!1;o.hit.allHitElements=this.getElementsAtPosition(o.origin.x,o.origin.y);let a=o.hit.element,l=o.hit.allHitElements.some(s=>this.isASelectedElement(s));if((a===null||!l)&&!e.shiftKey&&!o.hit.hasHitCommonBoundingBoxOfSelectedElements&&this.clearSelection(a),this.state.editingLinearElement)this.setState({selectedElementIds:Fe({[this.state.editingLinearElement.elementId]:!0},this.state)});else if(a!=null){if(e[T.CTRL_OR_CMD])return this.state.selectedElementIds[a.id]||(o.hit.wasAddedToSelection=!0),this.setState(s=>({...gb(s,a),previousSelectedElementIds:this.state.selectedElementIds})),!1;this.state.selectedElementIds[a.id]||(this.state.editingGroupId&&!Ui(a,this.state.editingGroupId)&&this.setState({selectedElementIds:Fe({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null}),!l&&!o.hit.hasHitCommonBoundingBoxOfSelectedElements&&(this.setState(s=>{let c={...s.selectedElementIds,[a.id]:!0},m=[];if(Object.keys(s.selectedElementIds).forEach(d=>{let f=this.scene.getElement(d);f&&m.push(f)}),Te(a))un(m,a.id).forEach(d=>{delete c[d.id]});else if(a.frameId)c[a.frameId]&&delete c[a.id];else{let d=a.groupIds,f=new Set(d.flatMap(p=>ut(this.scene.getNonDeletedElements(),p)).filter(p=>Te(p)).map(p=>p.id));f.size>0&&m.forEach(p=>{p.frameId&&f.has(p.frameId)&&(delete c[p.id],p.groupIds.flatMap(b=>ut(this.scene.getNonDeletedElements(),b)).forEach(b=>{delete c[b.id]}))})}return{...Rt({editingGroupId:s.editingGroupId,selectedElementIds:c},this.scene.getNonDeletedElements(),s,this),showHyperlinkPopup:a.link||Ht(a)?"info":!1}}),o.hit.wasAddedToSelection=!0))}this.setState({previousSelectedElementIds:this.state.selectedElementIds})}}return!1};isASelectedElement(e){return e!=null&&this.state.selectedElementIds[e.id]}isHittingCommonBoundingBoxOfSelectedElements(e,o){if(o.length<2)return!1;let r=10/this.state.zoom.value,[n,i,a,l]=Ke(o);return e.x>n-r&&e.x<a+r&&e.y>i-r&&e.y<l+r}handleTextOnPointerDown=(e,o)=>{if(le(this.state.editingElement))return;let r=o.origin.x,n=o.origin.y,i=this.getElementAtPosition(r,n,{includeBoundTextElement:!0}),a=Ku(this.scene.getNonDeletedElements(),this.state,r,n,this.scene.getNonDeletedElementsMap());cr(i)&&(a=i,r=i.x+i.width/2,n=i.y+i.height/2),this.startTextEditing({sceneX:r,sceneY:n,insertAtParentCenter:!e.altKey,container:a}),ko(this.interactiveCanvas),this.state.activeTool.locked||this.setState({activeTool:tt(this.state,{type:"selection"})})};handleFreeDrawElementOnPointerDown=(e,o,r)=>{let[n,i]=Jt(r.origin.x,r.origin.y,null),a=this.getTopLayerFrameAtSceneCoords({x:n,y:i}),l=kb({type:o,x:n,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:null,simulatePressure:e.pressure===.5,locked:!1,frameId:a?a.id:null});this.setState(m=>{let d={...m.selectedElementIds};return delete d[l.id],{selectedElementIds:Fe(d,m)}});let s=l.simulatePressure?l.pressures:[...l.pressures,e.pressure];te(l,{points:[[0,0]],pressures:s});let c=El(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap());this.scene.addNewElement(l),this.setState({draggingElement:l,editingElement:l,startBoundElement:c,suggestedBindings:[]})};insertIframeElement=({sceneX:e,sceneY:o,width:r,height:n})=>{let[i,a]=Jt(e,o,this.lastPointerDownEvent?.[T.CTRL_OR_CMD]?null:this.state.gridSize),l=Cb({type:"iframe",x:i,y:a,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("iframe"),opacity:this.state.currentItemOpacity,locked:!1,width:r,height:n});return this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted(),l]),l};insertEmbeddableElement=({sceneX:e,sceneY:o,link:r})=>{let[n,i]=Jt(e,o,this.lastPointerDownEvent?.[T.CTRL_OR_CMD]?null:this.state.gridSize),a=Yn(r);if(!a)return;a.error instanceof URIError&&this.setToast({message:g("toast.unrecognizedLinkFormat"),closable:!0});let l=Zu({type:"embeddable",x:n,y:i,strokeColor:"transparent",backgroundColor:"transparent",fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:this.getCurrentItemRoundness("embeddable"),opacity:this.state.currentItemOpacity,locked:!1,width:a.intrinsicSize.w,height:a.intrinsicSize.h,link:r});return this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted(),l]),l};createImageElement=({sceneX:e,sceneY:o,addToFrameUnderCursor:r=!0})=>{let[n,i]=Jt(e,o,this.lastPointerDownEvent?.[T.CTRL_OR_CMD]?null:this.state.gridSize),a=r?this.getTopLayerFrameAtSceneCoords({x:n,y:i}):null;return yc({type:"image",x:n,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,roundness:null,opacity:this.state.currentItemOpacity,locked:!1,frameId:a?a.id:null})};handleLinearElementOnPointerDown=(e,o,r)=>{if(this.state.multiElement){let{multiElement:n}=this.state;if(n.type==="line"&&fl(n.points,this.state.zoom.value)){te(n,{lastCommittedPoint:n.points[n.points.length-1]}),this.actionManager.executeAction(Lo);return}let{x:i,y:a,lastCommittedPoint:l}=n;if(n.points.length>1&&l&&sn(r.origin.x-i,r.origin.y-a,l[0],l[1])<Us){this.actionManager.executeAction(Lo);return}this.setState(s=>({selectedElementIds:Fe({...s.selectedElementIds,[n.id]:!0},s)})),te(n,{lastCommittedPoint:n.points[n.points.length-1]}),Ne(this.interactiveCanvas,De.POINTER)}else{let[n,i]=Jt(r.origin.x,r.origin.y,e[T.CTRL_OR_CMD]?null:this.state.gridSize),a=this.getTopLayerFrameAtSceneCoords({x:n,y:i}),{currentItemStartArrowhead:l,currentItemEndArrowhead:s}=this.state,[c,m]=o==="arrow"?[l,s]:[null,null],d=Sl({type:o,x:n,y:i,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.state.currentItemRoundness==="round"?{type:yo.PROPORTIONAL_RADIUS}:null,startArrowhead:c,endArrowhead:m,locked:!1,frameId:a?a.id:null});this.setState(p=>{let b={...p.selectedElementIds};return delete b[d.id],{selectedElementIds:Fe(b,p)}}),te(d,{points:[...d.points,[0,0]]});let f=El(r.origin,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap());this.scene.addNewElement(d),this.setState({draggingElement:d,editingElement:d,startBoundElement:f,suggestedBindings:[]})}};getCurrentItemRoundness(e){return this.state.currentItemRoundness==="round"?{type:Ni(e)?yo.ADAPTIVE_RADIUS:yo.PROPORTIONAL_RADIUS}:null}createGenericElementOnPointerDown=(e,o)=>{let[r,n]=Jt(o.origin.x,o.origin.y,this.lastPointerDownEvent?.[T.CTRL_OR_CMD]?null:this.state.gridSize),i=this.getTopLayerFrameAtSceneCoords({x:r,y:n}),a={x:r,y:n,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,roundness:this.getCurrentItemRoundness(e),locked:!1,frameId:i?i.id:null},l;e==="embeddable"?l=Zu({type:"embeddable",...a}):l=dn({type:e,...a}),l.type==="selection"?this.setState({selectionElement:l,draggingElement:l}):(this.scene.addNewElement(l),this.setState({multiElement:null,draggingElement:l,editingElement:l}))};createFrameElementOnPointerDown=(e,o)=>{let[r,n]=Jt(e.origin.x,e.origin.y,this.lastPointerDownEvent?.[T.CTRL_OR_CMD]?null:this.state.gridSize),i={x:r,y:n,opacity:this.state.currentItemOpacity,locked:!1,...Go},a=o===mt.magicframe?Tl(i):vc(i);this.scene.replaceAllElements([...this.scene.getElementsIncludingDeleted(),a]),this.setState({multiElement:null,draggingElement:a,editingElement:a})};maybeCacheReferenceSnapPoints(e,o,r=!1){en({event:e,appState:this.state,selectedElements:o})&&(r||!zo.getReferenceSnapPoints())&&zo.setReferenceSnapPoints(s5(this.scene.getNonDeletedElements(),o,this.state,this.scene.getNonDeletedElementsMap()))}maybeCacheVisibleGaps(e,o,r=!1){en({event:e,appState:this.state,selectedElements:o})&&(r||!zo.getVisibleGaps())&&zo.setVisibleGaps(l5(this.scene.getNonDeletedElements(),o,this.state,this.scene.getNonDeletedElementsMap()))}onKeyDownFromPointerDownHandler(e){return Xe(o=>{this.maybeHandleResize(e,o)||this.maybeDragNewGenericElement(e,o)})}onKeyUpFromPointerDownHandler(e){return Xe(o=>{o.key===T.ALT&&o.preventDefault(),!this.maybeHandleResize(e,o)&&this.maybeDragNewGenericElement(e,o)})}onPointerMoveFromPointerDownHandler(e){return iu(o=>{if(e.drag.offset===null&&(e.drag.offset=cl(g0(this.scene.getSelectedElements(this.state),e.origin.x,e.origin.y))),!(o.target instanceof HTMLElement)||this.handlePointerMoveOverScrollbars(o,e))return;let n=Ve(o,this.state);if(So(this.state)){this.handleEraser(o,e,n);return}this.state.activeTool.type==="laser"&&this.laserTrails.addPointToPath(n.x,n.y);let[i,a]=Jt(n.x,n.y,o[T.CTRL_OR_CMD]?null:this.state.gridSize);if(!e.drag.hasOccurred&&(this.state.activeTool.type==="arrow"||this.state.activeTool.type==="line")&&sn(n.x,n.y,e.origin.x,e.origin.y)<zn)return;if(e.resize.isResizing&&(e.lastCoords.x=n.x,e.lastCoords.y=n.y,this.maybeHandleResize(e,o)))return!0;let l=this.scene.getNonDeletedElementsMap();if(this.state.selectedLinearElement){let d=this.state.editingLinearElement||this.state.selectedLinearElement;if(he.shouldAddMidpoint(this.state.selectedLinearElement,n,this.state,l)){let p=he.addMidpoint(this.state.selectedLinearElement,n,this.state,!o[T.CTRL_OR_CMD],l);if(!p)return;(0,fu.flushSync)(()=>{this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...this.state.selectedLinearElement,pointerDownState:p.pointerDownState,selectedPointsIndices:p.selectedPointsIndices}}),this.state.editingLinearElement&&this.setState({editingLinearElement:{...this.state.editingLinearElement,pointerDownState:p.pointerDownState,selectedPointsIndices:p.selectedPointsIndices}})});return}else if(d.pointerDownState.segmentMidpoint.value!==null&&!d.pointerDownState.segmentMidpoint.added)return;if(he.handlePointDragging(o,this.state,n.x,n.y,(p,b)=>{this.maybeSuggestBindingsForLinearElementAtCoords(p,b)},d,this.scene.getNonDeletedElementsMap())){e.lastCoords.x=n.x,e.lastCoords.y=n.y,e.drag.hasOccurred=!0,this.state.editingLinearElement&&!this.state.editingLinearElement.isDragging&&this.setState({editingLinearElement:{...this.state.editingLinearElement,isDragging:!0}}),this.state.selectedLinearElement.isDragging||this.setState({selectedLinearElement:{...this.state.selectedLinearElement,isDragging:!0}});return}}let s=e.hit.allHitElements.some(d=>this.isASelectedElement(d)),c=this.state.editingLinearElement&&o.shiftKey&&this.state.editingLinearElement.elementId===e.hit.element?.id;if((s||e.hit.hasHitCommonBoundingBoxOfSelectedElements)&&!c){let d=this.scene.getSelectedElements(this.state);if(d.every(b=>b.locked))return;let f=d.find(b=>Te(b)),p=this.getTopLayerFrameAtSceneCoords(n);if(this.setState({frameToHighlight:p&&!f?p:null}),e.drag.hasOccurred=!0,this.setState({selectedElementsAreBeingDragged:!0}),d.length>0&&!e.withCmdOrCtrl&&!this.state.editingElement&&this.state.activeEmbeddable?.state!=="active"){let b={x:n.x-e.origin.x,y:n.y-e.origin.y},x=[...e.originalElements.values()],y=o.shiftKey;if(y){let C=Math.abs(b.x),M=Math.abs(b.y),_=y&&C<M,I=y&&C>M;_&&(b.x=0),I&&(b.y=0)}this.maybeCacheVisibleGaps(o,d),this.maybeCacheReferenceSnapPoints(o,d);let{snapOffset:w,snapLines:k}=c5(x,b,this.state,o,this.scene.getNonDeletedElementsMap());if(this.setState({snapLines:k}),!this.state.editingFrame&&h0(e,d,b,this.state,this.scene,w,o[T.CTRL_OR_CMD]?null:this.state.gridSize),this.maybeSuggestBindingForAll(d),o.altKey&&!e.hit.hasBeenDuplicated){e.hit.hasBeenDuplicated=!0;let C=[],M=[],_=new Map,I=new Map,A=e.hit.element,P=new Set(this.scene.getSelectedElements({selectedElementIds:this.state.selectedElementIds,includeBoundTextElement:!0,includeElementsInFrames:!0}).map(W=>W.id)),F=this.scene.getElementsIncludingDeleted();for(let W of F)if(P.has(W.id)||W.id===A?.id&&e.hit.wasAddedToSelection){let O=Ec(this.state.editingGroupId,_,W),U=e.originalElements.get(W.id);te(O,{x:U.x,y:U.y}),e.originalElements.set(O.id,O),C.push(O),M.push(W),I.set(W.id,O.id)}else C.push(W);let D=[...C,...M];uc(C,M,I),mc(D,M,I,"duplicatesServeAsOld"),Pc(D,M,I),this.scene.replaceAllElements(D),this.maybeCacheVisibleGaps(o,d,!0),this.maybeCacheReferenceSnapPoints(o,d,!0)}return}}let m=this.state.draggingElement;if(m){if(m.type==="freedraw"){let d=m.points,f=n.x-m.x,p=n.y-m.y,b=d.length>0&&d[d.length-1];if(!(b&&b[0]===f&&b[1]===p)){let y=m.simulatePressure?m.pressures:[...m.pressures,o.pressure];te(m,{points:[...d,[f,p]],pressures:y})}}else if(Re(m)){e.drag.hasOccurred=!0,this.setState({selectedElementsAreBeingDragged:!0});let d=m.points,f=i-m.x,p=a-m.y;cc(o)&&d.length===2&&({width:f,height:p}=cp(m.x,m.y,n.x,n.y)),d.length===1?te(m,{points:[...d,[f,p]]}):d.length===2&&te(m,{points:[...d.slice(0,-1),[f,p]]}),Ar(m,!1)&&this.maybeSuggestBindingsForLinearElementAtCoords(m,[n],this.state.startBoundElement)}else e.lastCoords.x=n.x,e.lastCoords.y=n.y,this.maybeDragNewGenericElement(e,o);if(this.state.activeTool.type==="selection"){e.boxSelection.hasOccurred=!0;let d=this.scene.getNonDeletedElements();if(this.state.editingLinearElement)he.handleBoxSelection(o,this.state,this.setState.bind(this),this.scene.getNonDeletedElementsMap());else{let f=!0;!o.shiftKey&&Oe(d,this.state)&&(e.withCmdOrCtrl&&e.hit.element?this.setState(b=>Rt({...b,selectedElementIds:{[e.hit.element.id]:!0}},this.scene.getNonDeletedElements(),b,this)):f=!1);let p=b0(d,m,this.scene.getNonDeletedElementsMap());this.setState(b=>{let x={...f&&b.selectedElementIds,...p.reduce((y,w)=>(y[w.id]=!0,y),{})};return e.hit.element&&(p.length?delete x[e.hit.element.id]:x[e.hit.element.id]=!0),b=f?b:{...b,selectedGroupIds:{},editingGroupId:null},{...Rt({editingGroupId:b.editingGroupId,selectedElementIds:x},this.scene.getNonDeletedElements(),b,this),selectedLinearElement:p.length===1&&Re(p[0])?new he(p[0]):null,showHyperlinkPopup:p.length===1&&(p[0].link||Ht(p[0]))?"info":!1}})}}}})}handlePointerMoveOverScrollbars(e,o){if(o.scrollbars.isOverHorizontal){let r=e.clientX,n=r-o.lastCoords.x;return this.translateCanvas({scrollX:this.state.scrollX-n/this.state.zoom.value}),o.lastCoords.x=r,!0}if(o.scrollbars.isOverVertical){let r=e.clientY,n=r-o.lastCoords.y;return this.translateCanvas({scrollY:this.state.scrollY-n/this.state.zoom.value}),o.lastCoords.y=r,!0}return!1}onPointerUpFromPointerDownHandler(e){return Xe(o=>{this.removePointer(o),e.eventListeners.onMove&&e.eventListeners.onMove.flush();let{draggingElement:r,resizingElement:n,multiElement:i,activeTool:a,isResizing:l,isRotating:s}=this.state;this.setState(p=>({isResizing:!1,isRotating:!1,resizingElement:null,selectionElement:null,frameToHighlight:null,elementsToHighlight:null,cursorButton:"up",editingElement:i||le(this.state.editingElement)?this.state.editingElement:null,snapLines:nc(p.snapLines,[]),originSnapOffset:null})),zo.setReferenceSnapPoints(null),zo.setVisibleGaps(null),this.savePointer(o.clientX,o.clientY,"up"),this.setState({selectedElementsAreBeingDragged:!1});let c=this.scene.getNonDeletedElementsMap();if(this.state.editingLinearElement)if(!e.boxSelection.hasOccurred&&e.hit?.element?.id!==this.state.editingLinearElement.elementId)this.actionManager.executeAction(Lo);else{let p=he.handlePointerUp(o,this.state.editingLinearElement,this.state,this.scene.getNonDeletedElements(),c);p!==this.state.editingLinearElement&&this.setState({editingLinearElement:p,suggestedBindings:[]})}else if(this.state.selectedLinearElement)if(e.hit?.element?.id!==this.state.selectedLinearElement.elementId)this.scene.getSelectedElements(this.state).length>1&&this.setState({selectedLinearElement:null});else{let p=he.handlePointerUp(o,this.state.selectedLinearElement,this.state,this.scene.getNonDeletedElements(),c),{startBindingElement:b,endBindingElement:x}=p,y=this.scene.getElement(p.elementId);Ar(y)&&dc(y,b,x,c),p!==this.state.selectedLinearElement&&this.setState({selectedLinearElement:{...p,selectedPointsIndices:null},suggestedBindings:[]})}if(this.missingPointerEventCleanupEmitter.clear(),window.removeEventListener("pointermove",e.eventListeners.onMove),window.removeEventListener("pointerup",e.eventListeners.onUp),window.removeEventListener("keydown",e.eventListeners.onKeyDown),window.removeEventListener("keyup",e.eventListeners.onKeyUp),this.state.pendingImageElementId&&this.setState({pendingImageElementId:null}),this.props?.onPointerUp?.(a,e),this.onPointerUpEmitter.trigger(this.state.activeTool,e,o),r?.type==="freedraw"){let p=Ve(o,this.state),b=r.points,x=p.x-r.x,y=p.y-r.y;x===b[0][0]&&y===b[0][1]&&(y+=1e-4,x+=1e-4);let w=r.simulatePressure?[]:[...r.pressures,o.pressure];te(r,{points:[...b,[x,y]],pressures:w,lastCommittedPoint:[x,y]}),this.actionManager.executeAction(Lo);return}if(an(r)){let p=r;try{this.initializeImageDimensions(p),this.setState({selectedElementIds:Fe({[p.id]:!0},this.state)},()=>{this.actionManager.executeAction(Lo)})}catch(b){console.error(b),this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(x=>x.id!==p.id)),this.actionManager.executeAction(Lo)}return}if(Re(r)){r.points.length>1&&this.history.resumeRecording();let p=Ve(o,this.state);!e.drag.hasOccurred&&r&&!i?(te(r,{points:[...r.points,[p.x-r.x,p.y-r.y]]}),this.setState({multiElement:r,editingElement:this.state.draggingElement})):e.drag.hasOccurred&&!i&&(Vn(this.state)&&Ar(r,!1)&&vl(r,this.state,this.scene,p,c),this.setState({suggestedBindings:[],startBoundElement:null}),a.locked?this.setState(b=>({draggingElement:null})):(ko(this.interactiveCanvas),this.setState(b=>({draggingElement:null,activeTool:tt(this.state,{type:"selection"}),selectedElementIds:Fe({...b.selectedElementIds,[r.id]:!0},b),selectedLinearElement:new he(r)}))));return}if(a.type!=="selection"&&r&&jn(r)){this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(p=>p.id!==r.id)),this.setState({draggingElement:null});return}if(r){if(e.drag.hasOccurred){let p=Ve(o,this.state);if(this.state.selectedLinearElement&&this.state.selectedLinearElement.isDragging){let b=this.scene.getElement(this.state.selectedLinearElement.elementId);if(b?.frameId){let x=Dc(b,c);x&&b&&(t0(b,x,this.scene.getNonDeletedElementsMap())||(te(b,{groupIds:[]}),Nc([b],this.scene.getNonDeletedElementsMap()),this.scene.informMutation()))}}else{let b=this.getTopLayerFrameAtSceneCoords(p),x=this.scene.getSelectedElements(this.state),y=this.scene.getElementsMapIncludingDeleted(),w=k=>{if(k.length>0){for(let C of k){let M=C.groupIds.indexOf(this.state.editingGroupId);te(C,{groupIds:C.groupIds.slice(0,M)},!1)}y.forEach(C=>{C.groupIds.length&&ut(y,C.groupIds[C.groupIds.length-1]).length<2&&te(C,{groupIds:[]},!1)}),this.setState({editingGroupId:null})}};if(b&&!this.state.selectedElementIds[b.id]){let k=x.filter(C=>C.frameId!==b.id&&sp(C,y,this.state));this.state.editingGroupId&&w(k),y=Rc(y,k,b)}else if(!b&&this.state.editingGroupId){let k=x.filter(C=>C.frameId&&!sp(C,y,this.state));w(k)}y=dr(y,this.state,this),this.scene.replaceAllElements(y)}}if(Te(r)){let p=n0(this.scene.getElementsIncludingDeleted(),r,this.scene.getNonDeletedElementsMap());this.scene.replaceAllElements(Rc(this.scene.getElementsMapIncludingDeleted(),p,r))}te(r,d0(r))}if(n&&this.history.resumeRecording(),n&&jn(n)&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().filter(p=>p.id!==n.id)),e.resize.isResizing){let p=dr(this.scene.getElementsIncludingDeleted(),this.state,this),b=this.scene.getSelectedElements(this.state).filter(x=>Te(x));for(let x of b)p=Oc(p,ji(this.scene.getElementsIncludingDeleted(),x,this.state,c),x,this);this.scene.replaceAllElements(p)}let m=e.hit.element;this.state.selectedLinearElement?.elementId!==m?.id&&Re(m)&&this.scene.getSelectedElements(this.state).length===1&&this.setState({selectedLinearElement:new he(m)});let d=this.lastPointerDownEvent,f=this.lastPointerUpEvent||this.lastPointerMoveEvent;if(So(this.state)&&d&&f){if(this.eraserTrail.endPath(),sn(d.clientX,d.clientY,f.clientX,f.clientY)===0){let b=Ve({clientX:f.clientX,clientY:f.clientY},this.state);this.getElementsAtPosition(b.x,b.y).forEach(y=>this.elementsPendingErasure.add(y.id))}this.eraseElements();return}else this.elementsPendingErasure.size&&this.restoreReadyToEraseElements();if(m&&!e.drag.hasOccurred&&!e.hit.wasAddedToSelection&&(!this.state.editingLinearElement||!e.boxSelection.hasOccurred)&&(o.shiftKey&&!this.state.editingLinearElement?this.state.selectedElementIds[m.id]?bc(this.state,m)?this.setState(p=>{let b={...p.selectedElementIds};for(let x of m.groupIds.flatMap(y=>ut(this.scene.getNonDeletedElements(),y)))delete b[x.id];return{selectedGroupIds:{...p.selectedElementIds,...m.groupIds.map(x=>({[x]:!1})).reduce((x,y)=>({...x,...y}),{})},selectedElementIds:Fe(b,p)}}):this.state.selectedLinearElement?.isDragging||this.setState(p=>{let b={...p.selectedElementIds};delete b[m.id];let x=xe(this.scene.getNonDeletedElements(),{selectedElementIds:b});return{...Rt({editingGroupId:p.editingGroupId,selectedElementIds:b},this.scene.getNonDeletedElements(),p,this),selectedLinearElement:x.length===1&&Re(x[0])?new he(x[0]):p.selectedLinearElement}}):m.frameId&&this.state.selectedElementIds[m.frameId]?this.setState(p=>{let b={...p.selectedElementIds,[m.id]:!0};return delete b[m.frameId],(this.scene.getElement(m.frameId)?.groupIds??[]).flatMap(x=>ut(this.scene.getNonDeletedElements(),x)).forEach(x=>{delete b[x.id]}),{...Rt({editingGroupId:p.editingGroupId,selectedElementIds:b},this.scene.getNonDeletedElements(),p,this),showHyperlinkPopup:m.link||Ht(m)?"info":!1}}):this.setState(p=>({selectedElementIds:Fe({...p.selectedElementIds,[m.id]:!0},p)})):this.setState(p=>({...Rt({editingGroupId:p.editingGroupId,selectedElementIds:{[m.id]:!0}},this.scene.getNonDeletedElements(),p,this),selectedLinearElement:Re(m)&&p.selectedLinearElement?.elementId!==m.id?new he(m):p.selectedLinearElement}))),!e.drag.hasOccurred&&!this.state.isResizing&&(m&&lc(m,this.state,this.frameNameBoundsCache,e.origin.x,e.origin.y,this.scene.getNonDeletedElementsMap())||!m&&e.hit.hasHitCommonBoundingBoxOfSelectedElements)){this.state.editingLinearElement?this.setState({editingLinearElement:null}):this.setState({selectedElementIds:Fe({},this.state),selectedGroupIds:{},editingGroupId:null,activeEmbeddable:null});return}if(!a.locked&&a.type!=="freedraw"&&r&&r.type!=="selection"&&this.setState(p=>({selectedElementIds:Fe({...p.selectedElementIds,[r.id]:!0},p),showHyperlinkPopup:Ht(r)&&!r.link?"editor":p.showHyperlinkPopup})),(a.type!=="selection"||Oe(this.scene.getNonDeletedElements(),this.state))&&this.history.resumeRecording(),(e.drag.hasOccurred||l||s)&&(Vn(this.state)?xl(this.scene.getSelectedElements(this.state),this.scene.getNonDeletedElements(),c):yl(this.scene.getSelectedElements(this.state),c)),a.type==="laser"){this.laserTrails.endPath();return}!a.locked&&a.type!=="freedraw"?(ko(this.interactiveCanvas),this.setState({draggingElement:null,suggestedBindings:[],activeTool:tt(this.state,{type:"selection"})})):this.setState({draggingElement:null,suggestedBindings:[]}),m&&this.lastPointerUpEvent&&this.lastPointerDownEvent&&this.lastPointerUpEvent.timeStamp-this.lastPointerDownEvent.timeStamp<300&&Ae.pointers.size<=1&&Di(m)&&this.isIframeLikeElementCenter(m,this.lastPointerUpEvent,e.origin.x,e.origin.y)&&this.handleEmbeddableCenterClick(m)})}restoreReadyToEraseElements=()=>{this.elementsPendingErasure=new Set,this.onSceneUpdated()};eraseElements=()=>{let e=!1,o=this.scene.getElementsIncludingDeleted().map(r=>this.elementsPendingErasure.has(r.id)||r.frameId&&this.elementsPendingErasure.has(r.frameId)||gt(r)&&this.elementsPendingErasure.has(r.containerId)?(e=!0,ue(r,{isDeleted:!0})):r);this.elementsPendingErasure=new Set,e&&(this.history.resumeRecording(),this.scene.replaceAllElements(o))};initializeImage=async({imageFile:e,imageElement:o,showCursorImagePreview:r=!1})=>{if(!Sc(e))throw new Error(g("errors.unsupportedFileType"));let n=e.type;if(Ne(this.interactiveCanvas,"wait"),n===Pt.svg)try{e=tp(await $b(await e.text()),e.name)}catch(c){throw console.warn(c),new Error(g("errors.svgImageInsertError"))}let i=await(this.props.generateIdForFile?.(e)||Pb(e));if(!i)throw console.warn("Couldn't generate file id or the supplied `generateIdForFile` didn't resolve to one."),new Error(g("errors.imageInsertError"));if(!this.files[i]?.dataURL){try{e=await Il(e,{maxWidthOrHeight:b1})}catch(c){console.error("Error trying to resizing image file on insertion",c)}if(e.size>_u)throw new Error(g("errors.fileTooBig",{maxSize:`${Math.trunc(_u/1024/1024)}MB`}))}if(r){let c=this.files[i]?.dataURL,m=c&&Db(c);this.setImagePreviewCursor(m||e)}let l=this.files[i]?.dataURL||await Ic(e),s=te(o,{fileId:i},!1);return new Promise(async(c,m)=>{try{this.files={...this.files,[i]:{mimeType:n,id:i,dataURL:l,created:Date.now(),lastRetrieved:Date.now()}};let d=this.imageCache.get(i);d||(this.addNewImagesToImageCache(),await this.updateImageCache([s])),d?.image instanceof Promise&&await d.image,this.state.pendingImageElementId!==s.id&&this.state.draggingElement?.id!==s.id&&this.initializeImageDimensions(s,!0),c(s)}catch(d){console.error(d),m(new Error(g("errors.imageInsertError")))}finally{r||ko(this.interactiveCanvas)}})};insertImageElement=async(e,o,r)=>{if(!this.isToolSupported("image")){this.setState({errorMessage:g("errors.imageToolNotSupported")});return}this.scene.addNewElement(e);try{return await this.initializeImage({imageFile:o,imageElement:e,showCursorImagePreview:r})}catch(n){return te(e,{isDeleted:!0}),this.actionManager.executeAction(Lo),this.setState({errorMessage:n.message||g("errors.imageInsertError")}),null}};setImagePreviewCursor=async e=>{let r;try{r=await Il(e,{maxWidthOrHeight:96})}catch(i){throw i.cause==="UNSUPPORTED"?new Error(g("errors.unsupportedFileType")):i}let n=await Ic(r);if(e.type===Pt.svg){let i=await Bb(n),a=Math.min(i.height,96),l=a*(i.width/i.height);l>96&&(l=96,a=l*(i.height/i.width));let s=document.createElement("canvas");s.height=a,s.width=l,s.getContext("2d").drawImage(i,0,0,l,a),n=s.toDataURL(Pt.svg)}this.state.pendingImageElementId&&Ne(this.interactiveCanvas,`url(${n}) 4 4, auto`)};onImageAction=async({insertOnCanvasDirectly:e})=>{try{let o=this.state.width/2+this.state.offsetLeft,r=this.state.height/2+this.state.offsetTop,{x:n,y:i}=Ve({clientX:o,clientY:r},this.state),a=await Cc({description:"Image",extensions:Object.keys(o1)}),l=this.createImageElement({sceneX:n,sceneY:i,addToFrameUnderCursor:!1});e?(this.insertImageElement(l,a),this.initializeImageDimensions(l),this.setState({selectedElementIds:Fe({[l.id]:!0},this.state)},()=>{this.actionManager.executeAction(Lo)})):this.setState({pendingImageElementId:l.id},()=>{this.insertImageElement(l,a,!0)})}catch(o){o.name!=="AbortError"?console.error(o):console.warn(o),this.setState({pendingImageElementId:null,editingElement:null,activeTool:tt(this.state,{type:"selection"})},()=>{this.actionManager.executeAction(Lo)})}};initializeImageDimensions=(e,o=!1)=>{let r=ul(e)&&this.imageCache.get(e.fileId)?.image;if(!r||r instanceof Promise){if(e.width<zn/this.state.zoom.value&&e.height<zn/this.state.zoom.value){let n=100/this.state.zoom.value;te(e,{x:e.x-n/2,y:e.y-n/2,width:n,height:n})}return}if(o||e.width<zn/this.state.zoom.value&&e.height<zn/this.state.zoom.value){let n=Math.max(this.state.height-120,160),i=Math.min(n,Math.floor(this.state.height*.5)/this.state.zoom.value),a=Math.min(r.naturalHeight,i),l=a*(r.naturalWidth/r.naturalHeight),s=e.x+e.width/2-l/2,c=e.y+e.height/2-a/2;te(e,{x:s,y:c,width:l,height:a})}};updateImageCache=async(e,o=this.files)=>{let{updatedFiles:r,erroredFiles:n}=await zb({imageCache:this.imageCache,fileIds:e.map(i=>i.fileId),files:o});if(r.size||n.size)for(let i of e)r.has(i.fileId)&&mr.delete(i);return n.size&&this.scene.replaceAllElements(this.scene.getElementsIncludingDeleted().map(i=>ul(i)&&n.has(i.fileId)?ue(i,{status:"error"}):i)),{updatedFiles:r,erroredFiles:n}};addNewImagesToImageCache=async(e=Hb(this.scene.getNonDeletedElements()),o=this.files)=>{let r=e.filter(n=>!n.isDeleted&&!this.imageCache.has(n.fileId));if(r.length){let{updatedFiles:n}=await this.updateImageCache(r,o);n.size&&this.scene.informMutation()}};scheduleImageRefresh=(0,z5.default)(()=>{this.addNewImagesToImageCache()},i1);updateBindingEnabledOnPointerMove=e=>{let o=j1(e);this.state.isBindingEnabled!==o&&this.setState({isBindingEnabled:o})};maybeSuggestBindingAtCursor=e=>{let o=El(e,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap());this.setState({suggestedBindings:o!=null?[o]:[]})};maybeSuggestBindingsForLinearElementAtCoords=(e,o,r)=>{if(!o.length)return;let n=o.reduce((i,a)=>{let l=El(a,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap());return l!=null&&!X1(e,r?.id,l)&&i.push(l),i},[]);this.setState({suggestedBindings:n})};maybeSuggestBindingForAll(e){if(e.length>50)return;let o=q1(e,this.scene.getNonDeletedElements(),this.scene.getNonDeletedElementsMap());this.setState({suggestedBindings:o})}clearSelection(e){this.setState(o=>({selectedElementIds:Fe({},o),activeEmbeddable:null,selectedGroupIds:{},editingGroupId:o.editingGroupId&&e!=null&&Ui(e,o.editingGroupId)?o.editingGroupId:null})),this.setState({selectedElementIds:Fe({},this.state),activeEmbeddable:null,previousSelectedElementIds:this.state.selectedElementIds})}handleInteractiveCanvasRef=e=>{e!==null?(this.interactiveCanvas=e,this.interactiveCanvas.addEventListener("wheel",this.handleWheel),this.interactiveCanvas.addEventListener("touchstart",this.onTouchStart),this.interactiveCanvas.addEventListener("touchend",this.onTouchEnd)):(this.interactiveCanvas?.removeEventListener("wheel",this.handleWheel),this.interactiveCanvas?.removeEventListener("touchstart",this.onTouchStart),this.interactiveCanvas?.removeEventListener("touchend",this.onTouchEnd))};handleAppOnDrop=async e=>{let{file:o,fileHandle:r}=await Nb(e),{x:n,y:i}=Ve(e,this.state);try{if(Sc(o)&&this.isToolSupported("image")){if(o?.type===Pt.png||o?.type===Pt.svg)try{let s=await kc(o,this.state,this.scene.getElementsIncludingDeleted(),r);this.syncActionResult({...s,appState:{...s.appState||this.state,isLoading:!1},replaceFiles:!0,commitToHistory:!0});return}catch(s){if(s.name!=="EncodingError")throw new Error(g("alerts.couldNotLoadInvalidFile"))}let l=this.createImageElement({sceneX:n,sceneY:i});this.insertImageElement(l,o),this.initializeImageDimensions(l),this.setState({selectedElementIds:Fe({[l.id]:!0},this.state)});return}}catch(l){return this.setState({isLoading:!1,errorMessage:l.message})}let a=e.dataTransfer.getData(Pt.excalidrawlib);if(a&&typeof a=="string"){try{let l=Lb(a);this.addElementsFromPasteOrLibrary({elements:am(l),position:e,files:null})}catch(l){this.setState({errorMessage:l.message})}return}if(o&&await this.loadFileToCanvas(o,r),e.dataTransfer?.types?.includes("text/plain")){let l=e.dataTransfer?.getData("text");if(l&&Gi(l,this.props.validateEmbeddable)&&(/^(http|https):\/\/[^\s/$.?#].[^\s]*$/.test(l)||Yn(l)?.type==="video")){let s=this.insertEmbeddableElement({sceneX:n,sceneY:i,link:Or(l)});s&&this.setState({selectedElementIds:{[s.id]:!0}})}}};loadFileToCanvas=async(e,o)=>{e=await Ob(e);try{let r;try{r=await Qu(e,this.state,this.scene.getElementsIncludingDeleted(),o)}catch(n){let i=n instanceof Mb;if(i&&n.code==="IMAGE_NOT_CONTAINS_SCENE_DATA"&&!this.isToolSupported("image")){this.setState({isLoading:!1,errorMessage:g("errors.imageToolNotSupported")});return}let a=i?g("alerts.cannotRestoreFromImage"):g("alerts.couldNotLoadInvalidFile");this.setState({isLoading:!1,errorMessage:a})}if(!r)return;r.type===Pt.excalidraw?(this.setState({isLoading:!0}),this.syncActionResult({...r.data,appState:{...r.data.appState||this.state,isLoading:!1},replaceFiles:!0,commitToHistory:!0})):r.type===Pt.excalidrawlib&&await this.library.updateLibrary({libraryItems:e,merge:!0,openLibraryMenu:!0}).catch(n=>{console.error(n),this.setState({errorMessage:g("errors.importLibraryError")})})}catch(r){this.setState({isLoading:!1,errorMessage:r.message})}};handleCanvasContextMenu=e=>{if(e.preventDefault(),("pointerType"in e.nativeEvent&&e.nativeEvent.pointerType==="touch"||"pointerType"in e.nativeEvent&&e.nativeEvent.pointerType==="pen"&&e.button!==tn.SECONDARY)&&this.state.activeTool.type!=="selection")return;let{x:o,y:r}=Ve(e,this.state),n=this.getElementAtPosition(o,r,{preferSelected:!0,includeLockedElements:!0}),i=this.scene.getSelectedElements(this.state),a=this.isHittingCommonBoundingBoxOfSelectedElements({x:o,y:r},i),l=n||a?"element":"canvas",s=this.excalidrawContainerRef.current,{top:c,left:m}=s.getBoundingClientRect(),d=e.clientX-m,f=e.clientY-c;ve("contextMenu","openContextMenu",l),this.setState({...n&&!this.state.selectedElementIds[n.id]?{...this.state,...Rt({editingGroupId:this.state.editingGroupId,selectedElementIds:{[n.id]:!0}},this.scene.getNonDeletedElements(),this.state,this),selectedLinearElement:Re(n)?new he(n):null}:this.state,showHyperlinkPopup:!1},()=>{this.setState({contextMenu:{top:f,left:d,items:this.getContextMenuItems(l)}})})};maybeDragNewGenericElement=(e,o)=>{let r=this.state.draggingElement,n=e.lastCoords;if(r)if(r.type==="selection"&&this.state.activeTool.type!=="eraser")pp(r,this.state.activeTool.type,e.origin.x,e.origin.y,n.x,n.y,Wn(e.origin.x,n.x),Wn(e.origin.y,n.y),Bi(o),sc(o));else{let[i,a]=Jt(n.x,n.y,o[T.CTRL_OR_CMD]?null:this.state.gridSize),l=ul(r)&&this.imageCache.get(r.fileId)?.image,s=l&&!(l instanceof Promise)?l.width/l.height:null;this.maybeCacheReferenceSnapPoints(o,[r]);let{snapOffset:c,snapLines:m}=m5(r,this.state,o,{x:e.originInGrid.x+(this.state.originSnapOffset?.x??0),y:e.originInGrid.y+(this.state.originSnapOffset?.y??0)},{x:i-e.originInGrid.x,y:a-e.originInGrid.y},this.scene.getNonDeletedElementsMap());i+=c.x,a+=c.y,this.setState({snapLines:m}),pp(r,this.state.activeTool.type,e.originInGrid.x,e.originInGrid.y,i,a,Wn(e.originInGrid.x,i),Wn(e.originInGrid.y,a),an(r)?!Bi(o):Bi(o),sc(o),s,this.state.originSnapOffset),this.maybeSuggestBindingForAll([r]),(this.state.activeTool.type===mt.frame||this.state.activeTool.type===mt.magicframe)&&this.setState({elementsToHighlight:ji(this.scene.getNonDeletedElements(),r,this.state,this.scene.getNonDeletedElementsMap())})}};maybeHandleResize=(e,o)=>{let r=this.scene.getSelectedElements(this.state),n=r.filter(m=>Te(m)),i=e.resize.handleType;if(n.length>0&&i==="rotation")return!1;this.setState({isResizing:i&&i!=="rotation",isRotating:i==="rotation",activeEmbeddable:null});let a=e.lastCoords,[l,s]=Jt(a.x-e.resize.offset.x,a.y-e.resize.offset.y,o[T.CTRL_OR_CMD]?null:this.state.gridSize),c=new Map;if(n.forEach(m=>{un(this.scene.getNonDeletedElements(),m.id).forEach(f=>{c.set(m.id+f.id,{x:f.x-m.x,y:f.y-m.y})})}),!this.state.selectedElementsAreBeingDragged){let[m,d]=Jt(a.x,a.y,o[T.CTRL_OR_CMD]?null:this.state.gridSize),f={x:m-e.originInGrid.x,y:d-e.originInGrid.y},p=[...e.originalElements.values()];this.maybeCacheReferenceSnapPoints(o,r);let{snapOffset:b,snapLines:x}=d5(r,xe(p,this.state),this.state,o,f,i);l+=b.x,s+=b.y,this.setState({snapLines:x})}if(m0(e.originalElements,i,r,this.scene.getElementsMapIncludingDeleted(),cc(o),sc(o),r.length===1&&an(r[0])?!Bi(o):Bi(o),l,s,e.resize.center.x,e.resize.center.y)){this.maybeSuggestBindingForAll(r);let m=new Set;return n.forEach(d=>{ji(this.scene.getNonDeletedElements(),d,this.state,this.scene.getNonDeletedElementsMap()).forEach(f=>m.add(f))}),this.setState({elementsToHighlight:[...m]}),!0}return!1};getContextMenuItems=e=>{let o=[];return o.push(Xd,jd),e==="canvas"?this.state.viewModeEnabled?[...o,Jd,Pa,dg,Tn]:[eh,ro,Xd,jd,qd,ro,Zp,aE,ro,Jd,th,Pa,dg,Tn]:(o.push(qd),this.state.viewModeEnabled?[La,...o]:[Zd,La,eh,t5,o5,ro,...o,ro,Wf,Gf,ro,Kf,oh,rh,Qy,Yf,ro,Xf,ro,Gp,Vp,Kp,Yp,ro,Jf,Qf,ro,Ah,rs,jp,ch,ro,Bl])};handleWheel=Xe(e=>{if(e.preventDefault(),Ps)return;let{deltaX:o,deltaY:r}=e;if(e.metaKey||e.ctrlKey){let n=Math.sign(r),i=$n*100,a=Math.abs(r),l=r;a>i&&(l=i*n);let s=this.state.zoom.value-l/100;s+=Math.log10(Math.max(1,this.state.zoom.value))*-n*Math.min(1,a/20),this.translateCanvas(c=>({...zr({viewportX:this.lastViewportPosition.x,viewportY:this.lastViewportPosition.y,nextZoom:Br(s)},c),shouldCacheIgnoreZoom:!0})),this.resetShouldCacheIgnoreZoomDebounced();return}if(e.shiftKey){this.translateCanvas(({zoom:n,scrollX:i})=>({scrollX:i-(r||o)/n.value}));return}this.translateCanvas(({zoom:n,scrollX:i,scrollY:a})=>({scrollX:i-o/n.value,scrollY:a-r/n.value}))});getTextWysiwygSnappedToCenterPosition(e,o,r,n){if(n){let i=n.x+n.width/2,a=n.y+n.height/2,l=hc(n,r,this.scene.getNonDeletedElementsMap());if(l&&(i=l.x,a=l.y),Math.hypot(e-i,o-a)<Jg){let{x:m,y:d}=qt({sceneX:i,sceneY:a},r);return{viewportX:m,viewportY:d,elementCenterX:i,elementCenterY:a}}}}savePointer=(e,o,r)=>{if(!e||!o)return;let{x:n,y:i}=Ve({clientX:e,clientY:o},this.state);isNaN(n)||isNaN(i);let a={x:n,y:i,tool:this.state.activeTool.type==="laser"?"laser":"pointer"};this.props.onPointerUpdate?.({pointer:a,button:r,pointersMap:Ae.pointers})};resetShouldCacheIgnoreZoomDebounced=ll(()=>{this.unmounted||this.setState({shouldCacheIgnoreZoom:!1})},300);updateDOMRect=e=>{if(this.excalidrawContainerRef?.current){let o=this.excalidrawContainerRef.current,{width:r,height:n,left:i,top:a}=o.getBoundingClientRect(),{width:l,height:s,offsetTop:c,offsetLeft:m}=this.state;if(r===l&&n===s&&i===m&&a===c){e&&e();return}this.setState({width:r,height:n,offsetLeft:i,offsetTop:a},()=>{e&&e()})}};refresh=()=>{this.setState({...this.getCanvasOffsets()})};getCanvasOffsets(){if(this.excalidrawContainerRef?.current){let e=this.excalidrawContainerRef.current,{left:o,top:r}=e.getBoundingClientRect();return{offsetLeft:o,offsetTop:r}}return{offsetLeft:0,offsetTop:0}}async updateLanguage(){let e=ta.find(o=>o.code===this.props.langCode)||ur;await Kc(e),this.setAppState({})}},iI=()=>{(E.MODE===Su.TEST||E.DEV)&&(window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get(){return this.app?.scene.getElementsIncludingDeleted()},set(t){return this.app?.scene.replaceAllElements(t)}}}))};iI();var W5=Sg;h();var aI=()=>{Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(t){if(t=Math.trunc(t)||0,t<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]},writable:!0,enumerable:!1,configurable:!0}),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=function(...t){this.innerHTML="",this.append(...t)})},G5=aI;h();var Pg=v(S(),1),V5=({children:t})=>{let{FooterCenterTunnel:e}=We(),o=ke();return(0,Pg.jsx)(e.In,{children:(0,Pg.jsx)("div",{className:z("footer-center zen-mode-transition",{"layer-ui__wrapper__footer-left--transition-bottom":o.zenModeEnabled}),children:t})})},lI=V5;V5.displayName="FooterCenter";h();h();h();var $o=v(S(),1),sI=()=>(0,$o.jsx)("svg",{viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"ExcalidrawLogo-icon",children:(0,$o.jsx)("path",{d:"M39.9 32.889a.326.326 0 0 0-.279-.056c-2.094-3.083-4.774-6-7.343-8.833l-.419-.472a.212.212 0 0 0-.056-.139.586.586 0 0 0-.167-.111l-.084-.083-.056-.056c-.084-.167-.28-.278-.475-.167-.782.39-1.507.973-2.206 1.528-.92.722-1.842 1.445-2.708 2.25a8.405 8.405 0 0 0-.977 1.028c-.14.194-.028.361.14.444-.615.611-1.23 1.223-1.843 1.861a.315.315 0 0 0-.084.223c0 .083.056.166.111.194l1.09.833v.028c1.535 1.528 4.244 3.611 7.12 5.861.418.334.865.667 1.284 1 .195.223.39.473.558.695.084.11.28.139.391.055.056.056.14.111.196.167a.398.398 0 0 0 .167.056.255.255 0 0 0 .224-.111.394.394 0 0 0 .055-.167c.029 0 .028.028.056.028a.318.318 0 0 0 .224-.084l5.082-5.528a.309.309 0 0 0 0-.444Zm-14.63-1.917a.485.485 0 0 0 .111.14c.586.5 1.2 1 1.843 1.555l-2.569-1.945-.251-.166c-.056-.028-.112-.084-.168-.111l-.195-.167.056-.056.055-.055.112-.111c.866-.861 2.346-2.306 3.1-3.028-.81.805-2.43 3.167-2.095 3.944Zm8.767 6.89-2.122-1.612a44.713 44.713 0 0 0-2.625-2.5c1.145.861 2.122 1.611 2.262 1.75 1.117.972 1.06.806 1.815 1.445l.921.666a1.06 1.06 0 0 1-.251.25Zm.558.416-.056-.028c.084-.055.168-.111.252-.194l-.196.222ZM1.089 5.75c.055.361.14.722.195 1.056.335 1.833.67 3.5 1.284 4.75l.252.944c.084.361.223.806.363.917 1.424 1.25 3.602 3.11 5.947 4.889a.295.295 0 0 0 .363 0s0 .027.028.027a.254.254 0 0 0 .196.084.318.318 0 0 0 .223-.084c2.988-3.305 5.221-6.027 6.813-8.305.112-.111.14-.278.14-.417.111-.111.195-.25.307-.333.111-.111.111-.306 0-.39l-.028-.027c0-.055-.028-.139-.084-.167-.698-.666-1.2-1.138-1.731-1.638-.922-.862-1.871-1.75-3.881-3.75l-.028-.028c-.028-.028-.056-.056-.112-.056-.558-.194-1.703-.389-3.127-.639C6.087 2.223 3.21 1.723.614.944c0 0-.168 0-.196.028l-.083.084c-.028.027-.056.055-.224.11h.056-.056c.028.167.028.278.084.473 0 .055.112.5.112.555l.782 3.556Zm15.496 3.278-.335-.334c.084.112.196.195.335.334Zm-3.546 4.666-.056.056c0-.028.028-.056.056-.056Zm-2.038-10c.168.167.866.834 1.033.973-.726-.334-2.54-1.167-3.379-1.445.838.167 1.983.334 2.346.472ZM1.424 2.306c.419.722.754 3.222 1.089 5.666-.196-.778-.335-1.555-.503-2.278-.251-1.277-.503-2.416-.838-3.416.056 0 .14 0 .252.028Zm-.168-.584c-.112 0-.223-.028-.307-.028 0-.027 0-.055-.028-.055.14 0 .223.028.335.083Zm-1.089.222c0-.027 0-.027 0 0ZM39.453 1.333c.028-.11-.558-.61-.363-.639.42-.027.42-.666 0-.666-.558.028-1.144.166-1.675.25-.977.194-1.982.389-2.96.61-2.205.473-4.383.973-6.561 1.557-.67.194-1.424.333-2.066.666-.224.111-.196.333-.084.472-.056.028-.084.028-.14.056-.195.028-.363.056-.558.083-.168.028-.252.167-.224.334 0 .027.028.083.028.11-1.173 1.556-2.485 3.195-3.909 4.945-1.396 1.611-2.876 3.306-4.356 5.056-4.719 5.5-10.052 11.75-15.943 17.25a.268.268 0 0 0 0 .389c.028.027.056.055.084.055-.084.084-.168.14-.252.222-.056.056-.084.111-.084.167a.605.605 0 0 0-.111.139c-.112.111-.112.305.028.389.111.11.307.11.39-.028.029-.028.029-.056.056-.056a.44.44 0 0 1 .615 0c.335.362.67.723.977 1.028l-.698-.583c-.112-.111-.307-.083-.39.028-.113.11-.085.305.027.389l7.427 6.194c.056.056.112.056.196.056s.14-.028.195-.084l.168-.166c.028.027.083.027.111.027.084 0 .14-.027.196-.083 10.052-10.055 18.15-17.639 27.42-24.417.083-.055.111-.166.111-.25.112 0 .196-.083.251-.194 1.704-5.194 2.039-9.806 2.15-12.083v-.028c0-.028.028-.056.028-.083.028-.056.028-.084.028-.084a1.626 1.626 0 0 0-.111-1.028ZM21.472 9.5c.446-.5.893-1.028 1.34-1.5-2.876 3.778-7.65 9.583-14.408 16.5 4.607-5.083 9.242-10.333 13.068-15ZM5.193 35.778h.084-.084Zm3.462 3.194c-.027-.028-.027-.028 0-.028v.028Zm4.16-3.583c.224-.25.448-.472.699-.722 0 0 0 .027.028.027-.252.223-.475.445-.726.695Zm1.146-1.111c.14-.14.279-.334.446-.5l.028-.028c1.648-1.694 3.351-3.389 5.082-5.111l.028-.028c.419-.333.921-.694 1.368-1.028a379.003 379.003 0 0 0-6.952 6.695ZM24.794 6.472c-.921 1.195-1.954 2.778-2.82 4.028-2.736 3.944-11.532 13.583-11.727 13.75a1976.983 1976.983 0 0 1-8.042 7.639l-.167.167c-.14-.167-.14-.417.028-.556C14.49 19.861 22.03 10.167 25.074 5.917c-.084.194-.14.36-.28.555Zm4.83 5.695c-1.116-.64-1.646-1.64-1.34-2.611l.084-.334c.028-.083.084-.194.14-.277.307-.5.754-.917 1.257-1.167.027 0 .055 0 .083-.028-.028-.056-.028-.139-.028-.222.028-.167.14-.278.335-.278.335 0 1.369.306 1.76.639.111.083.223.194.335.305.14.167.363.445.474.667.056.028.112.306.196.445.056.222.111.472.084.694-.028.028 0 .194-.028.194a2.668 2.668 0 0 1-.363 1.028c-.028.028-.028.056-.056.084l-.028.027c-.14.223-.335.417-.53.556-.643.444-1.369.583-2.095.389 0 0-.195-.084-.28-.111Zm8.154-.834a39.098 39.098 0 0 1-.893 3.167c0 .028-.028.083 0 .111-.056 0-.084.028-.14.056-2.206 1.61-4.356 3.305-6.506 5.028 1.843-1.64 3.686-3.306 5.613-4.945.558-.5.949-1.139 1.06-1.861l.28-1.667v-.055c.14-.334.67-.195.586.166Z",fill:"currentColor"})}),cI=()=>(0,$o.jsxs)("svg",{viewBox:"0 0 450 55",xmlns:"http://www.w3.org/2000/svg",fill:"none",className:"ExcalidrawLogo-text",children:[(0,$o.jsx)("path",{d:"M429.27 96.74c2.47-1.39 4.78-3.02 6.83-4.95 1.43-1.35 2.73-2.86 3.81-4.51-.66.9-1.4 1.77-2.23 2.59-2.91 2.84-5.72 5.09-8.42 6.87h.01ZM343.6 69.36c.33 3.13.58 6.27.79 9.4.09 1.37.18 2.75.25 4.12-.12-4.46-.27-8.93-.5-13.39-.11-2.08-.24-4.16-.4-6.24-.06 1.79-.11 3.85-.13 6.11h-.01ZM378.47 98.34c.01-.37.07-1.13.01-6.51-.11 1.9-.22 3.81-.31 5.71-.07 1.42-.22 2.91-.16 4.35.39.03.78.07 1.17.1-.92-.85-.76-2.01-.72-3.66l.01.01ZM344.09 86.12c-.09-2.41-.22-4.83-.39-7.24v12.21c.15-.05.32-.09.47-.14.05-1.61-.03-3.23-.09-4.83h.01ZM440.69 66.79c-.22-.34-.45-.67-.69-.99-3.71-4.87-9.91-7.14-15.65-8.55-1.05-.26-2.12-.49-3.18-.71 2.29.59 4.48 1.26 6.64 2.02 7.19 2.54 10.57 5.41 12.88 8.23ZM305.09 72.46l1.2 3.6c.84 2.53 1.67 5.06 2.46 7.61.24.78.5 1.57.73 2.36.22-.04.44-.08.67-.12a776.9 776.9 0 0 1-5.01-13.57c-.02.04-.03.09-.05.13v-.01ZM345.49 90.25v.31c1.48-.42 3.05-.83 4.66-1.2-1.56.25-3.12.52-4.66.89ZM371.02 90.22c0-.57-.04-1.14-.11-1.71-.06-.02-.12-.04-.19-.05-.21-.05-.43-.08-.65-.11.42.16.74.88.95 1.87ZM398.93 54.23c-.13 0-.27-.01-.4-.02l.03.4c.11-.15.23-.27.37-.38ZM401.57 62.28v-.15c-1.22-.24-2.86-.61-3.23-1.25-.09-.15-.18-.51-.27-.98-.09.37-.2.73-.33 1.09 1.24.56 2.52.98 3.83 1.29ZM421.73 88.68c-2.97 1.65-6.28 3.12-9.69 3.68v.18c4.72-.14 11.63-3.85 16.33-8.38-2.04 1.75-4.33 3.24-6.63 4.53l-.01-.01ZM411.28 80.92c-.05-1.2-.09-2.4-.15-3.6-.21 5.66-.46 11.38-.47 14.51.24-.02.48-.04.71-.07.15-3.61.05-7.23-.09-10.83v-.01Z",transform:"translate(-144.023 -51.76)"}),(0,$o.jsx)("path",{d:"M425.38 67.41c-3.5-1.45-7.19-2.57-14.06-3.62.09 1.97.06 4.88-.03 8.12.03.04.06.09.06.15.19 1.36.28 2.73.37 4.1.25 3.77.39 7.55.41 11.33 0 1.38-.01 2.76-.07 4.13 1.4-.25 2.78-.65 4.12-1.15 4.07-1.5 7.94-3.78 11.28-6.54 2.33-1.92 5.13-4.49 5.88-7.58.63-3.53-2.45-6.68-7.97-8.96l.01.02ZM411.35 92.53v-.06l-.34.03c.11.01.22.03.34.03ZM314.26 64.06c-.23-.59-.47-1.17-.7-1.75.57 1.62 1.11 3.25 1.6 4.9l.15.54 2.35 6.05c.32.82.66 1.64.98 2.46-1.38-4.1-2.83-8.17-4.39-12.2h.01ZM156.82 103.07c-.18.13-.38.23-.58.33 1.32-.03 2.66-.2 3.93-.34.86-.09 1.72-.22 2.58-.33-2.12.1-4.12.17-5.94.34h.01ZM210.14 68.88s.03.04.05.07c.18-.31.39-.64.58-.96-.21.3-.42.6-.64.89h.01ZM201.65 82.8c-.5.77-1.02 1.56-1.49 2.37 1.11-1.55 2.21-3.1 3.2-4.59-.23.23-.49.51-.75.79-.32.47-.65.95-.96 1.43ZM194.03 98.66c-.33-.4-.65-.84-1.05-1.17-.24-.2-.07-.49.17-.56-.23-.26-.42-.5-.63-.75 1.51-2.55 3.93-5.87 6.4-9.28-.17-.08-.29-.28-.2-.49.04-.09.09-.17.13-.26-1.21 1.78-2.42 3.55-3.61 5.33-.87 1.31-1.74 2.64-2.54 4-.29.5-.63 1.04-.87 1.61.81.65 1.63 1.27 2.47 1.88-.09-.11-.18-.21-.27-.32v.01ZM307.79 82.93c-1-3.17-2.05-6.32-3.1-9.48-1.62 4.08-3.69 9.17-6.16 15.19 3.32-1.04 6.77-1.87 10.27-2.5-.32-1.08-.67-2.15-1.01-3.21ZM149.5 80.7c.05-1.71.04-3.43 0-5.14-.1 2.26-.16 4.51-.22 6.77-.02.73-.03 1.46-.04 2.19.14-1.27.2-2.55.24-3.82h.02ZM228.98 98.3c.39 1.25.91 3.03.94 3.91.06-.03.12-.07.17-.1.08-1.29-.55-2.65-1.11-3.81ZM307.72 53.36c.81.5 1.53 1.04 2.07 1.49-.38-.8-.78-1.58-1.21-2.35-.17.03-.34.06-.51.11-.43.12-.86.26-1.29.41.35-.01.53.1.94.34ZM283.69 96.14c3.91-7.25 6.89-13.35 8.88-18.15l1.1-2.66c-1.27 2.64-2.56 5.27-3.83 7.9-1.53 3.15-3.06 6.31-4.58 9.47-.87 1.81-1.76 3.62-2.54 5.47.04.02.07.04.11.07.05.05.1.09.15.14.05-.73.27-1.48.71-2.24ZM289.92 103.23s-.04.01-.05.03c0-.02.04-.03.05-.04.05-.05.11-.1.16-.15l.21-.21c-.55 0-1.5-.27-2.55-.72.4.26.8.51 1.22.74.24.13.48.26.73.37.05.02.1.03.14.05a.27.27 0 0 1 .08-.07h.01ZM269.23 68.49c-.39-.19-.82-.48-1.33-.87-3.06-1.56-6.31-2.78-9.36-2.35-3.5.49-5.7 1.11-7.74 2.44 5.71-2.6 12.82-2.07 18.44.79l-.01-.01ZM177.87 53.69l1.06.03c-.96-.22-2-.25-2.89-.3-4.95-.26-9.99.33-14.86 1.19-2.44.43-4.88.95-7.28 1.59 9.09-1.76 15.69-2.77 23.97-2.51ZM219.85 55.51c-.18.12-.36.27-.56.45-.45.53-.86 1.11-1.26 1.66-1.91 2.61-3.71 5.31-5.57 7.95l-.12.18 8.05-10.11c-.18-.05-.36-.1-.55-.13h.01ZM510.71 54.1c.12-.15.29-.3.53-.45.69-.4 3.72-.63 5.87-.74-.36-.02-.73-.04-1.09-.05-1.84-.03-3.67.09-5.49.35.05.3.12.59.18.88v.01ZM510.76 86.02c1.37-3.07 2.49-6.27 3.57-9.46.55-1.64 1.12-3.3 1.6-4.97-1.59 4.01-3.67 9.14-6.2 15.3.24-.08.5-.14.74-.22.1-.22.19-.44.29-.65ZM566.95 75.76c.11-.02.23.03.31.11-.05-.13-.09-.26-.14-.39-.05.09-.11.18-.17.28ZM511.33 86.41c3.08-.89 6.24-1.62 9.46-2.14-1.51-3.98-2.98-7.96-4.39-11.87-.05.15-.09.31-.14.46-1.02 3.32-2.15 6.61-3.39 9.85-.48 1.25-.98 2.49-1.53 3.7h-.01ZM578.24 74.45c.11-.44.23-.87.35-1.31-.31.7-.64 1.39-.97 2.08.09.21.19.4.28.61.12-.46.23-.92.35-1.38h-.01ZM520.62 53.11c-.09 0-.18-.01-.28-.02.38.34.29 1.08.93 2.53l6.65 17.15c2.2 5.68 4.69 11.36 7.41 16.87l1.06 2.17c-2.95-7.05-5.92-14.08-8.87-21.13-1.58-3.79-3.16-7.59-4.7-11.4-.78-1.92-1.73-3.89-2.25-5.91-.03-.1 0-.19.04-.26h.01ZM578.78 77.87c1.45-5.77 3.07-10.43 3.58-13.36.05-.34.16-.88.31-1.55-.67 1.79-1.37 3.56-2.08 5.33-.12.43-.23.86-.35 1.29-.65 2.43-1.29 4.86-1.9 7.3.14.33.29.65.43 1l.01-.01ZM545.3 94.66c.02-.44.03-.83.05-1.12.02-1.01.05-2.02.11-3.02.03-6.66-.46-14.33-1.46-22.8-.13-.42-.27-1.24-.56-2.89 0-.02 0-.04-.01-.06.62 6.61.95 13.25 1.32 19.87.17 3.08.33 6.16.52 9.23.02.25.03.52.04.78l-.01.01ZM580.77 102.81c.13.2.27.38.37.49.27-.11.53-.22.8-.32-.43.09-.82.05-1.17-.16v-.01ZM530.48 104.07h.33c-.36-.13-.71-.32-1.04-.56.14.24.3.47.45.7.06-.08.14-.13.26-.13v-.01ZM542.63 58.82c.06.23.11.47.15.71.14-.33.36-.62.7-.86-.28.05-.57.11-.85.15ZM583.81 57.87c.15-.7.29-1.41.42-2.11-.14.45-.28.9-.42 1.34-.46 1.44-.89 2.89-1.31 4.34.44-1.19.88-2.37 1.31-3.57ZM523.62 91.48c-4.66 1.17-9.05 2.89-14.02 5.27 4.65-1.84 9.48-3.29 14.28-4.63-.09-.22-.17-.41-.26-.64ZM460.64 78.3c-.04-2.9-.11-5.81-.28-8.71-.1-1.68-.17-3.43-.5-5.09-.07.02-.14.03-.2.05.3 6.54.45 12.17.51 17.12.17-.07.34-.14.51-.2 0-1.06-.01-2.11-.03-3.17h-.01ZM470.63 63.24c-3.38-.26-6.81.32-10.1 1.1.41 2.01.47 4.14.57 6.18.18 3.55.25 7.11.27 10.67 3.31-1.38 6.5-3.12 9.3-5.35 1.96-1.56 3.86-3.41 5.02-5.66.73-1.41 1.19-3.22.26-4.65-1.09-1.7-3.46-2.14-5.32-2.29ZM460.29 63.68c1-.24 2.01-.46 3.04-.65-1.15.16-2.37.38-3.71.69v.13c.07-.02.15-.04.22-.05.11-.13.3-.18.45-.11v-.01ZM457.24 100.96c.43-.03.86-.07 1.29-.11.14-.49.27-.99.38-1.49-.44.7-1 1.23-1.67 1.6ZM482.88 104.98c-.18.23-.36.38-.55.47.14.09.27.19.4.28a70.76 70.76 0 0 0 4.37-4.63c.76-.89 1.52-1.81 2.19-2.77-.3-.27-.61-.53-.92-.79-.07 1.94-4.62 6.32-5.49 7.45v-.01Z",transform:"translate(-144.023 -51.76)"}),(0,$o.jsx)("path",{d:"M474.36 63.31c-.4-.16-.84-.27-1.29-.37 1.56.42 3.08 1.22 3.76 2.74.62 1.4.32 2.95-.28 4.32.7-1.22.94-2.34.74-3.47-.24-1.33-1.19-2.54-2.93-3.21v-.01ZM477.34 89.18c-1.2-.81-2.4-1.62-3.6-2.42-.14.1-.26.19-.4.29 1.4.67 2.73 1.39 4 2.13ZM465.88 93.85c.37.25.74.5 1.1.75.46.32.92.65 1.38.97-1.57-1.2-2.01-1.61-2.49-1.72h.01ZM574.92 90.06c-2.28-5.21-4.93-11.13-5.67-12.26-.1-.15-1.57-3.01-1.63-3.08 0 0-.01.02-.02.02.4 1.37 1.09 2.69 1.65 3.99 2.14 4.95 4.36 9.86 6.67 14.73.6 1.26 1.21 2.52 1.83 3.78-.75-2.01-1.64-4.45-2.83-7.18ZM448.73 65.29c.1.2.22.38.34.57.22-.02.43-.06.65-.08v-.08c-.14-.05-.25 0-.99-.41ZM460.16 94.81c-.02.31-.06.59-.1.89-.03 1.71-.33 3.43-.79 5.07.15-.02.3-.03.45-.05.01-.04.02-.08.03-.11.09-.34.15-.69.2-1.03.17-1.07.25-2.16.33-3.24.05-.69.08-1.39.12-2.08-.27.1-.27.26-.24.57v-.02Z",transform:"translate(-144.023 -51.76)"}),(0,$o.jsx)("path",{d:"m328.67 98.12-3.22-6.58c-1.29-2.63-2.53-5.29-3.72-7.97-.25-.85-.52-1.69-.79-2.53-.81-2.57-1.67-5.12-2.55-7.67-1.92-5.53-3.9-11.08-6.32-16.41-.72-1.58-1.46-3.44-2.63-4.79-.03-.17-.16-.29-.34-.36a.282.282 0 0 0-.23-.04c-.06-.01-.12 0-.18.01-.74.06-1.5.38-2.19.61-2.22.77-4.4 1.64-6.63 2.38-.03-.08-.06-.16-.09-.25-.15-.42-.82-.24-.67.19.03.09.07.19.1.28l-.18.06c-.36.11-.28.6 0 .68.18 1.18.63 2.36.98 3.49.03.09.06.17.08.26-.08.23-.17.46-.24.64-.37.98-.79 1.94-1.21 2.9-1.27 2.89-2.62 5.75-3.98 8.6-3.18 6.67-6.44 13.31-9.64 19.97-1.08 2.25-2.2 4.5-3.15 6.81-.13.32.24.5.5.37 1.34 1.33 2.84 2.5 4.4 3.57.65.44 1.31.87 2.01 1.24.4.22.86.48 1.33.5.24.01.35-.19.33-.37.11-.1.21-.21.28-.28.41-.41.81-.84 1.2-1.26.85-.92 1.69-1.87 2.5-2.84 6.31-2.34 12.6-4.31 18.71-5.84 2.14 5.3 3.43 8.43 3.97 9.58.55 1.05 1.15 1.88 1.82 2.52 1.32.56 6.96-.03 9.23-1.96.87-1.28 1.19-2.67.93-4.15-.09-.5-.22-.95-.4-1.33l-.01-.03Zm-20.09-45.61c.43.77.83 1.56 1.21 2.35-.54-.45-1.27-.99-2.07-1.49-.42-.24-.6-.35-.94-.34.43-.15.85-.29 1.29-.41.17-.05.34-.08.51-.11Zm-25.86 45.66c.78-1.85 1.67-3.66 2.54-5.47 1.51-3.16 3.05-6.31 4.58-9.47 1.28-2.63 2.56-5.26 3.83-7.9l-1.1 2.66c-1.99 4.79-4.97 10.9-8.88 18.15-.43.76-.66 1.51-.71 2.24-.05-.05-.1-.09-.15-.14a.259.259 0 0 0-.11-.07Zm6.24 4.71c-.42-.23-.82-.48-1.22-.74 1.05.45 2 .72 2.55.72l-.21.21c-.05.05-.11.1-.16.15-.01.01-.04.03-.05.04 0-.02.03-.02.05-.03a.27.27 0 0 0-.08.07c-.05-.02-.1-.03-.14-.05-.25-.1-.49-.24-.73-.37h-.01Zm15.73-29.43c1.05 3.15 2.1 6.31 3.1 9.48.34 1.06.69 2.13 1.01 3.21-3.5.63-6.95 1.46-10.27 2.5 2.48-6.03 4.54-11.11 6.16-15.19Zm4.79 12.57c-.23-.79-.49-1.58-.73-2.36-.79-2.54-1.63-5.08-2.46-7.61l-1.2-3.6c.02-.04.04-.09.05-.13 1.6 4.45 3.28 9 5.01 13.57l-.67.12v.01Zm5.83-18.27-.15-.54c-.49-1.64-1.03-3.28-1.6-4.9.23.58.47 1.17.7 1.75 1.56 4.03 3.01 8.1 4.39 12.2-.33-.82-.67-1.64-.98-2.46l-2.35-6.05h-.01ZM390.43 79.37c-.13-10.43-.22-17.5-.24-19.97-.24-1.6.21-2.88-.65-3.65-.14-.13-.32-.23-.52-.32h.03c.45 0 .45-.69 0-.7-1.75-.03-3.5-.04-5.25-.14-1.38-.08-2.76-.21-4.15-.31-.07 0-.12.01-.17.04-.21-.07-.47.03-.45.31l.03.45c-.11.14-.19.3-.22.5-.21 1.26-.32 13.67-.36 23.59-.32 5.79-.67 11.57-.97 17.36-.09 1.73-.29 3.54-.21 5.3-.39.02-.38.64.04.69v.12c.05.44.74.45.7 0v-.06c1.1.09 2.2.21 3.3.3 1.14.19 2.44.2 3.29.17 1.73-.05 2.92-.05 3.8-.37.45-.05.9-.11 1.35-.17.44-.06.25-.73-.19-.67h-.01c.24-.32.45-.72.62-1.25.66-1.84.41-6.36.34-11.33l-.13-9.9.02.01Zm-12.26 18.17c.09-1.91.2-3.81.31-5.71.06 5.38 0 6.14-.01 6.51-.05 1.65-.21 2.81.72 3.66-.39-.04-.78-.07-1.17-.1-.06-1.44.09-2.93.16-4.35l-.01-.01ZM588.97 53.85c-2.06-.25-3.17-.51-3.76-.6a.3.3 0 0 1 .04-.08c.22-.39-.39-.75-.6-.35-.56 1.02-.9 2.19-1.26 3.29-.61 1.88-1.17 3.78-1.72 5.68-.63 2.19-1.24 4.39-1.83 6.59-.81 2.03-1.67 4.05-2.61 6.03-1.7-3.64-3.11-6.04-4.03-7.57-2.26-3.74-2.85-5.48-3.57-6.08l.31-.09c.43-.12.25-.8-.19-.67-1.06.3-2.12.6-3.17.95-.93.32-1.85.69-2.76 1.07-.13.05-.19.16-.22.27-.04.02-.08.05-.11.07-.04-.06-.07-.12-.11-.18a.354.354 0 0 0-.48-.12c-.16.09-.22.32-.13.48l.33.54c0 .09.02.18.06.28.51 1.16.78 1.38.72 1.47-2.42 3.44-5.41 7.86-6.2 9.1-1.27 1.97-2.01 3.14-2.45 3.84l-.91-6.56-.43-4.1c-.19-1.85-.37-3.23-.53-4.13-.19-1.1-.3-2.15-.45-3.16-.2-1.36-.29-2.06-.47-2.42h.04c.45.02.45-.68 0-.7-3.43-.16-6.81.94-10.17 1.48-.24-.22-.73-.04-.58.32.24.59.33 1.25.43 1.87.17 1.06.29 2.13.4 3.2.32 3.09.53 6.2.74 9.3.44 6.75.77 13.51 1.17 20.26.11 1.95.13 3.96.46 5.89.05.3.37.31.55.14.74 1.71 2.87 1.27 6.13 1.27 1.34 0 2.39.04 2.99-.11.02.32.48.53.63.18 3.61-8.26 7.41-16.46 12.05-24.2.03-.05.04-.1.05-.15.3.73.64 1.45.94 2.16.97 2.26 1.97 4.52 2.98 6.76 2.26 5.03 4.54 10.07 7.09 14.96.47.9.94 1.79 1.47 2.65.2.32.4.67.66.96-.18.25 0 .68.34.54.91-.38 1.82-.75 2.76-1.07 1.04-.35 2.11-.65 3.17-.95.39-.11.28-.66-.07-.68.62-.4.95-.96.87-1.91-.3-3.34.72-7.47.86-8.52l2.14-11.43c1.75-10.74 3.13-17.51 3.23-20.86.02-.49.08-2.84.13-3.24.17-1.25.48-1-4.96-1.65l.03-.02Zm-46.19 5.67c-.04-.24-.09-.48-.15-.71l.85-.15c-.34.24-.56.53-.7.86Zm1.95 25.12c-.36-6.63-.7-13.26-1.32-19.87 0 .02 0 .04.01.06.29 1.65.44 2.47.56 2.89 1 8.46 1.5 16.14 1.46 22.8-.06.99-.1 2-.11 3.02-.01.29-.03.68-.05 1.12-.01-.26-.03-.53-.04-.78-.19-3.08-.35-6.16-.52-9.23l.01-.01Zm36.4 18.66c-.11-.11-.24-.29-.37-.49.35.21.74.26 1.17.16-.27.11-.53.22-.8.32v.01Zm-.89-33.72c.12-.43.23-.86.35-1.29.71-1.77 1.41-3.55 2.08-5.33-.15.68-.26 1.22-.31 1.55-.5 2.94-2.13 7.59-3.58 13.36-.15-.35-.29-.66-.43-1 .61-2.44 1.25-4.87 1.9-7.3l-.01.01Zm3.56-12.48c.14-.44.28-.89.42-1.34-.13.7-.27 1.41-.42 2.11-.43 1.19-.86 2.38-1.31 3.57.42-1.45.85-2.9 1.31-4.34Zm-5.22 16.05c-.11.44-.23.87-.35 1.31-.12.46-.23.92-.35 1.38-.1-.22-.19-.4-.28-.61.34-.69.66-1.38.97-2.08h.01Zm-11.64 2.62c.06-.1.12-.19.17-.28.05.13.09.26.14.39a.398.398 0 0 0-.31-.11Zm2.3 2.98c-.56-1.3-1.25-2.63-1.65-3.99 0 0 .01-.02.02-.02.06.08 1.52 2.93 1.63 3.08.73 1.13 3.38 7.04 5.67 12.26 1.2 2.73 2.08 5.17 2.83 7.18-.62-1.25-1.23-2.51-1.83-3.78-2.31-4.87-4.53-9.78-6.67-14.73ZM275.92 87.03c-1.06-2.18-1.13-3.45-2.44-2.93-1.52.57-2.94 1.3-4.5 2.1-1.4.72-2.68 1.44-3.92 2.12.01-.25-.24-.5-.51-.34-4.8 2.93-12.41 4.7-17.28 1.31-1.98-1.77-3.32-4.15-3.97-5.78-.29-.95-.49-1.94-.63-2.93-.14-3.34 1.58-6.53 3.9-9.12.8-.79 1.68-1.51 2.66-2.12 3.7-2.3 8.22-3.07 12.51-2.51 2.71.35 5.32 1.24 7.71 2.55.39.22.75-.39.35-.6-.18-.1-.37-.18-.55-.27.56.27 1.03.33 1.51.19l-.48.39c-.15.11-.23.3-.13.48.09.15.33.24.48.13 1.3-.97 2.46-2.09 3.45-3.37.37-.29.64-.6.65-.97v-.02c.08-.33-.03-.7-.21-1.08-.31-.87-.98-2.01-2.19-3.26-2.43-2.52-3.79-3.45-5.68-4.26-1.14-.49-3.12-1.06-4.42-1.23-3.28-.42-10.64-1.21-18.18 4.11-7.74 5.46-11.94 12.3-12.23 20.61-.08 2.06.04 3.98.34 5.71.74 4.18 2.57 8 5.44 11.34 4.26 4.99 9.76 7.52 16.34 7.52 4.85 0 9.69-1.77 14.89-4.62.23-.12.45-.23.68-.35 2.19-1.1 4.37-2.23 6.46-3.5.49-.3 1.03-.61 1.5-.98 1.47-.87 1.11-1.12.49-2.95-.39-1.14-.76-2.7-2.06-5.36l.02-.01Zm-17.38-21.76c3.05-.42 6.31.79 9.36 2.35.51.39.94.68 1.33.87-5.61-2.86-12.72-3.39-18.44-.79 2.05-1.33 4.24-1.95 7.74-2.44l.01.01ZM443.67 72.67c-.4-2.2-1.15-4.33-2.37-6.22-1.49-2.32-3.58-4.19-5.91-5.64-6.17-3.81-13.75-5.11-20.83-6.01-3.23-.41-6.47-.69-9.72-.92l-1.39-.12c-.85-.07-1.52-.1-2.05-.1-1.08-.06-2.17-.12-3.25-.17-.08 0-.14.02-.19.05-.1.05-.18.14-.16.3.27 2.55-.01 5.12-.92 7.52-.15.38.4.56.62.28 1.32.59 2.68 1.05 4.08 1.37 0 2.78-.14 7.58-.33 12.91 0 0 0 .02-.01.03-.61 3.66-.79 7.42-1 11.12-.23 4.01-.43 8.03-.44 12.05 0 .64 0 1.28.03 1.93.02.31 0 .68.15.96.06.11.14.16.24.17-.2.17-.21.54.11.59 3.83.67 7.78.71 11.68.25 2.3-.19 4.87-.65 7.65-1.56 1.85-.54 3.67-1.18 5.43-1.91 7.2-3.02 14.31-8.07 17.35-15.53.76-1.86 1.17-3.8 1.31-5.75.3-1.93.28-3.82-.09-5.58l.01-.02Zm-19.32-15.42c5.74 1.41 11.94 3.68 15.65 8.55.25.32.47.65.69.99-2.3-2.82-5.68-5.69-12.88-8.23-2.16-.76-4.35-1.43-6.64-2.02 1.06.21 2.13.45 3.18.71Zm-25.82-3.04c.13 0 .27.01.4.02-.14.1-.26.23-.37.38 0-.13-.02-.26-.03-.4Zm34.82 22.17c-.75 3.09-3.55 5.66-5.88 7.58-3.35 2.76-7.21 5.03-11.28 6.54-1.33.49-2.71.9-4.12 1.15.06-1.38.08-2.76.07-4.13-.02-3.78-.16-7.56-.41-11.33-.09-1.37-.18-2.74-.37-4.1 0-.06-.03-.11-.06-.15.09-3.25.12-6.16.03-8.12 6.86 1.05 10.56 2.17 14.06 3.62 5.52 2.28 8.59 5.44 7.97 8.96l-.01-.02Zm-22 16.15c-.12 0-.23-.02-.34-.03l.34-.03v.06Zm-.69-.7c0-3.13.26-8.84.47-14.51.06 1.2.11 2.41.15 3.6.15 3.6.25 7.23.09 10.83-.24.03-.48.05-.71.07v.01Zm-12.33-30.94c.37.63 2.01 1.01 3.23 1.25v.15c-1.31-.31-2.59-.73-3.83-1.29.12-.36.23-.72.33-1.09.08.48.18.84.27.98Zm13.7 31.65v-.18c3.41-.56 6.71-2.02 9.69-3.68 2.31-1.28 4.59-2.78 6.63-4.53-4.69 4.53-11.61 8.24-16.33 8.38l.01.01Zm24.07-.75c-2.05 1.93-4.37 3.56-6.83 4.95 2.7-1.78 5.52-4.03 8.42-6.87.82-.82 1.56-1.69 2.23-2.59-1.08 1.65-2.38 3.16-3.81 4.51h-.01ZM187.16 92.14c-.79-2.47-2.1-7.12-3.1-6.87-.19-.01-2.09.77-4.08 1.54-3.06 1.18-5.91 2.13-10.09 2.82-2.74.42-5.87 1.01-10.61 1.06.04-3.34.05-6.01.05-7.99 7.97-.65 12.33-2.11 16.37-3.55 1.11-.39 2.69-1.01 2.63-1.8-.08-.35-.55-1.39-1.17-2.61-.47-1.16-.98-2.31-1.61-3.38-.42-.71-1.04-1.69-1.86-2.06-.11-.08-.22-.13-.29-.12-.02 0-.04 0-.07.01-.19-.04-.39-.05-.6-.01-.17.03-.24.15-.25.28-.04.02-.09.04-.14.05-4.33 1.48-8.85 2.33-13.24 3.61a499.1 499.1 0 0 0-.31-8.19c4.51-.99 8.88-1.38 13.11-1.82 3.68-.38 6.28.12 7.47.34.59.11.9.16 1.16.18h.1c-.1.37.44.66.62.28.02-.04.03-.08.05-.13.15.2.53.22.62-.1.17-.58.19-1.21.21-1.81v-.36c.03-.15.05-.3.07-.45.52-2.47.33-5.09-.64-7.44-.11-.27-.44-.28-.6-.14-.08-.21-.15-.42-.24-.62-.19-.41-.79-.05-.6.35.03.07.05.15.09.22-.98-.42-2.15-.54-3.17-.63-2.17-.19-4.37-.14-6.54 0-5.7.35-11.4 1.3-16.91 2.79-2.08.56-4.13 1.22-6.14 2-4.54 1.05-3.79 1.51-2.17 6.07.18.51.46 1.68.54 1.94.82 2.47 1.08 2.13 3.1 2.13s0 .05 0 .08h.52c-.48 2.66-.51 5.45-.62 8.13-.15 3.48-.22 6.96-.28 10.45 0 .41-.01.82-.02 1.23-.16.29-.33.57-.51.85-.05.38-.09.77-.14 1.18-.42 3.52-.59 6.48-.52 8.8v.34c.02.47.05.76.06.87.16 1.57-.26 3.47 1.35 3.79 1.61.32 3.5.55 4.85.55.11 0 .22-.02.33-.02 1.79.24 3.67.05 5.45-.12 2.85-.28 5.69-.7 8.51-1.19 3.03-.53 6.05-1.14 9.04-1.86 2.4-.58 4.82-1.19 7.13-2.06.51-.19 1.73-.57 2.46-1.14 1.81-.68 2.18-1 1.57-2.67-.23-.62-.48-1.49-.91-2.78l-.03-.02Zm-11.12-38.71c.89.05 1.93.08 2.89.3-.33 0-.68-.02-1.06-.03-8.28-.26-14.88.75-23.97 2.51 2.41-.64 4.85-1.16 7.28-1.59 4.87-.86 9.91-1.45 14.86-1.19Zm-26.53 22.13c.03 1.71.04 3.43 0 5.14-.04 1.27-.11 2.55-.24 3.82 0-.73.02-1.46.04-2.19.05-2.26.12-4.51.22-6.77h-.02Zm6.73 27.85c.2-.1.4-.21.58-.33 1.82-.17 3.82-.24 5.94-.34-.86.11-1.72.24-2.58.33-1.27.14-2.61.31-3.93.34h-.01ZM534.48 85.44c-3.52-8.38-7.07-16.75-10.5-25.17-.63-1.54-1.25-3.09-1.86-4.65-.31-.8-.65-1.6-.87-2.43-.04-.17-.17-.24-.31-.25.1-.2 0-.51-.29-.53-1.59-.08-3.18-.22-4.78-.25-1.96-.03-3.91.13-5.84.42-.31.05-.31.38-.13.56-.03.06-.05.14-.04.22.23 1.54.63 3.06 1.16 4.53.13.35.27.7.41 1.06l-2.68 6.18c-.11.03-.2.09-.25.22-.67 1.9-1.52 3.73-2.34 5.56a536.85 536.85 0 0 1-3.9 8.45c-2.64 5.64-5.34 11.25-7.91 16.93-.44.97-.88 1.94-1.29 2.93-.2.48-.47 1-.55 1.52v.05c-.02.12.02.26.16.34 1.19.73 2.41 1.41 3.66 2.05 1.2.62 2.45 1.25 3.76 1.61.43.12.62-.55.19-.67-1.13-.31-2.2-.83-3.24-1.36 1.09.36 2.1.69 2.75.93 2.82 1.01 2.38 1.1 4.3-3.75 2.1-1.09 4.34-1.96 6.53-2.79 4.35-1.64 8.8-3.03 13.27-4.29.82 2.01 1.77 3.97 2.72 5.92.35.83.62 1.45.79 1.82.22.42.45.8.69 1.15.17.33.33.67.5 1 .42.8.84 1.63 1.4 2.35.23.29.6 0 .55-.31 1.53-.02 3.06-.07 4.58-.27.92-.12 1.82-.32 2.71-.54 1.39-.27 3.85-1.11 3.74-1.42-.67-1.96-1.55-3.87-2.34-5.78-1.57-3.78-3.16-7.56-4.75-11.33v-.01Zm-11.65-26.16c1.54 3.81 3.12 7.6 4.7 11.4 2.94 7.05 5.91 14.09 8.87 21.13l-1.06-2.17c-2.71-5.51-5.2-11.19-7.41-16.87l-6.65-17.15c-.65-1.45-.55-2.19-.93-2.53.09 0 .18.01.28.02a.29.29 0 0 0-.04.26c.52 2.02 1.47 3.98 2.25 5.91h-.01Zm-6.58 13.58c.05-.15.09-.31.14-.46 1.41 3.92 2.88 7.9 4.39 11.87-3.22.52-6.38 1.25-9.46 2.14.55-1.22 1.05-2.46 1.53-3.7 1.24-3.24 2.37-6.53 3.39-9.85h.01Zm-.23-20c.36 0 .73.03 1.09.05-2.15.1-5.18.33-5.87.74-.24.15-.41.3-.53.45-.06-.29-.13-.58-.18-.88 1.82-.26 3.65-.39 5.49-.35v-.01Zm-.09 18.72c-.49 1.67-1.05 3.33-1.6 4.97-1.07 3.19-2.19 6.38-3.57 9.46-.09.21-.19.43-.29.65-.25.07-.5.14-.74.22 2.53-6.16 4.61-11.29 6.2-15.3Zm-6.34 25.16c4.97-2.38 9.37-4.1 14.02-5.27l.26.64c-4.8 1.35-9.63 2.8-14.28 4.63Zm20.17 6.76c.33.23.68.42 1.04.56h-.33c-.12 0-.21.06-.26.13-.15-.23-.31-.45-.45-.7v.01ZM226.57 91.75c-3.55-4.74-6.68-9.11-9.31-12.99 9.2-15.25 10.05-17.81 10.35-18.38.17-.34 1.09-2.27.64-2.53-1.13-.65-1.03-.65-2.97-1.71-1.19-.65-3.04-1.61-4.53-2.12-1.71-.59-1.24-.36-3 2.77-.06.1-.11.2-.17.3-.75 1.02-1.48 2.05-2.2 3.09-1.88 2.71-3.73 5.45-5.69 8.1-3.68-4.91-6.88-8.76-9.51-11.43-.15-.15-.3-.29-.46-.42-1.27-1.28-7.24 3.53-7.93 5.58-.09.09-.19.16-.28.25-.27.26.03.64.33.58.19.65.5 1.29.94 1.91 3.85 5.06 7.19 9.76 9.94 14-1.23 2.61-3.06 5-4.67 7.38l-2.28 3.33c-.5.66-.93 1.23-1.29 1.69-.67.93-2.09 2.61-2.3 3.87-.51.85-1.16 1.84-1.29 2.83-.06.44.61.63.67.19.01-.08.04-.15.06-.22 1.36 1.08 2.76 2.11 4.19 3.11 1.3.91 2.62 1.85 4.04 2.56.21.1.4 0 .48-.17.24.07.48.14.72.2.44.1.62-.57.19-.67-2.02-.48-3.77-1.57-5.23-3.02-.47-.46-.9-.96-1.32-1.46 1.74 1.35 4.2 2.89 5.89 4.14 1.39 1.03 2.85-2.27 4.22-4.2 1.86-2.64 3.96-5.86 5.52-8.29l10.39 14.51c.67.81 1.14 1.21 1.57 1.36-.05.24.12.51.41.4 1.53-.58 3.05-1.19 4.54-1.87 1.52-.69 3.06-1.45 4.36-2.5a.28.28 0 0 0 .12-.23c1.66-1.1.81-1.74-1.41-4.91-1.13-1.58-1.71-2.36-3.7-5.01l-.03-.02Zm2.41 6.54c.56 1.15 1.19 2.52 1.11 3.81-.06.04-.12.07-.17.1-.03-.88-.55-2.66-.94-3.91Zm-16.51-32.73c1.86-2.65 3.65-5.35 5.57-7.95.4-.55.81-1.13 1.26-1.66.19-.18.38-.33.56-.45.18.03.36.08.55.13l-8.05 10.11.12-.18h-.01ZM192.7 95.48c.79-1.37 1.66-2.69 2.54-4 1.19-1.79 2.4-3.56 3.61-5.33-.04.09-.09.17-.13.26-.1.22.03.41.2.49-2.47 3.42-4.89 6.73-6.4 9.28.21.24.4.48.63.75-.24.07-.4.36-.17.56.4.33.72.77 1.05 1.17.09.11.18.21.27.32-.84-.61-1.66-1.24-2.47-1.88.24-.57.58-1.11.87-1.61v-.01Zm7.46-10.32c.47-.81.98-1.59 1.49-2.37.31-.48.64-.95.96-1.43.26-.29.52-.56.75-.79-.99 1.48-2.09 3.03-3.2 4.59Zm10.03-16.22s-.03-.05-.05-.07c.22-.29.43-.59.64-.89-.2.32-.4.65-.58.96h-.01ZM371.54 87.96c-.01-.08-.01-.16-.03-.23-.06-.38-.58-.29-.66.03-.3-.05-.6-.08-.81-.11-1.14-.15-2.29-.19-3.44-.2 1.04-.09 2.09-.18 3.14-.23.45-.02.45-.72 0-.7-6.57.35-13.14 1.23-19.65 2.11-1.53.21-3.05.42-4.57.68-.01 0-.02.01-.04.01-.04-3.33-.13-6.66-.24-9.99-.19-5.7-.4-11.41-.88-17.1-.13-1.51-.23-3.07-.49-4.58 0-.25 0-.48-.02-.68-.06-1.19-.04-2.61-.68-2.78-.16-.07-.72-.16-1.5-.24.22-.17.16-.62-.2-.63-1.19-.04-2.39.09-3.57.23-1.2.14-2.41.32-3.59.6-.16-.1-.41-.06-.5.12-.06.02-.13.03-.19.05-.35.1-.29.55-.03.66-.26.6-.19 2.27-.21 3-.02.66-.66 33.73-.9 40.3-.03.65.06 1.12.04 1.45-.16 3.05.87 4.96 6.34 3.93 1.09-.08 2.75-.77 5.36-1.43 4.13-1.04 5.78-1.52 6.2-1.65 6.43-1.69 6.78-1.97 11.72-2.43.55-.05 4.8-.38 6.03-.3.64.04 1.19.07 1.65.1.09 0 .16-.03.24-.05.1.27.56.33.66-.02.39-1.32.61-2.71.78-4.08.2-1.61.29-3.24.15-4.86.24.03.52-.23.38-.53-.09-.2-.27-.33-.49-.43v-.02Zm-.63.56c.07.57.11 1.14.11 1.71-.21-.99-.53-1.71-.95-1.87.22.03.44.06.65.11.06.01.12.04.19.05Zm-25.41 1.73c1.54-.36 3.1-.64 4.66-.89-1.61.37-3.18.77-4.66 1.2v-.31Zm-.86-7.37c-.07-1.37-.16-2.75-.25-4.12-.21-3.13-.45-6.27-.79-9.4.02-2.25.08-4.31.13-6.11.16 2.08.29 4.16.4 6.24.23 4.46.38 8.93.5 13.39h.01Zm-.94-4c.16 2.41.29 4.83.39 7.24.06 1.6.14 3.22.09 4.83-.15.05-.32.09-.47.14V78.88h-.01ZM483.72 92.83c-3.05-2.28-6.22-4.4-9.38-6.51 8.86-6.49 13.49-12.95 13.73-19.23.04-.76 0-1.5-.13-2.2-.67-3.82-3.5-6.68-8.39-8.48.13.04.27.08.4.13 3.92 1.39 7.74 4.23 8.5 8.56.34 1.95-.05 3.96-.98 5.69-.21.4.39.75.6.35 1.86-3.46 1.46-7.55-.97-10.63-3.53-4.47-9.76-5.88-15.16-6.16-2.32-.12-4.64-.04-6.95.19-6 .32-12.71 1.68-17.63 3.21-.37.11-.67.23-.92.35-.2-.17-.62.02-.57.37v.03c-.64.68-.18 1.64.48 3.21.38.91.67 1.89 1.15 2.58.32.76.68 1.51 1.13 2.19.14.21.38.19.53.07.19-.02.38-.05.57-.08v1.57c-.06.06-.1.13-.11.23-.27 4.18-.34 8.38-.48 12.57l-.3 9.03c-.24 3.91-.44 6.77-.46 7.26-.05.88-.11 1.95.07 2.81-.01.22-.02.43-.04.65 0 .11-.02.23-.03.35 0 .05-.03.27-.01.16-.05.4.5.59.64.28.05.04.12.08.2.08 1.75.13 3.5.28 5.25.3 1.69.02 3.38-.12 5.06-.32.08.23.36.39.55.15.06-.08.11-.17.16-.26.18-.09.24-.32.18-.48.05-.2.1-.4.13-.6.16-.86.25-1.74.33-2.62.11-1.17.17-2.34.23-3.51.15-.01.32-.03.52-.04.36-.03 1.73-.15 2.06-.15.39 0 .7-.02.95-.04 1.76 1.11 3.45 2.35 5.14 3.55 2.83 2.01 5.64 4.04 8.47 6.04 1.42 1 2.85 2 4.29 2.97.1.06.19.07.27.04.08 0 .17-.02.25-.1 1.61-1.56 3.15-3.18 4.6-4.88.75-.88 1.49-1.78 2.15-2.73.01.01.03.02.04.03.34.3.83-.2.49-.49-2.16-1.9-4.34-3.76-6.64-5.48l.03-.01Zm-6.38-3.65a55.72 55.72 0 0 0-4-2.13c.14-.1.26-.19.4-.29 1.2.81 2.4 1.61 3.6 2.42Zm-20.1 11.78c.67-.37 1.23-.91 1.67-1.6-.11.5-.24 1-.38 1.49-.43.04-.86.08-1.29.11Zm2.38-37.24c1.34-.31 2.56-.52 3.71-.69-1.03.19-2.04.41-3.04.65-.14-.07-.34-.02-.45.11-.07.02-.15.04-.22.05v-.13.01Zm.04.84c.07-.02.14-.03.2-.05.34 1.66.41 3.41.5 5.09.17 2.9.24 5.81.28 8.71l.03 3.17c-.17.07-.34.14-.51.2-.06-4.96-.21-10.58-.51-17.12h.01Zm16.04 5.62c-1.16 2.25-3.06 4.1-5.02 5.66-2.8 2.23-5.99 3.97-9.3 5.35-.01-3.56-.09-7.12-.27-10.67-.1-2.04-.16-4.16-.57-6.18 3.3-.78 6.72-1.36 10.1-1.1 1.85.14 4.23.59 5.32 2.29.92 1.43.46 3.24-.26 4.65Zm.85-.18c.6-1.37.9-2.92.28-4.32-.67-1.52-2.2-2.32-3.76-2.74.46.1.89.21 1.29.37 1.74.67 2.69 1.88 2.93 3.21.2 1.13-.05 2.25-.74 3.47V70Zm-27.47-4.14c-.12-.19-.23-.38-.34-.57.74.42.85.36.99.41v.08c-.22.03-.43.06-.65.08Zm11.21 30.46c-.08 1.08-.16 2.17-.33 3.24-.05.35-.11.69-.2 1.03 0 .04-.02.07-.03.11-.15.02-.3.04-.45.05.45-1.64.76-3.36.79-5.07.03-.29.08-.57.1-.89-.03-.31-.03-.47.24-.57-.04.69-.07 1.39-.12 2.08v.02Zm5.6-2.47c.48.11.92.52 2.49 1.72-.46-.32-.92-.65-1.38-.97-.37-.25-.73-.5-1.1-.75h-.01Zm21.23 7.24a70.76 70.76 0 0 1-4.37 4.63c-.14-.09-.27-.19-.4-.28.19-.09.37-.24.55-.47.87-1.14 5.43-5.51 5.49-7.45.31.26.62.53.92.79-.67.97-1.42 1.88-2.19 2.77v.01Z",fill:"currentColor",transform:"translate(-144.023 -51.76)"})]}),K5=({style:t,size:e="small",withText:o})=>(0,$o.jsxs)("div",{className:`ExcalidrawLogo is-${e}`,style:t,children:[(0,$o.jsx)(sI,{}),o&&(0,$o.jsx)(cI,{})]});var ze=v(S(),1),Dg=({icon:t,shortcut:e,children:o})=>{let r=Me();return(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)("div",{className:"welcome-screen-menu-item__icon",children:t}),(0,ze.jsx)("div",{className:"welcome-screen-menu-item__text",children:o}),e&&!r.editor.isMobile&&(0,ze.jsx)("div",{className:"welcome-screen-menu-item__shortcut",children:e})]})};Dg.displayName="WelcomeScreenMenuItemContent";var Ns=({onSelect:t,children:e,icon:o,shortcut:r,className:n="",...i})=>(0,ze.jsx)("button",{...i,type:"button",className:`welcome-screen-menu-item ${n}`,onClick:t,children:(0,ze.jsx)(Dg,{icon:o,shortcut:r,children:e})});Ns.displayName="WelcomeScreenMenuItem";var Y5=({children:t,href:e,icon:o,shortcut:r,className:n="",...i})=>(0,ze.jsx)("a",{...i,className:`welcome-screen-menu-item ${n}`,href:e,target:"_blank",rel:"noreferrer",children:(0,ze.jsx)(Dg,{icon:o,shortcut:r,children:t})});Y5.displayName="WelcomeScreenMenuItemLink";var Uo=({children:t})=>{let{WelcomeScreenCenterTunnel:e}=We();return(0,ze.jsx)(e.In,{children:(0,ze.jsx)("div",{className:"welcome-screen-center",children:t||(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)(Rg,{}),(0,ze.jsx)(Ng,{children:g("welcomeScreen.defaults.center_heading")}),(0,ze.jsxs)(Og,{children:[(0,ze.jsx)(Bg,{}),(0,ze.jsx)(Fg,{})]})]})})})};Uo.displayName="Center";var Rg=({children:t})=>(0,ze.jsx)("div",{className:"welcome-screen-center__logo virgil welcome-screen-decor",children:t||(0,ze.jsx)(K5,{withText:!0})});Rg.displayName="Logo";var Ng=({children:t})=>(0,ze.jsx)("div",{className:"welcome-screen-center__heading welcome-screen-decor virgil",children:t});Ng.displayName="Heading";var Og=({children:t})=>(0,ze.jsx)("div",{className:"welcome-screen-menu",children:t});Og.displayName="Menu";var Fg=()=>{let t=St();return(0,ze.jsx)(Ns,{onSelect:()=>t.executeAction(di),shortcut:"?",icon:ia,children:g("helpDialog.title")})};Fg.displayName="MenuItemHelp";var Bg=()=>{let t=ke(),e=St();return t.viewModeEnabled?null:(0,ze.jsx)(Ns,{onSelect:()=>e.executeAction(_a),shortcut:yt("loadScene"),icon:aa,children:g("buttons.load")})};Bg.displayName="MenuItemLoadScene";var Z5=({onSelect:t})=>{let{t:e}=bt();return(0,ze.jsx)(Ns,{shortcut:null,onSelect:t,icon:id,children:e("labels.liveCollaboration")})};Z5.displayName="MenuItemLiveCollaborationTrigger";Uo.Logo=Rg;Uo.Heading=Ng;Uo.Menu=Og;Uo.MenuItem=Ns;Uo.MenuItemLink=Y5;Uo.MenuItemHelp=Fg;Uo.MenuItemLoadScene=Bg;Uo.MenuItemLiveCollaborationTrigger=Z5;h();var ir=v(S(),1),hu=({children:t})=>{let{WelcomeScreenMenuHintTunnel:e}=We();return(0,ir.jsx)(e.In,{children:(0,ir.jsxs)("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--menu",children:[H0,(0,ir.jsx)("div",{className:"welcome-screen-decor-hint__label",children:t||g("welcomeScreen.defaults.menuHint")})]})})};hu.displayName="MenuHint";var gu=({children:t})=>{let{WelcomeScreenToolbarHintTunnel:e}=We();return(0,ir.jsx)(e.In,{children:(0,ir.jsxs)("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--toolbar",children:[(0,ir.jsx)("div",{className:"welcome-screen-decor-hint__label",children:t||g("welcomeScreen.defaults.toolbarHint")}),U0]})})};gu.displayName="ToolbarHint";var bu=({children:t})=>{let{WelcomeScreenHelpHintTunnel:e}=We();return(0,ir.jsx)(e.In,{children:(0,ir.jsxs)("div",{className:"virgil welcome-screen-decor welcome-screen-decor-hint welcome-screen-decor-hint--help",children:[(0,ir.jsx)("div",{children:t||g("welcomeScreen.defaults.helpHint")}),$0]})})};bu.displayName="HelpHint";var ar=v(S(),1),xu=t=>(0,ar.jsx)(ar.Fragment,{children:t.children||(0,ar.jsxs)(ar.Fragment,{children:[(0,ar.jsx)(Uo,{}),(0,ar.jsx)(hu,{}),(0,ar.jsx)(gu,{}),(0,ar.jsx)(bu,{})]})});xu.displayName="WelcomeScreen";xu.Center=Uo;xu.Hints={MenuHint:hu,ToolbarHint:gu,HelpHint:bu};var dI=xu;h();var vu=v(S(),1),j5=({isCollaborating:t,onSelect:e,...o})=>{let r=ke(),n=r.width<830;return(0,vu.jsxs)(yr,{...o,className:z("collab-button",{active:t}),type:"button",onSelect:e,style:{position:"relative",width:n?void 0:"auto"},title:g("labels.liveCollaboration"),children:[n?ux:g("labels.share"),r.collaborators.size>0&&(0,vu.jsx)("div",{className:"CollabButton-collaborators",children:r.collaborators.size})]})},mI=j5;j5.displayName="LiveCollaborationTrigger";h();var Os=v(S(),1),X5=({children:t,icon:e})=>{let{TTDDialogTriggerTunnel:o}=We(),r=_e();return(0,Os.jsx)(o.In,{children:(0,Os.jsxs)(Le.Item,{onSelect:()=>{ve("ai","dialog open","ttd"),r({openDialog:{name:"ttd",tab:"text-to-diagram"}})},icon:e??o2,children:[t??g("labels.textToDiagram"),(0,Os.jsx)(Le.Item.Badge,{children:"AI"})]})})};X5.displayName="TTDDialogTrigger";var yu=v(S(),1);G5();var uI=t=>{let{onChange:e,initialData:o,excalidrawAPI:r,isCollaborating:n=!1,onPointerUpdate:i,renderTopRightUI:a,langCode:l=ur.code,viewModeEnabled:s,zenModeEnabled:c,gridModeEnabled:m,libraryReturnUrl:d,theme:f,name:p,renderCustomStats:b,onPaste:x,detectScroll:y=!0,handleKeyboardGlobally:w=!1,onLibraryChange:k,autoFocus:C=!1,generateIdForFile:M,onLinkOpen:_,onPointerDown:I,onPointerUp:A,onScrollChange:P,children:F,validateEmbeddable:D,renderEmbeddable:W,aiEnabled:O}=t,U=t.UIOptions?.canvasActions,ee={...t.UIOptions,canvasActions:{...Mu.canvasActions,...U},tools:{image:t.UIOptions?.tools?.image??!0}};return U?.export&&(ee.canvasActions.export.saveFileToDisk=U.export?.saveFileToDisk??Mu.canvasActions.export.saveFileToDisk),ee.canvasActions.toggleTheme===null&&typeof f>"u"&&(ee.canvasActions.toggleTheme=!0),(0,Eu.useEffect)(()=>{(async()=>{await import("./excalidraw-assets/roundRect-2ACQK4DA.js")})();let pe=me=>{typeof me.scale=="number"&&me.scale!==1&&me.preventDefault()};return document.addEventListener("touchmove",pe,{passive:!1}),()=>{document.removeEventListener("touchmove",pe)}},[]),(0,yu.jsx)(Wc,{unstable_createStore:()=>Ut,scope:Pe,children:(0,yu.jsx)(D0,{langCode:l,theme:f,children:(0,yu.jsx)(W5,{onChange:e,initialData:o,excalidrawAPI:r,isCollaborating:n,onPointerUpdate:i,renderTopRightUI:a,langCode:l,viewModeEnabled:s,zenModeEnabled:c,gridModeEnabled:m,libraryReturnUrl:d,theme:f,name:p,renderCustomStats:b,UIOptions:ee,onPaste:x,detectScroll:y,handleKeyboardGlobally:w,onLibraryChange:k,autoFocus:C,generateIdForFile:M,onLinkOpen:_,onPointerDown:I,onPointerUp:A,onScrollChange:P,validateEmbeddable:D,renderEmbeddable:W,aiEnabled:O!==!1,children:F})})})},pI=(t,e)=>{if(t.children!==e.children)return!1;let{initialData:o,UIOptions:r={},...n}=t,{initialData:i,UIOptions:a={},...l}=e,s=Object.keys(r),c=Object.keys(a);return s.length!==c.length?!1:s.every(d=>d==="canvasActions"?Object.keys(r.canvasActions).every(p=>p==="export"&&r?.canvasActions?.export&&a?.canvasActions?.export?r.canvasActions.export.saveFileToDisk===a.canvasActions.export.saveFileToDisk:r?.canvasActions?.[p]===a?.canvasActions?.[p]):r[d]===a[d])&&Dt(n,l)},fI=Eu.default.memo(uI,pI);fI.displayName="Excalidraw";export{yr as Button,Tu as DEFAULT_LASER_COLOR,Ym as DefaultSidebar,fI as Excalidraw,nl as FONT_FAMILY,lI as Footer,mI as LiveCollaborationTrigger,Pt as MIME_TYPES,io as MainMenu,yo as ROUNDNESS,Xr as Sidebar,qe as THEME,cg as TTDDialog,X5 as TTDDialogTrigger,dI as WelcomeScreen,Xi as bumpVersion,Es as convertToExcalidrawElements,ur as defaultLang,s6 as elementPartiallyOverlapsWithOrContainsBBox,c6 as elementsOverlappingBBox,ap as exportToBlob,Zn as exportToCanvas,a6 as exportToClipboard,_l as exportToSvg,Ke as getCommonBounds,d6 as getFreeDrawSvgPath,im as getLibraryItemsHash,be as getNonDeletedElements,m6 as getSceneVersion,n6 as getVisibleSceneBounds,fp as hashElementsVersion,hp as hashString,l6 as isElementInsideBBox,jn as isInvisiblySmallElement,Re as isLinearElement,ta as languages,kc as loadFromBlob,ep as loadLibraryFromBlob,Qu as loadSceneOrLibraryFromBlob,bE as mergeLibraryItems,te as mutateElement,ue as newElementWith,Or as normalizeLink,uh as parseLibraryTokensFromUrl,Ju as restore,i6 as restoreAppState,qu as restoreElements,kl as restoreLibraryItems,qt as sceneCoordsToViewportCoords,op as serializeAsJSON,np as serializeLibraryAsJSON,Me as useDevice,eT as useHandleLibrary,bt as useI18n,Ve as viewportCoordsToSceneCoords,Dy as zoomToFitBounds};
/*! Bundled license information:

react/cjs/react-jsx-runtime.production.min.js:
  (**
   * @license React
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.min.js:
  (**
   * @license React
   * use-sync-external-store-shim/with-selector.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
